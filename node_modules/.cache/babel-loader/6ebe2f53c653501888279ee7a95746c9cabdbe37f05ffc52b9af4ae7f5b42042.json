{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\GitHub\\\\court-marshal-connect\\\\src\\\\pages\\\\PersonnelPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport React, { useEffect, useState, useMemo, useCallback, memo } from \"react\";\nimport { Search, Filter, Users, Phone, Mail, Calendar, Award, Building2, UserCheck, UserX, TrendingUp, PieChart, BarChart3, Download, RefreshCw, Eye, Grid3X3, List, X, AlertCircle, CheckCircle2, Clock, Edit2, Save } from \"lucide-react\";\nimport DonutChart from '../components/DonutChart';\nimport LineChart from '../components/LineChart';\nimport { CONFIG } from '../config';\n\n// --- NEW: Proportional Treemap Chart Component ---\n// --- NEW: Proportional Treemap Chart Component (MODIFIED FOR LOGARITHMIC SCALE) ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TreemapChart = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  title,\n  data,\n  colors = []\n}) => {\n  _s();\n  // --- ส่วนที่แก้ไข: คำนวณ total จากค่าจริงก่อนแปลงสเกล ---\n  const originalTotal = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\n\n  // --- ส่วนที่แก้ไข: สร้างข้อมูลชุดใหม่ที่มีการปรับสเกลด้วย Math.log1p ---\n  // Math.log1p(x) จะคำนวณ log(1+x) ช่วยให้ค่าที่น้อยๆ มีขนาดใหญ่ขึ้นเมื่อเทียบกับค่ามากๆ\n  const scaledData = useMemo(() => data.map(item => ({\n    ...item,\n    scaledValue: Math.log1p(item.value)\n  })), [data]);\n  const generateTreemapLayout = useCallback((items, width, height) => {\n    let rects = [];\n    const layoutRow = (rowItems, x, y, w, h) => {\n      if (!rowItems.length) return;\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n      const totalValue = rowItems.reduce((sum, i) => sum + i.scaledValue, 0);\n      if (totalValue === 0) return;\n      let offset = 0;\n      const isHorizontal = w > h;\n      for (const item of rowItems) {\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n        const percentage = item.scaledValue / totalValue;\n        if (isHorizontal) {\n          const rectWidth = w * percentage;\n          rects.push({\n            x: x + offset,\n            y,\n            width: rectWidth,\n            height: h,\n            item\n          });\n          offset += rectWidth;\n        } else {\n          const rectHeight = h * percentage;\n          rects.push({\n            x,\n            y: y + offset,\n            width: w,\n            height: rectHeight,\n            item\n          });\n          offset += rectHeight;\n        }\n      }\n    };\n    const squarify = (items, x, y, w, h) => {\n      if (!items.length) return;\n      if (items.length <= 4) {\n        layoutRow(items, x, y, w, h);\n        return;\n      }\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n      const halfValue = items.reduce((sum, i) => sum + i.scaledValue, 0) / 2;\n      let runningTotal = 0;\n      let splitIndex = 0;\n      for (let i = 0; i < items.length; i++) {\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n        runningTotal += items[i].scaledValue;\n        if (runningTotal >= halfValue) {\n          splitIndex = i + 1;\n          break;\n        }\n      }\n      splitIndex = Math.max(1, splitIndex);\n      const groupA = items.slice(0, splitIndex);\n      const groupB = items.slice(splitIndex);\n      const groupATotal = groupA.reduce((sum, i) => sum + i.scaledValue, 0);\n      const totalValue = groupATotal + groupB.reduce((sum, i) => sum + i.scaledValue, 0);\n      if (totalValue === 0) return;\n      if (w > h) {\n        const groupAWidth = w * (groupATotal / totalValue);\n        squarify(groupA, x, y, groupAWidth, h);\n        squarify(groupB, x + groupAWidth, y, w - groupAWidth, h);\n      } else {\n        const groupAHeight = h * (groupATotal / totalValue);\n        squarify(groupA, x, y, w, groupAHeight);\n        squarify(groupB, x, y + groupAHeight, w, h - groupAHeight);\n      }\n    };\n    squarify(items, 0, 0, 1000, 1000); // Use a relative base for layout\n    return rects;\n  }, []);\n\n  // --- ส่วนที่แก้ไข: ส่ง scaledData เข้าไปคำนวณ layout ---\n  const layout = useMemo(() => generateTreemapLayout(scaledData), [scaledData, generateTreemapLayout]);\n  if (!data.length || originalTotal === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 85\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E01\\u0E23\\u0E32\\u0E1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-bold text-slate-900\",\n          children: originalTotal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-slate-500\",\n          children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full flex-1\",\n      children: layout.map(rect => {\n        const itemIndex = scaledData.findIndex(d => d.label === rect.item.label);\n        const color = colors[itemIndex % colors.length];\n\n        // --- ส่วนที่แก้ไข: คำนวณ % จากค่าจริง ---\n        const percentage = originalTotal > 0 ? (rect.item.value / originalTotal * 100).toFixed(1) : 0;\n        const valueText = `${rect.item.value} (${percentage}%)`;\n        const fontSize = Math.min(rect.width / 10, rect.height / 5, 16);\n        const textShadowStyle = {\n          textShadow: '0px 1px 3px rgba(0, 0, 0, 0.6)'\n        };\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute border-2 border-white rounded-md flex flex-col items-center justify-center p-1 overflow-hidden text-center\",\n          style: {\n            left: `${rect.x / 10}%`,\n            top: `${rect.y / 10}%`,\n            width: `${rect.width / 10}%`,\n            height: `${rect.height / 10}%`,\n            backgroundColor: color,\n            transition: 'all 0.4s ease-in-out'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white font-bold\",\n            style: {\n              fontSize: `${fontSize}px`,\n              ...textShadowStyle\n            },\n            children: valueText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white opacity-90 leading-tight\",\n            style: {\n              fontSize: `${Math.max(fontSize * 0.7, 10)}px`,\n              ...textShadowStyle\n            },\n            children: rect.item.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this)]\n        }, rect.item.label, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n}, \"tKEXOZNPI3AalzIv6bFC4hz8MvI=\")), \"tKEXOZNPI3AalzIv6bFC4hz8MvI=\");\n\n// Pie Chart Component - เปลี่ยนเป็น Donut Chart\n_c2 = TreemapChart;\nconst PieChartComponent = /*#__PURE__*/_s2(/*#__PURE__*/memo(_c3 = _s2(({\n  title,\n  data,\n  colors = []\n}) => {\n  _s2();\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\n  if (!data.length || total === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(PieChart, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E01\\u0E23\\u0E32\\u0E1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-fit\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(PieChart, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-bold text-slate-900\",\n          children: [\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19 \", total, \" \\u0E04\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative border border-slate-200 rounded-lg p-4 bg-slate-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-48 h-48\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"192\",\n            height: \"192\",\n            viewBox: \"0 0 192 192\",\n            className: \"w-full h-full\",\n            children: data.map((item, index) => {\n              const percentage = item.value / total;\n              const angle = percentage * 360;\n              const prevPercentage = data.slice(0, index).reduce((sum, d) => sum + d.value, 0) / total;\n              const startAngle = prevPercentage * 360 - 90;\n              const endAngle = startAngle + angle;\n\n              // Donut chart - outer radius 80, inner radius 45\n              const outerRadius = 80;\n              const innerRadius = 45;\n              const startXOuter = 96 + outerRadius * Math.cos(startAngle * Math.PI / 180);\n              const startYOuter = 96 + outerRadius * Math.sin(startAngle * Math.PI / 180);\n              const endXOuter = 96 + outerRadius * Math.cos(endAngle * Math.PI / 180);\n              const endYOuter = 96 + outerRadius * Math.sin(endAngle * Math.PI / 180);\n              const startXInner = 96 + innerRadius * Math.cos(endAngle * Math.PI / 180);\n              const startYInner = 96 + innerRadius * Math.sin(endAngle * Math.PI / 180);\n              const endXInner = 96 + innerRadius * Math.cos(startAngle * Math.PI / 180);\n              const endYInner = 96 + innerRadius * Math.sin(startAngle * Math.PI / 180);\n              const largeArcFlag = angle > 180 ? 1 : 0;\n              const pathData = ['M', startXOuter, startYOuter, 'A', outerRadius, outerRadius, 0, largeArcFlag, 1, endXOuter, endYOuter, 'L', startXInner, startYInner, 'A', innerRadius, innerRadius, 0, largeArcFlag, 0, endXInner, endYInner, 'Z'].join(' ');\n              const pieColors = ['#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'];\n              const color = pieColors[index % pieColors.length];\n\n              // คำนวณตำแหน่งสำหรับแสดง percentage\n              const midAngle = startAngle + angle / 2;\n              const labelRadius = 90;\n              const labelX = 96 + labelRadius * Math.cos(midAngle * Math.PI / 180);\n              const labelY = 96 + labelRadius * Math.sin(midAngle * Math.PI / 180);\n              const percentageText = `${(percentage * 100).toFixed(1)}%`;\n              return /*#__PURE__*/_jsxDEV(\"g\", {\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: pathData,\n                  fill: color,\n                  stroke: \"white\",\n                  strokeWidth: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this), percentage > 0.05 && /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: labelX,\n                  y: labelY,\n                  textAnchor: \"middle\",\n                  dominantBaseline: \"middle\",\n                  fill: \"#1e293b\",\n                  fontSize: \"10\",\n                  fontWeight: \"bold\",\n                  stroke: \"white\",\n                  strokeWidth: \"2\",\n                  paintOrder: \"stroke\",\n                  children: percentageText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 23\n                }, this)]\n              }, `donut-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full mt-6\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2\",\n            children: data.map((item, index) => {\n              const percentage = (item.value / total * 100).toFixed(0);\n              const pieColors = ['#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'];\n              const color = pieColors[index % pieColors.length];\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2 min-w-0 flex-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-3 h-3 rounded-full flex-shrink-0\",\n                    style: {\n                      backgroundColor: color\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-slate-700\",\n                    children: [truncateAffiliation ? truncateAffiliation(item.label) : item.label.length > 30 ? item.label.slice(0, 27) + '...' : item.label, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold text-slate-900\",\n                      children: item.value\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 297,\n                      columnNumber: 155\n                    }, this), \" \\u0E04\\u0E19\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 296,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-bold text-slate-900 ml-2\",\n                  children: [percentage, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this)]\n              }, `legend-${item.label}-${index}`, true, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}, \"TUahRIVHrNmruf3w2Blr6WVpjUQ=\")), \"TUahRIVHrNmruf3w2Blr6WVpjUQ=\");\n\n// Horizontal Bar Chart Component\n_c4 = PieChartComponent;\nconst HorizontalBarChart = /*#__PURE__*/_s3(/*#__PURE__*/memo(_c5 = _s3(({\n  title,\n  data,\n  colors = [],\n  maxHeight = '320px'\n}) => {\n  _s3();\n  const getSortOrder = label => {\n    const regionMatch = label.match(/ภาค\\s*(\\d+)/);\n    if (regionMatch) return parseInt(regionMatch[1]);\n    const customOrder = ['ศาลชั้นต้นในเขตกรุงเทพมหานคร', 'ศูนย์รักษาความปลอดภัย', 'ศาลชำนาญพิเศษ', 'ศาลสูง'];\n    const index = customOrder.findIndex(item => label.includes(item));\n    if (index !== -1) return 100 + index;\n    return 999;\n  };\n  const sortedData = useMemo(() => [...data].sort((a, b) => getSortOrder(a.label) - getSortOrder(b.label)), [data]);\n  const maxValue = useMemo(() => {\n    if (!sortedData || sortedData.length === 0) return 0;\n    return Math.max(...sortedData.map(d => d.value));\n  }, [sortedData]);\n  if (!sortedData.length || maxValue === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 85\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E01\\u0E23\\u0E32\\u0E1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-4 shadow-sm border border-slate-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold text-slate-900 mb-3 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n        className: \"w-5 h-5 mr-2 text-slate-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 83\n      }, this), title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      style: {\n        maxHeight,\n        overflowY: 'auto',\n        paddingRight: 8\n      },\n      children: sortedData.map((item, index) => {\n        const barWidth = item.value / maxValue * 100;\n        const color = colors[index % colors.length] || '#8b5cf6';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-3 gap-2 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-1 text-sm text-slate-700 font-medium text-left truncate\",\n            title: item.label,\n            children: item.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-2 w-full bg-slate-100 rounded-full h-7 relative\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-7 rounded-full transition-all duration-700 flex items-center justify-end pr-3\",\n              style: {\n                width: `${barWidth}%`,\n                backgroundColor: color,\n                minWidth: '36px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white text-sm font-bold\",\n                children: item.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this)]\n        }, `${item.label}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 344,\n    columnNumber: 5\n  }, this);\n}, \"ySiaVFDJZjNyt1Pd8oChNl24Els=\")), \"ySiaVFDJZjNyt1Pd8oChNl24Els=\");\n\n// (moved into the PersonnelPage component to avoid calling hooks at top level)\n\n// EditableCard Component (restored minimal implementation)\n_c6 = HorizontalBarChart;\nconst EditableCard = /*#__PURE__*/_s4(/*#__PURE__*/memo(_c7 = _s4(({\n  title,\n  value,\n  icon: Icon,\n  color = \"blue\",\n  isEditing,\n  onEdit,\n  onChange,\n  isAdmin\n}) => {\n  _s4();\n  const [localValue, setLocalValue] = useState(value);\n  useEffect(() => {\n    setLocalValue(value);\n  }, [value]);\n  const handleChange = e => {\n    const newValue = parseInt(e.target.value) || 0;\n    setLocalValue(newValue);\n    onChange(newValue);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-12 h-12 bg-${color}-100 rounded-xl flex items-center justify-center`,\n        children: Icon && /*#__PURE__*/_jsxDEV(Icon, {\n          className: `w-6 h-6 text-${color}-600`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onEdit,\n        className: \"text-slate-400 hover:text-slate-600 transition-colors\",\n        children: isEditing ? /*#__PURE__*/_jsxDEV(Save, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(Edit2, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      value: localValue,\n      onChange: handleChange,\n      className: \"w-full text-3xl font-bold text-slate-900 mb-1 bg-slate-50 border border-slate-200 rounded px-2 py-1\",\n      min: \"0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-3xl font-bold text-slate-900 mb-1\",\n      children: localValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-slate-600\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 394,\n    columnNumber: 5\n  }, this);\n}, \"siqvZJUXZ0S/FBAatxcZmxDcLHI=\")), \"siqvZJUXZ0S/FBAatxcZmxDcLHI=\");\n\n// PersonnelDetailModal (minimal)\n_c8 = EditableCard;\nconst PersonnelDetailModal = /*#__PURE__*/memo(_c9 = ({\n  person,\n  isOpen,\n  onClose\n}) => {\n  if (!isOpen || !person) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 overflow-y-auto\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen items-center justify-center p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed inset-0 bg-black/50 transition-opacity\",\n        onClick: onClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"p-2 text-slate-400 hover:text-slate-600 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 18\n            }, this), \" \", person.prefix, \" \", person.firstname, \" \", person.lastname]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 18\n            }, this), \" \", person.position || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 18\n            }, this), \" \", person.affiliation || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 18\n            }, this), \" \", person.deph || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 18\n            }, this), \" \", person.phone || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 18\n            }, this), \" \", person.email || '-']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 428,\n    columnNumber: 5\n  }, this);\n});\n\n// SearchModal (minimal placeholder)\n_c0 = PersonnelDetailModal;\nconst SearchModal = /*#__PURE__*/_s5(/*#__PURE__*/memo(_c1 = _s5(({\n  isOpen,\n  onClose,\n  personnelData = [],\n  stats = {},\n  onViewPerson = () => {},\n  onExport = () => {},\n  user\n}) => {\n  _s5();\n  const [query, setQuery] = useState('');\n  if (!isOpen) return null;\n  const results = personnelData.filter(p => `${p.firstname} ${p.lastname}`.toLowerCase().includes(query.toLowerCase()));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 overflow-y-auto bg-black/60\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen items-start justify-center p-4 sm:p-6 md:p-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-white rounded-3xl shadow-2xl max-w-4xl w-full p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold\",\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"p-2 text-slate-400 hover:text-slate-600 rounded-lg\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 102\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            value: query,\n            onChange: e => setQuery(e.target.value),\n            className: \"w-full p-2 border rounded\",\n            placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2 max-h-64 overflow-y-auto\",\n          children: results.map((p, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 border rounded flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [p.prefix, \" \", p.firstname, \" \", p.lastname]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-x-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => onViewPerson(p),\n                className: \"text-indigo-600\",\n                children: \"\\u0E14\\u0E39\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)]\n          }, `${p.phone}-${i}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 470,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 458,\n    columnNumber: 5\n  }, this);\n}, \"qO/HZodsWTfJhuzZtdaxiosei2U=\")), \"qO/HZodsWTfJhuzZtdaxiosei2U=\");\n_c10 = SearchModal;\nexport default function PersonnelPage({\n  user\n}) {\n  _s6();\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [personnelData, setPersonnelData] = useState([]);\n  const [selectedPerson, setSelectedPerson] = useState(null);\n  const [showDetail, setShowDetail] = useState(false);\n  const [showSearchModal, setShowSearchModal] = useState(false);\n  const [quota, setQuota] = useState(100);\n  const [vacancy, setVacancy] = useState(20);\n  const [isEditingQuota, setIsEditingQuota] = useState(false);\n  const [isEditingVacancy, setIsEditingVacancy] = useState(false);\n  const [selectedChart, setSelectedChart] = useState(\"position\"); // Default chart type\n  const [filters, setFilters] = useState({\n    affiliation: \"\",\n    department: \"\",\n    ageRange: \"\",\n    gender: \"\"\n  });\n  const logAdminActivity = useCallback((action, details) => {\n    if (!user) return;\n    fetch(CONFIG.ADMIN_API, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        action: 'log_activity',\n        log_action: action,\n        log_details: details || null,\n        user_id: user.id,\n        username: user.username\n      })\n    }).catch(error => console.error('Failed to log activity:', error));\n  }, [user]);\n  const fetchPersonnelData = useCallback(async () => {\n    try {\n      const apiUrl = CONFIG.OFFICERS_API;\n      const response = await fetch(apiUrl);\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      const text = await response.text();\n      if (!text) throw new Error('Empty response from server');\n      const result = JSON.parse(text);\n      const data = result.success && Array.isArray(result.data) ? result.data : [];\n      const formattedData = data.map(person => ({\n        phone: person.phone || '',\n        prefix: person.prefix || '',\n        firstname: person.firstname || '',\n        lastname: person.lastname || '',\n        position: person.position || '',\n        affiliation: person.affiliation || '',\n        deph: person.department || '',\n        generation: person.generation || '',\n        email: person.email || '',\n        dob: person.dob || '',\n        lineUserId: person.lineUserId || '',\n        role: person.role || 'member'\n      }));\n      setPersonnelData(formattedData);\n      setError(\"\");\n    } catch (error) {\n      setError(`⚠️ ${error.message}`);\n      setPersonnelData([]);\n    }\n  }, []);\n  useEffect(() => {\n    fetchPersonnelData();\n  }, [fetchPersonnelData]);\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchPersonnelData().finally(() => setRefreshing(false));\n  };\n  const handleViewPerson = person => {\n    setSelectedPerson(person);\n    setShowDetail(true);\n  };\n  const exportToCSV = data => {\n    // Implement CSV export logic here\n  };\n  const affiliationAbbreviations = {\n    \"ศูนย์รักษาความปลอดภัย\": \"ส่วนกลาง\",\n    \"ศาลชั้นต้นในกรุงเทพมหานคร\": \"กทม.\"\n  };\n  const filteredAffiliationData = useMemo(() => {\n    return personnelData.reduce((acc, person) => {\n      let affiliation = (person.affiliation || '').trim();\n      if (!affiliation) affiliation = 'ไม่ระบุ';\n      const lower = affiliation.toLowerCase();\n\n      // Normalize known patterns using targeted rules\n      let normalized = affiliation;\n\n      // If it's the regional office pattern that contains สำนักศาลยุติธรรมประจำภาค\n      // we want to convert it to: 'ภาค <n>' when a number exists, otherwise 'ภาค'\n      if (lower.includes('สำนักศาลยุติธรรมประจำภาค') || lower.includes('สำนักยุติธรรมประจำภาค') || lower.includes('ในสังกัดสำนักศาลยุติธรรมประจำภาค') || lower.includes('ศาลในสังกัดสำนักศาลยุติธรรมประจำภาค')) {\n        // Try to extract explicit 'ภาค <number>' first\n        const matchRegion = affiliation.match(/ภาค\\s*(\\d{1,3})/i);\n        if (matchRegion && matchRegion[1]) {\n          normalized = `ภาค ${matchRegion[1]}`;\n        } else {\n          // Fallback: find any trailing number in the string (e.g., '... ประจำภาค 4')\n          const trailingNum = affiliation.match(/(\\d{1,3})\\s*$/);\n          if (trailingNum && trailingNum[1]) {\n            normalized = `ภาค ${trailingNum[1]}`;\n          } else {\n            // Last-resort: any first number in the string\n            const anyNum = affiliation.match(/(\\d{1,3})/);\n            normalized = anyNum && anyNum[1] ? `ภาค ${anyNum[1]}` : 'ภาค';\n          }\n        }\n      } else if (lower.includes('ศูนย์รักษาความปลอดภัย')) {\n        normalized = 'ส่วนกลาง';\n      } else if (lower.includes('กรุงเทพ') || lower.includes('กรุงเทพมหานคร') || lower.includes('ศาลชั้นต้นในกรุงเทพมหานคร')) {\n        normalized = 'กทม.';\n      } else {\n        // fallback to any exact mapping we defined, otherwise keep original\n        normalized = affiliationAbbreviations[affiliation] || affiliation;\n      }\n      acc[normalized] = (acc[normalized] || 0) + 1;\n      return acc;\n    }, {});\n  }, [personnelData]);\n  const chartData = useMemo(() => {\n    const entries = Object.entries(filteredAffiliationData).map(([label, value]) => ({\n      label,\n      value\n    }));\n    const getOrderKey = label => {\n      if (!label) return 9999;\n      const l = String(label).trim();\n\n      // Match 'ภาค' followed by number e.g. 'ภาค 1' or 'ภาค1'\n      const m = l.match(/ภาค\\s*(\\d{1,3})/);\n      if (m && m[1]) {\n        // Put ภาค N in order 0.. (keep N small)\n        const num = parseInt(m[1], 10);\n        return num; // 1..9 -> 1..9 (smaller is earlier)\n      }\n\n      // If label is exactly 'ภาค' (no number), put after numbered ภาค\n      if (/^ภาค$/i.test(l)) return 999;\n\n      // Specific named orders after ภาค group\n      if (l === 'กทม.' || l.toLowerCase() === 'กทม.') return 1000;\n      if (l === 'ส่วนกลาง' || l.toLowerCase() === 'ส่วนกลาง') return 1001;\n      if (l.includes('ศาลสูง')) return 1002;\n      // handle both spellings 'ชำนาญ' and 'ชำนัญ'\n      if (l.includes('ชำนาญ') || l.includes('ชำนัญ') || l.includes('ชำนัญพิเศษ') || l.includes('ชำนาญพิเศษ')) return 1003;\n\n      // Default: place after known groups but preserve alphabetical order by returning a high key plus name\n      return 5000 + l.charCodeAt(0);\n    };\n    entries.sort((a, b) => {\n      const ka = getOrderKey(a.label);\n      const kb = getOrderKey(b.label);\n      if (ka === kb) {\n        // fallback alphabetical\n        return String(a.label).localeCompare(String(b.label));\n      }\n      return ka - kb;\n    });\n    return entries;\n  }, [filteredAffiliationData]);\n  const stats = useMemo(() => {\n    const newStats = {\n      total: personnelData.length,\n      connected: personnelData.filter(p => p.lineUserId).length,\n      byPosition: {},\n      byAffiliation: {},\n      byDepartment: {},\n      byGeneration: {}\n    };\n    personnelData.forEach(person => {\n      const position = person.position || 'ไม่ระบุ';\n      newStats.byPosition[position] = (newStats.byPosition[position] || 0) + 1;\n      const affiliation = person.affiliation || 'ไม่ระบุ';\n      newStats.byAffiliation[affiliation] = (newStats.byAffiliation[affiliation] || 0) + 1;\n      const department = person.deph || 'ไม่ระบุตำแหน่ง';\n      newStats.byDepartment[department] = (newStats.byDepartment[department] || 0) + 1;\n      const generation = person.generation ? String(person.generation).trim() : 'ไม่ระบุตำแหน่ง';\n      newStats.byGeneration[generation] = (newStats.byGeneration[generation] || 0) + 1;\n    });\n    return newStats;\n  }, [personnelData]);\n  useEffect(() => {\n    console.log(\"Personnel Data:\", personnelData);\n  }, [personnelData]);\n  useEffect(() => {\n    console.log(\"Stats:\", stats);\n    console.log(\"Chart Data:\", chartData);\n  }, [stats, chartData]);\n  const chartColors = [\"#FF6384\", \"#36A2EB\", \"#FFCE56\", \"#4BC0C0\", \"#9966FF\", \"#FF9F40\", \"#FFCD56\", \"#C9CBCF\"];\n\n  // Helper: build chart data for different types (inside component)\n  const getChartData = useCallback(type => {\n    if (type === 'affiliation') return chartData; // already normalized affiliation entries\n\n    if (type === 'position') {\n      // build from stats.byPosition\n      const entries = Object.entries(stats.byPosition || {}).map(([label, value]) => ({\n        label,\n        value\n      }));\n      // sort by value desc\n      entries.sort((a, b) => b.value - a.value);\n      return entries;\n    }\n    if (type === 'age') {\n      // derive age groups from dob (basic)\n      const groups = {\n        '<30': 0,\n        '30-39': 0,\n        '40-49': 0,\n        '50-59': 0,\n        '60+': 0\n      };\n      const now = new Date();\n      personnelData.forEach(p => {\n        if (!p.dob) return;\n        const m = String(p.dob).match(/(\\d{4})/);\n        if (!m) return;\n        const year = parseInt(m[1], 10);\n        if (isNaN(year)) return;\n        const age = now.getFullYear() - year;\n        if (age < 30) groups['<30']++;else if (age < 40) groups['30-39']++;else if (age < 50) groups['40-49']++;else if (age < 60) groups['50-59']++;else groups['60+']++;\n      });\n      return Object.entries(groups).map(([label, value]) => ({\n        label,\n        value\n      }));\n    }\n    if (type === 'gender') {\n      // no gender field in data - return empty to show no data\n      const genders = (personnelData || []).reduce((acc, p) => {\n        const g = (p.gender || '').trim();\n        if (!g) return acc;\n        acc[g] = (acc[g] || 0) + 1;\n        return acc;\n      }, {});\n      return Object.entries(genders).map(([label, value]) => ({\n        label,\n        value\n      }));\n    }\n    return [];\n  }, [chartData, stats, personnelData]);\n  const renderChart = () => {\n    switch (selectedChart) {\n      case \"position\":\n        return /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('position'),\n          colors: chartColors,\n          title: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\",\n          maxHeight: \"320px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 11\n        }, this);\n      case \"affiliation\":\n        return /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('affiliation'),\n          colors: chartColors,\n          title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\",\n          maxHeight: \"320px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 11\n        }, this);\n      case \"gender\":\n        return /*#__PURE__*/_jsxDEV(PieChartComponent, {\n          data: getChartData('gender'),\n          colors: chartColors,\n          title: \"\\u0E40\\u0E1E\\u0E28\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 11\n        }, this);\n      case \"age\":\n        return /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('age'),\n          colors: chartColors,\n          title: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E2D\\u0E32\\u0E22\\u0E38\",\n          maxHeight: \"240px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E1C\\u0E25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto px-4 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-slate-800\",\n        children: \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 790,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowSearchModal(true),\n          className: \"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 797,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 791,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 789,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n        data: getChartData('affiliation'),\n        colors: chartColors,\n        title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\",\n        maxHeight: \"220px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 804,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PieChartComponent, {\n        data: getChartData('affiliation'),\n        colors: chartColors,\n        title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 805,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DonutChart, {\n        data: getChartData('affiliation'),\n        colors: chartColors,\n        title: \"\\u0E2A\\u0E31\\u0E14\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 806,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LineChart, {\n        data: getChartData('affiliation'),\n        colors: chartColors,\n        title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 807,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 802,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"position\"),\n        className: `px-4 py-2 rounded-lg ${selectedChart === \"position\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`,\n        children: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 811,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"affiliation\"),\n        className: `px-4 py-2 rounded-lg ${selectedChart === \"affiliation\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`,\n        children: \"\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 817,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"gender\"),\n        className: `px-4 py-2 rounded-lg ${selectedChart === \"gender\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`,\n        children: \"\\u0E40\\u0E1E\\u0E28\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 823,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"age\"),\n        className: `px-4 py-2 rounded-lg ${selectedChart === \"age\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`,\n        children: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E2D\\u0E32\\u0E22\\u0E38\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 829,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 810,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow border border-slate-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E41\\u0E17\\u0E48\\u0E07\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 839,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('affiliation'),\n          colors: chartColors,\n          title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\",\n          maxHeight: \"500px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 840,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 838,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow border border-slate-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E27\\u0E07\\u0E01\\u0E25\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PieChartComponent, {\n          data: getChartData('affiliation'),\n          colors: chartColors,\n          title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 842,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow border border-slate-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E42\\u0E14\\u0E19\\u0E31\\u0E17\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DonutChart, {\n          data: getChartData('affiliation'),\n          colors: chartColors,\n          title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 848,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 846,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow border border-slate-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E40\\u0E2A\\u0E49\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 851,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LineChart, {\n          data: getChartData('affiliation'),\n          colors: chartColors,\n          title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 837,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonnelDetailModal, {\n      person: selectedPerson,\n      isOpen: showDetail,\n      onClose: () => setShowDetail(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 856,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchModal, {\n      isOpen: showSearchModal,\n      onClose: () => setShowSearchModal(false),\n      personnelData: personnelData,\n      stats: stats,\n      onViewPerson: handleViewPerson,\n      onExport: exportToCSV,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 861,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 788,\n    columnNumber: 5\n  }, this);\n}\n_s6(PersonnelPage, \"A/bS23M7EH3N5GcJRReGZmERb/o=\");\n_c11 = PersonnelPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11;\n$RefreshReg$(_c, \"TreemapChart$memo\");\n$RefreshReg$(_c2, \"TreemapChart\");\n$RefreshReg$(_c3, \"PieChartComponent$memo\");\n$RefreshReg$(_c4, \"PieChartComponent\");\n$RefreshReg$(_c5, \"HorizontalBarChart$memo\");\n$RefreshReg$(_c6, \"HorizontalBarChart\");\n$RefreshReg$(_c7, \"EditableCard$memo\");\n$RefreshReg$(_c8, \"EditableCard\");\n$RefreshReg$(_c9, \"PersonnelDetailModal$memo\");\n$RefreshReg$(_c0, \"PersonnelDetailModal\");\n$RefreshReg$(_c1, \"SearchModal$memo\");\n$RefreshReg$(_c10, \"SearchModal\");\n$RefreshReg$(_c11, \"PersonnelPage\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useCallback","memo","Search","Filter","Users","Phone","Mail","Calendar","Award","Building2","UserCheck","UserX","TrendingUp","PieChart","BarChart3","Download","RefreshCw","Eye","Grid3X3","List","X","AlertCircle","CheckCircle2","Clock","Edit2","Save","DonutChart","LineChart","CONFIG","jsxDEV","_jsxDEV","TreemapChart","_s","_c","title","data","colors","originalTotal","reduce","sum","d","value","scaledData","map","item","scaledValue","Math","log1p","generateTreemapLayout","items","width","height","rects","layoutRow","rowItems","x","y","w","h","length","totalValue","i","offset","isHorizontal","percentage","rectWidth","push","rectHeight","squarify","halfValue","runningTotal","splitIndex","max","groupA","slice","groupB","groupATotal","groupAWidth","groupAHeight","layout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","rect","itemIndex","findIndex","label","color","toFixed","valueText","fontSize","min","textShadowStyle","textShadow","style","left","top","backgroundColor","transition","_c2","PieChartComponent","_s2","_c3","total","viewBox","index","angle","prevPercentage","startAngle","endAngle","outerRadius","innerRadius","startXOuter","cos","PI","startYOuter","sin","endXOuter","endYOuter","startXInner","startYInner","endXInner","endYInner","largeArcFlag","pathData","join","pieColors","midAngle","labelRadius","labelX","labelY","percentageText","fill","stroke","strokeWidth","textAnchor","dominantBaseline","fontWeight","paintOrder","truncateAffiliation","_c4","HorizontalBarChart","_s3","_c5","maxHeight","getSortOrder","regionMatch","match","parseInt","customOrder","includes","sortedData","sort","a","b","maxValue","overflowY","paddingRight","barWidth","minWidth","_c6","EditableCard","_s4","_c7","icon","Icon","isEditing","onEdit","onChange","isAdmin","localValue","setLocalValue","handleChange","e","newValue","target","onClick","type","_c8","PersonnelDetailModal","_c9","person","isOpen","onClose","prefix","firstname","lastname","position","affiliation","deph","phone","email","_c0","SearchModal","_s5","_c1","personnelData","stats","onViewPerson","onExport","user","query","setQuery","results","filter","p","toLowerCase","placeholder","_c10","PersonnelPage","_s6","loading","setLoading","refreshing","setRefreshing","error","setError","setPersonnelData","selectedPerson","setSelectedPerson","showDetail","setShowDetail","showSearchModal","setShowSearchModal","quota","setQuota","vacancy","setVacancy","isEditingQuota","setIsEditingQuota","isEditingVacancy","setIsEditingVacancy","selectedChart","setSelectedChart","filters","setFilters","department","ageRange","gender","logAdminActivity","action","details","fetch","ADMIN_API","method","headers","body","JSON","stringify","log_action","log_details","user_id","id","username","catch","console","fetchPersonnelData","apiUrl","OFFICERS_API","response","ok","Error","status","text","result","parse","success","Array","isArray","formattedData","generation","dob","lineUserId","role","message","handleRefresh","finally","handleViewPerson","exportToCSV","affiliationAbbreviations","filteredAffiliationData","acc","trim","lower","normalized","matchRegion","trailingNum","anyNum","chartData","entries","Object","getOrderKey","l","String","m","num","test","charCodeAt","ka","kb","localeCompare","newStats","connected","byPosition","byAffiliation","byDepartment","byGeneration","forEach","log","chartColors","getChartData","groups","now","Date","year","isNaN","age","getFullYear","genders","g","renderChart","_c11","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/pages/PersonnelPage.js"],"sourcesContent":["import React, { useEffect, useState, useMemo, useCallback, memo } from \"react\";\r\nimport { \r\n  Search, \r\n  Filter, \r\n  Users, \r\n  Phone, \r\n  Mail, \r\n  Calendar,\r\n  Award,\r\n  Building2,\r\n  UserCheck,\r\n  UserX,\r\n  TrendingUp,\r\n  PieChart,\r\n  BarChart3,\r\n  Download,\r\n  RefreshCw,\r\n  Eye,\r\n  Grid3X3,\r\n  List,\r\n  X,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  Clock,\r\n  Edit2,\r\n  Save\r\n} from \"lucide-react\";\r\n\r\nimport DonutChart from '../components/DonutChart';\r\nimport LineChart from '../components/LineChart';\r\nimport { CONFIG } from '../config';\r\n\r\n// --- NEW: Proportional Treemap Chart Component ---\r\n// --- NEW: Proportional Treemap Chart Component (MODIFIED FOR LOGARITHMIC SCALE) ---\r\nconst TreemapChart = memo(({ title, data, colors = [] }) => {\r\n  // --- ส่วนที่แก้ไข: คำนวณ total จากค่าจริงก่อนแปลงสเกล ---\r\n  const originalTotal = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\r\n\r\n  // --- ส่วนที่แก้ไข: สร้างข้อมูลชุดใหม่ที่มีการปรับสเกลด้วย Math.log1p ---\r\n  // Math.log1p(x) จะคำนวณ log(1+x) ช่วยให้ค่าที่น้อยๆ มีขนาดใหญ่ขึ้นเมื่อเทียบกับค่ามากๆ\r\n  const scaledData = useMemo(() => data.map(item => ({\r\n    ...item,\r\n    scaledValue: Math.log1p(item.value) \r\n  })), [data]);\r\n\r\n  const generateTreemapLayout = useCallback((items, width, height) => {\r\n    let rects = [];\r\n    const layoutRow = (rowItems, x, y, w, h) => {\r\n      if (!rowItems.length) return;\r\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n      const totalValue = rowItems.reduce((sum, i) => sum + i.scaledValue, 0);\r\n      if (totalValue === 0) return;\r\n      let offset = 0;\r\n      const isHorizontal = w > h;\r\n      for (const item of rowItems) {\r\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n        const percentage = item.scaledValue / totalValue;\r\n        if (isHorizontal) {\r\n          const rectWidth = w * percentage;\r\n          rects.push({ x: x + offset, y, width: rectWidth, height: h, item });\r\n          offset += rectWidth;\r\n        } else {\r\n          const rectHeight = h * percentage;\r\n          rects.push({ x, y: y + offset, width: w, height: rectHeight, item });\r\n          offset += rectHeight;\r\n        }\r\n      }\r\n    };\r\n    const squarify = (items, x, y, w, h) => {\r\n      if (!items.length) return;\r\n      if (items.length <= 4) {\r\n        layoutRow(items, x, y, w, h);\r\n        return;\r\n      }\r\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n      const halfValue = items.reduce((sum, i) => sum + i.scaledValue, 0) / 2;\r\n      let runningTotal = 0;\r\n      let splitIndex = 0;\r\n      for (let i = 0; i < items.length; i++) {\r\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n        runningTotal += items[i].scaledValue;\r\n        if (runningTotal >= halfValue) {\r\n          splitIndex = i + 1;\r\n          break;\r\n        }\r\n      }\r\n      splitIndex = Math.max(1, splitIndex);\r\n      const groupA = items.slice(0, splitIndex);\r\n      const groupB = items.slice(splitIndex);\r\n      const groupATotal = groupA.reduce((sum, i) => sum + i.scaledValue, 0);\r\n      const totalValue = groupATotal + (groupB.reduce((sum, i) => sum + i.scaledValue, 0));\r\n\r\n      if (totalValue === 0) return;\r\n      if (w > h) {\r\n        const groupAWidth = w * (groupATotal / totalValue);\r\n        squarify(groupA, x, y, groupAWidth, h);\r\n        squarify(groupB, x + groupAWidth, y, w - groupAWidth, h);\r\n      } else {\r\n        const groupAHeight = h * (groupATotal / totalValue);\r\n        squarify(groupA, x, y, w, groupAHeight);\r\n        squarify(groupB, x, y + groupAHeight, w, h - groupAHeight);\r\n      }\r\n    };\r\n    squarify(items, 0, 0, 1000, 1000); // Use a relative base for layout\r\n    return rects;\r\n  }, []);\r\n\r\n  // --- ส่วนที่แก้ไข: ส่ง scaledData เข้าไปคำนวณ layout ---\r\n  const layout = useMemo(() => generateTreemapLayout(scaledData), [scaledData, generateTreemapLayout]);\r\n\r\n  if (!data.length || originalTotal === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-full\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 mb-4 flex items-center\"><BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />{title}</h3>\r\n        <div className=\"text-center py-8\"><p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงกราฟ</p></div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col h-full\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 flex items-center\">\r\n          <BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />{title}\r\n        </h3>\r\n        <div className=\"text-right\">\r\n          {/* --- ส่วนที่แก้ไข: แสดงผลรวมจากค่าจริง --- */}\r\n          <div className=\"text-lg font-bold text-slate-900\">{originalTotal}</div>\r\n          <div className=\"text-xs text-slate-500\">ทั้งหมด</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"relative w-full flex-1\">\r\n        {layout.map((rect) => {\r\n          const itemIndex = scaledData.findIndex(d => d.label === rect.item.label);\r\n          const color = colors[itemIndex % colors.length];\r\n          \r\n          // --- ส่วนที่แก้ไข: คำนวณ % จากค่าจริง ---\r\n          const percentage = originalTotal > 0 ? ((rect.item.value / originalTotal) * 100).toFixed(1) : 0;\r\n          const valueText = `${rect.item.value} (${percentage}%)`;\r\n          const fontSize = Math.min(rect.width / 10, rect.height / 5, 16);\r\n          const textShadowStyle = { textShadow: '0px 1px 3px rgba(0, 0, 0, 0.6)' };\r\n\r\n          return (\r\n            <div\r\n              key={rect.item.label}\r\n              className=\"absolute border-2 border-white rounded-md flex flex-col items-center justify-center p-1 overflow-hidden text-center\"\r\n              style={{\r\n                left: `${rect.x / 10}%`, top: `${rect.y / 10}%`, width: `${rect.width / 10}%`, height: `${rect.height / 10}%`,\r\n                backgroundColor: color, transition: 'all 0.4s ease-in-out'\r\n              }}\r\n            >\r\n              <div className=\"text-white font-bold\" style={{ fontSize: `${fontSize}px`, ...textShadowStyle }}>\r\n                {valueText}\r\n              </div>\r\n              <div className=\"text-white opacity-90 leading-tight\" style={{ fontSize: `${Math.max(fontSize * 0.7, 10)}px`, ...textShadowStyle }}>\r\n                {rect.item.label}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Pie Chart Component - เปลี่ยนเป็น Donut Chart\r\nconst PieChartComponent = memo(({ title, data, colors = [] }) => {\r\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\r\n  \r\n  if (!data.length || total === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 mb-4 flex items-center\">\r\n          <PieChart className=\"w-5 h-5 mr-2 text-slate-400\" />\r\n          {title}\r\n        </h3>\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงกราฟ</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-fit\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 flex items-center\">\r\n          <PieChart className=\"w-5 h-5 mr-2 text-slate-400\" />\r\n          {title}\r\n        </h3>\r\n        <div className=\"text-right\">\r\n          <div className=\"text-lg font-bold text-slate-900\">จำนวน {total} คน</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"relative border border-slate-200 rounded-lg p-4 bg-slate-50\">\r\n        <div className=\"flex flex-col items-center\">\r\n          {/* Donut Chart */}\r\n          <div className=\"relative w-48 h-48\">\r\n            <svg width=\"192\" height=\"192\" viewBox=\"0 0 192 192\" className=\"w-full h-full\">\r\n              {data.map((item, index) => {\r\n                const percentage = item.value / total;\r\n                const angle = percentage * 360;\r\n                \r\n                const prevPercentage = data.slice(0, index).reduce((sum, d) => sum + d.value, 0) / total;\r\n                const startAngle = prevPercentage * 360 - 90;\r\n                const endAngle = startAngle + angle;\r\n                \r\n                // Donut chart - outer radius 80, inner radius 45\r\n                const outerRadius = 80;\r\n                const innerRadius = 45;\r\n                \r\n                const startXOuter = 96 + outerRadius * Math.cos((startAngle * Math.PI) / 180);\r\n                const startYOuter = 96 + outerRadius * Math.sin((startAngle * Math.PI) / 180);\r\n                const endXOuter = 96 + outerRadius * Math.cos((endAngle * Math.PI) / 180);\r\n                const endYOuter = 96 + outerRadius * Math.sin((endAngle * Math.PI) / 180);\r\n                \r\n                const startXInner = 96 + innerRadius * Math.cos((endAngle * Math.PI) / 180);\r\n                const startYInner = 96 + innerRadius * Math.sin((endAngle * Math.PI) / 180);\r\n                const endXInner = 96 + innerRadius * Math.cos((startAngle * Math.PI) / 180);\r\n                const endYInner = 96 + innerRadius * Math.sin((startAngle * Math.PI) / 180);\r\n                \r\n                const largeArcFlag = angle > 180 ? 1 : 0;\r\n                \r\n                const pathData = [\r\n                  'M', startXOuter, startYOuter,\r\n                  'A', outerRadius, outerRadius, 0, largeArcFlag, 1, endXOuter, endYOuter,\r\n                  'L', startXInner, startYInner,\r\n                  'A', innerRadius, innerRadius, 0, largeArcFlag, 0, endXInner, endYInner,\r\n                  'Z'\r\n                ].join(' ');\r\n                \r\n                const pieColors = [\r\n                  '#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', \r\n                  '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'\r\n                ];\r\n                const color = pieColors[index % pieColors.length];\r\n                \r\n                // คำนวณตำแหน่งสำหรับแสดง percentage\r\n                const midAngle = startAngle + (angle / 2);\r\n                const labelRadius = 90;\r\n                const labelX = 96 + labelRadius * Math.cos((midAngle * Math.PI) / 180);\r\n                const labelY = 96 + labelRadius * Math.sin((midAngle * Math.PI) / 180);\r\n                const percentageText = `${(percentage * 100).toFixed(1)}%`;\r\n                \r\n                return (\r\n                  <g key={`donut-${index}`}>\r\n                    <path\r\n                      d={pathData}\r\n                      fill={color}\r\n                      stroke=\"white\"\r\n                      strokeWidth=\"2\"\r\n                    />\r\n                    {/* แสดง percentage ที่ขอบวงกลม */}\r\n                    {percentage > 0.05 && (\r\n                      <text\r\n                        x={labelX}\r\n                        y={labelY}\r\n                        textAnchor=\"middle\"\r\n                        dominantBaseline=\"middle\"\r\n                        fill=\"#1e293b\"\r\n                        fontSize=\"10\"\r\n                        fontWeight=\"bold\"\r\n                        stroke=\"white\"\r\n                        strokeWidth=\"2\"\r\n                        paintOrder=\"stroke\"\r\n                      >\r\n                        {percentageText}\r\n                      </text>\r\n                    )}\r\n                  </g>\r\n                );\r\n              })}\r\n            </svg>\r\n          </div>\r\n          \r\n          {/* Legend */}\r\n          <div className=\"w-full mt-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2\">\r\n              {data.map((item, index) => {\r\n                const percentage = ((item.value / total) * 100).toFixed(0);\r\n                const pieColors = [\r\n                  '#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', \r\n                  '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'\r\n                ];\r\n                const color = pieColors[index % pieColors.length];\r\n                \r\n                return (\r\n                  <div key={`legend-${item.label}-${index}`} className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center space-x-2 min-w-0 flex-1\">\r\n                      <div \r\n                        className=\"w-3 h-3 rounded-full flex-shrink-0\"\r\n                        style={{ backgroundColor: color }}\r\n                      />\r\n                      <span className=\"text-sm text-slate-700\">\r\n                        {truncateAffiliation ? truncateAffiliation(item.label) : (item.label.length > 30 ? item.label.slice(0, 27) + '...' : item.label)} <span className=\"font-bold text-slate-900\">{item.value}</span> คน\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"text-sm font-bold text-slate-900 ml-2\">{percentage}%</div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Horizontal Bar Chart Component\r\nconst HorizontalBarChart = memo(({ title, data, colors = [], maxHeight = '320px' }) => {\r\n  \r\n  const getSortOrder = (label) => {\r\n    const regionMatch = label.match(/ภาค\\s*(\\d+)/);\r\n    if (regionMatch) return parseInt(regionMatch[1]);\r\n    const customOrder = ['ศาลชั้นต้นในเขตกรุงเทพมหานคร', 'ศูนย์รักษาความปลอดภัย', 'ศาลชำนาญพิเศษ', 'ศาลสูง'];\r\n    const index = customOrder.findIndex(item => label.includes(item));\r\n    if (index !== -1) return 100 + index;\r\n    return 999;\r\n  };\r\n\r\n  const sortedData = useMemo(() => \r\n    [...data].sort((a, b) => getSortOrder(a.label) - getSortOrder(b.label)), \r\n    [data]\r\n  );\r\n  \r\n  const maxValue = useMemo(() => {\r\n    if (!sortedData || sortedData.length === 0) return 0;\r\n    return Math.max(...sortedData.map(d => d.value));\r\n  }, [sortedData]);\r\n\r\n  if (!sortedData.length || maxValue === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 mb-4 flex items-center\"><BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />{title}</h3>\r\n        <div className=\"text-center py-8\"><p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงกราฟ</p></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-4 shadow-sm border border-slate-200\">\r\n      <h3 className=\"text-lg font-semibold text-slate-900 mb-3 flex items-center\"><BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />{title}</h3>\r\n      <div className=\"space-y-2\" style={{ maxHeight, overflowY: 'auto', paddingRight: 8 }}>\r\n        {sortedData.map((item, index) => {\r\n          const barWidth = (item.value / maxValue) * 100;\r\n          const color = colors[index % colors.length] || '#8b5cf6';\r\n          \r\n          return (\r\n            <div key={`${item.label}-${index}`} className=\"grid grid-cols-3 gap-2 items-center\">\r\n              {/* Left Column for Full Label (CHANGED to text-left) */}\r\n              <div className=\"col-span-1 text-sm text-slate-700 font-medium text-left truncate\" title={item.label}>\r\n                {item.label}\r\n              </div>\r\n              \r\n              {/* Right Column for Bar */}\r\n              <div className=\"col-span-2 w-full bg-slate-100 rounded-full h-7 relative\">\r\n                <div\r\n                  className=\"h-7 rounded-full transition-all duration-700 flex items-center justify-end pr-3\"\r\n                  style={{\r\n                    width: `${barWidth}%`, backgroundColor: color, minWidth: '36px'\r\n                  }}\r\n                >\r\n                   <span className=\"text-white text-sm font-bold\">{item.value}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// (moved into the PersonnelPage component to avoid calling hooks at top level)\r\n\r\n// EditableCard Component (restored minimal implementation)\r\nconst EditableCard = memo(({ title, value, icon: Icon, color = \"blue\", isEditing, onEdit, onChange, isAdmin }) => {\r\n  const [localValue, setLocalValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    setLocalValue(value);\r\n  }, [value]);\r\n\r\n  const handleChange = (e) => {\r\n    const newValue = parseInt(e.target.value) || 0;\r\n    setLocalValue(newValue);\r\n    onChange(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <div className={`w-12 h-12 bg-${color}-100 rounded-xl flex items-center justify-center`}>\r\n          {Icon && <Icon className={`w-6 h-6 text-${color}-600`} />}\r\n        </div>\r\n        {isAdmin && (\r\n          <button\r\n            onClick={onEdit}\r\n            className=\"text-slate-400 hover:text-slate-600 transition-colors\"\r\n          >\r\n            {isEditing ? <Save className=\"w-5 h-5\" /> : <Edit2 className=\"w-5 h-5\" />}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {isEditing ? (\r\n        <input\r\n          type=\"number\"\r\n          value={localValue}\r\n          onChange={handleChange}\r\n          className=\"w-full text-3xl font-bold text-slate-900 mb-1 bg-slate-50 border border-slate-200 rounded px-2 py-1\"\r\n          min=\"0\"\r\n        />\r\n      ) : (\r\n        <div className=\"text-3xl font-bold text-slate-900 mb-1\">{localValue}</div>\r\n      )}\r\n      <div className=\"text-sm text-slate-600\">{title}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// PersonnelDetailModal (minimal)\r\nconst PersonnelDetailModal = memo(({ person, isOpen, onClose }) => {\r\n  if (!isOpen || !person) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex min-h-screen items-center justify-center p-4\">\r\n        <div className=\"fixed inset-0 bg-black/50 transition-opacity\" onClick={onClose} />\r\n        <div className=\"relative bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-xl font-semibold\">รายละเอียดบุคลากร</h2>\r\n            <button onClick={onClose} className=\"p-2 text-slate-400 hover:text-slate-600 rounded-lg\">\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n          <div className=\"space-y-3\">\r\n            <div><strong>ชื่อ:</strong> {person.prefix} {person.firstname} {person.lastname}</div>\r\n            <div><strong>ตำแหน่ง:</strong> {person.position || '-'}</div>\r\n            <div><strong>สังกัด:</strong> {person.affiliation || '-'}</div>\r\n            <div><strong>หน่วยงาน:</strong> {person.deph || '-'}</div>\r\n            <div><strong>เบอร์:</strong> {person.phone || '-'}</div>\r\n            <div><strong>อีเมล:</strong> {person.email || '-'}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// SearchModal (minimal placeholder)\r\nconst SearchModal = memo(({ isOpen, onClose, personnelData = [], stats = {}, onViewPerson = () => {}, onExport = () => {}, user }) => {\r\n  const [query, setQuery] = useState('');\r\n  if (!isOpen) return null;\r\n  const results = personnelData.filter(p => `${p.firstname} ${p.lastname}`.toLowerCase().includes(query.toLowerCase()));\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto bg-black/60\">\r\n      <div className=\"flex min-h-screen items-start justify-center p-4 sm:p-6 md:p-10\">\r\n        <div className=\"relative bg-white rounded-3xl shadow-2xl max-w-4xl w-full p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h2 className=\"text-xl font-semibold\">ค้นหาบุคลากร</h2>\r\n            <button onClick={onClose} className=\"p-2 text-slate-400 hover:text-slate-600 rounded-lg\"><X className=\"w-5 h-5\" /></button>\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <input value={query} onChange={(e) => setQuery(e.target.value)} className=\"w-full p-2 border rounded\" placeholder=\"ค้นหา...\" />\r\n          </div>\r\n          <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n            {results.map((p, i) => (\r\n              <div key={`${p.phone}-${i}`} className=\"p-2 border rounded flex items-center justify-between\">\r\n                <div>{p.prefix} {p.firstname} {p.lastname}</div>\r\n                <div className=\"space-x-2\">\r\n                  <button onClick={() => onViewPerson(p)} className=\"text-indigo-600\">ดู</button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default function PersonnelPage({ user }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [personnelData, setPersonnelData] = useState([]);\r\n  const [selectedPerson, setSelectedPerson] = useState(null);\r\n  const [showDetail, setShowDetail] = useState(false);\r\n  const [showSearchModal, setShowSearchModal] = useState(false);\r\n\r\n  const [quota, setQuota] = useState(100);\r\n  const [vacancy, setVacancy] = useState(20);\r\n  const [isEditingQuota, setIsEditingQuota] = useState(false);\r\n  const [isEditingVacancy, setIsEditingVacancy] = useState(false);\r\n\r\n  const [selectedChart, setSelectedChart] = useState(\"position\"); // Default chart type\r\n  const [filters, setFilters] = useState({\r\n    affiliation: \"\",\r\n    department: \"\",\r\n    ageRange: \"\",\r\n    gender: \"\",\r\n  });\r\n\r\n  const logAdminActivity = useCallback((action, details) => {\r\n    if (!user) return;\r\n    fetch(CONFIG.ADMIN_API, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        action: 'log_activity',\r\n        log_action: action,\r\n        log_details: details || null,\r\n        user_id: user.id,\r\n        username: user.username,\r\n      }),\r\n    }).catch((error) => console.error('Failed to log activity:', error));\r\n  }, [user]);\r\n\r\n  const fetchPersonnelData = useCallback(async () => {\r\n    try {\r\n      const apiUrl = CONFIG.OFFICERS_API;\r\n      const response = await fetch(apiUrl);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const text = await response.text();\r\n      if (!text) throw new Error('Empty response from server');\r\n      const result = JSON.parse(text);\r\n      const data = result.success && Array.isArray(result.data) ? result.data : [];\r\n      const formattedData = data.map((person) => ({\r\n        phone: person.phone || '',\r\n        prefix: person.prefix || '',\r\n        firstname: person.firstname || '',\r\n        lastname: person.lastname || '',\r\n        position: person.position || '',\r\n        affiliation: person.affiliation || '',\r\n        deph: person.department || '',\r\n        generation: person.generation || '',\r\n        email: person.email || '',\r\n        dob: person.dob || '',\r\n        lineUserId: person.lineUserId || '',\r\n        role: person.role || 'member',\r\n      }));\r\n      setPersonnelData(formattedData);\r\n      setError(\"\");\r\n    } catch (error) {\r\n      setError(`⚠️ ${error.message}`);\r\n      setPersonnelData([]);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchPersonnelData();\r\n  }, [fetchPersonnelData]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefreshing(true);\r\n    fetchPersonnelData().finally(() => setRefreshing(false));\r\n  };\r\n\r\n  const handleViewPerson = (person) => {\r\n    setSelectedPerson(person);\r\n    setShowDetail(true);\r\n  };\r\n\r\n  const exportToCSV = (data) => {\r\n    // Implement CSV export logic here\r\n  };\r\n\r\n  const affiliationAbbreviations = {\r\n    \"ศูนย์รักษาความปลอดภัย\": \"ส่วนกลาง\",\r\n    \"ศาลชั้นต้นในกรุงเทพมหานคร\": \"กทม.\",\r\n  };\r\n\r\n  const filteredAffiliationData = useMemo(() => {\r\n    return personnelData.reduce((acc, person) => {\r\n      let affiliation = (person.affiliation || '').trim();\r\n      if (!affiliation) affiliation = 'ไม่ระบุ';\r\n\r\n      const lower = affiliation.toLowerCase();\r\n\r\n      // Normalize known patterns using targeted rules\r\n      let normalized = affiliation;\r\n\r\n      // If it's the regional office pattern that contains สำนักศาลยุติธรรมประจำภาค\r\n      // we want to convert it to: 'ภาค <n>' when a number exists, otherwise 'ภาค'\r\n      if (\r\n        lower.includes('สำนักศาลยุติธรรมประจำภาค') ||\r\n        lower.includes('สำนักยุติธรรมประจำภาค') ||\r\n        lower.includes('ในสังกัดสำนักศาลยุติธรรมประจำภาค') ||\r\n        lower.includes('ศาลในสังกัดสำนักศาลยุติธรรมประจำภาค')\r\n      ) {\r\n        // Try to extract explicit 'ภาค <number>' first\r\n        const matchRegion = affiliation.match(/ภาค\\s*(\\d{1,3})/i);\r\n        if (matchRegion && matchRegion[1]) {\r\n          normalized = `ภาค ${matchRegion[1]}`;\r\n        } else {\r\n          // Fallback: find any trailing number in the string (e.g., '... ประจำภาค 4')\r\n          const trailingNum = affiliation.match(/(\\d{1,3})\\s*$/);\r\n          if (trailingNum && trailingNum[1]) {\r\n            normalized = `ภาค ${trailingNum[1]}`;\r\n          } else {\r\n            // Last-resort: any first number in the string\r\n            const anyNum = affiliation.match(/(\\d{1,3})/);\r\n            normalized = anyNum && anyNum[1] ? `ภาค ${anyNum[1]}` : 'ภาค';\r\n          }\r\n        }\r\n      } else if (lower.includes('ศูนย์รักษาความปลอดภัย')) {\r\n        normalized = 'ส่วนกลาง';\r\n      } else if (lower.includes('กรุงเทพ') || lower.includes('กรุงเทพมหานคร') || lower.includes('ศาลชั้นต้นในกรุงเทพมหานคร')) {\r\n        normalized = 'กทม.';\r\n      } else {\r\n        // fallback to any exact mapping we defined, otherwise keep original\r\n        normalized = affiliationAbbreviations[affiliation] || affiliation;\r\n      }\r\n\r\n      acc[normalized] = (acc[normalized] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n  }, [personnelData]);\r\n\r\n  const chartData = useMemo(() => {\r\n    const entries = Object.entries(filteredAffiliationData).map(([label, value]) => ({ label, value }));\r\n\r\n    const getOrderKey = (label) => {\r\n      if (!label) return 9999;\r\n      const l = String(label).trim();\r\n\r\n      // Match 'ภาค' followed by number e.g. 'ภาค 1' or 'ภาค1'\r\n      const m = l.match(/ภาค\\s*(\\d{1,3})/);\r\n      if (m && m[1]) {\r\n        // Put ภาค N in order 0.. (keep N small)\r\n        const num = parseInt(m[1], 10);\r\n        return num; // 1..9 -> 1..9 (smaller is earlier)\r\n      }\r\n\r\n      // If label is exactly 'ภาค' (no number), put after numbered ภาค\r\n      if (/^ภาค$/i.test(l)) return 999;\r\n\r\n      // Specific named orders after ภาค group\r\n      if (l === 'กทม.' || l.toLowerCase() === 'กทม.') return 1000;\r\n      if (l === 'ส่วนกลาง' || l.toLowerCase() === 'ส่วนกลาง') return 1001;\r\n      if (l.includes('ศาลสูง')) return 1002;\r\n      // handle both spellings 'ชำนาญ' and 'ชำนัญ'\r\n      if (l.includes('ชำนาญ') || l.includes('ชำนัญ') || l.includes('ชำนัญพิเศษ') || l.includes('ชำนาญพิเศษ')) return 1003;\r\n\r\n      // Default: place after known groups but preserve alphabetical order by returning a high key plus name\r\n      return 5000 + l.charCodeAt(0);\r\n    };\r\n\r\n    entries.sort((a, b) => {\r\n      const ka = getOrderKey(a.label);\r\n      const kb = getOrderKey(b.label);\r\n      if (ka === kb) {\r\n        // fallback alphabetical\r\n        return String(a.label).localeCompare(String(b.label));\r\n      }\r\n      return ka - kb;\r\n    });\r\n\r\n    return entries;\r\n  }, [filteredAffiliationData]);\r\n\r\n  const stats = useMemo(() => {\r\n    const newStats = {\r\n      total: personnelData.length,\r\n      connected: personnelData.filter((p) => p.lineUserId).length,\r\n      byPosition: {},\r\n      byAffiliation: {},\r\n      byDepartment: {},\r\n      byGeneration: {},\r\n    };\r\n    personnelData.forEach((person) => {\r\n      const position = person.position || 'ไม่ระบุ';\r\n      newStats.byPosition[position] = (newStats.byPosition[position] || 0) + 1;\r\n      const affiliation = person.affiliation || 'ไม่ระบุ';\r\n      newStats.byAffiliation[affiliation] = (newStats.byAffiliation[affiliation] || 0) + 1;\r\n      const department = person.deph || 'ไม่ระบุตำแหน่ง';\r\n      newStats.byDepartment[department] = (newStats.byDepartment[department] || 0) + 1;\r\n      const generation = person.generation ? String(person.generation).trim() : 'ไม่ระบุตำแหน่ง';\r\n      newStats.byGeneration[generation] = (newStats.byGeneration[generation] || 0) + 1;\r\n    });\r\n    return newStats;\r\n  }, [personnelData]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Personnel Data:\", personnelData);\r\n  }, [personnelData]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Stats:\", stats);\r\n    console.log(\"Chart Data:\", chartData);\r\n  }, [stats, chartData]);\r\n\r\n  const chartColors = [\r\n    \"#FF6384\", \"#36A2EB\", \"#FFCE56\", \"#4BC0C0\", \"#9966FF\", \"#FF9F40\", \"#FFCD56\", \"#C9CBCF\"\r\n  ];\r\n\r\n  // Helper: build chart data for different types (inside component)\r\n  const getChartData = useCallback((type) => {\r\n    if (type === 'affiliation') return chartData; // already normalized affiliation entries\r\n\r\n    if (type === 'position') {\r\n      // build from stats.byPosition\r\n      const entries = Object.entries(stats.byPosition || {}).map(([label, value]) => ({ label, value }));\r\n      // sort by value desc\r\n      entries.sort((a, b) => b.value - a.value);\r\n      return entries;\r\n    }\r\n\r\n    if (type === 'age') {\r\n      // derive age groups from dob (basic)\r\n      const groups = { '<30': 0, '30-39': 0, '40-49': 0, '50-59': 0, '60+': 0 };\r\n      const now = new Date();\r\n      personnelData.forEach(p => {\r\n        if (!p.dob) return;\r\n        const m = String(p.dob).match(/(\\d{4})/);\r\n        if (!m) return;\r\n        const year = parseInt(m[1], 10);\r\n        if (isNaN(year)) return;\r\n        const age = now.getFullYear() - year;\r\n        if (age < 30) groups['<30']++;\r\n        else if (age < 40) groups['30-39']++;\r\n        else if (age < 50) groups['40-49']++;\r\n        else if (age < 60) groups['50-59']++;\r\n        else groups['60+']++;\r\n      });\r\n      return Object.entries(groups).map(([label, value]) => ({ label, value }));\r\n    }\r\n\r\n    if (type === 'gender') {\r\n      // no gender field in data - return empty to show no data\r\n      const genders = (personnelData || []).reduce((acc, p) => {\r\n        const g = (p.gender || '').trim();\r\n        if (!g) return acc;\r\n        acc[g] = (acc[g] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n      return Object.entries(genders).map(([label, value]) => ({ label, value }));\r\n    }\r\n\r\n    return [];\r\n  }, [chartData, stats, personnelData]);\r\n\r\n  const renderChart = () => {\r\n    switch (selectedChart) {\r\n      case \"position\":\r\n        return (\r\n          <HorizontalBarChart\r\n            data={getChartData('position')}\r\n            colors={chartColors}\r\n            title=\"ตำแหน่ง\"\r\n            maxHeight=\"320px\"\r\n          />\r\n        );\r\n      case \"affiliation\":\r\n        return (\r\n          <HorizontalBarChart\r\n            data={getChartData('affiliation')}\r\n            colors={chartColors}\r\n            title=\"สัดส่วนแต่ละสังกัด\"\r\n            maxHeight=\"320px\"\r\n          />\r\n        );\r\n      case \"gender\":\r\n        return (\r\n          <PieChartComponent\r\n            data={getChartData('gender')}\r\n            colors={chartColors}\r\n            title=\"เพศ\"\r\n          />\r\n        );\r\n      case \"age\":\r\n        return (\r\n          <HorizontalBarChart\r\n            data={getChartData('age')}\r\n            colors={chartColors}\r\n            title=\"ช่วงอายุ\"\r\n            maxHeight=\"240px\"\r\n          />\r\n        );\r\n      default:\r\n        return <p>ไม่มีข้อมูลสำหรับแสดงผล</p>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-slate-800\">ข้อมูลบุคลากร</h1>\r\n        <div className=\"flex items-center space-x-3\">\r\n          <button\r\n            onClick={() => setShowSearchModal(true)}\r\n            className=\"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow\"\r\n          >\r\n            <Search className=\"w-4 h-4\" />\r\n            <span>ค้นหาบุคลากร</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        {/* Render chart components directly — they include their own wrappers */}\r\n        <HorizontalBarChart data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" maxHeight=\"220px\" />\r\n        <PieChartComponent data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" />\r\n        <DonutChart data={getChartData('affiliation')} colors={chartColors} title=\"สัด่วนแต่ละสังกัด\" />\r\n        <LineChart data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" />\r\n  </div>\r\n\r\n  <div className=\"flex items-center space-x-4 mb-6\">\r\n        <button\r\n          onClick={() => setSelectedChart(\"position\")}\r\n          className={`px-4 py-2 rounded-lg ${selectedChart === \"position\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          ตำแหน่ง\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedChart(\"affiliation\")}\r\n          className={`px-4 py-2 rounded-lg ${selectedChart === \"affiliation\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          สังกัด\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedChart(\"gender\")}\r\n          className={`px-4 py-2 rounded-lg ${selectedChart === \"gender\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          เพศ\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedChart(\"age\")}\r\n          className={`px-4 py-2 rounded-lg ${selectedChart === \"age\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800\"}`}\r\n        >\r\n          ช่วงอายุ\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div className=\"bg-white rounded-2xl shadow border border-slate-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800 mb-4\">กราฟแท่ง</h2>\r\n          <HorizontalBarChart data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" maxHeight=\"500px\" />\r\n        </div>\r\n        <div className=\"bg-white rounded-2xl shadow border border-slate-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800 mb-4\">กราฟวงกลม</h2>\r\n          <PieChartComponent data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" />\r\n        </div>\r\n        <div className=\"bg-white rounded-2xl shadow border border-slate-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800 mb-4\">กราฟโดนัท</h2>\r\n          <DonutChart data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" />\r\n        </div>\r\n        <div className=\"bg-white rounded-2xl shadow border border-slate-200 p-6\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800 mb-4\">กราฟเส้น</h2>\r\n          <LineChart data={getChartData('affiliation')} colors={chartColors} title=\"สัดส่วนแต่ละสังกัด\" />\r\n        </div>\r\n      </div>\r\n\r\n      <PersonnelDetailModal\r\n        person={selectedPerson}\r\n        isOpen={showDetail}\r\n        onClose={() => setShowDetail(false)}\r\n      />\r\n      <SearchModal\r\n        isOpen={showSearchModal}\r\n        onClose={() => setShowSearchModal(false)}\r\n        personnelData={personnelData}\r\n        stats={stats}\r\n        onViewPerson={handleViewPerson}\r\n        onExport={exportToCSV}\r\n        user={user}\r\n      />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}