{"ast":null,"code":"import React from'react';import{Crown,Star,User,Trash2,Edit}from'lucide-react';import{CONFIG}from'../../config';import{useAlert}from'../common/AlertSystem';// Component สำหรับแสดงบุคลากรปัจจุบัน\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CurrentMemberCard=_ref=>{let{member,onRefresh,onEdit}=_ref;const{success,error}=useAlert();const handleDelete=async structureId=>{if(!window.confirm('คุณต้องการลบข้อมูลนี้หรือไม่?'))return;try{const response=await fetch(\"\".concat(CONFIG.UNIT_STRUCTURE_API,\"/\").concat(structureId),{method:'DELETE'});const data=await response.json();if(data.success){success('ลบข้อมูลสำเร็จ');onRefresh();}else{error(data.message||'เกิดข้อผิดพลาดในการลบข้อมูล');}}catch(err){console.error('Error deleting structure:',err);error('เกิดข้อผิดพลาดในการลบข้อมูล');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-slate-50 rounded-lg border\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center \".concat(member.role==='director'?'bg-purple-100 text-purple-600':member.role==='supervisor'?'bg-blue-100 text-blue-600':'bg-green-100 text-green-600'),children:member.role==='director'?/*#__PURE__*/_jsx(Crown,{className:\"w-4 h-4\"}):member.role==='supervisor'?/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-slate-800\",children:member.full_name||\"\".concat(member.prefix||'',\" \").concat(member.firstname||'',\" \").concat(member.lastname||'').trim()}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-slate-500\",children:[member.role==='director'?'ผู้อำนวยการ':member.role==='supervisor'?'หัวหน้าส่วน':'เจ้าหน้าที่',member.role!=='director'&&\" (\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E17\\u0E35\\u0E48 \".concat(member.seniority_order,\")\")]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onEdit(member),className:\"p-1 text-slate-400 hover:text-blue-600 rounded\",title:\"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\",children:/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(member.id),className:\"p-1 text-slate-400 hover:text-red-600 rounded\",title:\"\\u0E25\\u0E1A\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})]});};export default CurrentMemberCard;","map":{"version":3,"names":["React","Crown","Star","User","Trash2","Edit","CONFIG","useAlert","jsx","_jsx","jsxs","_jsxs","CurrentMemberCard","_ref","member","onRefresh","onEdit","success","error","handleDelete","structureId","window","confirm","response","fetch","concat","UNIT_STRUCTURE_API","method","data","json","message","err","console","className","children","role","full_name","prefix","firstname","lastname","trim","seniority_order","onClick","title","id"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/components/UnitStructure/CurrentMemberCard.js"],"sourcesContent":["import React from 'react';\r\nimport { Crown, Star, User, Trash2, Edit } from 'lucide-react';\r\nimport { CONFIG } from '../../config';\r\nimport { useAlert } from '../common/AlertSystem';\r\n\r\n// Component สำหรับแสดงบุคลากรปัจจุบัน\r\nconst CurrentMemberCard = ({ member, onRefresh, onEdit }) => {\r\n  const { success, error } = useAlert();\r\n  const handleDelete = async (structureId) => {\r\n    if (!window.confirm('คุณต้องการลบข้อมูลนี้หรือไม่?')) return;\r\n\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/${structureId}`, {\r\n        method: 'DELETE'\r\n      });\r\n\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        success('ลบข้อมูลสำเร็จ');\r\n        onRefresh();\r\n      } else {\r\n        error(data.message || 'เกิดข้อผิดพลาดในการลบข้อมูล');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error deleting structure:', err);\r\n      error('เกิดข้อผิดพลาดในการลบข้อมูล');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between p-3 bg-slate-50 rounded-lg border\">\r\n      <div className=\"flex items-center space-x-3\">\r\n        <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n          member.role === 'director' ? 'bg-purple-100 text-purple-600' :\r\n          member.role === 'supervisor' ? 'bg-blue-100 text-blue-600' :\r\n          'bg-green-100 text-green-600'\r\n        }`}>\r\n          {member.role === 'director' ? <Crown className=\"w-4 h-4\" /> :\r\n           member.role === 'supervisor' ? <Star className=\"w-4 h-4\" /> :\r\n           <User className=\"w-4 h-4\" />}\r\n        </div>\r\n        <div>\r\n          <div className=\"font-medium text-slate-800\">\r\n            {member.full_name || `${member.prefix || ''} ${member.firstname || ''} ${member.lastname || ''}`.trim()}\r\n          </div>\r\n          <div className=\"text-sm text-slate-500\">\r\n            {member.role === 'director' ? 'ผู้อำนวยการ' :\r\n             member.role === 'supervisor' ? 'หัวหน้าส่วน' :\r\n             'เจ้าหน้าที่'} \r\n            {member.role !== 'director' && ` (ลำดับที่ ${member.seniority_order})`}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center space-x-1\">\r\n        <button\r\n          onClick={() => onEdit(member)}\r\n          className=\"p-1 text-slate-400 hover:text-blue-600 rounded\"\r\n          title=\"แก้ไข\"\r\n        >\r\n          <Edit className=\"w-4 h-4\" />\r\n        </button>\r\n        <button\r\n          onClick={() => handleDelete(member.id)}\r\n          className=\"p-1 text-slate-400 hover:text-red-600 rounded\"\r\n          title=\"ลบ\"\r\n        >\r\n          <Trash2 className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CurrentMemberCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}