{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\GitHub\\\\court-marshal-connect\\\\src\\\\components\\\\UnitStructure\\\\UnitStructureManagement.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useEffect } from 'react';\nimport UnitSelector from './UnitSelector';\nimport UnitManagementView from './UnitManagementView';\nimport { CONFIG } from '../../config';\n\n// Unit Structure Management Component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UnitStructureManagement = () => {\n  _s();\n  const [units, setUnits] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [unitStructures, setUnitStructures] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedUnit, setSelectedUnit] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [view, setView] = useState('units'); // 'units' or 'management'\n\n  // Fetch ข้อมูลส่วนงานจาก duty_unit\n  const fetchUnits = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\n      const data = await response.json();\n      if (data.success) {\n        setUnits(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching units:', error);\n    }\n  }, []);\n\n  // Fetch ข้อมูลเจ้าหน้าที่\n  const fetchOfficers = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.OFFICERS_API}`);\n      const data = await response.json();\n      if (data.success) {\n        setOfficers(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching officers:', error);\n    }\n  }, []);\n\n  // Fetch ข้อมูลโครงสร้างส่วนงาน\n  const fetchUnitStructures = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\n      const data = await response.json();\n      if (data.success) {\n        setUnitStructures(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching unit structures:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchUnits();\n    fetchOfficers();\n    fetchUnitStructures();\n  }, [fetchUnits, fetchOfficers, fetchUnitStructures]);\n\n  // แสดงหน้าเลือกส่วนงาน\n  if (view === 'units') {\n    return /*#__PURE__*/_jsxDEV(UnitSelector, {\n      units: units,\n      unitStructures: unitStructures,\n      onSelectUnit: unit => {\n        setSelectedUnit(unit);\n        setView('management');\n      },\n      loading: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 12\n    }, this);\n  }\n\n  // แสดงหน้าจัดการบุคลากรในส่วนงาน\n  return /*#__PURE__*/_jsxDEV(UnitManagementView, {\n    selectedUnit: selectedUnit,\n    units: units,\n    officers: officers,\n    unitStructures: unitStructures,\n    searchTerm: searchTerm,\n    setSearchTerm: setSearchTerm,\n    onBack: () => {\n      setView('units');\n      setSelectedUnit(null);\n    },\n    onRefresh: fetchUnitStructures\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 10\n  }, this);\n};\n_s(UnitStructureManagement, \"mFNaNsXmACNwFeI3fauqOAPx+UY=\");\n_c = UnitStructureManagement;\nexport default UnitStructureManagement;\nvar _c;\n$RefreshReg$(_c, \"UnitStructureManagement\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","UnitSelector","UnitManagementView","CONFIG","jsxDEV","_jsxDEV","UnitStructureManagement","_s","units","setUnits","officers","setOfficers","unitStructures","setUnitStructures","loading","setLoading","selectedUnit","setSelectedUnit","searchTerm","setSearchTerm","view","setView","fetchUnits","response","fetch","UNIT_STRUCTURE_API","data","json","success","error","console","fetchOfficers","OFFICERS_API","fetchUnitStructures","onSelectUnit","unit","fileName","_jsxFileName","lineNumber","columnNumber","onBack","onRefresh","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/components/UnitStructure/UnitStructureManagement.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\r\nimport UnitSelector from './UnitSelector';\r\nimport UnitManagementView from './UnitManagementView';\r\nimport { CONFIG } from '../../config';\r\n\r\n// Unit Structure Management Component\r\nconst UnitStructureManagement = () => {\r\n  const [units, setUnits] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [unitStructures, setUnitStructures] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedUnit, setSelectedUnit] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [view, setView] = useState('units'); // 'units' or 'management'\r\n\r\n  // Fetch ข้อมูลส่วนงานจาก duty_unit\r\n  const fetchUnits = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUnits(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching units:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch ข้อมูลเจ้าหน้าที่\r\n  const fetchOfficers = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.OFFICERS_API}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setOfficers(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching officers:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch ข้อมูลโครงสร้างส่วนงาน\r\n  const fetchUnitStructures = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUnitStructures(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unit structures:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchUnits();\r\n    fetchOfficers();\r\n    fetchUnitStructures();\r\n  }, [fetchUnits, fetchOfficers, fetchUnitStructures]);\r\n\r\n  // แสดงหน้าเลือกส่วนงาน\r\n  if (view === 'units') {\r\n    return <UnitSelector \r\n      units={units} \r\n      unitStructures={unitStructures}\r\n      onSelectUnit={(unit) => {\r\n        setSelectedUnit(unit);\r\n        setView('management');\r\n      }}\r\n      loading={loading}\r\n    />;\r\n  }\r\n\r\n  // แสดงหน้าจัดการบุคลากรในส่วนงาน\r\n  return <UnitManagementView\r\n    selectedUnit={selectedUnit}\r\n    units={units}\r\n    officers={officers}\r\n    unitStructures={unitStructures}\r\n    searchTerm={searchTerm}\r\n    setSearchTerm={setSearchTerm}\r\n    onBack={() => {\r\n      setView('units');\r\n      setSelectedUnit(null);\r\n    }}\r\n    onRefresh={fetchUnitStructures}\r\n  />;\r\n};\r\n\r\nexport default UnitStructureManagement;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}