{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\GitHub\\\\court-marshal-connect\\\\src\\\\components\\\\ShiftWork\\\\ShiftWorkPageNew.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Calendar, Shield, List, Grid } from 'lucide-react';\nimport { CONFIG } from '../../config';\nimport UnitStructureManagement from '../UnitStructure/UnitStructureManagement';\nimport ShiftCalendarView from './ShiftCalendarView';\nimport ShiftListView from './ShiftListView';\nimport DutyScheduleModal from './DutyScheduleModal';\nimport AlertSystem from './AlertSystem';\n\n// ฟังก์ชันตรวจสอบวันหยุด\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst isHoliday = (date, holidays = []) => {\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\n  const isSameDay = (date1, date2) => date1.toDateString() === date2.toDateString();\n  return holidays.some(holiday => isSameDay(new Date(holiday.date + 'T00:00:00'), date));\n};\nconst ShiftWorkPage = () => {\n  _s();\n  // State for tabs\n  const [activeTab, setActiveTab] = useState('shifts');\n\n  // State for view mode\n  const [viewMode, setViewMode] = useState('calendar'); // 'calendar' or 'list'\n\n  // State for calendar\n  const [currentDate, setCurrentDate] = useState(new Date());\n\n  // State for modals\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n\n  // State for data\n  const [schedules, setSchedules] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [units, setUnits] = useState([]);\n  const [holidays, setHolidays] = useState([]);\n\n  // State for form\n  const [formData, setFormData] = useState({\n    duty_date: '',\n    position_number: '',\n    shift_type: 'day',\n    day_type: 'normal'\n  });\n\n  // State for filters\n  const [filters, setFilters] = useState({\n    unit: '',\n    officer: ''\n  });\n\n  // State for loading and saving\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n\n  // State for shift selection\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\n  const [selectedUnits, setSelectedUnits] = useState([]);\n  const [selectedHeadUnit, setSelectedHeadUnit] = useState('');\n  const [availableOfficers, setAvailableOfficers] = useState([]);\n  const [manualAddedOfficers, setManualAddedOfficers] = useState([]);\n  const [removedPositions, setRemovedPositions] = useState([]);\n  const [manualSearch, setManualSearch] = useState('');\n\n  // State for alerts\n  const [alert, setAlert] = useState({\n    show: false,\n    message: '',\n    type: 'info'\n  });\n\n  // ฟังก์ชันแสดง Alert\n  const showAlert = (message, type = 'info') => {\n    setAlert({\n      show: true,\n      message,\n      type\n    });\n    setTimeout(() => setAlert({\n      show: false,\n      message: '',\n      type: 'info'\n    }), 5000);\n  };\n\n  // Auto-select officers from selected units\n  useEffect(() => {\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\n      console.log('Selected units:', selectedUnits);\n      console.log('Officers sample:', officers.slice(0, 3));\n      const available = officers.filter(officer => {\n        const hasUnitCode = officer.unit_code && selectedUnits.includes(officer.unit_code);\n        if (hasUnitCode) {\n          console.log('Matched officer:', officer.firstname, officer.lastname, 'Unit:', officer.unit_code);\n        }\n        return hasUnitCode;\n      });\n      console.log('Available officers after filter:', available.length);\n      setAvailableOfficers(available);\n    } else {\n      setAvailableOfficers([]);\n    }\n  }, [selectedUnits, officers]);\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  useEffect(() => {\n    loadSchedules();\n  }, [currentDate]);\n  const loadInitialData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadOfficers(), loadUnits(), loadHolidays(), loadSchedules()]);\n    } catch (error) {\n      console.error('Error loading initial data:', error);\n      showAlert('เกิดข้อผิดพลาดในการโหลดข้อมูล', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadSchedules = async () => {\n    try {\n      const startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).toISOString().split('T')[0];\n      const endDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).toISOString().split('T')[0];\n      const response = await fetch(`${CONFIG.DUTY_SCHEDULE_API}?start_date=${startDate}&end_date=${endDate}`);\n      const data = await response.json();\n      if (data.success && Array.isArray(data.data)) {\n        // แน่ใจว่าโหลด officers เสร็จแล้ว\n        let currentOfficers = officers;\n        if (!Array.isArray(currentOfficers) || currentOfficers.length === 0) {\n          await loadOfficers();\n          // ใช้ fresh data หลังจาก loadOfficers เสร็จ\n          const freshOfficersResponse = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\n          const freshOfficersData = await freshOfficersResponse.json();\n          currentOfficers = freshOfficersData.success ? freshOfficersData.data : [];\n        }\n        console.log('Current officers for mapping:', currentOfficers.length, 'officers loaded');\n        const officerMap = new Map((currentOfficers || []).map(o => [String(o.position_number), o]));\n        const enriched = data.data.map(s => {\n          var _s$position_number;\n          const posKey = s.position_number || s.officer_id || ((_s$position_number = s.position_number) === null || _s$position_number === void 0 ? void 0 : _s$position_number.toString());\n          const officer = officerMap.get(String(posKey));\n          const officerName = officer ? `${officer.prefix ? officer.prefix + ' ' : ''}${officer.firstname || ''} ${officer.lastname || ''}`.trim() : s.officer_name || null;\n          return {\n            ...s,\n            officer_name: officerName,\n            officer_unit_code: officer ? officer.unit_code : s.officer_unit_code || null,\n            officer_unit_name: officer ? officer.unit_name : s.officer_unit_name || null,\n            position_number: s.position_number || s.officer_id || null\n          };\n        });\n        setSchedules(enriched);\n      } else {\n        console.error('Failed to fetch schedules:', data && data.message);\n        showAlert('ไม่สามารถโหลดข้อมูลตารางเวรได้', 'error');\n      }\n    } catch (error) {\n      console.error('Error loading schedules:', error);\n      showAlert('เกิดข้อผิดพลาดในการโหลดตารางเวร', 'error');\n    }\n  };\n  const loadOfficers = async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.success && Array.isArray(data.data)) {\n        setOfficers(data.data);\n      } else {\n        console.error('Failed to load officers:', data);\n        setOfficers([]);\n      }\n    } catch (error) {\n      console.error('Error loading officers:', error);\n      setOfficers([]);\n    }\n  };\n  const loadUnits = async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.success && Array.isArray(data.data)) {\n        setUnits(data.data);\n      } else {\n        console.error('Failed to load units:', data);\n        setUnits([]);\n      }\n    } catch (error) {\n      console.error('Error loading units:', error);\n      setUnits([]);\n    }\n  };\n  const loadHolidays = async () => {\n    try {\n      // For now, we'll use a simple weekend check\n      // You can implement a real holiday API later\n      setHolidays([]);\n    } catch (error) {\n      console.error('Error loading holidays:', error);\n      setHolidays([]);\n    }\n  };\n  const navigateMonth = direction => {\n    setCurrentDate(prev => {\n      const newDate = new Date(prev);\n      newDate.setMonth(newDate.getMonth() + direction);\n      return newDate;\n    });\n  };\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n  const openAddModal = (date = null) => {\n    if (date) {\n      const dateStr = date.toISOString().split('T')[0];\n      setFormData({\n        duty_date: dateStr,\n        position_number: '',\n        shift_type: 'day',\n        day_type: isHoliday(date, holidays) ? 'holiday' : 'normal'\n      });\n    }\n    setSelectedSchedule(null);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedHeadUnit('');\n    setAvailableOfficers([]);\n    setManualAddedOfficers([]);\n    setRemovedPositions([]);\n    setShowAddModal(true);\n  };\n  const openEditModal = schedule => {\n    setSelectedSchedule(schedule);\n    setFormData({\n      duty_date: schedule.duty_date,\n      position_number: schedule.position_number,\n      shift_type: schedule.shift_type,\n      day_type: schedule.day_type\n    });\n    setSelectedShiftPeriod(schedule.shift_type || 'day');\n    setShowEditModal(true);\n  };\n  const closeModals = () => {\n    setShowAddModal(false);\n    setShowEditModal(false);\n    setSelectedSchedule(null);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedHeadUnit('');\n    setAvailableOfficers([]);\n    setManualAddedOfficers([]);\n    setRemovedPositions([]);\n  };\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const combined = [];\n      const mapPos = new Map();\n      (availableOfficers || []).forEach(o => mapPos.set(String(o.position_number), o));\n      (manualAddedOfficers || []).forEach(o => mapPos.set(String(o.position_number), o));\n      for (const [pos, off] of mapPos.entries()) {\n        if (!removedPositions.includes(pos)) combined.push(off);\n      }\n      if (!formData.duty_date || combined.length === 0) {\n        showAlert('กรุณาระบุวันที่และเลือกเจ้าหน้าที่อย่างน้อย 1 คน', 'error');\n        return;\n      }\n      if (!selectedHeadUnit) {\n        showAlert('กรุณาเลือกหน่วยงานหลักที่เป็นหัวหน้าเวร', 'error');\n        return;\n      }\n      const promises = combined.map(async officer => {\n        const pos = officer.position_number || officer.officer_id || officer.id;\n        const posNumber = Number(pos);\n        const payload = {\n          duty_date: formData.duty_date,\n          position_number: Number.isInteger(posNumber) ? posNumber : pos,\n          unit_code: officer.unit_code || selectedHeadUnit,\n          shift_type: selectedShiftPeriod,\n          day_type: isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) ? 'holiday' : 'normal'\n        };\n        console.log('Payload being sent:', payload);\n        const url = selectedSchedule ? `${CONFIG.DUTY_SCHEDULE_API}/${selectedSchedule.duty_id}` : CONFIG.DUTY_SCHEDULE_API;\n        const method = selectedSchedule ? 'PUT' : 'POST';\n        const response = await fetch(url, {\n          method,\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(payload)\n        });\n        const result = await response.json();\n        if (!result.success) {\n          throw new Error(result.message || 'เกิดข้อผิดพลาดในการบันทึก');\n        }\n        return result;\n      });\n      await Promise.all(promises);\n      showAlert('บันทึกตารางเวรสำเร็จ', 'success');\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error saving schedule:', error);\n      showAlert(error.message || 'เกิดข้อผิดพลาดในการบันทึก', 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleDelete = async () => {\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\n    setSaving(true);\n    try {\n      const response = await fetch(`${CONFIG.DUTY_SCHEDULE_API}/${selectedSchedule.duty_id}`, {\n        method: 'DELETE'\n      });\n      const result = await response.json();\n      if (!result.success) {\n        throw new Error(result.message || 'เกิดข้อผิดพลาดในการลบ');\n      }\n      showAlert('ลบตารางเวรสำเร็จ', 'success');\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error deleting schedule:', error);\n      showAlert(error.message || 'เกิดข้อผิดพลาดในการลบ', 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleDeleteFromList = async schedule => {\n    if (!window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\n    setSaving(true);\n    try {\n      const response = await fetch(`${CONFIG.DUTY_SCHEDULE_API}/${schedule.duty_id}`, {\n        method: 'DELETE'\n      });\n      const result = await response.json();\n      if (!result.success) {\n        throw new Error(result.message || 'เกิดข้อผิดพลาดในการลบ');\n      }\n      showAlert('ลบตารางเวรสำเร็จ', 'success');\n      await loadSchedules();\n    } catch (error) {\n      console.error('Error deleting schedule:', error);\n      showAlert(error.message || 'เกิดข้อผิดพลาดในการลบ', 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n  const filteredSchedules = useMemo(() => {\n    let filtered = schedules;\n    if (filters.unit) {\n      filtered = filtered.filter(schedule => schedule.officer_unit_code === filters.unit || schedule.unit_code === filters.unit);\n    }\n    if (filters.officer) {\n      filtered = filtered.filter(schedule => schedule.officer_name && schedule.officer_name.toLowerCase().includes(filters.officer.toLowerCase()));\n    }\n    return filtered;\n  }, [schedules, filters]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(AlertSystem, {\n      alert: alert,\n      onClose: () => setAlert({\n        show: false,\n        message: '',\n        type: 'info'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-slate-200 bg-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-8 px-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('shifts'),\n          className: `flex items-center py-4 px-2 border-b-2 text-sm font-medium ${activeTab === 'shifts' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'}`,\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            className: \"w-5 h-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this), \"\\u0E15\\u0E32\\u0E23\\u0E32\\u0E07\\u0E40\\u0E27\\u0E23\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('officers'),\n          className: `flex items-center py-4 px-2 border-b-2 text-sm font-medium ${activeTab === 'officers' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'}`,\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            className: \"w-5 h-5 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E41\\u0E25\\u0E30\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-hidden\",\n      children: [activeTab === 'shifts' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white border-b border-slate-200 px-6 py-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-lg font-semibold text-slate-900\",\n              children: [\"\\u0E15\\u0E32\\u0E23\\u0E32\\u0E07\\u0E40\\u0E27\\u0E23 - \", currentDate.toLocaleDateString('th-TH', {\n                month: 'long',\n                year: 'numeric'\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center bg-slate-100 rounded-lg p-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setViewMode('calendar'),\n                className: `flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${viewMode === 'calendar' ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-600 hover:text-slate-900'}`,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this), \"\\u0E1B\\u0E0F\\u0E34\\u0E17\\u0E34\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setViewMode('list'),\n                className: `flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${viewMode === 'list' ? 'bg-white text-slate-900 shadow-sm' : 'text-slate-600 hover:text-slate-900'}`,\n                children: [/*#__PURE__*/_jsxDEV(List, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 21\n                }, this), \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-hidden p-6\",\n          children: viewMode === 'calendar' ? /*#__PURE__*/_jsxDEV(ShiftCalendarView, {\n            currentDate: currentDate,\n            schedules: filteredSchedules,\n            officers: officers,\n            units: units,\n            holidays: holidays,\n            filters: filters,\n            setFilters: setFilters,\n            navigateMonth: navigateMonth,\n            goToToday: goToToday,\n            openAddModal: openAddModal,\n            openEditModal: openEditModal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(ShiftListView, {\n            currentDate: currentDate,\n            schedules: filteredSchedules,\n            onEdit: openEditModal,\n            onDelete: handleDeleteFromList\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }, this), activeTab === 'officers' && /*#__PURE__*/_jsxDEV(UnitStructureManagement, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DutyScheduleModal, {\n      showModal: showAddModal || showEditModal,\n      isEditMode: showEditModal,\n      formData: formData,\n      setFormData: setFormData,\n      selectedShiftPeriod: selectedShiftPeriod,\n      setSelectedShiftPeriod: setSelectedShiftPeriod,\n      selectedUnits: selectedUnits,\n      setSelectedUnits: setSelectedUnits,\n      selectedHeadUnit: selectedHeadUnit,\n      setSelectedHeadUnit: setSelectedHeadUnit,\n      availableOfficers: availableOfficers,\n      manualAddedOfficers: manualAddedOfficers,\n      setManualAddedOfficers: setManualAddedOfficers,\n      removedPositions: removedPositions,\n      setRemovedPositions: setRemovedPositions,\n      manualSearch: manualSearch,\n      setManualSearch: setManualSearch,\n      units: units,\n      officers: officers,\n      holidays: holidays,\n      saving: saving,\n      onClose: closeModals,\n      onSave: handleSave,\n      onDelete: handleDelete,\n      showAlert: showAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 406,\n    columnNumber: 5\n  }, this);\n};\n_s(ShiftWorkPage, \"MJJX2DcP0U4i4HFvM5ug4XINBIM=\");\n_c = ShiftWorkPage;\nexport default ShiftWorkPage;\nvar _c;\n$RefreshReg$(_c, \"ShiftWorkPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Calendar","Shield","List","Grid","CONFIG","UnitStructureManagement","ShiftCalendarView","ShiftListView","DutyScheduleModal","AlertSystem","jsxDEV","_jsxDEV","isHoliday","date","holidays","dayOfWeek","getDay","isSameDay","date1","date2","toDateString","some","holiday","Date","ShiftWorkPage","_s","activeTab","setActiveTab","viewMode","setViewMode","currentDate","setCurrentDate","showAddModal","setShowAddModal","showEditModal","setShowEditModal","selectedSchedule","setSelectedSchedule","schedules","setSchedules","officers","setOfficers","units","setUnits","setHolidays","formData","setFormData","duty_date","position_number","shift_type","day_type","filters","setFilters","unit","officer","loading","setLoading","saving","setSaving","selectedShiftPeriod","setSelectedShiftPeriod","selectedUnits","setSelectedUnits","selectedHeadUnit","setSelectedHeadUnit","availableOfficers","setAvailableOfficers","manualAddedOfficers","setManualAddedOfficers","removedPositions","setRemovedPositions","manualSearch","setManualSearch","alert","setAlert","show","message","type","showAlert","setTimeout","length","Array","isArray","console","log","slice","available","filter","hasUnitCode","unit_code","includes","firstname","lastname","loadInitialData","loadSchedules","Promise","all","loadOfficers","loadUnits","loadHolidays","error","startDate","getFullYear","getMonth","toISOString","split","endDate","response","fetch","DUTY_SCHEDULE_API","data","json","success","currentOfficers","freshOfficersResponse","UNIT_STRUCTURE_API","freshOfficersData","officerMap","Map","map","o","String","enriched","s","_s$position_number","posKey","officer_id","toString","get","officerName","prefix","trim","officer_name","officer_unit_code","officer_unit_name","unit_name","ok","Error","status","navigateMonth","direction","prev","newDate","setMonth","goToToday","openAddModal","dateStr","openEditModal","schedule","closeModals","handleSave","combined","mapPos","forEach","set","pos","off","entries","push","promises","id","posNumber","Number","payload","isInteger","url","duty_id","method","headers","body","JSON","stringify","result","handleDelete","window","confirm","handleDeleteFromList","filteredSchedules","filtered","toLowerCase","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClose","onClick","toLocaleDateString","month","year","onEdit","onDelete","showModal","isEditMode","onSave","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/components/ShiftWork/ShiftWorkPageNew.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { Calendar, Shield, List, Grid } from 'lucide-react';\r\nimport { CONFIG } from '../../config';\r\nimport UnitStructureManagement from '../UnitStructure/UnitStructureManagement';\r\nimport ShiftCalendarView from './ShiftCalendarView';\r\nimport ShiftListView from './ShiftListView';\r\nimport DutyScheduleModal from './DutyScheduleModal';\r\nimport AlertSystem from './AlertSystem';\r\n\r\n// ฟังก์ชันตรวจสอบวันหยุด\r\nconst isHoliday = (date, holidays = []) => {\r\n  const dayOfWeek = date.getDay();\r\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\r\n  const isSameDay = (date1, date2) => date1.toDateString() === date2.toDateString();\r\n  return holidays.some(holiday => isSameDay(new Date(holiday.date + 'T00:00:00'), date));\r\n};\r\n\r\nconst ShiftWorkPage = () => {\r\n  // State for tabs\r\n  const [activeTab, setActiveTab] = useState('shifts');\r\n  \r\n  // State for view mode\r\n  const [viewMode, setViewMode] = useState('calendar'); // 'calendar' or 'list'\r\n  \r\n  // State for calendar\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  \r\n  // State for modals\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  \r\n  // State for data\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [units, setUnits] = useState([]);\r\n  const [holidays, setHolidays] = useState([]);\r\n  \r\n  // State for form\r\n  const [formData, setFormData] = useState({\r\n    duty_date: '',\r\n    position_number: '',\r\n    shift_type: 'day',\r\n    day_type: 'normal'\r\n  });\r\n  \r\n  // State for filters\r\n  const [filters, setFilters] = useState({ unit: '', officer: '' });\r\n  \r\n  // State for loading and saving\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  \r\n  // State for shift selection\r\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\r\n  const [selectedUnits, setSelectedUnits] = useState([]);\r\n  const [selectedHeadUnit, setSelectedHeadUnit] = useState('');\r\n  const [availableOfficers, setAvailableOfficers] = useState([]);\r\n  const [manualAddedOfficers, setManualAddedOfficers] = useState([]);\r\n  const [removedPositions, setRemovedPositions] = useState([]);\r\n  const [manualSearch, setManualSearch] = useState('');\r\n  \r\n  // State for alerts\r\n  const [alert, setAlert] = useState({ show: false, message: '', type: 'info' });\r\n\r\n  // ฟังก์ชันแสดง Alert\r\n  const showAlert = (message, type = 'info') => {\r\n    setAlert({ show: true, message, type });\r\n    setTimeout(() => setAlert({ show: false, message: '', type: 'info' }), 5000);\r\n  };\r\n\r\n  // Auto-select officers from selected units\r\n  useEffect(() => {\r\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\r\n      console.log('Selected units:', selectedUnits);\r\n      console.log('Officers sample:', officers.slice(0, 3));\r\n      \r\n      const available = officers.filter(officer => {\r\n        const hasUnitCode = officer.unit_code && selectedUnits.includes(officer.unit_code);\r\n        if (hasUnitCode) {\r\n          console.log('Matched officer:', officer.firstname, officer.lastname, 'Unit:', officer.unit_code);\r\n        }\r\n        return hasUnitCode;\r\n      });\r\n      \r\n      console.log('Available officers after filter:', available.length);\r\n      setAvailableOfficers(available);\r\n    } else {\r\n      setAvailableOfficers([]);\r\n    }\r\n  }, [selectedUnits, officers]);\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadSchedules();\r\n  }, [currentDate]);\r\n\r\n  const loadInitialData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadOfficers(),\r\n        loadUnits(),\r\n        loadHolidays(),\r\n        loadSchedules()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error);\r\n      showAlert('เกิดข้อผิดพลาดในการโหลดข้อมูล', 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadSchedules = async () => {\r\n    try {\r\n      const startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).toISOString().split('T')[0];\r\n      const endDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).toISOString().split('T')[0];\r\n      const response = await fetch(`${CONFIG.DUTY_SCHEDULE_API}?start_date=${startDate}&end_date=${endDate}`);\r\n      const data = await response.json();\r\n\r\n      if (data.success && Array.isArray(data.data)) {\r\n        // แน่ใจว่าโหลด officers เสร็จแล้ว\r\n        let currentOfficers = officers;\r\n        if (!Array.isArray(currentOfficers) || currentOfficers.length === 0) {\r\n          await loadOfficers();\r\n          // ใช้ fresh data หลังจาก loadOfficers เสร็จ\r\n          const freshOfficersResponse = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\r\n          const freshOfficersData = await freshOfficersResponse.json();\r\n          currentOfficers = freshOfficersData.success ? freshOfficersData.data : [];\r\n        }\r\n\r\n        console.log('Current officers for mapping:', currentOfficers.length, 'officers loaded');\r\n\r\n        const officerMap = new Map((currentOfficers || []).map(o => [String(o.position_number), o]));\r\n\r\n        const enriched = data.data.map(s => {\r\n          const posKey = s.position_number || s.officer_id || s.position_number?.toString();\r\n          const officer = officerMap.get(String(posKey));\r\n          const officerName = officer ? `${officer.prefix ? officer.prefix + ' ' : ''}${officer.firstname || ''} ${officer.lastname || ''}`.trim() : (s.officer_name || null);\r\n          \r\n          return {\r\n            ...s,\r\n            officer_name: officerName,\r\n            officer_unit_code: officer ? officer.unit_code : (s.officer_unit_code || null),\r\n            officer_unit_name: officer ? officer.unit_name : (s.officer_unit_name || null),\r\n            position_number: s.position_number || s.officer_id || null\r\n          };\r\n        });\r\n\r\n        setSchedules(enriched);\r\n      } else {\r\n        console.error('Failed to fetch schedules:', data && data.message);\r\n        showAlert('ไม่สามารถโหลดข้อมูลตารางเวรได้', 'error');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading schedules:', error);\r\n      showAlert('เกิดข้อผิดพลาดในการโหลดตารางเวร', 'error');\r\n    }\r\n  };\r\n\r\n  const loadOfficers = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data && data.success && Array.isArray(data.data)) {\r\n        setOfficers(data.data);\r\n      } else {\r\n        console.error('Failed to load officers:', data);\r\n        setOfficers([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading officers:', error);\r\n      setOfficers([]);\r\n    }\r\n  };\r\n\r\n  const loadUnits = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data && data.success && Array.isArray(data.data)) {\r\n        setUnits(data.data);\r\n      } else {\r\n        console.error('Failed to load units:', data);\r\n        setUnits([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading units:', error);\r\n      setUnits([]);\r\n    }\r\n  };\r\n\r\n  const loadHolidays = async () => {\r\n    try {\r\n      // For now, we'll use a simple weekend check\r\n      // You can implement a real holiday API later\r\n      setHolidays([]);\r\n    } catch (error) {\r\n      console.error('Error loading holidays:', error);\r\n      setHolidays([]);\r\n    }\r\n  };\r\n\r\n  const navigateMonth = (direction) => {\r\n    setCurrentDate(prev => {\r\n      const newDate = new Date(prev);\r\n      newDate.setMonth(newDate.getMonth() + direction);\r\n      return newDate;\r\n    });\r\n  };\r\n\r\n  const goToToday = () => {\r\n    setCurrentDate(new Date());\r\n  };\r\n\r\n  const openAddModal = (date = null) => {\r\n    if (date) {\r\n      const dateStr = date.toISOString().split('T')[0];\r\n      setFormData({\r\n        duty_date: dateStr,\r\n        position_number: '',\r\n        shift_type: 'day',\r\n        day_type: isHoliday(date, holidays) ? 'holiday' : 'normal'\r\n      });\r\n    }\r\n    setSelectedSchedule(null);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedHeadUnit('');\r\n    setAvailableOfficers([]);\r\n    setManualAddedOfficers([]);\r\n    setRemovedPositions([]);\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const openEditModal = (schedule) => {\r\n    setSelectedSchedule(schedule);\r\n    setFormData({\r\n      duty_date: schedule.duty_date,\r\n      position_number: schedule.position_number,\r\n      shift_type: schedule.shift_type,\r\n      day_type: schedule.day_type\r\n    });\r\n    setSelectedShiftPeriod(schedule.shift_type || 'day');\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const closeModals = () => {\r\n    setShowAddModal(false);\r\n    setShowEditModal(false);\r\n    setSelectedSchedule(null);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedHeadUnit('');\r\n    setAvailableOfficers([]);\r\n    setManualAddedOfficers([]);\r\n    setRemovedPositions([]);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const combined = [];\r\n      const mapPos = new Map();\r\n      (availableOfficers || []).forEach(o => mapPos.set(String(o.position_number), o));\r\n      (manualAddedOfficers || []).forEach(o => mapPos.set(String(o.position_number), o));\r\n      for (const [pos, off] of mapPos.entries()) {\r\n        if (!removedPositions.includes(pos)) combined.push(off);\r\n      }\r\n\r\n      if (!formData.duty_date || combined.length === 0) {\r\n        showAlert('กรุณาระบุวันที่และเลือกเจ้าหน้าที่อย่างน้อย 1 คน', 'error');\r\n        return;\r\n      }\r\n\r\n      if (!selectedHeadUnit) {\r\n        showAlert('กรุณาเลือกหน่วยงานหลักที่เป็นหัวหน้าเวร', 'error');\r\n        return;\r\n      }\r\n\r\n      const promises = combined.map(async (officer) => {\r\n        const pos = officer.position_number || officer.officer_id || officer.id;\r\n        const posNumber = Number(pos);\r\n        const payload = {\r\n          duty_date: formData.duty_date,\r\n          position_number: Number.isInteger(posNumber) ? posNumber : pos,\r\n          unit_code: officer.unit_code || selectedHeadUnit,\r\n          shift_type: selectedShiftPeriod,\r\n          day_type: isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) ? 'holiday' : 'normal'\r\n        };\r\n\r\n        console.log('Payload being sent:', payload);\r\n\r\n        const url = selectedSchedule ? `${CONFIG.DUTY_SCHEDULE_API}/${selectedSchedule.duty_id}` : CONFIG.DUTY_SCHEDULE_API;\r\n        const method = selectedSchedule ? 'PUT' : 'POST';\r\n\r\n        const response = await fetch(url, {\r\n          method,\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(payload)\r\n        });\r\n\r\n        const result = await response.json();\r\n        if (!result.success) {\r\n          throw new Error(result.message || 'เกิดข้อผิดพลาดในการบันทึก');\r\n        }\r\n        return result;\r\n      });\r\n\r\n      await Promise.all(promises);\r\n      showAlert('บันทึกตารางเวรสำเร็จ', 'success');\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error saving schedule:', error);\r\n      showAlert(error.message || 'เกิดข้อผิดพลาดในการบันทึก', 'error');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\r\n    setSaving(true);\r\n    try {\r\n      const response = await fetch(`${CONFIG.DUTY_SCHEDULE_API}/${selectedSchedule.duty_id}`, {\r\n        method: 'DELETE'\r\n      });\r\n      \r\n      const result = await response.json();\r\n      if (!result.success) {\r\n        throw new Error(result.message || 'เกิดข้อผิดพลาดในการลบ');\r\n      }\r\n      \r\n      showAlert('ลบตารางเวรสำเร็จ', 'success');\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error deleting schedule:', error);\r\n      showAlert(error.message || 'เกิดข้อผิดพลาดในการลบ', 'error');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteFromList = async (schedule) => {\r\n    if (!window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\r\n    setSaving(true);\r\n    try {\r\n      const response = await fetch(`${CONFIG.DUTY_SCHEDULE_API}/${schedule.duty_id}`, {\r\n        method: 'DELETE'\r\n      });\r\n      \r\n      const result = await response.json();\r\n      if (!result.success) {\r\n        throw new Error(result.message || 'เกิดข้อผิดพลาดในการลบ');\r\n      }\r\n      \r\n      showAlert('ลบตารางเวรสำเร็จ', 'success');\r\n      await loadSchedules();\r\n    } catch (error) {\r\n      console.error('Error deleting schedule:', error);\r\n      showAlert(error.message || 'เกิดข้อผิดพลาดในการลบ', 'error');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const filteredSchedules = useMemo(() => {\r\n    let filtered = schedules;\r\n    \r\n    if (filters.unit) {\r\n      filtered = filtered.filter(schedule => \r\n        schedule.officer_unit_code === filters.unit || schedule.unit_code === filters.unit\r\n      );\r\n    }\r\n    \r\n    if (filters.officer) {\r\n      filtered = filtered.filter(schedule => \r\n        schedule.officer_name && schedule.officer_name.toLowerCase().includes(filters.officer.toLowerCase())\r\n      );\r\n    }\r\n    \r\n    return filtered;\r\n  }, [schedules, filters]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      {/* Alert System */}\r\n      <AlertSystem \r\n        alert={alert} \r\n        onClose={() => setAlert({ show: false, message: '', type: 'info' })} \r\n      />\r\n      \r\n      {/* Tab Navigation */}\r\n      <div className=\"border-b border-slate-200 bg-white\">\r\n        <div className=\"flex space-x-8 px-6\">\r\n          <button\r\n            onClick={() => setActiveTab('shifts')}\r\n            className={`flex items-center py-4 px-2 border-b-2 text-sm font-medium ${\r\n              activeTab === 'shifts'\r\n                ? 'border-indigo-500 text-indigo-600'\r\n                : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'\r\n            }`}\r\n          >\r\n            <Calendar className=\"w-5 h-5 mr-2\" />\r\n            ตารางเวร\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('officers')}\r\n            className={`flex items-center py-4 px-2 border-b-2 text-sm font-medium ${\r\n              activeTab === 'officers'\r\n                ? 'border-indigo-500 text-indigo-600'\r\n                : 'border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300'\r\n            }`}\r\n          >\r\n            <Shield className=\"w-5 h-5 mr-2\" />\r\n            จัดการเจ้าหน้าที่และโครงสร้าง\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <div className=\"flex-1 overflow-hidden\">\r\n        {activeTab === 'shifts' && (\r\n          <div className=\"h-full flex flex-col\">\r\n            {/* View Mode Toggle */}\r\n            <div className=\"bg-white border-b border-slate-200 px-6 py-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h1 className=\"text-lg font-semibold text-slate-900\">\r\n                  ตารางเวร - {currentDate.toLocaleDateString('th-TH', { month: 'long', year: 'numeric' })}\r\n                </h1>\r\n                <div className=\"flex items-center bg-slate-100 rounded-lg p-1\">\r\n                  <button\r\n                    onClick={() => setViewMode('calendar')}\r\n                    className={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                      viewMode === 'calendar'\r\n                        ? 'bg-white text-slate-900 shadow-sm'\r\n                        : 'text-slate-600 hover:text-slate-900'\r\n                    }`}\r\n                  >\r\n                    <Grid className=\"w-4 h-4 mr-2\" />\r\n                    ปฏิทิน\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setViewMode('list')}\r\n                    className={`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${\r\n                      viewMode === 'list'\r\n                        ? 'bg-white text-slate-900 shadow-sm'\r\n                        : 'text-slate-600 hover:text-slate-900'\r\n                    }`}\r\n                  >\r\n                    <List className=\"w-4 h-4 mr-2\" />\r\n                    รายการ\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 overflow-hidden p-6\">\r\n              {viewMode === 'calendar' ? (\r\n                <ShiftCalendarView\r\n                  currentDate={currentDate}\r\n                  schedules={filteredSchedules}\r\n                  officers={officers}\r\n                  units={units}\r\n                  holidays={holidays}\r\n                  filters={filters}\r\n                  setFilters={setFilters}\r\n                  navigateMonth={navigateMonth}\r\n                  goToToday={goToToday}\r\n                  openAddModal={openAddModal}\r\n                  openEditModal={openEditModal}\r\n                />\r\n              ) : (\r\n                <ShiftListView\r\n                  currentDate={currentDate}\r\n                  schedules={filteredSchedules}\r\n                  onEdit={openEditModal}\r\n                  onDelete={handleDeleteFromList}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n        {activeTab === 'officers' && <UnitStructureManagement />}\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <DutyScheduleModal\r\n        showModal={showAddModal || showEditModal}\r\n        isEditMode={showEditModal}\r\n        formData={formData}\r\n        setFormData={setFormData}\r\n        selectedShiftPeriod={selectedShiftPeriod}\r\n        setSelectedShiftPeriod={setSelectedShiftPeriod}\r\n        selectedUnits={selectedUnits}\r\n        setSelectedUnits={setSelectedUnits}\r\n        selectedHeadUnit={selectedHeadUnit}\r\n        setSelectedHeadUnit={setSelectedHeadUnit}\r\n        availableOfficers={availableOfficers}\r\n        manualAddedOfficers={manualAddedOfficers}\r\n        setManualAddedOfficers={setManualAddedOfficers}\r\n        removedPositions={removedPositions}\r\n        setRemovedPositions={setRemovedPositions}\r\n        manualSearch={manualSearch}\r\n        setManualSearch={setManualSearch}\r\n        units={units}\r\n        officers={officers}\r\n        holidays={holidays}\r\n        saving={saving}\r\n        onClose={closeModals}\r\n        onSave={handleSave}\r\n        onDelete={handleDelete}\r\n        showAlert={showAlert}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftWorkPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}