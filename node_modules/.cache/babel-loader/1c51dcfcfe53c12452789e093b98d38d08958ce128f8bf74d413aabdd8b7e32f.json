{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\GitHub\\\\court-marshal-connect\\\\src\\\\pages\\\\ShiftWorkPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useMemo, useCallback, memo, useEffect } from \"react\";\nimport { Calendar as CalendarIcon, Plus, ChevronLeft, ChevronRight, Filter, Search, Edit, Trash2, Save, X, Clock, Users, Building, FileText, Settings, Sun, Moon, File, Shield, CloudSun, Target, UserPlus, Star, Crown, User, ChevronDown } from 'lucide-react';\nimport { CONFIG } from '../config';\n\n// --- ฟังก์ชันตรวจสอบวันหยุด ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst isHoliday = (date, holidays = []) => {\n  if (!date) return false;\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\n  const dateStr = date.toISOString().split('T')[0];\n  return holidays.some(holiday => holiday.holiday_date === dateStr);\n};\nconst isToday = date => {\n  if (!date) return false;\n  const today = new Date();\n  return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();\n};\n\n// --- ฟังก์ชันหา shift_type ตาม period และ holiday ---\nconst getShiftTypeByPeriod = (period, isHolidayDate, shiftTypes) => {\n  if (!Array.isArray(shiftTypes)) return null;\n  if (period === 'night') {\n    return shiftTypes.find(type => type.id === 2 || type.id === 4);\n  } else {\n    return isHolidayDate ? shiftTypes.find(type => type.id === 3) : shiftTypes.find(type => type.id === 1);\n  }\n};\n\n// --- Redesigned Calendar Components ---\n\nconst ShiftCalendarView = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  currentDate,\n  schedules,\n  holidays,\n  filters,\n  setFilters,\n  units,\n  navigateMonth,\n  goToToday,\n  openAddModal,\n  openEditModal\n}) => {\n  _s();\n  const days = useMemo(() => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    const daysArray = [];\n\n    // Add blank days for the start of the month\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      daysArray.push(null);\n    }\n\n    // Add days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      daysArray.push(new Date(year, month, day));\n    }\n\n    // Add blank days to complete the grid\n    while (daysArray.length % 7 !== 0) {\n      daysArray.push(null);\n    }\n    return daysArray;\n  }, [currentDate]);\n  const getSchedulesForDate = useCallback(date => {\n    if (!date) return [];\n    const dateStr = date.toISOString().split('T')[0];\n    return schedules.filter(schedule => schedule.duty_date === dateStr);\n  }, [schedules]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(CalendarHeader, {\n      currentDate: currentDate,\n      navigateMonth: navigateMonth,\n      goToToday: goToToday,\n      openAddModal: openAddModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CalendarFilters, {\n      filters: filters,\n      setFilters: setFilters,\n      units: units\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow mt-4 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 border-t border-l border-slate-200\",\n        children: ['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'].map(day => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 text-center text-xs font-semibold text-slate-500 border-b border-r border-slate-200 bg-slate-50\",\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 grid-rows-6 flex-grow border-l border-slate-200\",\n        children: days.map((date, index) => /*#__PURE__*/_jsxDEV(CalendarDayCell, {\n          date: date,\n          holidays: holidays,\n          schedules: getSchedulesForDate(date),\n          onAdd: () => openAddModal(date),\n          onEdit: openEditModal\n        }, date ? date.toISOString() : `empty-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}, \"i4p65hFGRD+DOZ0qxHoJGd5BGRE=\")), \"i4p65hFGRD+DOZ0qxHoJGd5BGRE=\");\n_c2 = ShiftCalendarView;\nconst CalendarHeader = /*#__PURE__*/memo(_c3 = ({\n  currentDate,\n  navigateMonth,\n  goToToday,\n  openAddModal\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center justify-between mb-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigateMonth(-1),\n      className: \"p-2 text-slate-500 hover:bg-slate-100 rounded-full\",\n      children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold text-slate-800 text-center w-48\",\n      children: currentDate.toLocaleDateString('th-TH', {\n        month: 'long',\n        year: 'numeric'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigateMonth(1),\n      className: \"p-2 text-slate-500 hover:bg-slate-100 rounded-full\",\n      children: /*#__PURE__*/_jsxDEV(ChevronRight, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: goToToday,\n      className: \"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 bg-indigo-50 hover:bg-indigo-100 rounded-lg\",\n      children: \"\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => openAddModal(),\n      className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\",\n      children: [/*#__PURE__*/_jsxDEV(Plus, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E27\\u0E23\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 147,\n  columnNumber: 3\n}, this));\n_c4 = CalendarHeader;\nconst CalendarFilters = /*#__PURE__*/memo(_c5 = ({\n  filters,\n  setFilters,\n  units\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center space-x-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative flex-1\",\n    children: [/*#__PURE__*/_jsxDEV(Search, {\n      className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",\n      value: filters.officer,\n      onChange: e => setFilters(prev => ({\n        ...prev,\n        officer: e.target.value\n      })),\n      className: \"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(Filter, {\n      className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: filters.unit,\n      onChange: e => setFilters(prev => ({\n        ...prev,\n        unit: e.target.value\n      })),\n      className: \"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"\\u0E17\\u0E38\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this), Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: unit.id,\n        children: unit.unit_name\n      }, unit.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 175,\n  columnNumber: 3\n}, this));\n_c6 = CalendarFilters;\nconst CalendarDayCell = /*#__PURE__*/memo(_c7 = ({\n  date,\n  holidays,\n  schedules,\n  onAdd,\n  onEdit\n}) => {\n  if (!date) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border-b border-r border-slate-200 bg-slate-50/50\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 21\n  }, this);\n  const today = isToday(date);\n  const holiday = isHoliday(date, holidays);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative p-2 border-b border-r border-slate-200 flex flex-col group\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `w-7 h-7 flex items-center justify-center rounded-full text-sm font-semibold ${today ? 'bg-indigo-600 text-white' : holiday ? 'text-red-600' : 'text-slate-700'}`,\n        children: date.getDate()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), holiday && !today && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1.5 h-1.5 bg-red-500 rounded-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 space-y-1 overflow-y-auto\",\n      children: schedules.map(schedule => /*#__PURE__*/_jsxDEV(ScheduleItem, {\n        schedule: schedule,\n        onEdit: onEdit\n      }, schedule.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 36\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onAdd,\n      className: \"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-400 rounded-full opacity-0 group-hover:opacity-100 hover:bg-indigo-100 hover:text-indigo-600 transition-opacity\",\n      children: /*#__PURE__*/_jsxDEV(Plus, {\n        className: \"w-4 h-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 209,\n    columnNumber: 5\n  }, this);\n});\n_c8 = CalendarDayCell;\nconst ScheduleItem = /*#__PURE__*/memo(_c9 = ({\n  schedule,\n  onEdit\n}) => {\n  const shiftColors = {\n    1: 'border-yellow-500',\n    // เวรปกติ\n    3: 'border-orange-500',\n    // เวรวันหยุด\n    2: 'border-indigo-500',\n    // เวรกลางคืน\n    4: 'border-indigo-500',\n    // เวรกลางคืน\n    default: 'border-slate-400'\n  };\n  const borderColor = shiftColors[schedule.shift_type_id] || shiftColors.default;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: () => onEdit(schedule),\n    className: `p-1.5 rounded-md bg-slate-50 hover:bg-slate-100 cursor-pointer border-l-4 ${borderColor}`,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs font-semibold text-slate-800 truncate\",\n      children: schedule.shift_type_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-slate-600 truncate\",\n      children: schedule.officer_names\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n});\n_c0 = ScheduleItem;\nconst DocumentManagementView = () => {\n  const documents = [{\n    title: \"เวรในเวลาราชการ\",\n    description: \"จัดทำเอกสารสำหรับเวรปกติ\",\n    icon: Sun,\n    color: \"bg-yellow-500\",\n    action: () => alert('Creating In-hours Document...')\n  }, {\n    title: \"เวรนอกเวลา (กลางวัน)\",\n    description: \"สำหรับเวรวันหยุดและนักขัตฤกษ์\",\n    icon: CloudSun,\n    color: \"bg-orange-500\",\n    action: () => alert('Creating Off-hours (Day) Document...')\n  }, {\n    title: \"เวรนอกเวลา (กลางคืน)\",\n    description: \"สำหรับเวรช่วงเวลากลางคืน\",\n    icon: Moon,\n    color: \"bg-indigo-600\",\n    action: () => alert('Creating Off-hours (Night) Document...')\n  }, {\n    title: \"ขออนุญาตพกพาอาวุธ\",\n    description: \"จัดทำเอกสารขออนุญาตพกพาอาวุธปืน\",\n    icon: Target,\n    color: \"bg-red-600\",\n    action: () => alert('Creating Firearm Permit Document...')\n  }, {\n    title: \"รายงานประจำสัปดาห์\",\n    description: \"สรุปผลการปฏิบัติงานรายสัปดาห์\",\n    icon: FileText,\n    color: \"bg-green-600\",\n    action: () => alert('Creating Weekly Report...')\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-slate-50 rounded-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-slate-800\",\n        children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-500 mt-2\",\n        children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E08\\u0E31\\u0E14\\u0E17\\u0E33\\u0E08\\u0E32\\u0E01\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E14\\u0E49\\u0E32\\u0E19\\u0E25\\u0E48\\u0E32\\u0E07\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-8\",\n      children: documents.map((doc, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: doc.action,\n        className: \"group relative flex flex-col items-center justify-center text-center p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 ease-in-out border-b-4 border-transparent hover:border-indigo-500\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `absolute -top-8 flex items-center justify-center w-20 h-20 rounded-full ${doc.color} shadow-lg group-hover:scale-110 transition-transform duration-300`,\n          children: /*#__PURE__*/_jsxDEV(doc.icon, {\n            className: \"w-10 h-10 text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-12\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-slate-900 mb-2\",\n            children: doc.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-slate-500\",\n            children: doc.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this);\n};\n_c1 = DocumentManagementView;\nconst ShiftWorkPage = () => {\n  _s2();\n  const [activeTab, setActiveTab] = useState('shifts');\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [schedules, setSchedules] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [shiftTypes, setShiftTypes] = useState([]);\n  const [units, setUnits] = useState([]);\n  const [holidays, setHolidays] = useState([]);\n  const [formData, setFormData] = useState({\n    duty_date: '',\n    shift_type_id: '',\n    unit_id: '',\n    officer_ids: [],\n    notes: ''\n  });\n  const [filters, setFilters] = useState({\n    unit: '',\n    officer: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\n  const [selectedUnits, setSelectedUnits] = useState([]);\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\n  const [showOfficerList, setShowOfficerList] = useState(false);\n  const [officerSearchTerm, setOfficerSearchTerm] = useState('');\n  useEffect(() => {\n    const loadHolidaysByYear = async () => {\n      try {\n        const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays&year=${currentDate.getFullYear()}`);\n        const result = await response.json();\n        if (!result.success) throw new Error(result.message);\n        setHolidays(result.data);\n      } catch (error) {\n        console.error(\"ล้มเหลวในการดึงข้อมูลวันหยุด:\", error);\n      }\n    };\n    loadHolidaysByYear();\n  }, [currentDate]);\n  useEffect(() => {\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\n      const officersInSelectedUnits = officers.filter(officer => officer.unit_id && selectedUnits.includes(officer.unit_id)).map(officer => officer.id);\n      setSelectedOfficers(officersInSelectedUnits);\n    } else {\n      setSelectedOfficers([]);\n    }\n  }, [selectedUnits, officers]);\n\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\n  const handleUnitSelect = unitId => {\n    setSelectedUnits(prev => prev.includes(unitId) ? prev.filter(id => id !== unitId) : [...prev, unitId]);\n  };\n\n  // --- ฟังก์ชันจัดการการเลือกเจ้าหน้าที่ ---\n  const handleOfficerAdd = officerId => {\n    setSelectedOfficers(prev => [...prev, officerId]);\n  };\n  const handleOfficerRemove = officerId => {\n    setSelectedOfficers(prev => prev.filter(id => id !== officerId));\n  };\n\n  // --- ฟังก์ชันกรองเจ้าหน้าที่ที่ยังไม่ได้เลือก ---\n  const getAvailableOfficers = () => {\n    if (!Array.isArray(officers)) return [];\n    return officers.filter(officer => officer.unit_id !== null && (selectedUnits.length === 0 || selectedUnits.includes(officer.unit_id)) && !selectedOfficers.includes(officer.id) && (officerSearchTerm === '' || `${officer.firstname} ${officer.lastname}`.toLowerCase().includes(officerSearchTerm.toLowerCase())));\n  };\n\n  // --- ฟังก์ชันหาข้อมูลเจ้าหน้าที่ ---\n  const getOfficerById = officerId => {\n    return officers.find(o => o.id === officerId);\n  };\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  useEffect(() => {\n    loadSchedules();\n  }, [currentDate]);\n  const loadInitialData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadOfficers(), loadShiftTypes(), loadUnits(), loadHolidays(), loadSchedules()]);\n    } catch (error) {\n      console.error('Error loading initial data:', error.message, error.stack);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadSchedules = async () => {\n    try {\n      const month = currentDate.getMonth() + 1;\n      const year = currentDate.getFullYear();\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_schedules&month=${month}&year=${year}`);\n      const data = await response.json();\n      if (data.success) {\n        setSchedules(data.data);\n      } else {\n        console.error('Failed to fetch schedules:', data.message);\n      }\n    } catch (error) {\n      console.error('Error loading schedules:', error.message, error.stack);\n    }\n  };\n  const loadOfficers = async () => {\n    try {\n      const response = await fetch(`${CONFIG.OFFICERS_API}?action=get_all_officers`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.success && Array.isArray(data.data)) {\n        setOfficers(data.data);\n      } else {\n        console.error('Failed to load officers:', data);\n        setOfficers([]);\n      }\n    } catch (error) {\n      console.error('Error loading officers:', error);\n      setOfficers([]);\n    }\n  };\n  const loadShiftTypes = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_shifttypes`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setShiftTypes(data);\n      } else {\n        setShiftTypes([]);\n      }\n    } catch (error) {\n      console.error('Error loading shift types:', error);\n      setShiftTypes([]);\n    }\n  };\n  const loadUnits = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_units`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setUnits(data);\n      } else {\n        setUnits([]);\n      }\n    } catch (error) {\n      console.error('Error loading units:', error);\n      setUnits([]);\n    }\n  };\n  const loadHolidays = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setHolidays(data);\n      } else {\n        setHolidays([]);\n      }\n    } catch (error) {\n      console.error('Error loading holidays:', error);\n      setHolidays([]);\n    }\n  };\n  const navigateMonth = direction => {\n    setCurrentDate(prev => {\n      const newDate = new Date(prev);\n      newDate.setMonth(prev.getMonth() + direction);\n      return newDate;\n    });\n  };\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  // --- แก้ไข openAddModal ---\n  const openAddModal = (date = null) => {\n    const dateObj = date || new Date();\n    const isHolidayDate = isHoliday(dateObj, holidays);\n    const suggestedType = getShiftTypeByPeriod('day', isHolidayDate, shiftTypes);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedOfficers([]);\n    setFormData({\n      duty_date: date ? date.toISOString().split('T')[0] : '',\n      shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || '',\n      unit_id: '',\n      officer_ids: [],\n      notes: ''\n    });\n    setShowAddModal(true);\n  };\n  const openEditModal = schedule => {\n    setSelectedSchedule(schedule);\n    setFormData({\n      duty_date: schedule.duty_date,\n      shift_type_id: schedule.shift_type_id,\n      unit_id: schedule.unit_id || '',\n      officer_ids: schedule.officer_ids || [],\n      notes: schedule.notes || ''\n    });\n    setSelectedOfficers(schedule.officer_ids || []);\n    setShowEditModal(true);\n  };\n  const closeModals = () => {\n    setShowAddModal(false);\n    setShowEditModal(false);\n    setSelectedSchedule(null);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedOfficers([]);\n    setShowOfficerList(false);\n    setOfficerSearchTerm('');\n  };\n  const handleInputChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // อัปเดต shift_type_id และ officer_ids ตาม UI ใหม่\n      const dateObj = new Date(formData.duty_date + 'T00:00:00');\n      const isHolidayDate = isHoliday(dateObj, holidays);\n      const shiftType = getShiftTypeByPeriod(selectedShiftPeriod, isHolidayDate, shiftTypes);\n      const payload = {\n        action: selectedSchedule ? 'update_schedule' : 'create_schedule',\n        ...formData,\n        shift_type_id: (shiftType === null || shiftType === void 0 ? void 0 : shiftType.id) || formData.shift_type_id,\n        officer_ids: selectedOfficers,\n        ...(selectedSchedule && {\n          schedule_id: selectedSchedule.id\n        })\n      };\n      const response = await fetch(CONFIG.SCHEDULES_API, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (!result.success) throw new Error(result.message);\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error saving schedule:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleDelete = async () => {\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\n    setSaving(true);\n    try {\n      const payload = {\n        action: 'delete_schedule',\n        schedule_id: selectedSchedule.id\n      };\n      const response = await fetch(CONFIG.SCHEDULES_API, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (!result.success) throw new Error(result.message);\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error deleting schedule:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const filteredSchedules = useMemo(() => {\n    return schedules.filter(schedule => {\n      const unitMatch = !filters.unit || schedule.unit_id === parseInt(filters.unit);\n      const officerMatch = !filters.officer || schedule.officer_names && schedule.officer_names.toLowerCase().includes(filters.officer.toLowerCase());\n      return unitMatch && officerMatch;\n    });\n  }, [schedules, filters]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-slate-200\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex space-x-4 px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('shifts'),\n          className: `flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'shifts' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'}`,\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E40\\u0E27\\u0E23\\u0E23\\u0E31\\u0E01\\u0E29\\u0E32\\u0E01\\u0E32\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('documents'),\n          className: `flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'documents' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'}`,\n          children: [/*#__PURE__*/_jsxDEV(File, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow p-4 bg-slate-50/50 overflow-y-auto\",\n      children: [activeTab === 'shifts' && /*#__PURE__*/_jsxDEV(ShiftCalendarView, {\n        currentDate: currentDate,\n        schedules: filteredSchedules,\n        officers: officers,\n        shiftTypes: shiftTypes,\n        units: units,\n        holidays: holidays,\n        filters: filters,\n        setFilters: setFilters,\n        navigateMonth: navigateMonth,\n        goToToday: goToToday,\n        openAddModal: openAddModal,\n        openEditModal: openEditModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 654,\n        columnNumber: 11\n      }, this), activeTab === 'documents' && /*#__PURE__*/_jsxDEV(DocumentManagementView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 7\n    }, this), (showAddModal || showEditModal) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: showEditModal ? 'แก้ไขตารางเวร' : 'เพิ่มตารางเวรใหม่'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 676,\n            columnNumber: 15\n          }, this), formData.duty_date && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: [\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH'), isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E2B\\u0E22\\u0E38\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: formData.duty_date,\n              onChange: e => {\n                handleInputChange('duty_date', e.target.value);\n                // อัปเดต shift type อัตโนมัติเมื่อเปลี่ยนวันที่\n                const newDate = new Date(e.target.value + 'T00:00:00');\n                const isHol = isHoliday(newDate, holidays);\n                const suggestedType = getShiftTypeByPeriod(selectedShiftPeriod, isHol, shiftTypes);\n                setFormData(prev => ({\n                  ...prev,\n                  shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                }));\n              },\n              className: \"w-full border border-gray-300 rounded-lg px-3 py-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E40\\u0E27\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 710,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('day');\n                  const isHol = formData.duty_date ? isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) : false;\n                  const suggestedType = getShiftTypeByPeriod('day', isHol, shiftTypes);\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                  }));\n                },\n                className: `flex items-center px-4 py-2 rounded-lg border ${selectedShiftPeriod === 'day' ? 'bg-yellow-50 border-yellow-300 text-yellow-700' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Sun, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 726,\n                  columnNumber: 21\n                }, this), \"\\u0E01\\u0E25\\u0E32\\u0E07\\u0E27\\u0E31\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('night');\n                  const suggestedType = getShiftTypeByPeriod('night', false, shiftTypes);\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                  }));\n                },\n                className: `flex items-center px-4 py-2 rounded-lg border ${selectedShiftPeriod === 'night' ? 'bg-indigo-50 border-indigo-300 text-indigo-700' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Moon, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 742,\n                  columnNumber: 21\n                }, this), \"\\u0E01\\u0E25\\u0E32\\u0E07\\u0E04\\u0E37\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 729,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-4 max-h-40 overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-2\",\n                children: Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center py-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedUnits.includes(unit.id),\n                    onChange: () => handleUnitSelect(unit.id),\n                    className: \"h-4 w-4 text-indigo-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 755,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-sm text-gray-900\",\n                    children: unit.unit_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 761,\n                    columnNumber: 25\n                  }, this)]\n                }, unit.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 754,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 752,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 749,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-3 min-h-[100px]\",\n              children: selectedOfficers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500 text-sm\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 773,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: selectedOfficers.map(officerId => {\n                  const officer = getOfficerById(officerId);\n                  return officer ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 780,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleOfficerRemove(officerId),\n                      className: \"text-red-600 hover:text-red-800\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 785,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 781,\n                      columnNumber: 29\n                    }, this)]\n                  }, officerId, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 27\n                  }, this) : null;\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 771,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 769,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 798,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setShowOfficerList(!showOfficerList),\n                className: \"text-sm text-indigo-600 hover:text-indigo-800\",\n                children: showOfficerList ? 'ซ่อน' : 'เพิ่มเจ้าหน้าที่'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 799,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 797,\n              columnNumber: 17\n            }, this), showOfficerList && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Search, {\n                    className: \"w-4 h-4 text-gray-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 813,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",\n                    value: officerSearchTerm,\n                    onChange: e => setOfficerSearchTerm(e.target.value),\n                    className: \"flex-1 border border-gray-300 rounded px-2 py-1 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 814,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 812,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 811,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-h-40 overflow-y-auto\",\n                children: getAvailableOfficers().length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-sm\",\n                  children: selectedUnits.length === 0 ? 'กรุณาเลือกส่วนงานก่อน' : officerSearchTerm ? 'ไม่พบเจ้าหน้าที่ที่ค้นหา' : 'ไม่มีเจ้าหน้าที่ที่สามารถเลือกได้'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 827,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-1\",\n                  children: getAvailableOfficers().map(officer => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between py-2 hover:bg-gray-50 px-2 rounded\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 835,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        handleOfficerAdd(officer.id);\n                        setOfficerSearchTerm(''); // ล้างค่าค้นหาหลังเพิ่ม\n                      },\n                      className: \"text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50\",\n                      children: /*#__PURE__*/_jsxDEV(Plus, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 843,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 836,\n                      columnNumber: 31\n                    }, this)]\n                  }, officer.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 834,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 832,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 825,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 809,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 856,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: formData.notes,\n              onChange: e => handleInputChange('notes', e.target.value),\n              rows: 3,\n              className: \"w-full border border-gray-300 rounded-lg px-3 py-2\",\n              placeholder: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 857,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 855,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t bg-gray-50 flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: showEditModal && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDelete,\n              disabled: saving,\n              className: \"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100\",\n              children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 875,\n                columnNumber: 21\n              }, this), \"\\u0E25\\u0E1A\\u0E40\\u0E27\\u0E23\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 870,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 868,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeModals,\n              disabled: saving,\n              className: \"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50\",\n              children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 880,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSave,\n              disabled: saving || selectedOfficers.length === 0,\n              className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: saving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 894,\n                  columnNumber: 23\n                }, this), \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 899,\n                  columnNumber: 23\n                }, this), \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 887,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 867,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 674,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 629,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Management View Component - เลือกการ์ดส่วนงานแล้วจัดการบุคลากร\n_s2(ShiftWorkPage, \"qhe2zMtYZXBaFMdAjBdG0j1kPGo=\");\n_c10 = ShiftWorkPage;\nconst UnitManagementView = ({\n  dutyUnits,\n  unitStructures,\n  onEdit,\n  onDelete,\n  onAdd,\n  onEditDutyUnit,\n  onDeleteDutyUnit,\n  onAddDutyUnit,\n  getRoleIcon,\n  getRoleLabel,\n  getRoleBadgeClass\n}) => {\n  _s3();\n  const [selectedUnit, setSelectedUnit] = useState(null);\n  const [isPersonnelModalOpen, setIsPersonnelModalOpen] = useState(false);\n  const [personnelAction, setPersonnelAction] = useState(''); // 'add', 'setSupervisor'\n\n  // Get unit statistics\n  const getUnitStats = unitCode => {\n    const unitPersonnel = unitStructures.filter(item => item.unit_code === unitCode);\n    const supervisor = unitPersonnel.find(item => item.role === 'supervisor');\n    const members = unitPersonnel.filter(item => item.role === 'member');\n    const director = unitPersonnel.find(item => item.role === 'director');\n    return {\n      total: unitPersonnel.length,\n      supervisor,\n      members,\n      director,\n      hasSupervisor: !!supervisor,\n      hasDirector: !!director\n    };\n  };\n  const handleUnitSelect = unit => {\n    setSelectedUnit(unit);\n  };\n  const handleAddPersonnel = () => {\n    if (!selectedUnit) return;\n    const stats = getUnitStats(selectedUnit.unit_code);\n    const nextSeniorityOrder = stats.total + 1;\n\n    // เปิด modal พร้อมกำหนดค่าเริ่มต้น\n    onAdd({\n      unit_code: selectedUnit.unit_code,\n      role: selectedUnit.unit_code === 'CS08' ? 'director' : 'member',\n      seniority_order: nextSeniorityOrder\n    });\n  };\n  const handleSetSupervisor = () => {\n    if (!selectedUnit) return;\n\n    // เปิด modal สำหรับกำหนดหัวหน้าส่วน\n    onAdd({\n      unit_code: selectedUnit.unit_code,\n      role: 'supervisor',\n      seniority_order: 1\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onAddDutyUnit(),\n          className: \"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 982,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 980,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: dutyUnits.map(unit => {\n          var _stats$supervisor;\n          const stats = getUnitStats(unit.unit_code);\n          const isSelected = (selectedUnit === null || selectedUnit === void 0 ? void 0 : selectedUnit.unit_code) === unit.unit_code;\n          const isDirector = unit.unit_code === 'CS08';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => handleUnitSelect(unit),\n            className: `relative p-4 rounded-lg border-2 cursor-pointer transition-all ${isSelected ? 'border-indigo-500 bg-indigo-50' : 'border-slate-200 hover:border-slate-300'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-slate-800\",\n                  children: unit.unit_code.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1010,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-slate-600\",\n                  children: unit.unit_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1011,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1009,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    onEditDutyUnit(unit);\n                  },\n                  className: \"p-1 text-blue-600 hover:bg-blue-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1021,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1014,\n                  columnNumber: 21\n                }, this), !isDirector && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    onDeleteDutyUnit(unit);\n                  },\n                  className: \"p-1 text-red-600 hover:bg-red-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1031,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1024,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1013,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1008,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 mb-3\",\n              children: [isDirector ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Star, {\n                  className: \"w-4 h-4 text-yellow-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1041,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1042,\n                  columnNumber: 23\n                }, this), stats.hasDirector && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-green-600 font-medium\",\n                  children: \"(\\u0E21\\u0E35\\u0E41\\u0E25\\u0E49\\u0E27)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1044,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1040,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Shield, {\n                  className: \"w-4 h-4 text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1051,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1052,\n                  columnNumber: 23\n                }, this), stats.hasSupervisor ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-green-600 font-medium\",\n                  children: (_stats$supervisor = stats.supervisor) === null || _stats$supervisor === void 0 ? void 0 : _stats$supervisor.full_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1054,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-red-500\",\n                  children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1058,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1050,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  className: \"w-4 h-4 text-slate-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1064,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: [\"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23: \", stats.total, \" \\u0E04\\u0E19\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1065,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1063,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1038,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-2 border-t border-slate-200\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-slate-500\",\n                  children: \"\\u0E04\\u0E25\\u0E34\\u0E01\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1074,\n                  columnNumber: 21\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-indigo-600 font-medium\",\n                  children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E41\\u0E25\\u0E49\\u0E27\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1076,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1073,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1072,\n              columnNumber: 17\n            }, this)]\n          }, unit.unit_code, true, {\n            fileName: _jsxFileName,\n            lineNumber: 998,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 979,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-1\",\n      children: selectedUnit ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-50 rounded-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-slate-800 mb-4\",\n          children: [\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23 \", selectedUnit.unit_code.toUpperCase()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1090,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: selectedUnit.unit_code === 'CS08' ?\n          /*#__PURE__*/\n          // Director Unit (CS08) - สามารถมีได้เพียง 1 คน\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(Star, {\n                  className: \"w-4 h-4 text-yellow-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1100,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium text-yellow-800\",\n                  children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1101,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1099,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-yellow-700\",\n                children: \"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E19\\u0E35\\u0E49\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E21\\u0E35\\u0E44\\u0E14\\u0E49\\u0E40\\u0E1E\\u0E35\\u0E22\\u0E07 1 \\u0E04\\u0E19\\u0E40\\u0E17\\u0E48\\u0E32\\u0E19\\u0E31\\u0E49\\u0E19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1103,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1098,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddPersonnel,\n              className: \"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1112,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1113,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1108,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) :\n          /*#__PURE__*/\n          // Regular Units - สามารถมีได้หลายคน\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSetSupervisor,\n              disabled: getUnitStats(selectedUnit.unit_code).hasSupervisor,\n              className: `w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg ${getUnitStats(selectedUnit.unit_code).hasSupervisor ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`,\n              children: [/*#__PURE__*/_jsxDEV(Shield, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1128,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: getUnitStats(selectedUnit.unit_code).hasSupervisor ? 'มีหัวหน้าส่วนแล้ว' : 'กำหนดหัวหน้าส่วน'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1129,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1119,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddPersonnel,\n              className: \"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1141,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1142,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1137,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1094,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-slate-700 mb-3\",\n            children: \"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1150,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).sort((a, b) => {\n              // เรียงลำดับ: director > supervisor > member\n              if (a.role === 'director') return -1;\n              if (b.role === 'director') return 1;\n              if (a.role === 'supervisor') return -1;\n              if (b.role === 'supervisor') return 1;\n              return a.seniority_order - b.seniority_order;\n            }).map(person => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-2 bg-white rounded border\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [getRoleIcon(person.role), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-medium text-slate-800\",\n                    children: person.full_name || `ตำแหน่งที่ ${person.position_number}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1167,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-slate-500\",\n                    children: [getRoleLabel(person.role), \" \\u2022 \\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A \", person.seniority_order]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1170,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1166,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1164,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onEdit(person),\n                  className: \"p-1 text-blue-600 hover:bg-blue-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1180,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1176,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onDelete(person),\n                  className: \"p-1 text-red-600 hover:bg-red-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1186,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1182,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1175,\n                columnNumber: 23\n              }, this)]\n            }, person.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1163,\n              columnNumber: 21\n            }, this)), unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-4 text-slate-500\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                className: \"w-8 h-8 mx-auto mb-2 opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1194,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1195,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1193,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1151,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1089,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-50 rounded-lg p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Building, {\n          className: \"w-12 h-12 mx-auto mb-4 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1203,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-slate-600 mb-2\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1204,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E08\\u0E32\\u0E01\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E14\\u0E49\\u0E32\\u0E19\\u0E0B\\u0E49\\u0E32\\u0E22\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1205,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1202,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1087,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 977,\n    columnNumber: 5\n  }, this);\n};\n_s3(UnitManagementView, \"n5DeEqXwxD6OMa53Vr7gsD8mLP8=\");\n_c11 = UnitManagementView;\nexport default ShiftWorkPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11;\n$RefreshReg$(_c, \"ShiftCalendarView$memo\");\n$RefreshReg$(_c2, \"ShiftCalendarView\");\n$RefreshReg$(_c3, \"CalendarHeader$memo\");\n$RefreshReg$(_c4, \"CalendarHeader\");\n$RefreshReg$(_c5, \"CalendarFilters$memo\");\n$RefreshReg$(_c6, \"CalendarFilters\");\n$RefreshReg$(_c7, \"CalendarDayCell$memo\");\n$RefreshReg$(_c8, \"CalendarDayCell\");\n$RefreshReg$(_c9, \"ScheduleItem$memo\");\n$RefreshReg$(_c0, \"ScheduleItem\");\n$RefreshReg$(_c1, \"DocumentManagementView\");\n$RefreshReg$(_c10, \"ShiftWorkPage\");\n$RefreshReg$(_c11, \"UnitManagementView\");","map":{"version":3,"names":["React","useState","useMemo","useCallback","memo","useEffect","Calendar","CalendarIcon","Plus","ChevronLeft","ChevronRight","Filter","Search","Edit","Trash2","Save","X","Clock","Users","Building","FileText","Settings","Sun","Moon","File","Shield","CloudSun","Target","UserPlus","Star","Crown","User","ChevronDown","CONFIG","jsxDEV","_jsxDEV","Fragment","_Fragment","isHoliday","date","holidays","dayOfWeek","getDay","dateStr","toISOString","split","some","holiday","holiday_date","isToday","today","Date","getDate","getMonth","getFullYear","getShiftTypeByPeriod","period","isHolidayDate","shiftTypes","Array","isArray","find","type","id","ShiftCalendarView","_s","_c","currentDate","schedules","filters","setFilters","units","navigateMonth","goToToday","openAddModal","openEditModal","days","year","month","firstDay","lastDay","daysInMonth","startingDayOfWeek","daysArray","i","push","day","length","getSchedulesForDate","filter","schedule","duty_date","className","children","CalendarHeader","fileName","_jsxFileName","lineNumber","columnNumber","CalendarFilters","map","index","CalendarDayCell","onAdd","onEdit","_c2","_c3","onClick","toLocaleDateString","_c4","_c5","placeholder","value","officer","onChange","e","prev","target","unit","unit_name","_c6","_c7","ScheduleItem","_c8","_c9","shiftColors","default","borderColor","shift_type_id","shift_type_name","officer_names","_c0","DocumentManagementView","documents","title","description","icon","color","action","alert","doc","_c1","ShiftWorkPage","_s2","activeTab","setActiveTab","setCurrentDate","showAddModal","setShowAddModal","showEditModal","setShowEditModal","selectedSchedule","setSelectedSchedule","setSchedules","officers","setOfficers","setShiftTypes","setUnits","setHolidays","formData","setFormData","unit_id","officer_ids","notes","loading","setLoading","saving","setSaving","selectedShiftPeriod","setSelectedShiftPeriod","selectedUnits","setSelectedUnits","selectedOfficers","setSelectedOfficers","showOfficerList","setShowOfficerList","officerSearchTerm","setOfficerSearchTerm","loadHolidaysByYear","response","fetch","SCHEDULES_API","result","json","success","Error","message","data","error","console","officersInSelectedUnits","includes","handleUnitSelect","unitId","handleOfficerAdd","officerId","handleOfficerRemove","getAvailableOfficers","firstname","lastname","toLowerCase","getOfficerById","o","loadInitialData","loadSchedules","Promise","all","loadOfficers","loadShiftTypes","loadUnits","loadHolidays","stack","OFFICERS_API","ok","status","direction","newDate","setMonth","dateObj","suggestedType","closeModals","handleInputChange","field","handleSave","shiftType","payload","schedule_id","method","headers","body","JSON","stringify","handleDelete","window","confirm","filteredSchedules","unitMatch","parseInt","officerMatch","isHol","checked","prefix","rows","disabled","_c10","UnitManagementView","dutyUnits","unitStructures","onDelete","onEditDutyUnit","onDeleteDutyUnit","onAddDutyUnit","getRoleIcon","getRoleLabel","getRoleBadgeClass","_s3","selectedUnit","setSelectedUnit","isPersonnelModalOpen","setIsPersonnelModalOpen","personnelAction","setPersonnelAction","getUnitStats","unitCode","unitPersonnel","item","unit_code","supervisor","role","members","director","total","hasSupervisor","hasDirector","handleAddPersonnel","stats","nextSeniorityOrder","seniority_order","handleSetSupervisor","_stats$supervisor","isSelected","isDirector","toUpperCase","stopPropagation","full_name","sort","a","b","person","position_number","_c11","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/pages/ShiftWorkPage.js"],"sourcesContent":["import React, { useState, useMemo, useCallback, memo, useEffect } from \"react\";\r\nimport {\r\n  Calendar as CalendarIcon,\r\n  Plus,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Filter,\r\n  Search,\r\n  Edit,\r\n  Trash2,\r\n  Save,\r\n  X,\r\n  Clock,\r\n  Users,\r\n  Building,\r\n  FileText,\r\n  Settings,\r\n  Sun, Moon,\r\n  File,\r\n  Shield,\r\n  CloudSun,\r\n  Target,\r\n  UserPlus,\r\n  Star,\r\n  Crown,\r\n  User,\r\n  ChevronDown\r\n} from 'lucide-react';\r\nimport { CONFIG } from '../config';\r\n\r\n// --- ฟังก์ชันตรวจสอบวันหยุด ---\r\nconst isHoliday = (date, holidays = []) => {\r\n  if (!date) return false;\r\n  const dayOfWeek = date.getDay();\r\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\r\n  const dateStr = date.toISOString().split('T')[0];\r\n  return holidays.some(holiday => holiday.holiday_date === dateStr);\r\n};\r\n\r\nconst isToday = (date) => {\r\n  if (!date) return false;\r\n  const today = new Date();\r\n  return date.getDate() === today.getDate() &&\r\n         date.getMonth() === today.getMonth() &&\r\n         date.getFullYear() === today.getFullYear();\r\n};\r\n\r\n// --- ฟังก์ชันหา shift_type ตาม period และ holiday ---\r\nconst getShiftTypeByPeriod = (period, isHolidayDate, shiftTypes) => {\r\n  if (!Array.isArray(shiftTypes)) return null;\r\n  if (period === 'night') {\r\n    return shiftTypes.find(type => type.id === 2 || type.id === 4);\r\n  } else {\r\n    return isHolidayDate \r\n      ? shiftTypes.find(type => type.id === 3)\r\n      : shiftTypes.find(type => type.id === 1);\r\n  }\r\n};\r\n\r\n// --- Redesigned Calendar Components ---\r\n\r\nconst ShiftCalendarView = memo(({\r\n  currentDate,\r\n  schedules,\r\n  holidays,\r\n  filters,\r\n  setFilters,\r\n  units,\r\n  navigateMonth,\r\n  goToToday,\r\n  openAddModal,\r\n  openEditModal\r\n}) => {\r\n\r\n  const days = useMemo(() => {\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    const daysInMonth = lastDay.getDate();\r\n    const startingDayOfWeek = firstDay.getDay();\r\n    const daysArray = [];\r\n    \r\n    // Add blank days for the start of the month\r\n    for (let i = 0; i < startingDayOfWeek; i++) {\r\n      daysArray.push(null);\r\n    }\r\n    \r\n    // Add days of the month\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      daysArray.push(new Date(year, month, day));\r\n    }\r\n\r\n    // Add blank days to complete the grid\r\n    while (daysArray.length % 7 !== 0) {\r\n      daysArray.push(null);\r\n    }\r\n\r\n    return daysArray;\r\n  }, [currentDate]);\r\n\r\n  const getSchedulesForDate = useCallback((date) => {\r\n    if (!date) return [];\r\n    const dateStr = date.toISOString().split('T')[0];\r\n    return schedules.filter(schedule => schedule.duty_date === dateStr);\r\n  }, [schedules]);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 h-full flex flex-col\">\r\n      <CalendarHeader \r\n        currentDate={currentDate}\r\n        navigateMonth={navigateMonth}\r\n        goToToday={goToToday}\r\n        openAddModal={openAddModal}\r\n      />\r\n      <CalendarFilters \r\n        filters={filters}\r\n        setFilters={setFilters}\r\n        units={units}\r\n      />\r\n      <div className=\"flex-grow mt-4 flex flex-col\">\r\n        <div className=\"grid grid-cols-7 border-t border-l border-slate-200\">\r\n          {['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'].map(day => (\r\n            <div key={day} className=\"p-3 text-center text-xs font-semibold text-slate-500 border-b border-r border-slate-200 bg-slate-50\">\r\n              {day}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"grid grid-cols-7 grid-rows-6 flex-grow border-l border-slate-200\">\r\n          {days.map((date, index) => (\r\n            <CalendarDayCell\r\n              key={date ? date.toISOString() : `empty-${index}`}\r\n              date={date}\r\n              holidays={holidays}\r\n              schedules={getSchedulesForDate(date)}\r\n              onAdd={() => openAddModal(date)}\r\n              onEdit={openEditModal}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst CalendarHeader = memo(({ currentDate, navigateMonth, goToToday, openAddModal }) => (\r\n  <div className=\"flex items-center justify-between mb-4\">\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button onClick={() => navigateMonth(-1)} className=\"p-2 text-slate-500 hover:bg-slate-100 rounded-full\">\r\n        <ChevronLeft className=\"w-5 h-5\" />\r\n      </button>\r\n      <h2 className=\"text-xl font-semibold text-slate-800 text-center w-48\">\r\n        {currentDate.toLocaleDateString('th-TH', { month: 'long', year: 'numeric' })}\r\n      </h2>\r\n      <button onClick={() => navigateMonth(1)} className=\"p-2 text-slate-500 hover:bg-slate-100 rounded-full\">\r\n        <ChevronRight className=\"w-5 h-5\" />\r\n      </button>\r\n    </div>\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button onClick={goToToday} className=\"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 bg-indigo-50 hover:bg-indigo-100 rounded-lg\">\r\n        วันนี้\r\n      </button>\r\n      <button\r\n        onClick={() => openAddModal()}\r\n        className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\"\r\n      >\r\n        <Plus className=\"w-4 h-4 mr-2\" />\r\n        เพิ่มเวร\r\n      </button>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nconst CalendarFilters = memo(({ filters, setFilters, units }) => (\r\n  <div className=\"flex items-center space-x-4\">\r\n    <div className=\"relative flex-1\">\r\n      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"ค้นหาเจ้าหน้าที่...\"\r\n        value={filters.officer}\r\n        onChange={(e) => setFilters(prev => ({ ...prev, officer: e.target.value }))}\r\n        className=\"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n      />\r\n    </div>\r\n    <div className=\"relative\">\r\n      <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n      <select\r\n        value={filters.unit}\r\n        onChange={(e) => setFilters(prev => ({ ...prev, unit: e.target.value }))}\r\n        className=\"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n      >\r\n        <option value=\"\">ทุกส่วนงาน</option>\r\n        {Array.isArray(units) && units.map(unit => (\r\n          <option key={unit.id} value={unit.id}>{unit.unit_name}</option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nconst CalendarDayCell = memo(({ date, holidays, schedules, onAdd, onEdit }) => {\r\n  if (!date) return <div className=\"border-b border-r border-slate-200 bg-slate-50/50\"></div>;\r\n\r\n  const today = isToday(date);\r\n  const holiday = isHoliday(date, holidays);\r\n\r\n  return (\r\n    <div className=\"relative p-2 border-b border-r border-slate-200 flex flex-col group\">\r\n      <div className=\"flex items-center space-x-2 mb-2\">\r\n        <span className={`w-7 h-7 flex items-center justify-center rounded-full text-sm font-semibold ${today ? 'bg-indigo-600 text-white' : holiday ? 'text-red-600' : 'text-slate-700'}`}>\r\n          {date.getDate()}\r\n        </span>\r\n        {holiday && !today && <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>}\r\n      </div>\r\n      <div className=\"flex-1 space-y-1 overflow-y-auto\">\r\n        {schedules.map(schedule => <ScheduleItem key={schedule.id} schedule={schedule} onEdit={onEdit} />)}\r\n      </div>\r\n      <button onClick={onAdd} className=\"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-400 rounded-full opacity-0 group-hover:opacity-100 hover:bg-indigo-100 hover:text-indigo-600 transition-opacity\">\r\n        <Plus className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ScheduleItem = memo(({ schedule, onEdit }) => {\r\n  const shiftColors = {\r\n    1: 'border-yellow-500', // เวรปกติ\r\n    3: 'border-orange-500', // เวรวันหยุด\r\n    2: 'border-indigo-500', // เวรกลางคืน\r\n    4: 'border-indigo-500', // เวรกลางคืน\r\n    default: 'border-slate-400'\r\n  };\r\n  const borderColor = shiftColors[schedule.shift_type_id] || shiftColors.default;\r\n\r\n  return (\r\n    <div \r\n      onClick={() => onEdit(schedule)}\r\n      className={`p-1.5 rounded-md bg-slate-50 hover:bg-slate-100 cursor-pointer border-l-4 ${borderColor}`}\r\n    >\r\n      <p className=\"text-xs font-semibold text-slate-800 truncate\">{schedule.shift_type_name}</p>\r\n      <p className=\"text-xs text-slate-600 truncate\">{schedule.officer_names}</p>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst DocumentManagementView = () => {\r\n  const documents = [\r\n    {\r\n      title: \"เวรในเวลาราชการ\",\r\n      description: \"จัดทำเอกสารสำหรับเวรปกติ\",\r\n      icon: Sun,\r\n      color: \"bg-yellow-500\",\r\n      action: () => alert('Creating In-hours Document...')\r\n    },\r\n    {\r\n      title: \"เวรนอกเวลา (กลางวัน)\",\r\n      description: \"สำหรับเวรวันหยุดและนักขัตฤกษ์\",\r\n      icon: CloudSun,\r\n      color: \"bg-orange-500\",\r\n      action: () => alert('Creating Off-hours (Day) Document...')\r\n    },\r\n    {\r\n      title: \"เวรนอกเวลา (กลางคืน)\",\r\n      description: \"สำหรับเวรช่วงเวลากลางคืน\",\r\n      icon: Moon,\r\n      color: \"bg-indigo-600\",\r\n      action: () => alert('Creating Off-hours (Night) Document...')\r\n    },\r\n    {\r\n      title: \"ขออนุญาตพกพาอาวุธ\",\r\n      description: \"จัดทำเอกสารขออนุญาตพกพาอาวุธปืน\",\r\n      icon: Target,\r\n      color: \"bg-red-600\",\r\n      action: () => alert('Creating Firearm Permit Document...')\r\n    },\r\n    {\r\n      title: \"รายงานประจำสัปดาห์\",\r\n      description: \"สรุปผลการปฏิบัติงานรายสัปดาห์\",\r\n      icon: FileText,\r\n      color: \"bg-green-600\",\r\n      action: () => alert('Creating Weekly Report...')\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"p-6 bg-slate-50 rounded-2xl\">\r\n      <div className=\"text-center mb-12\">\r\n        <h2 className=\"text-2xl font-bold text-slate-800\">เลือกประเภทเอกสาร</h2>\r\n        <p className=\"text-slate-500 mt-2\">เลือกเอกสารที่ต้องการจัดทำจากรายการด้านล่าง</p>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-8\">\r\n        {documents.map((doc, index) => (\r\n          <button \r\n            key={index} \r\n            onClick={doc.action}\r\n            className=\"group relative flex flex-col items-center justify-center text-center p-6 bg-white rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-300 ease-in-out border-b-4 border-transparent hover:border-indigo-500\"\r\n          >\r\n            <div className={`absolute -top-8 flex items-center justify-center w-20 h-20 rounded-full ${doc.color} shadow-lg group-hover:scale-110 transition-transform duration-300`}>\r\n              <doc.icon className=\"w-10 h-10 text-white\" />\r\n            </div>\r\n            <div className=\"mt-12\">\r\n              <h3 className=\"text-lg font-semibold text-slate-900 mb-2\">{doc.title}</h3>\r\n              <p className=\"text-sm text-slate-500\">{doc.description}</p>\r\n            </div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ShiftWorkPage = () => {\r\n  const [activeTab, setActiveTab] = useState('shifts');\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [shiftTypes, setShiftTypes] = useState([]);\r\n  const [units, setUnits] = useState([]);\r\n  const [holidays, setHolidays] = useState([]);\r\n  const [formData, setFormData] = useState({ duty_date: '', shift_type_id: '', unit_id: '', officer_ids: [], notes: '' });\r\n  const [filters, setFilters] = useState({ unit: '', officer: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\r\n  const [selectedUnits, setSelectedUnits] = useState([]);\r\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\r\n  const [showOfficerList, setShowOfficerList] = useState(false);\r\n  const [officerSearchTerm, setOfficerSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadHolidaysByYear = async () => {\r\n      try {\r\n        const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays&year=${currentDate.getFullYear()}`);\r\n        const result = await response.json();\r\n        if (!result.success) throw new Error(result.message);\r\n        setHolidays(result.data);\r\n      } catch (error) {\r\n        console.error(\"ล้มเหลวในการดึงข้อมูลวันหยุด:\", error);\r\n      }\r\n    };\r\n\r\n    loadHolidaysByYear();\r\n  }, [currentDate]);\r\n  useEffect(() => {\r\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\r\n      const officersInSelectedUnits = officers\r\n        .filter(officer => officer.unit_id && selectedUnits.includes(officer.unit_id))\r\n        .map(officer => officer.id);\r\n\r\n      setSelectedOfficers(officersInSelectedUnits);\r\n    } else {\r\n      setSelectedOfficers([]);\r\n    }\r\n  }, [selectedUnits, officers]);\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\r\n  const handleUnitSelect = (unitId) => {\r\n    setSelectedUnits(prev =>\r\n      prev.includes(unitId)\r\n        ? prev.filter(id => id !== unitId)\r\n        : [...prev, unitId]\r\n    );\r\n  };\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกเจ้าหน้าที่ ---\r\n  const handleOfficerAdd = (officerId) => {\r\n    setSelectedOfficers(prev => [...prev, officerId]);\r\n  };\r\n\r\n  const handleOfficerRemove = (officerId) => {\r\n    setSelectedOfficers(prev => prev.filter(id => id !== officerId));\r\n  };\r\n\r\n  // --- ฟังก์ชันกรองเจ้าหน้าที่ที่ยังไม่ได้เลือก ---\r\n  const getAvailableOfficers = () => {\r\n    if (!Array.isArray(officers)) return [];\r\n\r\n    return officers.filter(officer =>\r\n      officer.unit_id !== null &&\r\n      (selectedUnits.length === 0 || selectedUnits.includes(officer.unit_id)) &&\r\n      !selectedOfficers.includes(officer.id) &&\r\n      (officerSearchTerm === '' ||\r\n        `${officer.firstname} ${officer.lastname}`.toLowerCase().includes(officerSearchTerm.toLowerCase()))\r\n    );\r\n  };\r\n\r\n  // --- ฟังก์ชันหาข้อมูลเจ้าหน้าที่ ---\r\n  const getOfficerById = (officerId) => {\r\n    return officers.find(o => o.id === officerId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadSchedules();\r\n  }, [currentDate]);\r\n\r\n  const loadInitialData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadOfficers(),\r\n        loadShiftTypes(),\r\n        loadUnits(),\r\n        loadHolidays(),\r\n        loadSchedules()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error.message, error.stack);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadSchedules = async () => {\r\n    try {\r\n      const month = currentDate.getMonth() + 1;\r\n      const year = currentDate.getFullYear();\r\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_schedules&month=${month}&year=${year}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setSchedules(data.data);\r\n      } else {\r\n        console.error('Failed to fetch schedules:', data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading schedules:', error.message, error.stack);\r\n    }\r\n  };\r\n\r\n  const loadOfficers = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.OFFICERS_API}?action=get_all_officers`);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data && data.success && Array.isArray(data.data)) {\r\n        setOfficers(data.data);\r\n      } else {\r\n        console.error('Failed to load officers:', data);\r\n        setOfficers([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading officers:', error);\r\n      setOfficers([]);\r\n    }\r\n  };\r\n\r\n  const loadShiftTypes = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_shifttypes`);\r\n      const data = await response.json();\r\n      if (Array.isArray(data)) {\r\n        setShiftTypes(data);\r\n      } else {\r\n        setShiftTypes([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading shift types:', error);\r\n      setShiftTypes([]);\r\n    }\r\n  };\r\n\r\n  const loadUnits = async () => {\r\n      try {\r\n          const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_units`);\r\n    const data = await response.json();\r\n          if (Array.isArray(data)) {\r\n              setUnits(data);\r\n          } else {\r\n              setUnits([]);\r\n          }\r\n      } catch (error) {\r\n          console.error('Error loading units:', error);\r\n          setUnits([]);\r\n      }\r\n  };\r\n\r\n  const loadHolidays = async () => {\r\n      try {\r\n          const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays`);\r\n    const data = await response.json();\r\n          if (Array.isArray(data)) {\r\n              setHolidays(data);\r\n          } else {\r\n              setHolidays([]);\r\n          }\r\n      } catch (error) {\r\n          console.error('Error loading holidays:', error);\r\n          setHolidays([]);\r\n      }\r\n  };\r\n\r\n  const navigateMonth = (direction) => {\r\n    setCurrentDate(prev => {\r\n      const newDate = new Date(prev);\r\n      newDate.setMonth(prev.getMonth() + direction);\r\n      return newDate;\r\n    });\r\n  };\r\n\r\n  const goToToday = () => {\r\n    setCurrentDate(new Date());\r\n  };\r\n\r\n  // --- แก้ไข openAddModal ---\r\n  const openAddModal = (date = null) => {\r\n    const dateObj = date || new Date();\r\n    const isHolidayDate = isHoliday(dateObj, holidays);\r\n\r\n    const suggestedType = getShiftTypeByPeriod('day', isHolidayDate, shiftTypes);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedOfficers([]);\r\n    setFormData({\r\n      duty_date: date ? date.toISOString().split('T')[0] : '',\r\n      shift_type_id: suggestedType?.id || '',\r\n      unit_id: '',\r\n      officer_ids: [],\r\n      notes: ''\r\n    });\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const openEditModal = (schedule) => {\r\n    setSelectedSchedule(schedule);\r\n    setFormData({\r\n      duty_date: schedule.duty_date,\r\n      shift_type_id: schedule.shift_type_id,\r\n      unit_id: schedule.unit_id || '',\r\n      officer_ids: schedule.officer_ids || [],\r\n      notes: schedule.notes || ''\r\n    });\r\n    setSelectedOfficers(schedule.officer_ids || []);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const closeModals = () => {\r\n    setShowAddModal(false);\r\n    setShowEditModal(false);\r\n    setSelectedSchedule(null);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedOfficers([]);\r\n    setShowOfficerList(false);\r\n    setOfficerSearchTerm('');\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      // อัปเดต shift_type_id และ officer_ids ตาม UI ใหม่\r\n      const dateObj = new Date(formData.duty_date + 'T00:00:00');\r\n      const isHolidayDate = isHoliday(dateObj, holidays);\r\n      const shiftType = getShiftTypeByPeriod(selectedShiftPeriod, isHolidayDate, shiftTypes);\r\n\r\n      const payload = {\r\n        action: selectedSchedule ? 'update_schedule' : 'create_schedule',\r\n        ...formData,\r\n        shift_type_id: shiftType?.id || formData.shift_type_id,\r\n        officer_ids: selectedOfficers,\r\n        ...(selectedSchedule && { schedule_id: selectedSchedule.id })\r\n      };\r\n\r\n      const response = await fetch(CONFIG.SCHEDULES_API, {\r\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const result = await response.json();\r\n      if (!result.success) throw new Error(result.message);\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error saving schedule:', error);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\r\n    setSaving(true);\r\n    try {\r\n      const payload = { action: 'delete_schedule', schedule_id: selectedSchedule.id };\r\n      const response = await fetch(CONFIG.SCHEDULES_API, {\r\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const result = await response.json();\r\n      if (!result.success) throw new Error(result.message);\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error deleting schedule:', error);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const filteredSchedules = useMemo(() => {\r\n    return schedules.filter(schedule => {\r\n      const unitMatch = !filters.unit || schedule.unit_id === parseInt(filters.unit);\r\n      const officerMatch = !filters.officer ||\r\n        (schedule.officer_names && schedule.officer_names.toLowerCase().includes(filters.officer.toLowerCase()));\r\n      return unitMatch && officerMatch;\r\n    });\r\n  }, [schedules, filters]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <div className=\"border-b border-slate-200\">\r\n        <nav className=\"flex space-x-4 px-4\">\r\n          <button\r\n            onClick={() => setActiveTab('shifts')}\r\n            className={`flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'shifts' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'\r\n              }`}\r\n          >\r\n            <Shield className=\"w-4 h-4\" />\r\n            <span>เวรรักษาการ</span>\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('documents')}\r\n                className={`flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${\r\n                    activeTab === 'documents' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'\r\n              }`}\r\n          >\r\n            <File className=\"w-4 h-4\" />\r\n            <span>จัดการเอกสาร</span>\r\n          </button>\r\n        </nav>\r\n      </div>\r\n\r\n      <div className=\"flex-grow p-4 bg-slate-50/50 overflow-y-auto\">\r\n        {activeTab === 'shifts' && (\r\n          <ShiftCalendarView\r\n            currentDate={currentDate}\r\n            schedules={filteredSchedules}\r\n            officers={officers}\r\n            shiftTypes={shiftTypes}\r\n            units={units}\r\n            holidays={holidays}\r\n            filters={filters}\r\n            setFilters={setFilters}\r\n            navigateMonth={navigateMonth}\r\n            goToToday={goToToday}\r\n            openAddModal={openAddModal}\r\n            openEditModal={openEditModal}\r\n          />\r\n        )}\r\n        {activeTab === 'documents' && <DocumentManagementView />}\r\n      </div>\r\n\r\n      {(showAddModal || showEditModal) && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                {showEditModal ? 'แก้ไขตารางเวร' : 'เพิ่มตารางเวรใหม่'}\r\n              </h3>\r\n              {formData.duty_date && (\r\n                <p className=\"text-sm text-gray-600 mt-1\">\r\n                  วันที่ {new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH')}\r\n                  {isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) &&\r\n                    <span className=\"ml-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full\">วันหยุด</span>\r\n                  }\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              {/* วันที่ */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">วันที่</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={formData.duty_date}\r\n                  onChange={(e) => {\r\n                    handleInputChange('duty_date', e.target.value);\r\n                    // อัปเดต shift type อัตโนมัติเมื่อเปลี่ยนวันที่\r\n                    const newDate = new Date(e.target.value + 'T00:00:00');\r\n                    const isHol = isHoliday(newDate, holidays);\r\n                    const suggestedType = getShiftTypeByPeriod(selectedShiftPeriod, isHol, shiftTypes);\r\n                    setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                  }}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              {/* เลือกช่วงเวร */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">ช่วงเวร</label>\r\n                <div className=\"flex space-x-3\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedShiftPeriod('day');\r\n                      const isHol = formData.duty_date ? isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) : false;\r\n                                            const suggestedType = getShiftTypeByPeriod('day', isHol, shiftTypes);\r\n                                            setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                    }}\r\n                    className={`flex items-center px-4 py-2 rounded-lg border ${\r\n                        selectedShiftPeriod === 'day' \r\n                        ? 'bg-yellow-50 border-yellow-300 text-yellow-700'\r\n                        : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Sun className=\"w-4 h-4 mr-2\" />\r\n                    กลางวัน\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedShiftPeriod('night');\r\n                      const suggestedType = getShiftTypeByPeriod('night', false, shiftTypes);\r\n                      setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                    }}\r\n                    className={`flex items-center px-4 py-2 rounded-lg border ${\r\n                        selectedShiftPeriod === 'night' \r\n                        ? 'bg-indigo-50 border-indigo-300 text-indigo-700'\r\n                        : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Moon className=\"w-4 h-4 mr-2\" />\r\n                    กลางคืน\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* เลือกส่วนงาน (เช็คลิส) */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">ส่วนงาน</label>\r\n                <div className=\"border border-gray-300 rounded-lg p-4 max-h-40 overflow-y-auto\">\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    {Array.isArray(units) && units.map(unit => (\r\n                      <label key={unit.id} className=\"flex items-center py-1\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                                    checked={selectedUnits.includes(unit.id)}\r\n                                    onChange={() => handleUnitSelect(unit.id)}\r\n                                    className=\"h-4 w-4 text-indigo-600\"\r\n                        />\r\n                        <span className=\"ml-2 text-sm text-gray-900\">{unit.unit_name}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* เจ้าหน้าที่ที่เลือกแล้ว */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">เจ้าหน้าที่ที่เลือก</label>\r\n                <div className=\"border border-gray-300 rounded-lg p-3 min-h-[100px]\">\r\n                  {selectedOfficers.length === 0 ? (\r\n                    <p className=\"text-gray-500 text-sm\">ยังไม่ได้เลือกเจ้าหน้าที่</p>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      {selectedOfficers.map(officerId => {\r\n                        const officer = getOfficerById(officerId);\r\n                        return officer ? (\r\n                          <div key={officerId} className=\"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg\">\r\n                            <span className=\"text-sm\">{officer.prefix} {officer.firstname} {officer.lastname}</span>\r\n                            <button\r\n                              onClick={() => handleOfficerRemove(officerId)}\r\n                              className=\"text-red-600 hover:text-red-800\"\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        ) : null;\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* เพิ่มเจ้าหน้าที่ */}\r\n              <div>\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <label className=\"block text-sm font-medium text-gray-700\">จัดการเจ้าหน้าที่</label>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowOfficerList(!showOfficerList)}\r\n                    className=\"text-sm text-indigo-600 hover:text-indigo-800\"\r\n                  >\r\n                    {showOfficerList ? 'ซ่อน' : 'เพิ่มเจ้าหน้าที่'}\r\n                  </button>\r\n                </div>\r\n\r\n                {showOfficerList && (\r\n                  <div className=\"border border-gray-300 rounded-lg p-3\">\r\n                    {/* ช่องค้นหา */}\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Search className=\"w-4 h-4 text-gray-500\" />\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"ค้นหาชื่อเจ้าหน้าที่...\"\r\n                          value={officerSearchTerm}\r\n                          onChange={(e) => setOfficerSearchTerm(e.target.value)}\r\n                          className=\"flex-1 border border-gray-300 rounded px-2 py-1 text-sm\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* รายชื่อเจ้าหน้าที่ */}\r\n                    <div className=\"max-h-40 overflow-y-auto\">\r\n                      {getAvailableOfficers().length === 0 ? (\r\n                        <p className=\"text-gray-500 text-sm\">\r\n                          {selectedUnits.length === 0 ? 'กรุณาเลือกส่วนงานก่อน' :\r\n                            officerSearchTerm ? 'ไม่พบเจ้าหน้าที่ที่ค้นหา' : 'ไม่มีเจ้าหน้าที่ที่สามารถเลือกได้'}\r\n                                        </p>\r\n                      ) : (\r\n                        <div className=\"space-y-1\">\r\n                          {getAvailableOfficers().map(officer => (\r\n                            <div key={officer.id} className=\"flex items-center justify-between py-2 hover:bg-gray-50 px-2 rounded\">\r\n                              <span className=\"text-sm\">{officer.prefix} {officer.firstname} {officer.lastname}</span>\r\n                              <button\r\n                                onClick={() => {\r\n                                  handleOfficerAdd(officer.id);\r\n                                  setOfficerSearchTerm(''); // ล้างค่าค้นหาหลังเพิ่ม\r\n                                }}\r\n                                className=\"text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50\"\r\n                              >\r\n                                <Plus className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* หมายเหตุ */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">หมายเหตุ</label>\r\n                <textarea\r\n                  value={formData.notes}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"รายละเอียดเพิ่มเติม...\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6 border-t bg-gray-50 flex justify-between\">\r\n              <div>\r\n                {showEditModal && (\r\n                  <button\r\n                    onClick={handleDelete}\r\n                    disabled={saving}\r\n                    className=\"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4 mr-2\" />ลบเวร\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={closeModals}\r\n                  disabled={saving}\r\n                  className=\"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50\"\r\n                >\r\n                  ยกเลิก\r\n                </button>\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={saving || selectedOfficers.length === 0}\r\n                  className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {saving ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                      กำลังบันทึก...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Save className=\"w-4 h-4 mr-2\" />บันทึก\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Management View Component - เลือกการ์ดส่วนงานแล้วจัดการบุคลากร\r\nconst UnitManagementView = ({\r\n  dutyUnits,\r\n  unitStructures,\r\n  onEdit,\r\n  onDelete,\r\n  onAdd,\r\n  onEditDutyUnit,\r\n  onDeleteDutyUnit,\r\n  onAddDutyUnit,\r\n  getRoleIcon,\r\n  getRoleLabel,\r\n  getRoleBadgeClass\r\n}) => {\r\n  const [selectedUnit, setSelectedUnit] = useState(null);\r\n  const [isPersonnelModalOpen, setIsPersonnelModalOpen] = useState(false);\r\n  const [personnelAction, setPersonnelAction] = useState(''); // 'add', 'setSupervisor'\r\n\r\n  // Get unit statistics\r\n  const getUnitStats = (unitCode) => {\r\n    const unitPersonnel = unitStructures.filter(item => item.unit_code === unitCode);\r\n    const supervisor = unitPersonnel.find(item => item.role === 'supervisor');\r\n    const members = unitPersonnel.filter(item => item.role === 'member');\r\n    const director = unitPersonnel.find(item => item.role === 'director');\r\n    \r\n    return {\r\n      total: unitPersonnel.length,\r\n      supervisor,\r\n      members,\r\n      director,\r\n      hasSupervisor: !!supervisor,\r\n      hasDirector: !!director\r\n    };\r\n  };\r\n\r\n  const handleUnitSelect = (unit) => {\r\n    setSelectedUnit(unit);\r\n  };\r\n\r\n  const handleAddPersonnel = () => {\r\n    if (!selectedUnit) return;\r\n    \r\n    const stats = getUnitStats(selectedUnit.unit_code);\r\n    const nextSeniorityOrder = stats.total + 1;\r\n    \r\n    // เปิด modal พร้อมกำหนดค่าเริ่มต้น\r\n    onAdd({\r\n      unit_code: selectedUnit.unit_code,\r\n      role: selectedUnit.unit_code === 'CS08' ? 'director' : 'member',\r\n      seniority_order: nextSeniorityOrder\r\n    });\r\n  };\r\n\r\n  const handleSetSupervisor = () => {\r\n    if (!selectedUnit) return;\r\n    \r\n    // เปิด modal สำหรับกำหนดหัวหน้าส่วน\r\n    onAdd({\r\n      unit_code: selectedUnit.unit_code,\r\n      role: 'supervisor',\r\n      seniority_order: 1\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      {/* Unit Cards */}\r\n      <div className=\"lg:col-span-2\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800\">เลือกส่วนงาน</h2>\r\n          <button\r\n            onClick={() => onAddDutyUnit()}\r\n            className=\"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\"\r\n          >\r\n            <Plus className=\"w-4 h-4 mr-2\" />\r\n            เพิ่มส่วนงาน\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {dutyUnits.map((unit) => {\r\n            const stats = getUnitStats(unit.unit_code);\r\n            const isSelected = selectedUnit?.unit_code === unit.unit_code;\r\n            const isDirector = unit.unit_code === 'CS08';\r\n            \r\n            return (\r\n              <div\r\n                key={unit.unit_code}\r\n                onClick={() => handleUnitSelect(unit)}\r\n                className={`relative p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n                  isSelected \r\n                    ? 'border-indigo-500 bg-indigo-50' \r\n                    : 'border-slate-200 hover:border-slate-300'\r\n                }`}\r\n              >\r\n                {/* Unit Header */}\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-slate-800\">{unit.unit_code.toUpperCase()}</h3>\r\n                    <p className=\"text-sm text-slate-600\">{unit.unit_name}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onEditDutyUnit(unit);\r\n                      }}\r\n                      className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                    >\r\n                      <Edit className=\"w-4 h-4\" />\r\n                    </button>\r\n                    {!isDirector && (\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          onDeleteDutyUnit(unit);\r\n                        }}\r\n                        className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Unit Status */}\r\n                <div className=\"space-y-2 mb-3\">\r\n                  {isDirector ? (\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Star className=\"w-4 h-4 text-yellow-500\" />\r\n                      <span className=\"text-sm text-slate-600\">ผู้อำนวยการศูนย์</span>\r\n                      {stats.hasDirector && (\r\n                        <span className=\"text-sm text-green-600 font-medium\">\r\n                          (มีแล้ว)\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Shield className=\"w-4 h-4 text-blue-500\" />\r\n                      <span className=\"text-sm text-slate-600\">หัวหน้าส่วน:</span>\r\n                      {stats.hasSupervisor ? (\r\n                        <span className=\"text-sm text-green-600 font-medium\">\r\n                          {stats.supervisor?.full_name}\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"text-sm text-red-500\">ยังไม่กำหนด</span>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Users className=\"w-4 h-4 text-slate-400\" />\r\n                    <span className=\"text-sm text-slate-600\">\r\n                      บุคลากร: {stats.total} คน\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"pt-2 border-t border-slate-200\">\r\n                  <div className=\"flex justify-between text-xs\">\r\n                    <span className=\"text-slate-500\">คลิกเพื่อจัดการ</span>\r\n                    {isSelected && (\r\n                      <span className=\"text-indigo-600 font-medium\">เลือกแล้ว</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Unit Management Panel */}\r\n      <div className=\"lg:col-span-1\">\r\n        {selectedUnit ? (\r\n          <div className=\"bg-slate-50 rounded-lg p-4\">\r\n            <h3 className=\"font-semibold text-slate-800 mb-4\">\r\n              จัดการ {selectedUnit.unit_code.toUpperCase()}\r\n            </h3>\r\n            \r\n            <div className=\"space-y-3\">\r\n              {selectedUnit.unit_code === 'CS08' ? (\r\n                // Director Unit (CS08) - สามารถมีได้เพียง 1 คน\r\n                <>\r\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Star className=\"w-4 h-4 text-yellow-600\" />\r\n                      <span className=\"text-sm font-medium text-yellow-800\">ผู้อำนวยการศูนย์</span>\r\n                    </div>\r\n                    <p className=\"text-xs text-yellow-700\">\r\n                      หน่วยงานนี้สามารถมีได้เพียง 1 คนเท่านั้น\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <button\r\n                    onClick={handleAddPersonnel}\r\n                    className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700\"\r\n                  >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    <span>กำหนดผู้อำนวยการ</span>\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                // Regular Units - สามารถมีได้หลายคน\r\n                <>\r\n                  <button\r\n                    onClick={handleSetSupervisor}\r\n                    disabled={getUnitStats(selectedUnit.unit_code).hasSupervisor}\r\n                    className={`w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg ${\r\n                      getUnitStats(selectedUnit.unit_code).hasSupervisor\r\n                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                        : 'bg-blue-600 text-white hover:bg-blue-700'\r\n                    }`}\r\n                  >\r\n                    <Shield className=\"w-4 h-4\" />\r\n                    <span>\r\n                      {getUnitStats(selectedUnit.unit_code).hasSupervisor \r\n                        ? 'มีหัวหน้าส่วนแล้ว' \r\n                        : 'กำหนดหัวหน้าส่วน'\r\n                      }\r\n                    </span>\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={handleAddPersonnel}\r\n                    className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\"\r\n                  >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    <span>เพิ่มเจ้าหน้าที่</span>\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Current Personnel */}\r\n            <div className=\"mt-6\">\r\n              <h4 className=\"text-sm font-medium text-slate-700 mb-3\">บุคลากรปัจจุบัน</h4>\r\n              <div className=\"space-y-2\">\r\n                {unitStructures\r\n                  .filter(item => item.unit_code === selectedUnit.unit_code)\r\n                  .sort((a, b) => {\r\n                    // เรียงลำดับ: director > supervisor > member\r\n                    if (a.role === 'director') return -1;\r\n                    if (b.role === 'director') return 1;\r\n                    if (a.role === 'supervisor') return -1;\r\n                    if (b.role === 'supervisor') return 1;\r\n                    return a.seniority_order - b.seniority_order;\r\n                  })\r\n                  .map((person) => (\r\n                    <div key={person.id} className=\"flex items-center justify-between p-2 bg-white rounded border\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        {getRoleIcon(person.role)}\r\n                        <div>\r\n                          <p className=\"text-sm font-medium text-slate-800\">\r\n                            {person.full_name || `ตำแหน่งที่ ${person.position_number}`}\r\n                          </p>\r\n                          <p className=\"text-xs text-slate-500\">\r\n                            {getRoleLabel(person.role)} • ลำดับ {person.seniority_order}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <button\r\n                          onClick={() => onEdit(person)}\r\n                          className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                        >\r\n                          <Edit className=\"w-3 h-3\" />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => onDelete(person)}\r\n                          className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                        >\r\n                          <Trash2 className=\"w-3 h-3\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                \r\n                {unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).length === 0 && (\r\n                  <div className=\"text-center py-4 text-slate-500\">\r\n                    <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n                    <p className=\"text-sm\">ยังไม่มีบุคลากร</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-slate-50 rounded-lg p-8 text-center\">\r\n            <Building className=\"w-12 h-12 mx-auto mb-4 text-slate-400\" />\r\n            <h3 className=\"text-lg font-medium text-slate-600 mb-2\">เลือกส่วนงาน</h3>\r\n            <p className=\"text-sm text-slate-500\">\r\n              เลือกส่วนงานจากรายการด้านซ้ายเพื่อจัดการบุคลากร\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftWorkPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}