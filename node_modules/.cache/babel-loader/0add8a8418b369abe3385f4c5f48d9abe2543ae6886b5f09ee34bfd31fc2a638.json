{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apiwa\\\\Documents\\\\GitHub\\\\C\\\\src\\\\pages\\\\OnDutyPage.js\",\n  _s = $RefreshSig$();\n// src/pages/OnDutyPage.js\nimport React, { useState, useEffect, useCallback, memo } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, GeoJSON, Circle } from 'react-leaflet';\nimport { ArrowLeft, Siren, Shield, ShieldCheck, ShieldX, MapPin, Map as MapIcon, X } from 'lucide-react';\nimport L from 'leaflet';\nimport ReactDOMServer from 'react-dom/server';\nimport { useAlert } from '../components/common/AlertSystem';\n\n// --- Helper Functions ---\n\n// Haversine distance formula to calculate distance between two lat/lon points in meters\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getDistance = (pos1, pos2) => {\n  const R = 6371e3; // metres\n  const φ1 = pos1.lat * Math.PI / 180; // φ, λ in radians\n  const φ2 = pos2.lat * Math.PI / 180;\n  const Δφ = (pos2.lat - pos1.lat) * Math.PI / 180;\n  const Δλ = (pos2.lng - pos1.lng) * Math.PI / 180;\n  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c; // in metres\n};\n\n// --- Custom Icon Components ---\n\nconst createIcon = (IconComponent, colorClass) => {\n  return L.divIcon({\n    html: ReactDOMServer.renderToString(/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-2 rounded-full shadow-lg ${colorClass}`,\n      children: /*#__PURE__*/_jsxDEV(IconComponent, {\n        className: \"w-6 h-6 text-white\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)),\n    className: 'bg-transparent border-0',\n    iconSize: [40, 40],\n    iconAnchor: [20, 20]\n  });\n};\nconst icons = {\n  checked: createIcon(ShieldCheck, 'bg-green-500'),\n  unchecked: createIcon(Shield, 'bg-blue-500'),\n  too_far: createIcon(ShieldX, 'bg-slate-400'),\n  user: L.divIcon({\n    html: ReactDOMServer.renderToString(/*#__PURE__*/_jsxDEV(MapPin, {\n      className: \"w-8 h-8 text-red-600\",\n      fill: \"#dc2626\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this)),\n    className: 'bg-transparent border-0',\n    iconSize: [32, 32],\n    iconAnchor: [16, 32]\n  })\n};\n\n// --- Mock Data ---\n\nconst initialCheckpoints = [{\n  id: 1,\n  name: 'จุดตรวจ 1',\n  position: {\n    lat: 13.815525,\n    lng: 100.574563\n  }\n}, {\n  id: 2,\n  name: 'จุดตรวจ 2',\n  position: {\n    lat: 13.813326,\n    lng: 100.574470\n  }\n}, {\n  id: 3,\n  name: 'จุดตรวจ 3',\n  position: {\n    lat: 13.812038,\n    lng: 100.574420\n  }\n}, {\n  id: 4,\n  name: 'จุดตรวจ 4',\n  position: {\n    lat: 13.811887,\n    lng: 100.574177\n  }\n}, {\n  id: 5,\n  name: 'จุดตรวจ 5',\n  position: {\n    lat: 13.810476,\n    lng: 100.574670\n  }\n}, {\n  id: 6,\n  name: 'จุดตรวจ 6',\n  position: {\n    lat: 13.812550,\n    lng: 100.574837\n  }\n}, {\n  id: 7,\n  name: 'จุดตรวจ 7',\n  position: {\n    lat: 13.815087,\n    lng: 100.575076\n  }\n}, {\n  id: 8,\n  name: 'จุดตรวจ 8',\n  position: {\n    lat: 13.816996,\n    lng: 100.574602\n  }\n}];\nconst areaOfResponsibility = {\n  type: \"Feature\",\n  properties: {},\n  geometry: {\n    type: \"Polygon\",\n    coordinates: [[[100.57456389344763, 13.815525173156669], [100.57447044838288, 13.813326697354299], [100.57442015030517, 13.812038032093449], [100.5741773844628, 13.81188700722482], [100.57467050258525, 13.810476209195874], [100.57483740410827, 13.812550042505428], [100.5750763767396, 13.81508797684313], [100.5746022247016, 13.816996013762614], [100.57456389344763, 13.815525173156669] // Close the polygon\n    ]]\n  }\n};\nconst areaStyle = {\n  fillColor: \"#3b82f6\",\n  // A nice, modern blue\n  fillOpacity: 0.15,\n  // Slightly more visible\n  color: \"#2563eb\",\n  // A matching, slightly darker border\n  weight: 2,\n  // Thicker border\n  dashArray: '5, 10' // Dashed line style for a modern look\n};\nconst CHECK_IN_RADIUS = 50; // meters\n\n// --- Sub-components ---\n\nconst CheckpointItem = /*#__PURE__*/memo(_c = ({\n  point,\n  onCheckIn\n}) => {\n  const statusInfo = {\n    checked: {\n      icon: ShieldCheck,\n      color: 'text-green-500',\n      text: 'ตรวจแล้ว'\n    },\n    unchecked: {\n      icon: Shield,\n      color: 'text-blue-500',\n      text: 'ยังไม่ตรวจ (อยู่ในระยะ)'\n    },\n    too_far: {\n      icon: ShieldX,\n      color: 'text-slate-400',\n      text: 'อยู่ไกลเกินไป'\n    }\n  }[point.status];\n  const Icon = statusInfo.icon;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col sm:flex-row sm:items-center gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-4 flex-1\",\n      children: [/*#__PURE__*/_jsxDEV(Icon, {\n        className: `w-8 h-8 flex-shrink-0 ${statusInfo.color}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-bold text-slate-800\",\n          children: point.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `text-sm ${statusInfo.color}`,\n          children: statusInfo.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), point.distance !== null && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-slate-500\",\n          children: [\"\\u0E23\\u0E30\\u0E22\\u0E30\\u0E2B\\u0E48\\u0E32\\u0E07: \", point.distance < 1000 ? `${point.distance} ม.` : `${(point.distance / 1000).toFixed(1)} กม.`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), point.status === 'unchecked' && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onCheckIn(point.id),\n      className: \"w-full sm:w-auto bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200\",\n      children: \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\\u0E01\\u0E32\\u0E23\\u0E15\\u0E23\\u0E27\\u0E08\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n});\n_c2 = CheckpointItem;\nconst MapView = /*#__PURE__*/memo(_c3 = ({\n  userLocation,\n  checkpoints,\n  area,\n  areaStyle,\n  radius,\n  onClose\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"fixed inset-0 bg-black/50 z-[1001] flex items-center justify-center animate-fade-in\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-full bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      center: userLocation || {\n        lat: 13.813,\n        lng: 100.5745\n      },\n      zoom: 17,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\",\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors \\xA9 <a href=\\\"https://carto.com/attributions\\\">CARTO</a>\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GeoJSON, {\n        data: area,\n        style: areaStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), userLocation && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Marker, {\n          position: userLocation,\n          icon: icons.user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Circle, {\n          center: userLocation,\n          radius: radius,\n          pathOptions: {\n            color: 'blue',\n            fillColor: 'blue',\n            fillOpacity: 0.1,\n            weight: 1\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), checkpoints.map(point => /*#__PURE__*/_jsxDEV(Marker, {\n        position: point.position,\n        icon: icons[point.status],\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center font-sans\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-bold\",\n              children: point.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u0E2A\\u0E16\\u0E32\\u0E19\\u0E30: \", {\n                checked: 'ตรวจแล้ว',\n                unchecked: 'ยังไม่ตรวจ',\n                too_far: 'อยู่ไกลเกินไป'\n              }[point.status]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), point.distance !== undefined && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"\\u0E23\\u0E30\\u0E22\\u0E30\\u0E2B\\u0E48\\u0E32\\u0E07: \", point.distance, \" \\u0E40\\u0E21\\u0E15\\u0E23\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 50\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this)\n      }, point.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onClose,\n      className: \"absolute top-4 right-4 bg-white/80 backdrop-blur-md p-2 rounded-full shadow-lg hover:bg-slate-100 z-[1002]\",\n      children: /*#__PURE__*/_jsxDEV(X, {\n        className: \"w-6 h-6 text-slate-700\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 136,\n  columnNumber: 3\n}, this));\n\n// --- Main Component ---\n_c4 = MapView;\nconst OnDutyPage = () => {\n  _s();\n  const {\n    success\n  } = useAlert();\n  const [userLocation, setUserLocation] = useState(null);\n  const [checkpoints, setCheckpoints] = useState(() => initialCheckpoints.map(p => ({\n    ...p,\n    status: 'too_far',\n    distance: null\n  })));\n  const [isMapVisible, setMapVisible] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Update checkpoint statuses based on user location\n  useEffect(() => {\n    if (!userLocation) return;\n    setCheckpoints(prevCheckpoints => prevCheckpoints.map(point => {\n      if (point.status === 'checked') return point; // Don't change already checked points\n\n      const distance = getDistance(userLocation, point.position);\n      const newStatus = distance <= CHECK_IN_RADIUS ? 'unchecked' : 'too_far';\n      return {\n        ...point,\n        status: newStatus,\n        distance: Math.round(distance)\n      };\n    }));\n  }, [userLocation]);\n\n  // Get user's real-time location\n  useEffect(() => {\n    const watchId = navigator.geolocation.watchPosition(position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      setUserLocation({\n        lat: latitude,\n        lng: longitude\n      });\n    }, error => {\n      console.error(\"Geolocation error:\", error);\n      setError(\"ไม่สามารถเข้าถึงตำแหน่งของคุณได้ กรุณาตรวจสอบการตั้งค่าเบราว์เซอร์\");\n      // alert(\"ไม่สามารถเข้าถึงตำแหน่งของคุณได้ กรุณาตรวจสอบการตั้งค่าเบราว์เซอร์\");\n    }, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 0\n    });\n    return () => navigator.geolocation.clearWatch(watchId);\n  }, []);\n  const handleCheckIn = pointId => {\n    setCheckpoints(prev => prev.map(p => p.id === pointId ? {\n      ...p,\n      status: 'checked'\n    } : p));\n  };\n  const handleGoBack = () => window.history.back();\n  const handleSOS = () => success(\"ส่งคำขอความช่วยเหลือฉุกเฉินแล้ว! เจ้าหน้าที่กำลังไปที่ตำแหน่งของคุณ\", \"SOS\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-slate-50 z-[1000] flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-white/80 backdrop-blur-md shadow-sm z-10 flex-shrink-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 border-b border-slate-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleGoBack,\n          className: \"p-2 rounded-full hover:bg-slate-100\",\n          children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n            className: \"w-6 h-6 text-slate-700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold text-slate-800\",\n          children: \"\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E40\\u0E02\\u0E49\\u0E32\\u0E40\\u0E27\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-10\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n      children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md\",\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-bold\",\n          children: \"\\u0E02\\u0E49\\u0E2D\\u0E04\\u0E27\\u0E23\\u0E23\\u0E30\\u0E27\\u0E31\\u0E07\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center p-4 bg-white rounded-xl border border-slate-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold\",\n          children: \"\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E08\\u0E38\\u0E14\\u0E15\\u0E23\\u0E27\\u0E08\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E15\\u0E23\\u0E27\\u0E08\\u0E15\\u0E32\\u0E21\\u0E08\\u0E38\\u0E14\\u0E17\\u0E35\\u0E48\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E43\\u0E2B\\u0E49\\u0E04\\u0E23\\u0E1A\\u0E16\\u0E49\\u0E27\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 9\n      }, this), checkpoints.map(point => /*#__PURE__*/_jsxDEV(CheckpointItem, {\n        point: point,\n        onCheckIn: handleCheckIn\n      }, point.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), isMapVisible && /*#__PURE__*/_jsxDEV(MapView, {\n      userLocation: userLocation,\n      checkpoints: checkpoints,\n      area: areaOfResponsibility,\n      areaStyle: areaStyle,\n      radius: CHECK_IN_RADIUS,\n      onClose: () => setMapVisible(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute bottom-8 right-4 z-20 flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSOS,\n        className: \"flex items-center justify-center w-16 h-16 bg-red-600 text-white rounded-full shadow-2xl transform active:scale-90 transition-transform duration-200 animate-pulse\",\n        children: /*#__PURE__*/_jsxDEV(Siren, {\n          className: \"w-8 h-8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setMapVisible(true),\n        className: \"flex items-center justify-center w-16 h-16 bg-blue-600 text-white rounded-full shadow-2xl transform active:scale-90 transition-transform duration-200\",\n        children: /*#__PURE__*/_jsxDEV(MapIcon, {\n          className: \"w-8 h-8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n};\n_s(OnDutyPage, \"ebXUH0jUfRR8qZCUbcgu4w1YjJw=\", false, function () {\n  return [useAlert];\n});\n_c5 = OnDutyPage;\nexport default OnDutyPage;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"CheckpointItem$memo\");\n$RefreshReg$(_c2, \"CheckpointItem\");\n$RefreshReg$(_c3, \"MapView$memo\");\n$RefreshReg$(_c4, \"MapView\");\n$RefreshReg$(_c5, \"OnDutyPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","memo","MapContainer","TileLayer","Marker","Popup","GeoJSON","Circle","ArrowLeft","Siren","Shield","ShieldCheck","ShieldX","MapPin","Map","MapIcon","X","L","ReactDOMServer","useAlert","jsxDEV","_jsxDEV","Fragment","_Fragment","getDistance","pos1","pos2","R","φ1","lat","Math","PI","φ2","Δφ","Δλ","lng","a","sin","cos","c","atan2","sqrt","createIcon","IconComponent","colorClass","divIcon","html","renderToString","className","children","fileName","_jsxFileName","lineNumber","columnNumber","iconSize","iconAnchor","icons","checked","unchecked","too_far","user","fill","initialCheckpoints","id","name","position","areaOfResponsibility","type","properties","geometry","coordinates","areaStyle","fillColor","fillOpacity","color","weight","dashArray","CHECK_IN_RADIUS","CheckpointItem","_c","point","onCheckIn","statusInfo","icon","text","status","Icon","distance","toFixed","onClick","_c2","MapView","_c3","userLocation","checkpoints","area","radius","onClose","center","zoom","style","height","width","url","attribution","data","pathOptions","map","undefined","_c4","OnDutyPage","_s","success","setUserLocation","setCheckpoints","p","isMapVisible","setMapVisible","error","setError","prevCheckpoints","newStatus","round","watchId","navigator","geolocation","watchPosition","latitude","longitude","coords","console","enableHighAccuracy","timeout","maximumAge","clearWatch","handleCheckIn","pointId","prev","handleGoBack","window","history","back","handleSOS","role","_c5","$RefreshReg$"],"sources":["C:/Users/apiwa/Documents/GitHub/C/src/pages/OnDutyPage.js"],"sourcesContent":["// src/pages/OnDutyPage.js\r\nimport React, { useState, useEffect, useCallback, memo } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, GeoJSON, Circle } from 'react-leaflet';\r\nimport { ArrowLeft, Siren, Shield, ShieldCheck, ShieldX, MapPin, Map as MapIcon, X } from 'lucide-react';\r\nimport L from 'leaflet';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport { useAlert } from '../components/common/AlertSystem';\r\n\r\n// --- Helper Functions ---\r\n\r\n// Haversine distance formula to calculate distance between two lat/lon points in meters\r\nconst getDistance = (pos1, pos2) => {\r\n  const R = 6371e3; // metres\r\n  const φ1 = pos1.lat * Math.PI / 180; // φ, λ in radians\r\n  const φ2 = pos2.lat * Math.PI / 180;\r\n  const Δφ = (pos2.lat - pos1.lat) * Math.PI / 180;\r\n  const Δλ = (pos2.lng - pos1.lng) * Math.PI / 180;\r\n\r\n  const a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +\r\n            Math.cos(φ1) * Math.cos(φ2) *\r\n            Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n\r\n  return R * c; // in metres\r\n};\r\n\r\n// --- Custom Icon Components ---\r\n\r\nconst createIcon = (IconComponent, colorClass) => {\r\n  return L.divIcon({\r\n    html: ReactDOMServer.renderToString(\r\n      <div className={`p-2 rounded-full shadow-lg ${colorClass}`}>\r\n        <IconComponent className=\"w-6 h-6 text-white\" />\r\n      </div>\r\n    ),\r\n    className: 'bg-transparent border-0',\r\n    iconSize: [40, 40],\r\n    iconAnchor: [20, 20],\r\n  });\r\n};\r\n\r\nconst icons = {\r\n  checked: createIcon(ShieldCheck, 'bg-green-500'),\r\n  unchecked: createIcon(Shield, 'bg-blue-500'),\r\n  too_far: createIcon(ShieldX, 'bg-slate-400'),\r\n  user: L.divIcon({\r\n    html: ReactDOMServer.renderToString(\r\n        <MapPin className=\"w-8 h-8 text-red-600\" fill=\"#dc2626\" />\r\n    ),\r\n    className: 'bg-transparent border-0',\r\n    iconSize: [32, 32],\r\n    iconAnchor: [16, 32],\r\n  })\r\n};\r\n\r\n// --- Mock Data ---\r\n\r\nconst initialCheckpoints = [\r\n  { id: 1, name: 'จุดตรวจ 1', position: { lat: 13.815525, lng: 100.574563 } },\r\n  { id: 2, name: 'จุดตรวจ 2', position: { lat: 13.813326, lng: 100.574470 } },\r\n  { id: 3, name: 'จุดตรวจ 3', position: { lat: 13.812038, lng: 100.574420 } },\r\n  { id: 4, name: 'จุดตรวจ 4', position: { lat: 13.811887, lng: 100.574177 } },\r\n  { id: 5, name: 'จุดตรวจ 5', position: { lat: 13.810476, lng: 100.574670 } },\r\n  { id: 6, name: 'จุดตรวจ 6', position: { lat: 13.812550, lng: 100.574837 } },\r\n  { id: 7, name: 'จุดตรวจ 7', position: { lat: 13.815087, lng: 100.575076 } },\r\n  { id: 8, name: 'จุดตรวจ 8', position: { lat: 13.816996, lng: 100.574602 } },\r\n];\r\n\r\nconst areaOfResponsibility = {\r\n  type: \"Feature\",\r\n  properties: {},\r\n  geometry: {\r\n    type: \"Polygon\",\r\n    coordinates: [[\r\n      [100.57456389344763, 13.815525173156669],\r\n      [100.57447044838288, 13.813326697354299],\r\n      [100.57442015030517, 13.812038032093449],\r\n      [100.5741773844628, 13.81188700722482],\r\n      [100.57467050258525, 13.810476209195874],\r\n      [100.57483740410827, 13.812550042505428],\r\n      [100.5750763767396, 13.81508797684313],\r\n      [100.5746022247016, 13.816996013762614],\r\n      [100.57456389344763, 13.815525173156669] // Close the polygon\r\n    ]]\r\n  }\r\n};\r\n\r\nconst areaStyle = { \r\n  fillColor: \"#3b82f6\",    // A nice, modern blue\r\n  fillOpacity: 0.15,       // Slightly more visible\r\n  color: \"#2563eb\",        // A matching, slightly darker border\r\n  weight: 2,               // Thicker border\r\n  dashArray: '5, 10'       // Dashed line style for a modern look\r\n};\r\n\r\nconst CHECK_IN_RADIUS = 50; // meters\r\n\r\n// --- Sub-components ---\r\n\r\nconst CheckpointItem = memo(({ point, onCheckIn }) => {\r\n  const statusInfo = {\r\n    checked: { icon: ShieldCheck, color: 'text-green-500', text: 'ตรวจแล้ว' },\r\n    unchecked: { icon: Shield, color: 'text-blue-500', text: 'ยังไม่ตรวจ (อยู่ในระยะ)' },\r\n    too_far: { icon: ShieldX, color: 'text-slate-400', text: 'อยู่ไกลเกินไป' },\r\n  }[point.status];\r\n\r\n  const Icon = statusInfo.icon;\r\n\r\n  return (\r\n    <div className=\"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col sm:flex-row sm:items-center gap-4\">\r\n      <div className=\"flex items-center gap-4 flex-1\">\r\n        <Icon className={`w-8 h-8 flex-shrink-0 ${statusInfo.color}`} />\r\n        <div>\r\n          <h3 className=\"font-bold text-slate-800\">{point.name}</h3>\r\n          <p className={`text-sm ${statusInfo.color}`}>{statusInfo.text}</p>\r\n          {point.distance !== null && (\r\n            <p className=\"text-xs text-slate-500\">\r\n              ระยะห่าง: {point.distance < 1000 ? `${point.distance} ม.` : `${(point.distance / 1000).toFixed(1)} กม.`}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {point.status === 'unchecked' && (\r\n        <button\r\n          onClick={() => onCheckIn(point.id)}\r\n          className=\"w-full sm:w-auto bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200\"\r\n        >\r\n          ยืนยันการตรวจ\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst MapView = memo(({ userLocation, checkpoints, area, areaStyle, radius, onClose }) => (\r\n  <div className=\"fixed inset-0 bg-black/50 z-[1001] flex items-center justify-center animate-fade-in\">\r\n    <div className=\"relative w-full h-full bg-white\">\r\n      <MapContainer center={userLocation || { lat: 13.813, lng: 100.5745 }} zoom={17} style={{ height: '100%', width: '100%' }}>\r\n        <TileLayer\r\n          url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>'\r\n        />\r\n        <GeoJSON data={area} style={areaStyle} />\r\n\r\n        {userLocation && (\r\n          <>\r\n            <Marker position={userLocation} icon={icons.user} />\r\n            <Circle\r\n              center={userLocation}\r\n              radius={radius}\r\n              pathOptions={{ color: 'blue', fillColor: 'blue', fillOpacity: 0.1, weight: 1 }}\r\n            />\r\n          </>\r\n        )}\r\n\r\n        {checkpoints.map(point => (\r\n          <Marker key={point.id} position={point.position} icon={icons[point.status]}>\r\n            <Popup>\r\n              <div className=\"text-center font-sans\">\r\n                <h3 className=\"font-bold\">{point.name}</h3>\r\n                <p>สถานะ: {{ checked: 'ตรวจแล้ว', unchecked: 'ยังไม่ตรวจ', too_far: 'อยู่ไกลเกินไป' }[point.status]}</p>\r\n                {point.distance !== undefined && <p>ระยะห่าง: {point.distance} เมตร</p>}\r\n              </div>\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n      </MapContainer>\r\n      <button\r\n        onClick={onClose}\r\n        className=\"absolute top-4 right-4 bg-white/80 backdrop-blur-md p-2 rounded-full shadow-lg hover:bg-slate-100 z-[1002]\"\r\n      >\r\n        <X className=\"w-6 h-6 text-slate-700\" />\r\n      </button>\r\n    </div>\r\n  </div>\r\n));\r\n\r\n// --- Main Component ---\r\n\r\nconst OnDutyPage = () => {\r\n  const { success } = useAlert();\r\n  const [userLocation, setUserLocation] = useState(null);\r\n  const [checkpoints, setCheckpoints] = useState(() => \r\n    initialCheckpoints.map(p => ({ ...p, status: 'too_far', distance: null }))\r\n  );\r\n  const [isMapVisible, setMapVisible] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Update checkpoint statuses based on user location\r\n  useEffect(() => {\r\n    if (!userLocation) return;\r\n\r\n    setCheckpoints(prevCheckpoints =>\r\n      prevCheckpoints.map(point => {\r\n        if (point.status === 'checked') return point; // Don't change already checked points\r\n        \r\n        const distance = getDistance(userLocation, point.position);\r\n        const newStatus = distance <= CHECK_IN_RADIUS ? 'unchecked' : 'too_far';\r\n        \r\n        return { ...point, status: newStatus, distance: Math.round(distance) };\r\n      })\r\n    );\r\n  }, [userLocation]);\r\n\r\n  // Get user's real-time location\r\n  useEffect(() => {\r\n    const watchId = navigator.geolocation.watchPosition(\r\n      (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        setUserLocation({ lat: latitude, lng: longitude });\r\n      },\r\n      (error) => {\r\n        console.error(\"Geolocation error:\", error);\r\n        setError(\"ไม่สามารถเข้าถึงตำแหน่งของคุณได้ กรุณาตรวจสอบการตั้งค่าเบราว์เซอร์\");\r\n        // alert(\"ไม่สามารถเข้าถึงตำแหน่งของคุณได้ กรุณาตรวจสอบการตั้งค่าเบราว์เซอร์\");\r\n      },\r\n      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }\r\n    );\r\n\r\n    return () => navigator.geolocation.clearWatch(watchId);\r\n  }, []);\r\n\r\n  const handleCheckIn = (pointId) => {\r\n    setCheckpoints(prev =>\r\n      prev.map(p => (p.id === pointId ? { ...p, status: 'checked' } : p))\r\n    );\r\n  };\r\n\r\n  const handleGoBack = () => window.history.back();\r\n  const handleSOS = () => success(\"ส่งคำขอความช่วยเหลือฉุกเฉินแล้ว! เจ้าหน้าที่กำลังไปที่ตำแหน่งของคุณ\", \"SOS\");\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-slate-50 z-[1000] flex flex-col\">\r\n      <header className=\"bg-white/80 backdrop-blur-md shadow-sm z-10 flex-shrink-0\">\r\n        <div className=\"flex items-center justify-between p-4 border-b border-slate-200\">\r\n          <button onClick={handleGoBack} className=\"p-2 rounded-full hover:bg-slate-100\">\r\n            <ArrowLeft className=\"w-6 h-6 text-slate-700\" />\r\n          </button>\r\n          <h1 className=\"text-xl font-bold text-slate-800\">หน้าสำหรับเจ้าหน้าที่เข้าเวร</h1>\r\n          <div className=\"w-10\"></div> {/* Spacer */}\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {error && (\r\n          <div className=\"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md\" role=\"alert\">\r\n            <p className=\"font-bold\">ข้อควรระวัง</p>\r\n            <p>{error}</p>\r\n          </div>\r\n        )}\r\n        <div className=\"text-center p-4 bg-white rounded-xl border border-slate-200\">\r\n          <h2 className=\"text-lg font-semibold\">รายการจุดตรวจ</h2>\r\n          <p className=\"text-sm text-slate-500\">กรุณาตรวจตามจุดที่กำหนดให้ครบถ้วน</p>\r\n        </div>\r\n        {checkpoints.map(point => (\r\n          <CheckpointItem key={point.id} point={point} onCheckIn={handleCheckIn} />\r\n        ))}\r\n      </main>\r\n\r\n      {isMapVisible && (\r\n        <MapView\r\n          userLocation={userLocation}\r\n          checkpoints={checkpoints}\r\n          area={areaOfResponsibility}\r\n          areaStyle={areaStyle}\r\n          radius={CHECK_IN_RADIUS}\r\n          onClose={() => setMapVisible(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Floating Action Buttons */}\r\n      <div className=\"absolute bottom-8 right-4 z-20 flex flex-col gap-4\">\r\n        <button \r\n          onClick={handleSOS}\r\n          className=\"flex items-center justify-center w-16 h-16 bg-red-600 text-white rounded-full shadow-2xl transform active:scale-90 transition-transform duration-200 animate-pulse\"\r\n        >\r\n          <Siren className=\"w-8 h-8\" />\r\n        </button>\r\n        <button \r\n          onClick={() => setMapVisible(true)}\r\n          className=\"flex items-center justify-center w-16 h-16 bg-blue-600 text-white rounded-full shadow-2xl transform active:scale-90 transition-transform duration-200\"\r\n        >\r\n          <MapIcon className=\"w-8 h-8\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OnDutyPage;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,IAAI,QAAQ,OAAO;AACrE,SAASC,YAAY,EAAEC,SAAS,EAAEC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAEC,MAAM,QAAQ,eAAe;AACvF,SAASC,SAAS,EAAEC,KAAK,EAAEC,MAAM,EAAEC,WAAW,EAAEC,OAAO,EAAEC,MAAM,EAAEC,GAAG,IAAIC,OAAO,EAAEC,CAAC,QAAQ,cAAc;AACxG,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,SAASC,QAAQ,QAAQ,kCAAkC;;AAE3D;;AAEA;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,WAAW,GAAGA,CAACC,IAAI,EAAEC,IAAI,KAAK;EAClC,MAAMC,CAAC,GAAG,MAAM,CAAC,CAAC;EAClB,MAAMC,EAAE,GAAGH,IAAI,CAACI,GAAG,GAAGC,IAAI,CAACC,EAAE,GAAG,GAAG,CAAC,CAAC;EACrC,MAAMC,EAAE,GAAGN,IAAI,CAACG,GAAG,GAAGC,IAAI,CAACC,EAAE,GAAG,GAAG;EACnC,MAAME,EAAE,GAAG,CAACP,IAAI,CAACG,GAAG,GAAGJ,IAAI,CAACI,GAAG,IAAIC,IAAI,CAACC,EAAE,GAAG,GAAG;EAChD,MAAMG,EAAE,GAAG,CAACR,IAAI,CAACS,GAAG,GAAGV,IAAI,CAACU,GAAG,IAAIL,IAAI,CAACC,EAAE,GAAG,GAAG;EAEhD,MAAMK,CAAC,GAAGN,IAAI,CAACO,GAAG,CAACJ,EAAE,GAAG,CAAC,CAAC,GAAGH,IAAI,CAACO,GAAG,CAACJ,EAAE,GAAG,CAAC,CAAC,GACnCH,IAAI,CAACQ,GAAG,CAACV,EAAE,CAAC,GAAGE,IAAI,CAACQ,GAAG,CAACN,EAAE,CAAC,GAC3BF,IAAI,CAACO,GAAG,CAACH,EAAE,GAAG,CAAC,CAAC,GAAGJ,IAAI,CAACO,GAAG,CAACH,EAAE,GAAG,CAAC,CAAC;EAC7C,MAAMK,CAAC,GAAG,CAAC,GAAGT,IAAI,CAACU,KAAK,CAACV,IAAI,CAACW,IAAI,CAACL,CAAC,CAAC,EAAEN,IAAI,CAACW,IAAI,CAAC,CAAC,GAAGL,CAAC,CAAC,CAAC;EAExD,OAAOT,CAAC,GAAGY,CAAC,CAAC,CAAC;AAChB,CAAC;;AAED;;AAEA,MAAMG,UAAU,GAAGA,CAACC,aAAa,EAAEC,UAAU,KAAK;EAChD,OAAO3B,CAAC,CAAC4B,OAAO,CAAC;IACfC,IAAI,EAAE5B,cAAc,CAAC6B,cAAc,cACjC1B,OAAA;MAAK2B,SAAS,EAAE,8BAA8BJ,UAAU,EAAG;MAAAK,QAAA,eACzD5B,OAAA,CAACsB,aAAa;QAACK,SAAS,EAAC;MAAoB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7C,CACP,CAAC;IACDL,SAAS,EAAE,yBAAyB;IACpCM,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC,CAAC;AACJ,CAAC;AAED,MAAMC,KAAK,GAAG;EACZC,OAAO,EAAEf,UAAU,CAAC/B,WAAW,EAAE,cAAc,CAAC;EAChD+C,SAAS,EAAEhB,UAAU,CAAChC,MAAM,EAAE,aAAa,CAAC;EAC5CiD,OAAO,EAAEjB,UAAU,CAAC9B,OAAO,EAAE,cAAc,CAAC;EAC5CgD,IAAI,EAAE3C,CAAC,CAAC4B,OAAO,CAAC;IACdC,IAAI,EAAE5B,cAAc,CAAC6B,cAAc,cAC/B1B,OAAA,CAACR,MAAM;MAACmC,SAAS,EAAC,sBAAsB;MAACa,IAAI,EAAC;IAAS;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAC7D,CAAC;IACDL,SAAS,EAAE,yBAAyB;IACpCM,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;IAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;EACrB,CAAC;AACH,CAAC;;AAED;;AAEA,MAAMO,kBAAkB,GAAG,CACzB;EAAEC,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,EAC3E;EAAE4B,EAAE,EAAE,CAAC;EAAEC,IAAI,EAAE,WAAW;EAAEC,QAAQ,EAAE;IAAEpC,GAAG,EAAE,SAAS;IAAEM,GAAG,EAAE;EAAW;AAAE,CAAC,CAC5E;AAED,MAAM+B,oBAAoB,GAAG;EAC3BC,IAAI,EAAE,SAAS;EACfC,UAAU,EAAE,CAAC,CAAC;EACdC,QAAQ,EAAE;IACRF,IAAI,EAAE,SAAS;IACfG,WAAW,EAAE,CAAC,CACZ,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,EACxC,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,EACxC,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,EACxC,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,EACtC,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,EACxC,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,EACxC,CAAC,iBAAiB,EAAE,iBAAiB,CAAC,EACtC,CAAC,iBAAiB,EAAE,kBAAkB,CAAC,EACvC,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;IAAA,CAC1C;EACH;AACF,CAAC;AAED,MAAMC,SAAS,GAAG;EAChBC,SAAS,EAAE,SAAS;EAAK;EACzBC,WAAW,EAAE,IAAI;EAAQ;EACzBC,KAAK,EAAE,SAAS;EAAS;EACzBC,MAAM,EAAE,CAAC;EAAgB;EACzBC,SAAS,EAAE,OAAO,CAAO;AAC3B,CAAC;AAED,MAAMC,eAAe,GAAG,EAAE,CAAC,CAAC;;AAE5B;;AAEA,MAAMC,cAAc,gBAAG7E,IAAI,CAAA8E,EAAA,GAACA,CAAC;EAAEC,KAAK;EAAEC;AAAU,CAAC,KAAK;EACpD,MAAMC,UAAU,GAAG;IACjBzB,OAAO,EAAE;MAAE0B,IAAI,EAAExE,WAAW;MAAE+D,KAAK,EAAE,gBAAgB;MAAEU,IAAI,EAAE;IAAW,CAAC;IACzE1B,SAAS,EAAE;MAAEyB,IAAI,EAAEzE,MAAM;MAAEgE,KAAK,EAAE,eAAe;MAAEU,IAAI,EAAE;IAA0B,CAAC;IACpFzB,OAAO,EAAE;MAAEwB,IAAI,EAAEvE,OAAO;MAAE8D,KAAK,EAAE,gBAAgB;MAAEU,IAAI,EAAE;IAAgB;EAC3E,CAAC,CAACJ,KAAK,CAACK,MAAM,CAAC;EAEf,MAAMC,IAAI,GAAGJ,UAAU,CAACC,IAAI;EAE5B,oBACE9D,OAAA;IAAK2B,SAAS,EAAC,2GAA2G;IAAAC,QAAA,gBACxH5B,OAAA;MAAK2B,SAAS,EAAC,gCAAgC;MAAAC,QAAA,gBAC7C5B,OAAA,CAACiE,IAAI;QAACtC,SAAS,EAAE,yBAAyBkC,UAAU,CAACR,KAAK;MAAG;QAAAxB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAChEhC,OAAA;QAAA4B,QAAA,gBACE5B,OAAA;UAAI2B,SAAS,EAAC,0BAA0B;UAAAC,QAAA,EAAE+B,KAAK,CAAChB;QAAI;UAAAd,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC1DhC,OAAA;UAAG2B,SAAS,EAAE,WAAWkC,UAAU,CAACR,KAAK,EAAG;UAAAzB,QAAA,EAAEiC,UAAU,CAACE;QAAI;UAAAlC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACjE2B,KAAK,CAACO,QAAQ,KAAK,IAAI,iBACtBlE,OAAA;UAAG2B,SAAS,EAAC,wBAAwB;UAAAC,QAAA,GAAC,oDAC1B,EAAC+B,KAAK,CAACO,QAAQ,GAAG,IAAI,GAAG,GAAGP,KAAK,CAACO,QAAQ,KAAK,GAAG,GAAG,CAACP,KAAK,CAACO,QAAQ,GAAG,IAAI,EAAEC,OAAO,CAAC,CAAC,CAAC,MAAM;QAAA;UAAAtC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtG,CACJ;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EACL2B,KAAK,CAACK,MAAM,KAAK,WAAW,iBAC3BhE,OAAA;MACEoE,OAAO,EAAEA,CAAA,KAAMR,SAAS,CAACD,KAAK,CAACjB,EAAE,CAAE;MACnCf,SAAS,EAAC,6HAA6H;MAAAC,QAAA,EACxI;IAED;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CACT;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC,CAAC;AAACqC,GAAA,GAjCGZ,cAAc;AAmCpB,MAAMa,OAAO,gBAAG1F,IAAI,CAAA2F,GAAA,GAACA,CAAC;EAAEC,YAAY;EAAEC,WAAW;EAAEC,IAAI;EAAExB,SAAS;EAAEyB,MAAM;EAAEC;AAAQ,CAAC,kBACnF5E,OAAA;EAAK2B,SAAS,EAAC,qFAAqF;EAAAC,QAAA,eAClG5B,OAAA;IAAK2B,SAAS,EAAC,iCAAiC;IAAAC,QAAA,gBAC9C5B,OAAA,CAACnB,YAAY;MAACgG,MAAM,EAAEL,YAAY,IAAI;QAAEhE,GAAG,EAAE,MAAM;QAAEM,GAAG,EAAE;MAAS,CAAE;MAACgE,IAAI,EAAE,EAAG;MAACC,KAAK,EAAE;QAAEC,MAAM,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAArD,QAAA,gBACvH5B,OAAA,CAAClB,SAAS;QACRoG,GAAG,EAAC,0EAA0E;QAC9EC,WAAW,EAAC;MAAmJ;QAAAtD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChK,CAAC,eACFhC,OAAA,CAACf,OAAO;QAACmG,IAAI,EAAEV,IAAK;QAACK,KAAK,EAAE7B;MAAU;QAAArB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EAExCwC,YAAY,iBACXxE,OAAA,CAAAE,SAAA;QAAA0B,QAAA,gBACE5B,OAAA,CAACjB,MAAM;UAAC6D,QAAQ,EAAE4B,YAAa;UAACV,IAAI,EAAE3B,KAAK,CAACI;QAAK;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACpDhC,OAAA,CAACd,MAAM;UACL2F,MAAM,EAAEL,YAAa;UACrBG,MAAM,EAAEA,MAAO;UACfU,WAAW,EAAE;YAAEhC,KAAK,EAAE,MAAM;YAAEF,SAAS,EAAE,MAAM;YAAEC,WAAW,EAAE,GAAG;YAAEE,MAAM,EAAE;UAAE;QAAE;UAAAzB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChF,CAAC;MAAA,eACF,CACH,EAEAyC,WAAW,CAACa,GAAG,CAAC3B,KAAK,iBACpB3D,OAAA,CAACjB,MAAM;QAAgB6D,QAAQ,EAAEe,KAAK,CAACf,QAAS;QAACkB,IAAI,EAAE3B,KAAK,CAACwB,KAAK,CAACK,MAAM,CAAE;QAAApC,QAAA,eACzE5B,OAAA,CAAChB,KAAK;UAAA4C,QAAA,eACJ5B,OAAA;YAAK2B,SAAS,EAAC,uBAAuB;YAAAC,QAAA,gBACpC5B,OAAA;cAAI2B,SAAS,EAAC,WAAW;cAAAC,QAAA,EAAE+B,KAAK,CAAChB;YAAI;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC3ChC,OAAA;cAAA4B,QAAA,GAAG,kCAAO,EAAC;gBAAEQ,OAAO,EAAE,UAAU;gBAAEC,SAAS,EAAE,YAAY;gBAAEC,OAAO,EAAE;cAAgB,CAAC,CAACqB,KAAK,CAACK,MAAM,CAAC;YAAA;cAAAnC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,EACvG2B,KAAK,CAACO,QAAQ,KAAKqB,SAAS,iBAAIvF,OAAA;cAAA4B,QAAA,GAAG,oDAAU,EAAC+B,KAAK,CAACO,QAAQ,EAAC,2BAAK;YAAA;cAAArC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD;MAAC,GAPG2B,KAAK,CAACjB,EAAE;QAAAb,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAQb,CACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACU,CAAC,eACfhC,OAAA;MACEoE,OAAO,EAAEQ,OAAQ;MACjBjD,SAAS,EAAC,4GAA4G;MAAAC,QAAA,eAEtH5B,OAAA,CAACL,CAAC;QAACgC,SAAS,EAAC;MAAwB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN;AAAC;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACH,CACN,CAAC;;AAEF;AAAAwD,GAAA,GA3CMlB,OAAO;AA6Cb,MAAMmB,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB,MAAM;IAAEC;EAAQ,CAAC,GAAG7F,QAAQ,CAAC,CAAC;EAC9B,MAAM,CAAC0E,YAAY,EAAEoB,eAAe,CAAC,GAAGnH,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACgG,WAAW,EAAEoB,cAAc,CAAC,GAAGpH,QAAQ,CAAC,MAC7CgE,kBAAkB,CAAC6C,GAAG,CAACQ,CAAC,KAAK;IAAE,GAAGA,CAAC;IAAE9B,MAAM,EAAE,SAAS;IAAEE,QAAQ,EAAE;EAAK,CAAC,CAAC,CAC3E,CAAC;EACD,MAAM,CAAC6B,YAAY,EAAEC,aAAa,CAAC,GAAGvH,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACwH,KAAK,EAAEC,QAAQ,CAAC,GAAGzH,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,IAAI,CAAC8F,YAAY,EAAE;IAEnBqB,cAAc,CAACM,eAAe,IAC5BA,eAAe,CAACb,GAAG,CAAC3B,KAAK,IAAI;MAC3B,IAAIA,KAAK,CAACK,MAAM,KAAK,SAAS,EAAE,OAAOL,KAAK,CAAC,CAAC;;MAE9C,MAAMO,QAAQ,GAAG/D,WAAW,CAACqE,YAAY,EAAEb,KAAK,CAACf,QAAQ,CAAC;MAC1D,MAAMwD,SAAS,GAAGlC,QAAQ,IAAIV,eAAe,GAAG,WAAW,GAAG,SAAS;MAEvE,OAAO;QAAE,GAAGG,KAAK;QAAEK,MAAM,EAAEoC,SAAS;QAAElC,QAAQ,EAAEzD,IAAI,CAAC4F,KAAK,CAACnC,QAAQ;MAAE,CAAC;IACxE,CAAC,CACH,CAAC;EACH,CAAC,EAAE,CAACM,YAAY,CAAC,CAAC;;EAElB;EACA9F,SAAS,CAAC,MAAM;IACd,MAAM4H,OAAO,GAAGC,SAAS,CAACC,WAAW,CAACC,aAAa,CAChD7D,QAAQ,IAAK;MACZ,MAAM;QAAE8D,QAAQ;QAAEC;MAAU,CAAC,GAAG/D,QAAQ,CAACgE,MAAM;MAC/ChB,eAAe,CAAC;QAAEpF,GAAG,EAAEkG,QAAQ;QAAE5F,GAAG,EAAE6F;MAAU,CAAC,CAAC;IACpD,CAAC,EACAV,KAAK,IAAK;MACTY,OAAO,CAACZ,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1CC,QAAQ,CAAC,oEAAoE,CAAC;MAC9E;IACF,CAAC,EACD;MAAEY,kBAAkB,EAAE,IAAI;MAAEC,OAAO,EAAE,KAAK;MAAEC,UAAU,EAAE;IAAE,CAC5D,CAAC;IAED,OAAO,MAAMT,SAAS,CAACC,WAAW,CAACS,UAAU,CAACX,OAAO,CAAC;EACxD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMY,aAAa,GAAIC,OAAO,IAAK;IACjCtB,cAAc,CAACuB,IAAI,IACjBA,IAAI,CAAC9B,GAAG,CAACQ,CAAC,IAAKA,CAAC,CAACpD,EAAE,KAAKyE,OAAO,GAAG;MAAE,GAAGrB,CAAC;MAAE9B,MAAM,EAAE;IAAU,CAAC,GAAG8B,CAAE,CACpE,CAAC;EACH,CAAC;EAED,MAAMuB,YAAY,GAAGA,CAAA,KAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAC;EAChD,MAAMC,SAAS,GAAGA,CAAA,KAAM9B,OAAO,CAAC,qEAAqE,EAAE,KAAK,CAAC;EAE7G,oBACE3F,OAAA;IAAK2B,SAAS,EAAC,kDAAkD;IAAAC,QAAA,gBAC/D5B,OAAA;MAAQ2B,SAAS,EAAC,2DAA2D;MAAAC,QAAA,eAC3E5B,OAAA;QAAK2B,SAAS,EAAC,iEAAiE;QAAAC,QAAA,gBAC9E5B,OAAA;UAAQoE,OAAO,EAAEiD,YAAa;UAAC1F,SAAS,EAAC,qCAAqC;UAAAC,QAAA,eAC5E5B,OAAA,CAACb,SAAS;YAACwC,SAAS,EAAC;UAAwB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,eACThC,OAAA;UAAI2B,SAAS,EAAC,kCAAkC;UAAAC,QAAA,EAAC;QAA4B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClFhC,OAAA;UAAK2B,SAAS,EAAC;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,KAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC1B;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAEThC,OAAA;MAAM2B,SAAS,EAAC,sCAAsC;MAAAC,QAAA,GACnDqE,KAAK,iBACJjG,OAAA;QAAK2B,SAAS,EAAC,2EAA2E;QAAC+F,IAAI,EAAC,OAAO;QAAA9F,QAAA,gBACrG5B,OAAA;UAAG2B,SAAS,EAAC,WAAW;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACxChC,OAAA;UAAA4B,QAAA,EAAIqE;QAAK;UAAApE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CACN,eACDhC,OAAA;QAAK2B,SAAS,EAAC,6DAA6D;QAAAC,QAAA,gBAC1E5B,OAAA;UAAI2B,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAC;QAAa;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACxDhC,OAAA;UAAG2B,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EAAC;QAAiC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxE,CAAC,EACLyC,WAAW,CAACa,GAAG,CAAC3B,KAAK,iBACpB3D,OAAA,CAACyD,cAAc;QAAgBE,KAAK,EAAEA,KAAM;QAACC,SAAS,EAAEsD;MAAc,GAAjDvD,KAAK,CAACjB,EAAE;QAAAb,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAA2C,CACzE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAEN+D,YAAY,iBACX/F,OAAA,CAACsE,OAAO;MACNE,YAAY,EAAEA,YAAa;MAC3BC,WAAW,EAAEA,WAAY;MACzBC,IAAI,EAAE7B,oBAAqB;MAC3BK,SAAS,EAAEA,SAAU;MACrByB,MAAM,EAAEnB,eAAgB;MACxBoB,OAAO,EAAEA,CAAA,KAAMoB,aAAa,CAAC,KAAK;IAAE;MAAAnE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACrC,CACF,eAGDhC,OAAA;MAAK2B,SAAS,EAAC,oDAAoD;MAAAC,QAAA,gBACjE5B,OAAA;QACEoE,OAAO,EAAEqD,SAAU;QACnB9F,SAAS,EAAC,oKAAoK;QAAAC,QAAA,eAE9K5B,OAAA,CAACZ,KAAK;UAACuC,SAAS,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvB,CAAC,eACThC,OAAA;QACEoE,OAAO,EAAEA,CAAA,KAAM4B,aAAa,CAAC,IAAI,CAAE;QACnCrE,SAAS,EAAC,uJAAuJ;QAAAC,QAAA,eAEjK5B,OAAA,CAACN,OAAO;UAACiC,SAAS,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC0D,EAAA,CA5GID,UAAU;EAAA,QACM3F,QAAQ;AAAA;AAAA6H,GAAA,GADxBlC,UAAU;AA8GhB,eAAeA,UAAU;AAAC,IAAA/B,EAAA,EAAAW,GAAA,EAAAE,GAAA,EAAAiB,GAAA,EAAAmC,GAAA;AAAAC,YAAA,CAAAlE,EAAA;AAAAkE,YAAA,CAAAvD,GAAA;AAAAuD,YAAA,CAAArD,GAAA;AAAAqD,YAAA,CAAApC,GAAA;AAAAoC,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}