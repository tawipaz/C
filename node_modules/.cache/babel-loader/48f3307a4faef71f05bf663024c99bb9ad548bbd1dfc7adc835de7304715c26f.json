{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apiwa\\\\Documents\\\\GitHub\\\\C\\\\src\\\\pages\\\\ShiftWorkPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport React, { useState, useMemo, useCallback, memo, useEffect } from \"react\";\nimport { Calendar as CalendarIcon, Plus, ChevronLeft, ChevronRight, Filter, Search, Edit, Trash2, Save, X, Clock, Users, Building, FileText, Settings, Sun, Moon, File, Shield, CloudSun, Target, UserPlus, Star, Crown, User, ChevronDown, Briefcase, UserCheck, Eye, MoreVertical } from 'lucide-react';\nimport { CONFIG } from '../config';\n\n// --- ฟังก์ชันตรวจสอบวันหยุด ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst isHoliday = (date, holidays = []) => {\n  if (!date) return false;\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\n  const dateStr = date.toISOString().split('T')[0];\n  return holidays.some(holiday => holiday.holiday_date === dateStr);\n};\nconst isToday = date => {\n  if (!date) return false;\n  const today = new Date();\n  return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();\n};\n\n// --- ฟังก์ชันหา shift_type ตาม period และ holiday ---\nconst getShiftTypeByPeriod = (period, isHolidayDate, shiftTypes) => {\n  if (!Array.isArray(shiftTypes)) return null;\n  if (period === 'night') {\n    return shiftTypes.find(type => type.id === 2 || type.id === 4);\n  } else {\n    return isHolidayDate ? shiftTypes.find(type => type.id === 3) : shiftTypes.find(type => type.id === 1);\n  }\n};\n\n// --- Redesigned Calendar Components ---\n\nconst ShiftCalendarView = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  currentDate,\n  schedules,\n  holidays,\n  filters,\n  setFilters,\n  units,\n  navigateMonth,\n  goToToday,\n  openAddModal,\n  openEditModal\n}) => {\n  _s();\n  const days = useMemo(() => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    const daysArray = [];\n\n    // Add blank days for the start of the month\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      daysArray.push(null);\n    }\n\n    // Add days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      daysArray.push(new Date(year, month, day));\n    }\n\n    // Add blank days to complete the grid\n    while (daysArray.length % 7 !== 0) {\n      daysArray.push(null);\n    }\n    return daysArray;\n  }, [currentDate]);\n  const getSchedulesForDate = useCallback(date => {\n    if (!date) return [];\n    const dateStr = date.toISOString().split('T')[0];\n    return schedules.filter(schedule => schedule.duty_date === dateStr);\n  }, [schedules]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(CalendarHeader, {\n      currentDate: currentDate,\n      navigateMonth: navigateMonth,\n      goToToday: goToToday,\n      openAddModal: openAddModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CalendarFilters, {\n      filters: filters,\n      setFilters: setFilters,\n      units: units\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow mt-4 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 border-t border-l border-slate-200\",\n        children: ['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'].map(day => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 text-center text-xs font-semibold text-slate-500 border-b border-r border-slate-200 bg-slate-50\",\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 grid-rows-6 flex-grow border-l border-slate-200\",\n        children: days.map((date, index) => /*#__PURE__*/_jsxDEV(CalendarDayCell, {\n          date: date,\n          holidays: holidays,\n          schedules: getSchedulesForDate(date),\n          onAdd: () => openAddModal(date),\n          onEdit: openEditModal\n        }, date ? date.toISOString() : `empty-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}, \"i4p65hFGRD+DOZ0qxHoJGd5BGRE=\")), \"i4p65hFGRD+DOZ0qxHoJGd5BGRE=\");\n_c2 = ShiftCalendarView;\nconst CalendarHeader = /*#__PURE__*/memo(_c3 = ({\n  currentDate,\n  navigateMonth,\n  goToToday,\n  openAddModal\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center justify-between mb-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigateMonth(-1),\n      className: \"p-2 text-slate-500 hover:bg-slate-100 rounded-full\",\n      children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold text-slate-800 text-center w-48\",\n      children: currentDate.toLocaleDateString('th-TH', {\n        month: 'long',\n        year: 'numeric'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigateMonth(1),\n      className: \"p-2 text-slate-500 hover:bg-slate-100 rounded-full\",\n      children: /*#__PURE__*/_jsxDEV(ChevronRight, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: goToToday,\n      className: \"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 bg-indigo-50 hover:bg-indigo-100 rounded-lg\",\n      children: \"\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => openAddModal(),\n      className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\",\n      children: [/*#__PURE__*/_jsxDEV(Plus, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E27\\u0E23\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 151,\n  columnNumber: 3\n}, this));\n_c4 = CalendarHeader;\nconst CalendarFilters = /*#__PURE__*/memo(_c5 = ({\n  filters,\n  setFilters,\n  units\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center space-x-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative flex-1\",\n    children: [/*#__PURE__*/_jsxDEV(Search, {\n      className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",\n      value: filters.officer,\n      onChange: e => setFilters(prev => ({\n        ...prev,\n        officer: e.target.value\n      })),\n      className: \"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(Filter, {\n      className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: filters.unit,\n      onChange: e => setFilters(prev => ({\n        ...prev,\n        unit: e.target.value\n      })),\n      className: \"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"\\u0E17\\u0E38\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: unit.id,\n        children: unit.unit_name\n      }, unit.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 179,\n  columnNumber: 3\n}, this));\n_c6 = CalendarFilters;\nconst CalendarDayCell = /*#__PURE__*/memo(_c7 = ({\n  date,\n  holidays,\n  schedules,\n  onAdd,\n  onEdit\n}) => {\n  if (!date) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border-b border-r border-slate-200 bg-slate-50/50\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 21\n  }, this);\n  const today = isToday(date);\n  const holiday = isHoliday(date, holidays);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative p-2 border-b border-r border-slate-200 flex flex-col group\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `w-7 h-7 flex items-center justify-center rounded-full text-sm font-semibold ${today ? 'bg-indigo-600 text-white' : holiday ? 'text-red-600' : 'text-slate-700'}`,\n        children: date.getDate()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), holiday && !today && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1.5 h-1.5 bg-red-500 rounded-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 space-y-1 overflow-y-auto\",\n      children: schedules.map(schedule => /*#__PURE__*/_jsxDEV(ScheduleItem, {\n        schedule: schedule,\n        onEdit: onEdit\n      }, schedule.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 36\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onAdd,\n      className: \"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-400 rounded-full opacity-0 group-hover:opacity-100 hover:bg-indigo-100 hover:text-indigo-600 transition-opacity\",\n      children: /*#__PURE__*/_jsxDEV(Plus, {\n        className: \"w-4 h-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n});\n_c8 = CalendarDayCell;\nconst ScheduleItem = /*#__PURE__*/memo(_c9 = ({\n  schedule,\n  onEdit\n}) => {\n  const shiftColors = {\n    1: 'border-yellow-500',\n    // เวรปกติ\n    3: 'border-orange-500',\n    // เวรวันหยุด\n    2: 'border-indigo-500',\n    // เวรกลางคืน\n    4: 'border-indigo-500',\n    // เวรกลางคืน\n    default: 'border-slate-400'\n  };\n  const borderColor = shiftColors[schedule.shift_type_id] || shiftColors.default;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: () => onEdit(schedule),\n    className: `p-1.5 rounded-md bg-slate-50 hover:bg-slate-100 cursor-pointer border-l-4 ${borderColor}`,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs font-semibold text-slate-800 truncate\",\n      children: schedule.shift_type_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-slate-600 truncate\",\n      children: schedule.officer_names\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n});\n\n// Unit Structure Management Component\n_c0 = ScheduleItem;\nconst UnitStructureManagement = () => {\n  _s2();\n  const [units, setUnits] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [unitStructures, setUnitStructures] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedUnit, setSelectedUnit] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingStructure, setEditingStructure] = useState(null);\n\n  // Fetch ข้อมูลส่วนงานจาก duty_unit\n  const fetchUnits = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\n      const data = await response.json();\n      if (data.success) {\n        setUnits(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching units:', error);\n    }\n  }, []);\n\n  // Fetch ข้อมูลเจ้าหน้าที่\n  const fetchOfficers = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.OFFICERS_API}`);\n      const data = await response.json();\n      if (data.success) {\n        setOfficers(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching officers:', error);\n    }\n  }, []);\n\n  // Fetch ข้อมูลโครงสร้างส่วนงาน\n  const fetchUnitStructures = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\n      const data = await response.json();\n      if (data.success) {\n        setUnitStructures(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching unit structures:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchUnits();\n    fetchOfficers();\n    fetchUnitStructures();\n  }, [fetchUnits, fetchOfficers, fetchUnitStructures]);\n\n  // กรองข้อมูลตาม selectedUnit และ searchTerm\n  const filteredStructures = useMemo(() => {\n    let filtered = unitStructures;\n\n    // กรองตามส่วนงาน\n    if (selectedUnit) {\n      if (selectedUnit === 'cmd') {\n        filtered = filtered.filter(structure => structure.role === 'director');\n      } else {\n        filtered = filtered.filter(structure => structure.unit_code === selectedUnit);\n      }\n    }\n\n    // กรองตามการค้นหา\n    if (searchTerm) {\n      filtered = filtered.filter(structure => {\n        const fullName = structure.full_name || `${structure.prefix || ''} ${structure.firstname || ''} ${structure.lastname || ''}`.trim();\n        const positionNumber = structure.position_number || '';\n        return fullName.toLowerCase().includes(searchTerm.toLowerCase()) || positionNumber.includes(searchTerm);\n      });\n    }\n    return filtered;\n  }, [unitStructures, selectedUnit, searchTerm]);\n\n  // จัดกลุ่มตามส่วนงาน\n  const groupedByUnit = useMemo(() => {\n    const grouped = {};\n\n    // เพิ่มผู้อำนวยการ\n    const director = filteredStructures.find(s => s.role === 'director');\n    if (director) {\n      grouped['director'] = [director];\n    }\n\n    // จัดกลุ่มส่วนงานอื่นๆ\n    units.forEach(unit => {\n      const unitMembers = filteredStructures.filter(s => s.unit_code === unit.unit_code);\n      if (unitMembers.length > 0) {\n        grouped[unit.unit_code] = unitMembers.sort((a, b) => a.seniority_order - b.seniority_order);\n      }\n    });\n    return grouped;\n  }, [filteredStructures, units]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-slate-50 rounded-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-slate-800\",\n          children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500 mt-1\",\n          children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E41\\u0E25\\u0E30\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E0A\\u0E31\\u0E49\\u0E19\\u0E43\\u0E19\\u0E2D\\u0E07\\u0E04\\u0E4C\\u0E01\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setEditingStructure(null);\n          setIsModalOpen(true);\n        },\n        className: \"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col sm:flex-row gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(Building, {\n            className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedUnit,\n            onChange: e => setSelectedUnit(e.target.value),\n            className: \"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E17\\u0E38\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cmd\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: unit.unit_code,\n              children: unit.unit_name\n            }, unit.unit_code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D \\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E25\\u0E02\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            className: \"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg border border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-slate-500\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-purple-600\",\n              children: unitStructures.filter(s => s.role === 'director').length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 416,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Crown, {\n            className: \"w-8 h-8 text-purple-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg border border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-slate-500\",\n              children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-blue-600\",\n              children: unitStructures.filter(s => s.role === 'supervisor').length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Star, {\n            className: \"w-8 h-8 text-blue-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg border border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-slate-500\",\n              children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-green-600\",\n              children: unitStructures.filter(s => s.role === 'member').length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Users, {\n            className: \"w-8 h-8 text-green-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg border border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-slate-500\",\n              children: \"\\u0E23\\u0E27\\u0E21\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-2xl font-bold text-indigo-600\",\n              children: unitStructures.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Building, {\n            className: \"w-8 h-8 text-indigo-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-slate-500\",\n        children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 9\n    }, this) : Object.keys(groupedByUnit).length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: [/*#__PURE__*/_jsxDEV(Users, {\n        className: \"w-12 h-12 mx-auto mb-4 text-slate-300\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-medium text-slate-600 mb-2\",\n        children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-slate-500 mb-4\",\n        children: \"\\u0E40\\u0E23\\u0E34\\u0E48\\u0E21\\u0E15\\u0E49\\u0E19\\u0E14\\u0E49\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E40\\u0E02\\u0E49\\u0E32\\u0E2A\\u0E39\\u0E48\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E2D\\u0E07\\u0E04\\u0E4C\\u0E01\\u0E23\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setEditingStructure(null);\n          setIsModalOpen(true);\n        },\n        className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E41\\u0E23\\u0E01\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: Object.entries(groupedByUnit).map(([unitCode, members]) => /*#__PURE__*/_jsxDEV(UnitCard, {\n        unitCode: unitCode,\n        members: members,\n        units: units,\n        onEdit: structure => {\n          setEditingStructure(structure);\n          setIsModalOpen(true);\n        },\n        onRefresh: fetchUnitStructures\n      }, unitCode, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 9\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(UnitStructureModal, {\n      structure: editingStructure,\n      units: units,\n      officers: officers,\n      unitStructures: unitStructures,\n      onClose: () => {\n        setIsModalOpen(false);\n        setEditingStructure(null);\n      },\n      onSave: fetchUnitStructures\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Card Component\n_s2(UnitStructureManagement, \"gN/CniA8xsl7WS68EZaDvjuEnws=\");\n_c1 = UnitStructureManagement;\nconst UnitCard = ({\n  unitCode,\n  members,\n  units,\n  onEdit,\n  onRefresh\n}) => {\n  _s3();\n  const [isExpanded, setIsExpanded] = useState(true);\n  const unitInfo = useMemo(() => {\n    if (unitCode === 'director') {\n      return {\n        unit_name: 'ผู้อำนวยการศูนย์รักษาความปลอดภัย',\n        unit_code: 'cmd'\n      };\n    }\n    return units.find(u => u.unit_code === unitCode) || {\n      unit_name: 'ไม่ระบุส่วนงาน',\n      unit_code: unitCode\n    };\n  }, [unitCode, units]);\n  const handleDelete = async structureId => {\n    if (!window.confirm('คุณต้องการลบข้อมูลนี้หรือไม่?')) return;\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/${structureId}`, {\n        method: 'DELETE'\n      });\n      const data = await response.json();\n      if (data.success) {\n        alert('ลบข้อมูลสำเร็จ');\n        onRefresh();\n      } else {\n        alert('เกิดข้อผิดพลาด: ' + data.message);\n      }\n    } catch (error) {\n      console.error('Error deleting structure:', error);\n      alert('เกิดข้อผิดพลาดในการลบข้อมูล');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-xl border border-slate-200 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 bg-slate-50 border-b border-slate-200 cursor-pointer hover:bg-slate-100\",\n      onClick: () => setIsExpanded(!isExpanded),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-3 h-3 rounded-full ${unitCode === 'director' ? 'bg-purple-500' : 'bg-indigo-500'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-slate-800\",\n          children: unitInfo.unit_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded\",\n          children: [members.length, \" \\u0E04\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n        className: `w-5 h-5 text-slate-400 transition-transform ${isExpanded ? 'rotate-180' : ''}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 space-y-3\",\n      children: members.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8 text-slate-500\",\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          className: \"w-8 h-8 mx-auto mb-2 opacity-50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E43\\u0E19\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E19\\u0E35\\u0E49\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 13\n      }, this) : members.map(member => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-3 bg-slate-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-8 h-8 rounded-full flex items-center justify-center ${member.role === 'director' ? 'bg-purple-100 text-purple-600' : member.role === 'supervisor' ? 'bg-blue-100 text-blue-600' : 'bg-green-100 text-green-600'}`,\n            children: member.role === 'director' ? /*#__PURE__*/_jsxDEV(Crown, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 51\n            }, this) : member.role === 'supervisor' ? /*#__PURE__*/_jsxDEV(Star, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 53\n            }, this) : /*#__PURE__*/_jsxDEV(User, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 581,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium text-slate-800\",\n              children: member.full_name || `${member.prefix || ''} ${member.firstname || ''} ${member.lastname || ''}`.trim()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-slate-500\",\n              children: [member.role === 'director' ? 'ผู้อำนวยการ' : member.role === 'supervisor' ? 'หัวหน้าส่วน' : 'เจ้าหน้าที่', member.role !== 'director' && ` (ลำดับที่ ${member.seniority_order})`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onEdit(member),\n            className: \"p-1 text-slate-400 hover:text-blue-600 rounded\",\n            title: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\",\n            children: /*#__PURE__*/_jsxDEV(Edit, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 601,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(member.id),\n            className: \"p-1 text-slate-400 hover:text-red-600 rounded\",\n            title: \"\\u0E25\\u0E1A\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 603,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 17\n        }, this)]\n      }, member.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 548,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Structure Modal Component\n_s3(UnitCard, \"V/bxPASAlYzn62C0d8cvND50G40=\");\n_c10 = UnitCard;\nconst UnitStructureModal = ({\n  structure,\n  units,\n  officers,\n  unitStructures,\n  onClose,\n  onSave\n}) => {\n  _s4();\n  const [formData, setFormData] = useState({\n    position_number: '',\n    unit_code: '',\n    role: 'member',\n    seniority_order: 1\n  });\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (structure) {\n      setFormData({\n        position_number: structure.position_number || '',\n        unit_code: structure.unit_code || '',\n        role: structure.role || 'member',\n        seniority_order: structure.seniority_order || 1\n      });\n    }\n  }, [structure]);\n\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\n  const availableOfficers = useMemo(() => {\n    const usedPositions = unitStructures.map(s => s.position_number);\n    const currentPosition = structure === null || structure === void 0 ? void 0 : structure.position_number;\n    return officers.filter(officer => !usedPositions.includes(officer.position_number) || officer.position_number === currentPosition);\n  }, [officers, unitStructures, structure]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const url = structure ? `${CONFIG.UNIT_STRUCTURE_API}/${structure.id}` : CONFIG.UNIT_STRUCTURE_API;\n      const method = structure ? 'PUT' : 'POST';\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      const data = await response.json();\n      if (data.success) {\n        alert(structure ? 'แก้ไขข้อมูลสำเร็จ' : 'เพิ่มข้อมูลสำเร็จ');\n        onSave();\n        onClose();\n      } else {\n        alert('เกิดข้อผิดพลาด: ' + data.message);\n      }\n    } catch (error) {\n      console.error('Error saving structure:', error);\n      alert('เกิดข้อผิดพลาดในการบันทึกข้อมูล');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl max-w-md w-full p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: structure ? 'แก้ไขข้อมูลโครงสร้าง' : 'เพิ่มบุคลากรใหม่'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.position_number,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              position_number: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 15\n            }, this), availableOfficers.map(officer => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: officer.position_number,\n              children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname, \" (\", officer.position_number, \")\"]\n            }, officer.position_number, true, {\n              fileName: _jsxFileName,\n              lineNumber: 704,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 712,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.unit_code,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              unit_code: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 719,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cmd\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\\u0E23\\u0E31\\u0E01\\u0E29\\u0E32\\u0E04\\u0E27\\u0E32\\u0E21\\u0E1B\\u0E25\\u0E2D\\u0E14\\u0E20\\u0E31\\u0E22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 15\n            }, this), units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: unit.unit_code,\n              children: unit.unit_name\n            }, unit.unit_code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E1A\\u0E17\\u0E1A\\u0E32\\u0E17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.role,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              role: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"member\",\n              children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 737,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"supervisor\",\n              children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 738,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"director\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E2D\\u0E32\\u0E27\\u0E38\\u0E42\\u0E2A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 744,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            value: formData.seniority_order,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              seniority_order: parseInt(e.target.value)\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-slate-500 mt-1\",\n            children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E40\\u0E1B\\u0E47\\u0E19 1 \\u0E40\\u0E2A\\u0E21\\u0E2D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 753,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\",\n            children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 759,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\",\n            children: loading ? 'กำลังบันทึก...' : structure ? 'แก้ไข' : 'เพิ่ม'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 693,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 688,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 687,\n    columnNumber: 5\n  }, this);\n};\n_s4(UnitStructureModal, \"Pyfx1m6Th4gOxzBTYIWDv5r7F3A=\");\n_c11 = UnitStructureModal;\nconst ShiftWorkPage = () => {\n  _s5();\n  const [activeTab, setActiveTab] = useState('shifts');\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [schedules, setSchedules] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [shiftTypes, setShiftTypes] = useState([]);\n  const [units, setUnits] = useState([]);\n  const [holidays, setHolidays] = useState([]);\n  const [formData, setFormData] = useState({\n    duty_date: '',\n    shift_type_id: '',\n    unit_id: '',\n    officer_ids: [],\n    notes: ''\n  });\n  const [filters, setFilters] = useState({\n    unit: '',\n    officer: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\n  const [selectedUnits, setSelectedUnits] = useState([]);\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\n  const [showOfficerList, setShowOfficerList] = useState(false);\n  const [officerSearchTerm, setOfficerSearchTerm] = useState('');\n  useEffect(() => {\n    const loadHolidaysByYear = async () => {\n      try {\n        const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays&year=${currentDate.getFullYear()}`);\n        const result = await response.json();\n        if (!result.success) throw new Error(result.message);\n        setHolidays(result.data);\n      } catch (error) {\n        console.error(\"ล้มเหลวในการดึงข้อมูลวันหยุด:\", error);\n      }\n    };\n    loadHolidaysByYear();\n  }, [currentDate]);\n  useEffect(() => {\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\n      const officersInSelectedUnits = officers.filter(officer => officer.unit_id && selectedUnits.includes(officer.unit_id)).map(officer => officer.id);\n      setSelectedOfficers(officersInSelectedUnits);\n    } else {\n      setSelectedOfficers([]);\n    }\n  }, [selectedUnits, officers]);\n\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\n  const handleUnitSelect = unitId => {\n    setSelectedUnits(prev => prev.includes(unitId) ? prev.filter(id => id !== unitId) : [...prev, unitId]);\n  };\n\n  // --- ฟังก์ชันจัดการการเลือกเจ้าหน้าที่ ---\n  const handleOfficerAdd = officerId => {\n    setSelectedOfficers(prev => [...prev, officerId]);\n  };\n  const handleOfficerRemove = officerId => {\n    setSelectedOfficers(prev => prev.filter(id => id !== officerId));\n  };\n\n  // --- ฟังก์ชันกรองเจ้าหน้าที่ที่ยังไม่ได้เลือก ---\n  const getAvailableOfficers = () => {\n    if (!Array.isArray(officers)) return [];\n    return officers.filter(officer => officer.unit_id !== null && (selectedUnits.length === 0 || selectedUnits.includes(officer.unit_id)) && !selectedOfficers.includes(officer.id) && (officerSearchTerm === '' || `${officer.firstname} ${officer.lastname}`.toLowerCase().includes(officerSearchTerm.toLowerCase())));\n  };\n\n  // --- ฟังก์ชันหาข้อมูลเจ้าหน้าที่ ---\n  const getOfficerById = officerId => {\n    return officers.find(o => o.id === officerId);\n  };\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  useEffect(() => {\n    loadSchedules();\n  }, [currentDate]);\n  const loadInitialData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadOfficers(), loadShiftTypes(), loadUnits(), loadHolidays(), loadSchedules()]);\n    } catch (error) {\n      console.error('Error loading initial data:', error.message, error.stack);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadSchedules = async () => {\n    try {\n      const month = currentDate.getMonth() + 1;\n      const year = currentDate.getFullYear();\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_schedules&month=${month}&year=${year}`);\n      const data = await response.json();\n      if (data.success) {\n        setSchedules(data.data);\n      } else {\n        console.error('Failed to fetch schedules:', data.message);\n      }\n    } catch (error) {\n      console.error('Error loading schedules:', error.message, error.stack);\n    }\n  };\n  const loadOfficers = async () => {\n    try {\n      const response = await fetch(`${CONFIG.OFFICERS_API}?action=get_all_officers`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.success && Array.isArray(data.data)) {\n        setOfficers(data.data);\n      } else {\n        console.error('Failed to load officers:', data);\n        setOfficers([]);\n      }\n    } catch (error) {\n      console.error('Error loading officers:', error);\n      setOfficers([]);\n    }\n  };\n  const loadShiftTypes = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_shifttypes`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setShiftTypes(data);\n      } else {\n        setShiftTypes([]);\n      }\n    } catch (error) {\n      console.error('Error loading shift types:', error);\n      setShiftTypes([]);\n    }\n  };\n  const loadUnits = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_units`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setUnits(data);\n      } else {\n        setUnits([]);\n      }\n    } catch (error) {\n      console.error('Error loading units:', error);\n      setUnits([]);\n    }\n  };\n  const loadHolidays = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setHolidays(data);\n      } else {\n        setHolidays([]);\n      }\n    } catch (error) {\n      console.error('Error loading holidays:', error);\n      setHolidays([]);\n    }\n  };\n  const navigateMonth = direction => {\n    setCurrentDate(prev => {\n      const newDate = new Date(prev);\n      newDate.setMonth(prev.getMonth() + direction);\n      return newDate;\n    });\n  };\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  // --- แก้ไข openAddModal ---\n  const openAddModal = (date = null) => {\n    const dateObj = date || new Date();\n    const isHolidayDate = isHoliday(dateObj, holidays);\n    const suggestedType = getShiftTypeByPeriod('day', isHolidayDate, shiftTypes);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedOfficers([]);\n    setFormData({\n      duty_date: date ? date.toISOString().split('T')[0] : '',\n      shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || '',\n      unit_id: '',\n      officer_ids: [],\n      notes: ''\n    });\n    setShowAddModal(true);\n  };\n  const openEditModal = schedule => {\n    setSelectedSchedule(schedule);\n    setFormData({\n      duty_date: schedule.duty_date,\n      shift_type_id: schedule.shift_type_id,\n      unit_id: schedule.unit_id || '',\n      officer_ids: schedule.officer_ids || [],\n      notes: schedule.notes || ''\n    });\n    setSelectedOfficers(schedule.officer_ids || []);\n    setShowEditModal(true);\n  };\n  const closeModals = () => {\n    setShowAddModal(false);\n    setShowEditModal(false);\n    setSelectedSchedule(null);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedOfficers([]);\n    setShowOfficerList(false);\n    setOfficerSearchTerm('');\n  };\n  const handleInputChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // อัปเดต shift_type_id และ officer_ids ตาม UI ใหม่\n      const dateObj = new Date(formData.duty_date + 'T00:00:00');\n      const isHolidayDate = isHoliday(dateObj, holidays);\n      const shiftType = getShiftTypeByPeriod(selectedShiftPeriod, isHolidayDate, shiftTypes);\n      const payload = {\n        action: selectedSchedule ? 'update_schedule' : 'create_schedule',\n        ...formData,\n        shift_type_id: (shiftType === null || shiftType === void 0 ? void 0 : shiftType.id) || formData.shift_type_id,\n        officer_ids: selectedOfficers,\n        ...(selectedSchedule && {\n          schedule_id: selectedSchedule.id\n        })\n      };\n      const response = await fetch(CONFIG.SCHEDULES_API, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (!result.success) throw new Error(result.message);\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error saving schedule:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleDelete = async () => {\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\n    setSaving(true);\n    try {\n      const payload = {\n        action: 'delete_schedule',\n        schedule_id: selectedSchedule.id\n      };\n      const response = await fetch(CONFIG.SCHEDULES_API, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (!result.success) throw new Error(result.message);\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error deleting schedule:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const filteredSchedules = useMemo(() => {\n    return schedules.filter(schedule => {\n      const unitMatch = !filters.unit || schedule.unit_id === parseInt(filters.unit);\n      const officerMatch = !filters.officer || schedule.officer_names && schedule.officer_names.toLowerCase().includes(filters.officer.toLowerCase());\n      return unitMatch && officerMatch;\n    });\n  }, [schedules, filters]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1090,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1089,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-slate-200\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex space-x-4 px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('shifts'),\n          className: `flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'shifts' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'}`,\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E40\\u0E27\\u0E23\\u0E23\\u0E31\\u0E01\\u0E29\\u0E32\\u0E01\\u0E32\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1105,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1099,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('documents'),\n          className: `flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'documents' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'}`,\n          children: [/*#__PURE__*/_jsxDEV(Briefcase, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1113,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1098,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1097,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow p-4 bg-slate-50/50 overflow-y-auto\",\n      children: [activeTab === 'shifts' && /*#__PURE__*/_jsxDEV(ShiftCalendarView, {\n        currentDate: currentDate,\n        schedules: filteredSchedules,\n        officers: officers,\n        shiftTypes: shiftTypes,\n        units: units,\n        holidays: holidays,\n        filters: filters,\n        setFilters: setFilters,\n        navigateMonth: navigateMonth,\n        goToToday: goToToday,\n        openAddModal: openAddModal,\n        openEditModal: openEditModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1121,\n        columnNumber: 11\n      }, this), activeTab === 'documents' && /*#__PURE__*/_jsxDEV(UnitStructureManagement, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1136,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1119,\n      columnNumber: 7\n    }, this), (showAddModal || showEditModal) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: showEditModal ? 'แก้ไขตารางเวร' : 'เพิ่มตารางเวรใหม่'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1143,\n            columnNumber: 15\n          }, this), formData.duty_date && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: [\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH'), isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E2B\\u0E22\\u0E38\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1150,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: formData.duty_date,\n              onChange: e => {\n                handleInputChange('duty_date', e.target.value);\n                // อัปเดต shift type อัตโนมัติเมื่อเปลี่ยนวันที่\n                const newDate = new Date(e.target.value + 'T00:00:00');\n                const isHol = isHoliday(newDate, holidays);\n                const suggestedType = getShiftTypeByPeriod(selectedShiftPeriod, isHol, shiftTypes);\n                setFormData(prev => ({\n                  ...prev,\n                  shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                }));\n              },\n              className: \"w-full border border-gray-300 rounded-lg px-3 py-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1160,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1158,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E40\\u0E27\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1177,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('day');\n                  const isHol = formData.duty_date ? isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) : false;\n                  const suggestedType = getShiftTypeByPeriod('day', isHol, shiftTypes);\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                  }));\n                },\n                className: `flex items-center px-4 py-2 rounded-lg border ${selectedShiftPeriod === 'day' ? 'bg-yellow-50 border-yellow-300 text-yellow-700' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Sun, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1193,\n                  columnNumber: 21\n                }, this), \"\\u0E01\\u0E25\\u0E32\\u0E07\\u0E27\\u0E31\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1179,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('night');\n                  const suggestedType = getShiftTypeByPeriod('night', false, shiftTypes);\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                  }));\n                },\n                className: `flex items-center px-4 py-2 rounded-lg border ${selectedShiftPeriod === 'night' ? 'bg-indigo-50 border-indigo-300 text-indigo-700' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Moon, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1209,\n                  columnNumber: 21\n                }, this), \"\\u0E01\\u0E25\\u0E32\\u0E07\\u0E04\\u0E37\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1196,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1178,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1176,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-4 max-h-40 overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-2\",\n                children: Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center py-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedUnits.includes(unit.id),\n                    onChange: () => handleUnitSelect(unit.id),\n                    className: \"h-4 w-4 text-indigo-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1222,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-sm text-gray-900\",\n                    children: unit.unit_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1228,\n                    columnNumber: 25\n                  }, this)]\n                }, unit.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1221,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1219,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1218,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-3 min-h-[100px]\",\n              children: selectedOfficers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500 text-sm\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1240,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: selectedOfficers.map(officerId => {\n                  const officer = getOfficerById(officerId);\n                  return officer ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1247,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleOfficerRemove(officerId),\n                      className: \"text-red-600 hover:text-red-800\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1252,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1248,\n                      columnNumber: 29\n                    }, this)]\n                  }, officerId, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1246,\n                    columnNumber: 27\n                  }, this) : null;\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1242,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1238,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1265,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setShowOfficerList(!showOfficerList),\n                className: \"text-sm text-indigo-600 hover:text-indigo-800\",\n                children: showOfficerList ? 'ซ่อน' : 'เพิ่มเจ้าหน้าที่'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1266,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1264,\n              columnNumber: 17\n            }, this), showOfficerList && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Search, {\n                    className: \"w-4 h-4 text-gray-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1280,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",\n                    value: officerSearchTerm,\n                    onChange: e => setOfficerSearchTerm(e.target.value),\n                    className: \"flex-1 border border-gray-300 rounded px-2 py-1 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1281,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1279,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1278,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-h-40 overflow-y-auto\",\n                children: getAvailableOfficers().length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-sm\",\n                  children: selectedUnits.length === 0 ? 'กรุณาเลือกส่วนงานก่อน' : officerSearchTerm ? 'ไม่พบเจ้าหน้าที่ที่ค้นหา' : 'ไม่มีเจ้าหน้าที่ที่สามารถเลือกได้'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1294,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-1\",\n                  children: getAvailableOfficers().map(officer => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between py-2 hover:bg-gray-50 px-2 rounded\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1302,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        handleOfficerAdd(officer.id);\n                        setOfficerSearchTerm(''); // ล้างค่าค้นหาหลังเพิ่ม\n                      },\n                      className: \"text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50\",\n                      children: /*#__PURE__*/_jsxDEV(Plus, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1310,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1303,\n                      columnNumber: 31\n                    }, this)]\n                  }, officer.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1301,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1299,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1292,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1276,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1323,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: formData.notes,\n              onChange: e => handleInputChange('notes', e.target.value),\n              rows: 3,\n              className: \"w-full border border-gray-300 rounded-lg px-3 py-2\",\n              placeholder: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1324,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1322,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t bg-gray-50 flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: showEditModal && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDelete,\n              disabled: saving,\n              className: \"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100\",\n              children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1342,\n                columnNumber: 21\n              }, this), \"\\u0E25\\u0E1A\\u0E40\\u0E27\\u0E23\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1337,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1335,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeModals,\n              disabled: saving,\n              className: \"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50\",\n              children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1347,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSave,\n              disabled: saving || selectedOfficers.length === 0,\n              className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: saving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1361,\n                  columnNumber: 23\n                }, this), \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1366,\n                  columnNumber: 23\n                }, this), \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1354,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1346,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1334,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1141,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1140,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1096,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Management View Component - เลือกการ์ดส่วนงานแล้วจัดการบุคลากร\n_s5(ShiftWorkPage, \"qhe2zMtYZXBaFMdAjBdG0j1kPGo=\");\n_c12 = ShiftWorkPage;\nconst UnitManagementView = ({\n  dutyUnits,\n  unitStructures,\n  onEdit,\n  onDelete,\n  onAdd,\n  onEditDutyUnit,\n  onDeleteDutyUnit,\n  onAddDutyUnit,\n  getRoleIcon,\n  getRoleLabel,\n  getRoleBadgeClass\n}) => {\n  _s6();\n  const [selectedUnit, setSelectedUnit] = useState(null);\n  const [isPersonnelModalOpen, setIsPersonnelModalOpen] = useState(false);\n  const [personnelAction, setPersonnelAction] = useState(''); // 'add', 'setSupervisor'\n\n  // Get unit statistics\n  const getUnitStats = unitCode => {\n    const unitPersonnel = unitStructures.filter(item => item.unit_code === unitCode);\n    const supervisor = unitPersonnel.find(item => item.role === 'supervisor');\n    const members = unitPersonnel.filter(item => item.role === 'member');\n    const director = unitPersonnel.find(item => item.role === 'director');\n    return {\n      total: unitPersonnel.length,\n      supervisor,\n      members,\n      director,\n      hasSupervisor: !!supervisor,\n      hasDirector: !!director\n    };\n  };\n  const handleUnitSelect = unit => {\n    setSelectedUnit(unit);\n  };\n  const handleAddPersonnel = () => {\n    if (!selectedUnit) return;\n    const stats = getUnitStats(selectedUnit.unit_code);\n    const nextSeniorityOrder = stats.total + 1;\n\n    // เปิด modal พร้อมกำหนดค่าเริ่มต้น\n    onAdd({\n      unit_code: selectedUnit.unit_code,\n      role: selectedUnit.unit_code === 'CS08' ? 'director' : 'member',\n      seniority_order: nextSeniorityOrder\n    });\n  };\n  const handleSetSupervisor = () => {\n    if (!selectedUnit) return;\n\n    // เปิด modal สำหรับกำหนดหัวหน้าส่วน\n    onAdd({\n      unit_code: selectedUnit.unit_code,\n      role: 'supervisor',\n      seniority_order: 1\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onAddDutyUnit(),\n          className: \"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1453,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1447,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: dutyUnits.map(unit => {\n          var _stats$supervisor;\n          const stats = getUnitStats(unit.unit_code);\n          const isSelected = (selectedUnit === null || selectedUnit === void 0 ? void 0 : selectedUnit.unit_code) === unit.unit_code;\n          const isDirector = unit.unit_code === 'CS08';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => handleUnitSelect(unit),\n            className: `relative p-4 rounded-lg border-2 cursor-pointer transition-all ${isSelected ? 'border-indigo-500 bg-indigo-50' : 'border-slate-200 hover:border-slate-300'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-slate-800\",\n                  children: unit.unit_code.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1477,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-slate-600\",\n                  children: unit.unit_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1478,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1476,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    onEditDutyUnit(unit);\n                  },\n                  className: \"p-1 text-blue-600 hover:bg-blue-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1488,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1481,\n                  columnNumber: 21\n                }, this), !isDirector && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    onDeleteDutyUnit(unit);\n                  },\n                  className: \"p-1 text-red-600 hover:bg-red-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1498,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1491,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1480,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1475,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 mb-3\",\n              children: [isDirector ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Star, {\n                  className: \"w-4 h-4 text-yellow-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1508,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1509,\n                  columnNumber: 23\n                }, this), stats.hasDirector && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-green-600 font-medium\",\n                  children: \"(\\u0E21\\u0E35\\u0E41\\u0E25\\u0E49\\u0E27)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1511,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1507,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Shield, {\n                  className: \"w-4 h-4 text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1518,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1519,\n                  columnNumber: 23\n                }, this), stats.hasSupervisor ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-green-600 font-medium\",\n                  children: (_stats$supervisor = stats.supervisor) === null || _stats$supervisor === void 0 ? void 0 : _stats$supervisor.full_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1521,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-red-500\",\n                  children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1525,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1517,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  className: \"w-4 h-4 text-slate-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1531,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: [\"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23: \", stats.total, \" \\u0E04\\u0E19\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1532,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1530,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1505,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-2 border-t border-slate-200\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-slate-500\",\n                  children: \"\\u0E04\\u0E25\\u0E34\\u0E01\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1541,\n                  columnNumber: 21\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-indigo-600 font-medium\",\n                  children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E41\\u0E25\\u0E49\\u0E27\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1543,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1540,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1539,\n              columnNumber: 17\n            }, this)]\n          }, unit.unit_code, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1465,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1446,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-1\",\n      children: selectedUnit ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-50 rounded-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-slate-800 mb-4\",\n          children: [\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23 \", selectedUnit.unit_code.toUpperCase()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1557,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: selectedUnit.unit_code === 'CS08' ?\n          /*#__PURE__*/\n          // Director Unit (CS08) - สามารถมีได้เพียง 1 คน\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(Star, {\n                  className: \"w-4 h-4 text-yellow-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1567,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium text-yellow-800\",\n                  children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1568,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1566,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-yellow-700\",\n                children: \"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E19\\u0E35\\u0E49\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E21\\u0E35\\u0E44\\u0E14\\u0E49\\u0E40\\u0E1E\\u0E35\\u0E22\\u0E07 1 \\u0E04\\u0E19\\u0E40\\u0E17\\u0E48\\u0E32\\u0E19\\u0E31\\u0E49\\u0E19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1570,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1565,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddPersonnel,\n              className: \"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1579,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1580,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1575,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) :\n          /*#__PURE__*/\n          // Regular Units - สามารถมีได้หลายคน\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSetSupervisor,\n              disabled: getUnitStats(selectedUnit.unit_code).hasSupervisor,\n              className: `w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg ${getUnitStats(selectedUnit.unit_code).hasSupervisor ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`,\n              children: [/*#__PURE__*/_jsxDEV(Shield, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1595,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: getUnitStats(selectedUnit.unit_code).hasSupervisor ? 'มีหัวหน้าส่วนแล้ว' : 'กำหนดหัวหน้าส่วน'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1596,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1586,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddPersonnel,\n              className: \"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1608,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1609,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1604,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1561,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-slate-700 mb-3\",\n            children: \"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1617,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).sort((a, b) => {\n              // เรียงลำดับ: director > supervisor > member\n              if (a.role === 'director') return -1;\n              if (b.role === 'director') return 1;\n              if (a.role === 'supervisor') return -1;\n              if (b.role === 'supervisor') return 1;\n              return a.seniority_order - b.seniority_order;\n            }).map(person => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-2 bg-white rounded border\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [getRoleIcon(person.role), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-medium text-slate-800\",\n                    children: person.full_name || `ตำแหน่งที่ ${person.position_number}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1634,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-slate-500\",\n                    children: [getRoleLabel(person.role), \" \\u2022 \\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A \", person.seniority_order]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1637,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1633,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1631,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onEdit(person),\n                  className: \"p-1 text-blue-600 hover:bg-blue-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1647,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1643,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onDelete(person),\n                  className: \"p-1 text-red-600 hover:bg-red-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1653,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1649,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1642,\n                columnNumber: 23\n              }, this)]\n            }, person.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1630,\n              columnNumber: 21\n            }, this)), unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-4 text-slate-500\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                className: \"w-8 h-8 mx-auto mb-2 opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1661,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1662,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1660,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1618,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1616,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1556,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-50 rounded-lg p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Building, {\n          className: \"w-12 h-12 mx-auto mb-4 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1670,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-slate-600 mb-2\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1671,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E08\\u0E32\\u0E01\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E14\\u0E49\\u0E32\\u0E19\\u0E0B\\u0E49\\u0E32\\u0E22\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1669,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1554,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1444,\n    columnNumber: 5\n  }, this);\n};\n_s6(UnitManagementView, \"n5DeEqXwxD6OMa53Vr7gsD8mLP8=\");\n_c13 = UnitManagementView;\nexport default ShiftWorkPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"ShiftCalendarView$memo\");\n$RefreshReg$(_c2, \"ShiftCalendarView\");\n$RefreshReg$(_c3, \"CalendarHeader$memo\");\n$RefreshReg$(_c4, \"CalendarHeader\");\n$RefreshReg$(_c5, \"CalendarFilters$memo\");\n$RefreshReg$(_c6, \"CalendarFilters\");\n$RefreshReg$(_c7, \"CalendarDayCell$memo\");\n$RefreshReg$(_c8, \"CalendarDayCell\");\n$RefreshReg$(_c9, \"ScheduleItem$memo\");\n$RefreshReg$(_c0, \"ScheduleItem\");\n$RefreshReg$(_c1, \"UnitStructureManagement\");\n$RefreshReg$(_c10, \"UnitCard\");\n$RefreshReg$(_c11, \"UnitStructureModal\");\n$RefreshReg$(_c12, \"ShiftWorkPage\");\n$RefreshReg$(_c13, \"UnitManagementView\");","map":{"version":3,"names":["React","useState","useMemo","useCallback","memo","useEffect","Calendar","CalendarIcon","Plus","ChevronLeft","ChevronRight","Filter","Search","Edit","Trash2","Save","X","Clock","Users","Building","FileText","Settings","Sun","Moon","File","Shield","CloudSun","Target","UserPlus","Star","Crown","User","ChevronDown","Briefcase","UserCheck","Eye","MoreVertical","CONFIG","jsxDEV","_jsxDEV","Fragment","_Fragment","isHoliday","date","holidays","dayOfWeek","getDay","dateStr","toISOString","split","some","holiday","holiday_date","isToday","today","Date","getDate","getMonth","getFullYear","getShiftTypeByPeriod","period","isHolidayDate","shiftTypes","Array","isArray","find","type","id","ShiftCalendarView","_s","_c","currentDate","schedules","filters","setFilters","units","navigateMonth","goToToday","openAddModal","openEditModal","days","year","month","firstDay","lastDay","daysInMonth","startingDayOfWeek","daysArray","i","push","day","length","getSchedulesForDate","filter","schedule","duty_date","className","children","CalendarHeader","fileName","_jsxFileName","lineNumber","columnNumber","CalendarFilters","map","index","CalendarDayCell","onAdd","onEdit","_c2","_c3","onClick","toLocaleDateString","_c4","_c5","placeholder","value","officer","onChange","e","prev","target","unit","unit_name","_c6","_c7","ScheduleItem","_c8","_c9","shiftColors","default","borderColor","shift_type_id","shift_type_name","officer_names","_c0","UnitStructureManagement","_s2","setUnits","officers","setOfficers","unitStructures","setUnitStructures","loading","setLoading","selectedUnit","setSelectedUnit","searchTerm","setSearchTerm","isModalOpen","setIsModalOpen","editingStructure","setEditingStructure","fetchUnits","response","fetch","UNIT_STRUCTURE_API","data","json","success","error","console","fetchOfficers","OFFICERS_API","fetchUnitStructures","filteredStructures","filtered","structure","role","unit_code","fullName","full_name","prefix","firstname","lastname","trim","positionNumber","position_number","toLowerCase","includes","groupedByUnit","grouped","director","s","forEach","unitMembers","sort","a","b","seniority_order","Object","keys","entries","unitCode","members","UnitCard","onRefresh","UnitStructureModal","onClose","onSave","_c1","_s3","isExpanded","setIsExpanded","unitInfo","u","handleDelete","structureId","window","confirm","method","alert","message","member","title","_c10","_s4","formData","setFormData","availableOfficers","usedPositions","currentPosition","handleSubmit","preventDefault","url","headers","body","JSON","stringify","onSubmit","required","min","parseInt","disabled","_c11","ShiftWorkPage","_s5","activeTab","setActiveTab","setCurrentDate","showAddModal","setShowAddModal","showEditModal","setShowEditModal","selectedSchedule","setSelectedSchedule","setSchedules","setShiftTypes","setHolidays","unit_id","officer_ids","notes","saving","setSaving","selectedShiftPeriod","setSelectedShiftPeriod","selectedUnits","setSelectedUnits","selectedOfficers","setSelectedOfficers","showOfficerList","setShowOfficerList","officerSearchTerm","setOfficerSearchTerm","loadHolidaysByYear","SCHEDULES_API","result","Error","officersInSelectedUnits","handleUnitSelect","unitId","handleOfficerAdd","officerId","handleOfficerRemove","getAvailableOfficers","getOfficerById","o","loadInitialData","loadSchedules","Promise","all","loadOfficers","loadShiftTypes","loadUnits","loadHolidays","stack","ok","status","direction","newDate","setMonth","dateObj","suggestedType","closeModals","handleInputChange","field","handleSave","shiftType","payload","action","schedule_id","filteredSchedules","unitMatch","officerMatch","isHol","checked","rows","_c12","UnitManagementView","dutyUnits","onDelete","onEditDutyUnit","onDeleteDutyUnit","onAddDutyUnit","getRoleIcon","getRoleLabel","getRoleBadgeClass","_s6","isPersonnelModalOpen","setIsPersonnelModalOpen","personnelAction","setPersonnelAction","getUnitStats","unitPersonnel","item","supervisor","total","hasSupervisor","hasDirector","handleAddPersonnel","stats","nextSeniorityOrder","handleSetSupervisor","_stats$supervisor","isSelected","isDirector","toUpperCase","stopPropagation","person","_c13","$RefreshReg$"],"sources":["C:/Users/apiwa/Documents/GitHub/C/src/pages/ShiftWorkPage.js"],"sourcesContent":["import React, { useState, useMemo, useCallback, memo, useEffect } from \"react\";\r\nimport {\r\n  Calendar as CalendarIcon,\r\n  Plus,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Filter,\r\n  Search,\r\n  Edit,\r\n  Trash2,\r\n  Save,\r\n  X,\r\n  Clock,\r\n  Users,\r\n  Building,\r\n  FileText,\r\n  Settings,\r\n  Sun, Moon,\r\n  File,\r\n  Shield,\r\n  CloudSun,\r\n  Target,\r\n  UserPlus,\r\n  Star,\r\n  Crown,\r\n  User,\r\n  ChevronDown,\r\n  Briefcase,\r\n  UserCheck,\r\n  Eye,\r\n  MoreVertical\r\n} from 'lucide-react';\r\nimport { CONFIG } from '../config';\r\n\r\n// --- ฟังก์ชันตรวจสอบวันหยุด ---\r\nconst isHoliday = (date, holidays = []) => {\r\n  if (!date) return false;\r\n  const dayOfWeek = date.getDay();\r\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\r\n  const dateStr = date.toISOString().split('T')[0];\r\n  return holidays.some(holiday => holiday.holiday_date === dateStr);\r\n};\r\n\r\nconst isToday = (date) => {\r\n  if (!date) return false;\r\n  const today = new Date();\r\n  return date.getDate() === today.getDate() &&\r\n         date.getMonth() === today.getMonth() &&\r\n         date.getFullYear() === today.getFullYear();\r\n};\r\n\r\n// --- ฟังก์ชันหา shift_type ตาม period และ holiday ---\r\nconst getShiftTypeByPeriod = (period, isHolidayDate, shiftTypes) => {\r\n  if (!Array.isArray(shiftTypes)) return null;\r\n  if (period === 'night') {\r\n    return shiftTypes.find(type => type.id === 2 || type.id === 4);\r\n  } else {\r\n    return isHolidayDate \r\n      ? shiftTypes.find(type => type.id === 3)\r\n      : shiftTypes.find(type => type.id === 1);\r\n  }\r\n};\r\n\r\n// --- Redesigned Calendar Components ---\r\n\r\nconst ShiftCalendarView = memo(({\r\n  currentDate,\r\n  schedules,\r\n  holidays,\r\n  filters,\r\n  setFilters,\r\n  units,\r\n  navigateMonth,\r\n  goToToday,\r\n  openAddModal,\r\n  openEditModal\r\n}) => {\r\n\r\n  const days = useMemo(() => {\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    const daysInMonth = lastDay.getDate();\r\n    const startingDayOfWeek = firstDay.getDay();\r\n    const daysArray = [];\r\n    \r\n    // Add blank days for the start of the month\r\n    for (let i = 0; i < startingDayOfWeek; i++) {\r\n      daysArray.push(null);\r\n    }\r\n    \r\n    // Add days of the month\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      daysArray.push(new Date(year, month, day));\r\n    }\r\n\r\n    // Add blank days to complete the grid\r\n    while (daysArray.length % 7 !== 0) {\r\n      daysArray.push(null);\r\n    }\r\n\r\n    return daysArray;\r\n  }, [currentDate]);\r\n\r\n  const getSchedulesForDate = useCallback((date) => {\r\n    if (!date) return [];\r\n    const dateStr = date.toISOString().split('T')[0];\r\n    return schedules.filter(schedule => schedule.duty_date === dateStr);\r\n  }, [schedules]);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 h-full flex flex-col\">\r\n      <CalendarHeader \r\n        currentDate={currentDate}\r\n        navigateMonth={navigateMonth}\r\n        goToToday={goToToday}\r\n        openAddModal={openAddModal}\r\n      />\r\n      <CalendarFilters \r\n        filters={filters}\r\n        setFilters={setFilters}\r\n        units={units}\r\n      />\r\n      <div className=\"flex-grow mt-4 flex flex-col\">\r\n        <div className=\"grid grid-cols-7 border-t border-l border-slate-200\">\r\n          {['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'].map(day => (\r\n            <div key={day} className=\"p-3 text-center text-xs font-semibold text-slate-500 border-b border-r border-slate-200 bg-slate-50\">\r\n              {day}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"grid grid-cols-7 grid-rows-6 flex-grow border-l border-slate-200\">\r\n          {days.map((date, index) => (\r\n            <CalendarDayCell\r\n              key={date ? date.toISOString() : `empty-${index}`}\r\n              date={date}\r\n              holidays={holidays}\r\n              schedules={getSchedulesForDate(date)}\r\n              onAdd={() => openAddModal(date)}\r\n              onEdit={openEditModal}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst CalendarHeader = memo(({ currentDate, navigateMonth, goToToday, openAddModal }) => (\r\n  <div className=\"flex items-center justify-between mb-4\">\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button onClick={() => navigateMonth(-1)} className=\"p-2 text-slate-500 hover:bg-slate-100 rounded-full\">\r\n        <ChevronLeft className=\"w-5 h-5\" />\r\n      </button>\r\n      <h2 className=\"text-xl font-semibold text-slate-800 text-center w-48\">\r\n        {currentDate.toLocaleDateString('th-TH', { month: 'long', year: 'numeric' })}\r\n      </h2>\r\n      <button onClick={() => navigateMonth(1)} className=\"p-2 text-slate-500 hover:bg-slate-100 rounded-full\">\r\n        <ChevronRight className=\"w-5 h-5\" />\r\n      </button>\r\n    </div>\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button onClick={goToToday} className=\"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 bg-indigo-50 hover:bg-indigo-100 rounded-lg\">\r\n        วันนี้\r\n      </button>\r\n      <button\r\n        onClick={() => openAddModal()}\r\n        className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\"\r\n      >\r\n        <Plus className=\"w-4 h-4 mr-2\" />\r\n        เพิ่มเวร\r\n      </button>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nconst CalendarFilters = memo(({ filters, setFilters, units }) => (\r\n  <div className=\"flex items-center space-x-4\">\r\n    <div className=\"relative flex-1\">\r\n      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"ค้นหาเจ้าหน้าที่...\"\r\n        value={filters.officer}\r\n        onChange={(e) => setFilters(prev => ({ ...prev, officer: e.target.value }))}\r\n        className=\"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n      />\r\n    </div>\r\n    <div className=\"relative\">\r\n      <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n      <select\r\n        value={filters.unit}\r\n        onChange={(e) => setFilters(prev => ({ ...prev, unit: e.target.value }))}\r\n        className=\"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n      >\r\n        <option value=\"\">ทุกส่วนงาน</option>\r\n        {Array.isArray(units) && units.map(unit => (\r\n          <option key={unit.id} value={unit.id}>{unit.unit_name}</option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nconst CalendarDayCell = memo(({ date, holidays, schedules, onAdd, onEdit }) => {\r\n  if (!date) return <div className=\"border-b border-r border-slate-200 bg-slate-50/50\"></div>;\r\n\r\n  const today = isToday(date);\r\n  const holiday = isHoliday(date, holidays);\r\n\r\n  return (\r\n    <div className=\"relative p-2 border-b border-r border-slate-200 flex flex-col group\">\r\n      <div className=\"flex items-center space-x-2 mb-2\">\r\n        <span className={`w-7 h-7 flex items-center justify-center rounded-full text-sm font-semibold ${today ? 'bg-indigo-600 text-white' : holiday ? 'text-red-600' : 'text-slate-700'}`}>\r\n          {date.getDate()}\r\n        </span>\r\n        {holiday && !today && <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>}\r\n      </div>\r\n      <div className=\"flex-1 space-y-1 overflow-y-auto\">\r\n        {schedules.map(schedule => <ScheduleItem key={schedule.id} schedule={schedule} onEdit={onEdit} />)}\r\n      </div>\r\n      <button onClick={onAdd} className=\"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-400 rounded-full opacity-0 group-hover:opacity-100 hover:bg-indigo-100 hover:text-indigo-600 transition-opacity\">\r\n        <Plus className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ScheduleItem = memo(({ schedule, onEdit }) => {\r\n  const shiftColors = {\r\n    1: 'border-yellow-500', // เวรปกติ\r\n    3: 'border-orange-500', // เวรวันหยุด\r\n    2: 'border-indigo-500', // เวรกลางคืน\r\n    4: 'border-indigo-500', // เวรกลางคืน\r\n    default: 'border-slate-400'\r\n  };\r\n  const borderColor = shiftColors[schedule.shift_type_id] || shiftColors.default;\r\n\r\n  return (\r\n    <div \r\n      onClick={() => onEdit(schedule)}\r\n      className={`p-1.5 rounded-md bg-slate-50 hover:bg-slate-100 cursor-pointer border-l-4 ${borderColor}`}\r\n    >\r\n      <p className=\"text-xs font-semibold text-slate-800 truncate\">{schedule.shift_type_name}</p>\r\n      <p className=\"text-xs text-slate-600 truncate\">{schedule.officer_names}</p>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Unit Structure Management Component\r\nconst UnitStructureManagement = () => {\r\n  const [units, setUnits] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [unitStructures, setUnitStructures] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedUnit, setSelectedUnit] = useState('');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editingStructure, setEditingStructure] = useState(null);\r\n\r\n  // Fetch ข้อมูลส่วนงานจาก duty_unit\r\n  const fetchUnits = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUnits(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching units:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch ข้อมูลเจ้าหน้าที่\r\n  const fetchOfficers = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.OFFICERS_API}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setOfficers(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching officers:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch ข้อมูลโครงสร้างส่วนงาน\r\n  const fetchUnitStructures = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUnitStructures(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unit structures:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchUnits();\r\n    fetchOfficers();\r\n    fetchUnitStructures();\r\n  }, [fetchUnits, fetchOfficers, fetchUnitStructures]);\r\n\r\n  // กรองข้อมูลตาม selectedUnit และ searchTerm\r\n  const filteredStructures = useMemo(() => {\r\n    let filtered = unitStructures;\r\n    \r\n    // กรองตามส่วนงาน\r\n    if (selectedUnit) {\r\n      if (selectedUnit === 'cmd') {\r\n        filtered = filtered.filter(structure => structure.role === 'director');\r\n      } else {\r\n        filtered = filtered.filter(structure => structure.unit_code === selectedUnit);\r\n      }\r\n    }\r\n    \r\n    // กรองตามการค้นหา\r\n    if (searchTerm) {\r\n      filtered = filtered.filter(structure => {\r\n        const fullName = structure.full_name || `${structure.prefix || ''} ${structure.firstname || ''} ${structure.lastname || ''}`.trim();\r\n        const positionNumber = structure.position_number || '';\r\n        return fullName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n               positionNumber.includes(searchTerm);\r\n      });\r\n    }\r\n    \r\n    return filtered;\r\n  }, [unitStructures, selectedUnit, searchTerm]);\r\n\r\n  // จัดกลุ่มตามส่วนงาน\r\n  const groupedByUnit = useMemo(() => {\r\n    const grouped = {};\r\n    \r\n    // เพิ่มผู้อำนวยการ\r\n    const director = filteredStructures.find(s => s.role === 'director');\r\n    if (director) {\r\n      grouped['director'] = [director];\r\n    }\r\n\r\n    // จัดกลุ่มส่วนงานอื่นๆ\r\n    units.forEach(unit => {\r\n      const unitMembers = filteredStructures.filter(s => s.unit_code === unit.unit_code);\r\n      if (unitMembers.length > 0) {\r\n        grouped[unit.unit_code] = unitMembers.sort((a, b) => a.seniority_order - b.seniority_order);\r\n      }\r\n    });\r\n\r\n    return grouped;\r\n  }, [filteredStructures, units]);\r\n\r\n  return (\r\n    <div className=\"p-6 bg-slate-50 rounded-2xl\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-slate-800\">จัดการโครงสร้างส่วนงาน</h2>\r\n          <p className=\"text-slate-500 mt-1\">จัดการบุคลากรและโครงสร้างลำดับชั้นในองค์กร</p>\r\n        </div>\r\n        <button\r\n          onClick={() => {\r\n            setEditingStructure(null);\r\n            setIsModalOpen(true);\r\n          }}\r\n          className=\"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          เพิ่มบุคลากร\r\n        </button>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n          {/* Unit Filter */}\r\n          <div className=\"relative flex-1\">\r\n            <Building className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n            <select\r\n              value={selectedUnit}\r\n              onChange={(e) => setSelectedUnit(e.target.value)}\r\n              className=\"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">ทุกส่วนงาน</option>\r\n              <option value=\"cmd\">ผู้อำนวยการศูนย์</option>\r\n              {units.map(unit => (\r\n                <option key={unit.unit_code} value={unit.unit_code}>\r\n                  {unit.unit_name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          \r\n          {/* Search */}\r\n          <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ค้นหาชื่อ หรือเลขตำแหน่ง...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Statistics */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n        <div className=\"bg-white p-4 rounded-lg border border-slate-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-slate-500\">ผู้อำนวยการ</p>\r\n              <p className=\"text-2xl font-bold text-purple-600\">\r\n                {unitStructures.filter(s => s.role === 'director').length}\r\n              </p>\r\n            </div>\r\n            <Crown className=\"w-8 h-8 text-purple-500\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white p-4 rounded-lg border border-slate-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-slate-500\">หัวหน้าส่วน</p>\r\n              <p className=\"text-2xl font-bold text-blue-600\">\r\n                {unitStructures.filter(s => s.role === 'supervisor').length}\r\n              </p>\r\n            </div>\r\n            <Star className=\"w-8 h-8 text-blue-500\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white p-4 rounded-lg border border-slate-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-slate-500\">เจ้าหน้าที่</p>\r\n              <p className=\"text-2xl font-bold text-green-600\">\r\n                {unitStructures.filter(s => s.role === 'member').length}\r\n              </p>\r\n            </div>\r\n            <Users className=\"w-8 h-8 text-green-500\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"bg-white p-4 rounded-lg border border-slate-200\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <p className=\"text-sm text-slate-500\">รวมทั้งหมด</p>\r\n              <p className=\"text-2xl font-bold text-indigo-600\">{unitStructures.length}</p>\r\n            </div>\r\n            <Building className=\"w-8 h-8 text-indigo-500\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center py-12\">\r\n          <div className=\"text-slate-500\">กำลังโหลดข้อมูล...</div>\r\n        </div>\r\n      ) : Object.keys(groupedByUnit).length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <Users className=\"w-12 h-12 mx-auto mb-4 text-slate-300\" />\r\n          <h3 className=\"text-lg font-medium text-slate-600 mb-2\">ไม่พบข้อมูลโครงสร้าง</h3>\r\n          <p className=\"text-slate-500 mb-4\">เริ่มต้นด้วยการเพิ่มบุคลากรเข้าสู่โครงสร้างองค์กร</p>\r\n          <button\r\n            onClick={() => {\r\n              setEditingStructure(null);\r\n              setIsModalOpen(true);\r\n            }}\r\n            className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\"\r\n          >\r\n            <Plus className=\"w-4 h-4 mr-2\" />\r\n            เพิ่มบุคลากรแรก\r\n          </button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {Object.entries(groupedByUnit).map(([unitCode, members]) => (\r\n            <UnitCard\r\n              key={unitCode}\r\n              unitCode={unitCode}\r\n              members={members}\r\n              units={units}\r\n              onEdit={(structure) => {\r\n                setEditingStructure(structure);\r\n                setIsModalOpen(true);\r\n              }}\r\n              onRefresh={fetchUnitStructures}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal */}\r\n      {isModalOpen && (\r\n        <UnitStructureModal\r\n          structure={editingStructure}\r\n          units={units}\r\n          officers={officers}\r\n          unitStructures={unitStructures}\r\n          onClose={() => {\r\n            setIsModalOpen(false);\r\n            setEditingStructure(null);\r\n          }}\r\n          onSave={fetchUnitStructures}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Card Component\r\nconst UnitCard = ({ unitCode, members, units, onEdit, onRefresh }) => {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n\r\n  const unitInfo = useMemo(() => {\r\n    if (unitCode === 'director') {\r\n      return { unit_name: 'ผู้อำนวยการศูนย์รักษาความปลอดภัย', unit_code: 'cmd' };\r\n    }\r\n    return units.find(u => u.unit_code === unitCode) || { unit_name: 'ไม่ระบุส่วนงาน', unit_code: unitCode };\r\n  }, [unitCode, units]);\r\n\r\n  const handleDelete = async (structureId) => {\r\n    if (!window.confirm('คุณต้องการลบข้อมูลนี้หรือไม่?')) return;\r\n\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/${structureId}`, {\r\n        method: 'DELETE'\r\n      });\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        alert('ลบข้อมูลสำเร็จ');\r\n        onRefresh();\r\n      } else {\r\n        alert('เกิดข้อผิดพลาด: ' + data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting structure:', error);\r\n      alert('เกิดข้อผิดพลาดในการลบข้อมูล');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl border border-slate-200 overflow-hidden\">\r\n      <div\r\n        className=\"flex items-center justify-between p-4 bg-slate-50 border-b border-slate-200 cursor-pointer hover:bg-slate-100\"\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className={`w-3 h-3 rounded-full ${unitCode === 'director' ? 'bg-purple-500' : 'bg-indigo-500'}`}></div>\r\n          <h3 className=\"font-semibold text-slate-800\">{unitInfo.unit_name}</h3>\r\n          <span className=\"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded\">\r\n            {members.length} คน\r\n          </span>\r\n        </div>\r\n        <ChevronDown className={`w-5 h-5 text-slate-400 transition-transform ${isExpanded ? 'rotate-180' : ''}`} />\r\n      </div>\r\n\r\n      {isExpanded && (\r\n        <div className=\"p-4 space-y-3\">\r\n          {members.length === 0 ? (\r\n            <div className=\"text-center py-8 text-slate-500\">\r\n              <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n              <p>ยังไม่มีบุคลากรในส่วนงานนี้</p>\r\n            </div>\r\n          ) : (\r\n            members.map(member => (\r\n              <div key={member.id} className=\"flex items-center justify-between p-3 bg-slate-50 rounded-lg\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n                    member.role === 'director' ? 'bg-purple-100 text-purple-600' :\r\n                    member.role === 'supervisor' ? 'bg-blue-100 text-blue-600' :\r\n                    'bg-green-100 text-green-600'\r\n                  }`}>\r\n                    {member.role === 'director' ? <Crown className=\"w-4 h-4\" /> :\r\n                     member.role === 'supervisor' ? <Star className=\"w-4 h-4\" /> :\r\n                     <User className=\"w-4 h-4\" />}\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-medium text-slate-800\">\r\n                      {member.full_name || `${member.prefix || ''} ${member.firstname || ''} ${member.lastname || ''}`.trim()}\r\n                    </div>\r\n                    <div className=\"text-sm text-slate-500\">\r\n                      {member.role === 'director' ? 'ผู้อำนวยการ' :\r\n                       member.role === 'supervisor' ? 'หัวหน้าส่วน' :\r\n                       'เจ้าหน้าที่'} \r\n                      {member.role !== 'director' && ` (ลำดับที่ ${member.seniority_order})`}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button\r\n                    onClick={() => onEdit(member)}\r\n                    className=\"p-1 text-slate-400 hover:text-blue-600 rounded\"\r\n                    title=\"แก้ไข\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(member.id)}\r\n                    className=\"p-1 text-slate-400 hover:text-red-600 rounded\"\r\n                    title=\"ลบ\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Structure Modal Component\r\nconst UnitStructureModal = ({ structure, units, officers, unitStructures, onClose, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    position_number: '',\r\n    unit_code: '',\r\n    role: 'member',\r\n    seniority_order: 1\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (structure) {\r\n      setFormData({\r\n        position_number: structure.position_number || '',\r\n        unit_code: structure.unit_code || '',\r\n        role: structure.role || 'member',\r\n        seniority_order: structure.seniority_order || 1\r\n      });\r\n    }\r\n  }, [structure]);\r\n\r\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\r\n  const availableOfficers = useMemo(() => {\r\n    const usedPositions = unitStructures.map(s => s.position_number);\r\n    const currentPosition = structure?.position_number;\r\n    \r\n    return officers.filter(officer => \r\n      !usedPositions.includes(officer.position_number) || \r\n      officer.position_number === currentPosition\r\n    );\r\n  }, [officers, unitStructures, structure]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const url = structure \r\n        ? `${CONFIG.UNIT_STRUCTURE_API}/${structure.id}`\r\n        : CONFIG.UNIT_STRUCTURE_API;\r\n      \r\n      const method = structure ? 'PUT' : 'POST';\r\n      \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        alert(structure ? 'แก้ไขข้อมูลสำเร็จ' : 'เพิ่มข้อมูลสำเร็จ');\r\n        onSave();\r\n        onClose();\r\n      } else {\r\n        alert('เกิดข้อผิดพลาด: ' + data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving structure:', error);\r\n      alert('เกิดข้อผิดพลาดในการบันทึกข้อมูล');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\r\n        <h3 className=\"text-lg font-semibold mb-4\">\r\n          {structure ? 'แก้ไขข้อมูลโครงสร้าง' : 'เพิ่มบุคลากรใหม่'}\r\n        </h3>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">เจ้าหน้าที่</label>\r\n            <select\r\n              value={formData.position_number}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, position_number: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\">เลือกเจ้าหน้าที่</option>\r\n              {availableOfficers.map(officer => (\r\n                <option key={officer.position_number} value={officer.position_number}>\r\n                  {officer.prefix} {officer.firstname} {officer.lastname} ({officer.position_number})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">ส่วนงาน</label>\r\n            <select\r\n              value={formData.unit_code}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, unit_code: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\">เลือกส่วนงาน</option>\r\n              <option value=\"cmd\">ผู้อำนวยการศูนย์รักษาความปลอดภัย</option>\r\n              {units.map(unit => (\r\n                <option key={unit.unit_code} value={unit.unit_code}>\r\n                  {unit.unit_name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">บทบาท</label>\r\n            <select\r\n              value={formData.role}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, role: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"member\">เจ้าหน้าที่</option>\r\n              <option value=\"supervisor\">หัวหน้าส่วน</option>\r\n              <option value=\"director\">ผู้อำนวยการ</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">ลำดับอาวุโส</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              value={formData.seniority_order}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, seniority_order: parseInt(e.target.value) }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-1\">\r\n              หัวหน้าส่วนต้องเป็น 1 เสมอ\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\"\r\n            >\r\n              ยกเลิก\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'กำลังบันทึก...' : (structure ? 'แก้ไข' : 'เพิ่ม')}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ShiftWorkPage = () => {\r\n  const [activeTab, setActiveTab] = useState('shifts');\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [shiftTypes, setShiftTypes] = useState([]);\r\n  const [units, setUnits] = useState([]);\r\n  const [holidays, setHolidays] = useState([]);\r\n  const [formData, setFormData] = useState({ duty_date: '', shift_type_id: '', unit_id: '', officer_ids: [], notes: '' });\r\n  const [filters, setFilters] = useState({ unit: '', officer: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\r\n  const [selectedUnits, setSelectedUnits] = useState([]);\r\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\r\n  const [showOfficerList, setShowOfficerList] = useState(false);\r\n  const [officerSearchTerm, setOfficerSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadHolidaysByYear = async () => {\r\n      try {\r\n        const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays&year=${currentDate.getFullYear()}`);\r\n        const result = await response.json();\r\n        if (!result.success) throw new Error(result.message);\r\n        setHolidays(result.data);\r\n      } catch (error) {\r\n        console.error(\"ล้มเหลวในการดึงข้อมูลวันหยุด:\", error);\r\n      }\r\n    };\r\n\r\n    loadHolidaysByYear();\r\n  }, [currentDate]);\r\n  useEffect(() => {\r\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\r\n      const officersInSelectedUnits = officers\r\n        .filter(officer => officer.unit_id && selectedUnits.includes(officer.unit_id))\r\n        .map(officer => officer.id);\r\n\r\n      setSelectedOfficers(officersInSelectedUnits);\r\n    } else {\r\n      setSelectedOfficers([]);\r\n    }\r\n  }, [selectedUnits, officers]);\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\r\n  const handleUnitSelect = (unitId) => {\r\n    setSelectedUnits(prev =>\r\n      prev.includes(unitId)\r\n        ? prev.filter(id => id !== unitId)\r\n        : [...prev, unitId]\r\n    );\r\n  };\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกเจ้าหน้าที่ ---\r\n  const handleOfficerAdd = (officerId) => {\r\n    setSelectedOfficers(prev => [...prev, officerId]);\r\n  };\r\n\r\n  const handleOfficerRemove = (officerId) => {\r\n    setSelectedOfficers(prev => prev.filter(id => id !== officerId));\r\n  };\r\n\r\n  // --- ฟังก์ชันกรองเจ้าหน้าที่ที่ยังไม่ได้เลือก ---\r\n  const getAvailableOfficers = () => {\r\n    if (!Array.isArray(officers)) return [];\r\n\r\n    return officers.filter(officer =>\r\n      officer.unit_id !== null &&\r\n      (selectedUnits.length === 0 || selectedUnits.includes(officer.unit_id)) &&\r\n      !selectedOfficers.includes(officer.id) &&\r\n      (officerSearchTerm === '' ||\r\n        `${officer.firstname} ${officer.lastname}`.toLowerCase().includes(officerSearchTerm.toLowerCase()))\r\n    );\r\n  };\r\n\r\n  // --- ฟังก์ชันหาข้อมูลเจ้าหน้าที่ ---\r\n  const getOfficerById = (officerId) => {\r\n    return officers.find(o => o.id === officerId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadSchedules();\r\n  }, [currentDate]);\r\n\r\n  const loadInitialData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadOfficers(),\r\n        loadShiftTypes(),\r\n        loadUnits(),\r\n        loadHolidays(),\r\n        loadSchedules()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error.message, error.stack);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadSchedules = async () => {\r\n    try {\r\n      const month = currentDate.getMonth() + 1;\r\n      const year = currentDate.getFullYear();\r\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_schedules&month=${month}&year=${year}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setSchedules(data.data);\r\n      } else {\r\n        console.error('Failed to fetch schedules:', data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading schedules:', error.message, error.stack);\r\n    }\r\n  };\r\n\r\n  const loadOfficers = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.OFFICERS_API}?action=get_all_officers`);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data && data.success && Array.isArray(data.data)) {\r\n        setOfficers(data.data);\r\n      } else {\r\n        console.error('Failed to load officers:', data);\r\n        setOfficers([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading officers:', error);\r\n      setOfficers([]);\r\n    }\r\n  };\r\n\r\n  const loadShiftTypes = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_shifttypes`);\r\n      const data = await response.json();\r\n      if (Array.isArray(data)) {\r\n        setShiftTypes(data);\r\n      } else {\r\n        setShiftTypes([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading shift types:', error);\r\n      setShiftTypes([]);\r\n    }\r\n  };\r\n\r\n  const loadUnits = async () => {\r\n      try {\r\n          const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_units`);\r\n    const data = await response.json();\r\n          if (Array.isArray(data)) {\r\n              setUnits(data);\r\n          } else {\r\n              setUnits([]);\r\n          }\r\n      } catch (error) {\r\n          console.error('Error loading units:', error);\r\n          setUnits([]);\r\n      }\r\n  };\r\n\r\n  const loadHolidays = async () => {\r\n      try {\r\n          const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays`);\r\n    const data = await response.json();\r\n          if (Array.isArray(data)) {\r\n              setHolidays(data);\r\n          } else {\r\n              setHolidays([]);\r\n          }\r\n      } catch (error) {\r\n          console.error('Error loading holidays:', error);\r\n          setHolidays([]);\r\n      }\r\n  };\r\n\r\n  const navigateMonth = (direction) => {\r\n    setCurrentDate(prev => {\r\n      const newDate = new Date(prev);\r\n      newDate.setMonth(prev.getMonth() + direction);\r\n      return newDate;\r\n    });\r\n  };\r\n\r\n  const goToToday = () => {\r\n    setCurrentDate(new Date());\r\n  };\r\n\r\n  // --- แก้ไข openAddModal ---\r\n  const openAddModal = (date = null) => {\r\n    const dateObj = date || new Date();\r\n    const isHolidayDate = isHoliday(dateObj, holidays);\r\n\r\n    const suggestedType = getShiftTypeByPeriod('day', isHolidayDate, shiftTypes);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedOfficers([]);\r\n    setFormData({\r\n      duty_date: date ? date.toISOString().split('T')[0] : '',\r\n      shift_type_id: suggestedType?.id || '',\r\n      unit_id: '',\r\n      officer_ids: [],\r\n      notes: ''\r\n    });\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const openEditModal = (schedule) => {\r\n    setSelectedSchedule(schedule);\r\n    setFormData({\r\n      duty_date: schedule.duty_date,\r\n      shift_type_id: schedule.shift_type_id,\r\n      unit_id: schedule.unit_id || '',\r\n      officer_ids: schedule.officer_ids || [],\r\n      notes: schedule.notes || ''\r\n    });\r\n    setSelectedOfficers(schedule.officer_ids || []);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const closeModals = () => {\r\n    setShowAddModal(false);\r\n    setShowEditModal(false);\r\n    setSelectedSchedule(null);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedOfficers([]);\r\n    setShowOfficerList(false);\r\n    setOfficerSearchTerm('');\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      // อัปเดต shift_type_id และ officer_ids ตาม UI ใหม่\r\n      const dateObj = new Date(formData.duty_date + 'T00:00:00');\r\n      const isHolidayDate = isHoliday(dateObj, holidays);\r\n      const shiftType = getShiftTypeByPeriod(selectedShiftPeriod, isHolidayDate, shiftTypes);\r\n\r\n      const payload = {\r\n        action: selectedSchedule ? 'update_schedule' : 'create_schedule',\r\n        ...formData,\r\n        shift_type_id: shiftType?.id || formData.shift_type_id,\r\n        officer_ids: selectedOfficers,\r\n        ...(selectedSchedule && { schedule_id: selectedSchedule.id })\r\n      };\r\n\r\n      const response = await fetch(CONFIG.SCHEDULES_API, {\r\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const result = await response.json();\r\n      if (!result.success) throw new Error(result.message);\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error saving schedule:', error);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\r\n    setSaving(true);\r\n    try {\r\n      const payload = { action: 'delete_schedule', schedule_id: selectedSchedule.id };\r\n      const response = await fetch(CONFIG.SCHEDULES_API, {\r\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const result = await response.json();\r\n      if (!result.success) throw new Error(result.message);\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error deleting schedule:', error);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const filteredSchedules = useMemo(() => {\r\n    return schedules.filter(schedule => {\r\n      const unitMatch = !filters.unit || schedule.unit_id === parseInt(filters.unit);\r\n      const officerMatch = !filters.officer ||\r\n        (schedule.officer_names && schedule.officer_names.toLowerCase().includes(filters.officer.toLowerCase()));\r\n      return unitMatch && officerMatch;\r\n    });\r\n  }, [schedules, filters]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <div className=\"border-b border-slate-200\">\r\n        <nav className=\"flex space-x-4 px-4\">\r\n          <button\r\n            onClick={() => setActiveTab('shifts')}\r\n            className={`flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'shifts' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'\r\n              }`}\r\n          >\r\n            <Shield className=\"w-4 h-4\" />\r\n            <span>เวรรักษาการ</span>\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('documents')}\r\n                className={`flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${\r\n                    activeTab === 'documents' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'\r\n              }`}\r\n          >\r\n            <Briefcase className=\"w-4 h-4\" />\r\n            <span>จัดการโครงสร้าง</span>\r\n          </button>\r\n        </nav>\r\n      </div>\r\n\r\n      <div className=\"flex-grow p-4 bg-slate-50/50 overflow-y-auto\">\r\n        {activeTab === 'shifts' && (\r\n          <ShiftCalendarView\r\n            currentDate={currentDate}\r\n            schedules={filteredSchedules}\r\n            officers={officers}\r\n            shiftTypes={shiftTypes}\r\n            units={units}\r\n            holidays={holidays}\r\n            filters={filters}\r\n            setFilters={setFilters}\r\n            navigateMonth={navigateMonth}\r\n            goToToday={goToToday}\r\n            openAddModal={openAddModal}\r\n            openEditModal={openEditModal}\r\n          />\r\n        )}\r\n        {activeTab === 'documents' && <UnitStructureManagement />}\r\n      </div>\r\n\r\n      {(showAddModal || showEditModal) && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                {showEditModal ? 'แก้ไขตารางเวร' : 'เพิ่มตารางเวรใหม่'}\r\n              </h3>\r\n              {formData.duty_date && (\r\n                <p className=\"text-sm text-gray-600 mt-1\">\r\n                  วันที่ {new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH')}\r\n                  {isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) &&\r\n                    <span className=\"ml-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full\">วันหยุด</span>\r\n                  }\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              {/* วันที่ */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">วันที่</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={formData.duty_date}\r\n                  onChange={(e) => {\r\n                    handleInputChange('duty_date', e.target.value);\r\n                    // อัปเดต shift type อัตโนมัติเมื่อเปลี่ยนวันที่\r\n                    const newDate = new Date(e.target.value + 'T00:00:00');\r\n                    const isHol = isHoliday(newDate, holidays);\r\n                    const suggestedType = getShiftTypeByPeriod(selectedShiftPeriod, isHol, shiftTypes);\r\n                    setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                  }}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              {/* เลือกช่วงเวร */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">ช่วงเวร</label>\r\n                <div className=\"flex space-x-3\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedShiftPeriod('day');\r\n                      const isHol = formData.duty_date ? isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) : false;\r\n                                            const suggestedType = getShiftTypeByPeriod('day', isHol, shiftTypes);\r\n                                            setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                    }}\r\n                    className={`flex items-center px-4 py-2 rounded-lg border ${\r\n                        selectedShiftPeriod === 'day' \r\n                        ? 'bg-yellow-50 border-yellow-300 text-yellow-700'\r\n                        : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Sun className=\"w-4 h-4 mr-2\" />\r\n                    กลางวัน\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedShiftPeriod('night');\r\n                      const suggestedType = getShiftTypeByPeriod('night', false, shiftTypes);\r\n                      setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                    }}\r\n                    className={`flex items-center px-4 py-2 rounded-lg border ${\r\n                        selectedShiftPeriod === 'night' \r\n                        ? 'bg-indigo-50 border-indigo-300 text-indigo-700'\r\n                        : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Moon className=\"w-4 h-4 mr-2\" />\r\n                    กลางคืน\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* เลือกส่วนงาน (เช็คลิส) */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">ส่วนงาน</label>\r\n                <div className=\"border border-gray-300 rounded-lg p-4 max-h-40 overflow-y-auto\">\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    {Array.isArray(units) && units.map(unit => (\r\n                      <label key={unit.id} className=\"flex items-center py-1\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                                    checked={selectedUnits.includes(unit.id)}\r\n                                    onChange={() => handleUnitSelect(unit.id)}\r\n                                    className=\"h-4 w-4 text-indigo-600\"\r\n                        />\r\n                        <span className=\"ml-2 text-sm text-gray-900\">{unit.unit_name}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* เจ้าหน้าที่ที่เลือกแล้ว */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">เจ้าหน้าที่ที่เลือก</label>\r\n                <div className=\"border border-gray-300 rounded-lg p-3 min-h-[100px]\">\r\n                  {selectedOfficers.length === 0 ? (\r\n                    <p className=\"text-gray-500 text-sm\">ยังไม่ได้เลือกเจ้าหน้าที่</p>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      {selectedOfficers.map(officerId => {\r\n                        const officer = getOfficerById(officerId);\r\n                        return officer ? (\r\n                          <div key={officerId} className=\"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg\">\r\n                            <span className=\"text-sm\">{officer.prefix} {officer.firstname} {officer.lastname}</span>\r\n                            <button\r\n                              onClick={() => handleOfficerRemove(officerId)}\r\n                              className=\"text-red-600 hover:text-red-800\"\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        ) : null;\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* เพิ่มเจ้าหน้าที่ */}\r\n              <div>\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <label className=\"block text-sm font-medium text-gray-700\">จัดการเจ้าหน้าที่</label>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowOfficerList(!showOfficerList)}\r\n                    className=\"text-sm text-indigo-600 hover:text-indigo-800\"\r\n                  >\r\n                    {showOfficerList ? 'ซ่อน' : 'เพิ่มเจ้าหน้าที่'}\r\n                  </button>\r\n                </div>\r\n\r\n                {showOfficerList && (\r\n                  <div className=\"border border-gray-300 rounded-lg p-3\">\r\n                    {/* ช่องค้นหา */}\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Search className=\"w-4 h-4 text-gray-500\" />\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"ค้นหาชื่อเจ้าหน้าที่...\"\r\n                          value={officerSearchTerm}\r\n                          onChange={(e) => setOfficerSearchTerm(e.target.value)}\r\n                          className=\"flex-1 border border-gray-300 rounded px-2 py-1 text-sm\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* รายชื่อเจ้าหน้าที่ */}\r\n                    <div className=\"max-h-40 overflow-y-auto\">\r\n                      {getAvailableOfficers().length === 0 ? (\r\n                        <p className=\"text-gray-500 text-sm\">\r\n                          {selectedUnits.length === 0 ? 'กรุณาเลือกส่วนงานก่อน' :\r\n                            officerSearchTerm ? 'ไม่พบเจ้าหน้าที่ที่ค้นหา' : 'ไม่มีเจ้าหน้าที่ที่สามารถเลือกได้'}\r\n                                        </p>\r\n                      ) : (\r\n                        <div className=\"space-y-1\">\r\n                          {getAvailableOfficers().map(officer => (\r\n                            <div key={officer.id} className=\"flex items-center justify-between py-2 hover:bg-gray-50 px-2 rounded\">\r\n                              <span className=\"text-sm\">{officer.prefix} {officer.firstname} {officer.lastname}</span>\r\n                              <button\r\n                                onClick={() => {\r\n                                  handleOfficerAdd(officer.id);\r\n                                  setOfficerSearchTerm(''); // ล้างค่าค้นหาหลังเพิ่ม\r\n                                }}\r\n                                className=\"text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50\"\r\n                              >\r\n                                <Plus className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* หมายเหตุ */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">หมายเหตุ</label>\r\n                <textarea\r\n                  value={formData.notes}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"รายละเอียดเพิ่มเติม...\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6 border-t bg-gray-50 flex justify-between\">\r\n              <div>\r\n                {showEditModal && (\r\n                  <button\r\n                    onClick={handleDelete}\r\n                    disabled={saving}\r\n                    className=\"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4 mr-2\" />ลบเวร\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={closeModals}\r\n                  disabled={saving}\r\n                  className=\"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50\"\r\n                >\r\n                  ยกเลิก\r\n                </button>\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={saving || selectedOfficers.length === 0}\r\n                  className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {saving ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                      กำลังบันทึก...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Save className=\"w-4 h-4 mr-2\" />บันทึก\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Management View Component - เลือกการ์ดส่วนงานแล้วจัดการบุคลากร\r\nconst UnitManagementView = ({\r\n  dutyUnits,\r\n  unitStructures,\r\n  onEdit,\r\n  onDelete,\r\n  onAdd,\r\n  onEditDutyUnit,\r\n  onDeleteDutyUnit,\r\n  onAddDutyUnit,\r\n  getRoleIcon,\r\n  getRoleLabel,\r\n  getRoleBadgeClass\r\n}) => {\r\n  const [selectedUnit, setSelectedUnit] = useState(null);\r\n  const [isPersonnelModalOpen, setIsPersonnelModalOpen] = useState(false);\r\n  const [personnelAction, setPersonnelAction] = useState(''); // 'add', 'setSupervisor'\r\n\r\n  // Get unit statistics\r\n  const getUnitStats = (unitCode) => {\r\n    const unitPersonnel = unitStructures.filter(item => item.unit_code === unitCode);\r\n    const supervisor = unitPersonnel.find(item => item.role === 'supervisor');\r\n    const members = unitPersonnel.filter(item => item.role === 'member');\r\n    const director = unitPersonnel.find(item => item.role === 'director');\r\n    \r\n    return {\r\n      total: unitPersonnel.length,\r\n      supervisor,\r\n      members,\r\n      director,\r\n      hasSupervisor: !!supervisor,\r\n      hasDirector: !!director\r\n    };\r\n  };\r\n\r\n  const handleUnitSelect = (unit) => {\r\n    setSelectedUnit(unit);\r\n  };\r\n\r\n  const handleAddPersonnel = () => {\r\n    if (!selectedUnit) return;\r\n    \r\n    const stats = getUnitStats(selectedUnit.unit_code);\r\n    const nextSeniorityOrder = stats.total + 1;\r\n    \r\n    // เปิด modal พร้อมกำหนดค่าเริ่มต้น\r\n    onAdd({\r\n      unit_code: selectedUnit.unit_code,\r\n      role: selectedUnit.unit_code === 'CS08' ? 'director' : 'member',\r\n      seniority_order: nextSeniorityOrder\r\n    });\r\n  };\r\n\r\n  const handleSetSupervisor = () => {\r\n    if (!selectedUnit) return;\r\n    \r\n    // เปิด modal สำหรับกำหนดหัวหน้าส่วน\r\n    onAdd({\r\n      unit_code: selectedUnit.unit_code,\r\n      role: 'supervisor',\r\n      seniority_order: 1\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      {/* Unit Cards */}\r\n      <div className=\"lg:col-span-2\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800\">เลือกส่วนงาน</h2>\r\n          <button\r\n            onClick={() => onAddDutyUnit()}\r\n            className=\"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\"\r\n          >\r\n            <Plus className=\"w-4 h-4 mr-2\" />\r\n            เพิ่มส่วนงาน\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {dutyUnits.map((unit) => {\r\n            const stats = getUnitStats(unit.unit_code);\r\n            const isSelected = selectedUnit?.unit_code === unit.unit_code;\r\n            const isDirector = unit.unit_code === 'CS08';\r\n            \r\n            return (\r\n              <div\r\n                key={unit.unit_code}\r\n                onClick={() => handleUnitSelect(unit)}\r\n                className={`relative p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n                  isSelected \r\n                    ? 'border-indigo-500 bg-indigo-50' \r\n                    : 'border-slate-200 hover:border-slate-300'\r\n                }`}\r\n              >\r\n                {/* Unit Header */}\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-slate-800\">{unit.unit_code.toUpperCase()}</h3>\r\n                    <p className=\"text-sm text-slate-600\">{unit.unit_name}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onEditDutyUnit(unit);\r\n                      }}\r\n                      className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                    >\r\n                      <Edit className=\"w-4 h-4\" />\r\n                    </button>\r\n                    {!isDirector && (\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          onDeleteDutyUnit(unit);\r\n                        }}\r\n                        className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Unit Status */}\r\n                <div className=\"space-y-2 mb-3\">\r\n                  {isDirector ? (\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Star className=\"w-4 h-4 text-yellow-500\" />\r\n                      <span className=\"text-sm text-slate-600\">ผู้อำนวยการศูนย์</span>\r\n                      {stats.hasDirector && (\r\n                        <span className=\"text-sm text-green-600 font-medium\">\r\n                          (มีแล้ว)\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Shield className=\"w-4 h-4 text-blue-500\" />\r\n                      <span className=\"text-sm text-slate-600\">หัวหน้าส่วน:</span>\r\n                      {stats.hasSupervisor ? (\r\n                        <span className=\"text-sm text-green-600 font-medium\">\r\n                          {stats.supervisor?.full_name}\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"text-sm text-red-500\">ยังไม่กำหนด</span>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Users className=\"w-4 h-4 text-slate-400\" />\r\n                    <span className=\"text-sm text-slate-600\">\r\n                      บุคลากร: {stats.total} คน\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"pt-2 border-t border-slate-200\">\r\n                  <div className=\"flex justify-between text-xs\">\r\n                    <span className=\"text-slate-500\">คลิกเพื่อจัดการ</span>\r\n                    {isSelected && (\r\n                      <span className=\"text-indigo-600 font-medium\">เลือกแล้ว</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Unit Management Panel */}\r\n      <div className=\"lg:col-span-1\">\r\n        {selectedUnit ? (\r\n          <div className=\"bg-slate-50 rounded-lg p-4\">\r\n            <h3 className=\"font-semibold text-slate-800 mb-4\">\r\n              จัดการ {selectedUnit.unit_code.toUpperCase()}\r\n            </h3>\r\n            \r\n            <div className=\"space-y-3\">\r\n              {selectedUnit.unit_code === 'CS08' ? (\r\n                // Director Unit (CS08) - สามารถมีได้เพียง 1 คน\r\n                <>\r\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Star className=\"w-4 h-4 text-yellow-600\" />\r\n                      <span className=\"text-sm font-medium text-yellow-800\">ผู้อำนวยการศูนย์</span>\r\n                    </div>\r\n                    <p className=\"text-xs text-yellow-700\">\r\n                      หน่วยงานนี้สามารถมีได้เพียง 1 คนเท่านั้น\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <button\r\n                    onClick={handleAddPersonnel}\r\n                    className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700\"\r\n                  >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    <span>กำหนดผู้อำนวยการ</span>\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                // Regular Units - สามารถมีได้หลายคน\r\n                <>\r\n                  <button\r\n                    onClick={handleSetSupervisor}\r\n                    disabled={getUnitStats(selectedUnit.unit_code).hasSupervisor}\r\n                    className={`w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg ${\r\n                      getUnitStats(selectedUnit.unit_code).hasSupervisor\r\n                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                        : 'bg-blue-600 text-white hover:bg-blue-700'\r\n                    }`}\r\n                  >\r\n                    <Shield className=\"w-4 h-4\" />\r\n                    <span>\r\n                      {getUnitStats(selectedUnit.unit_code).hasSupervisor \r\n                        ? 'มีหัวหน้าส่วนแล้ว' \r\n                        : 'กำหนดหัวหน้าส่วน'\r\n                      }\r\n                    </span>\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={handleAddPersonnel}\r\n                    className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\"\r\n                  >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    <span>เพิ่มเจ้าหน้าที่</span>\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Current Personnel */}\r\n            <div className=\"mt-6\">\r\n              <h4 className=\"text-sm font-medium text-slate-700 mb-3\">บุคลากรปัจจุบัน</h4>\r\n              <div className=\"space-y-2\">\r\n                {unitStructures\r\n                  .filter(item => item.unit_code === selectedUnit.unit_code)\r\n                  .sort((a, b) => {\r\n                    // เรียงลำดับ: director > supervisor > member\r\n                    if (a.role === 'director') return -1;\r\n                    if (b.role === 'director') return 1;\r\n                    if (a.role === 'supervisor') return -1;\r\n                    if (b.role === 'supervisor') return 1;\r\n                    return a.seniority_order - b.seniority_order;\r\n                  })\r\n                  .map((person) => (\r\n                    <div key={person.id} className=\"flex items-center justify-between p-2 bg-white rounded border\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        {getRoleIcon(person.role)}\r\n                        <div>\r\n                          <p className=\"text-sm font-medium text-slate-800\">\r\n                            {person.full_name || `ตำแหน่งที่ ${person.position_number}`}\r\n                          </p>\r\n                          <p className=\"text-xs text-slate-500\">\r\n                            {getRoleLabel(person.role)} • ลำดับ {person.seniority_order}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <button\r\n                          onClick={() => onEdit(person)}\r\n                          className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                        >\r\n                          <Edit className=\"w-3 h-3\" />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => onDelete(person)}\r\n                          className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                        >\r\n                          <Trash2 className=\"w-3 h-3\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                \r\n                {unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).length === 0 && (\r\n                  <div className=\"text-center py-4 text-slate-500\">\r\n                    <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n                    <p className=\"text-sm\">ยังไม่มีบุคลากร</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-slate-50 rounded-lg p-8 text-center\">\r\n            <Building className=\"w-12 h-12 mx-auto mb-4 text-slate-400\" />\r\n            <h3 className=\"text-lg font-medium text-slate-600 mb-2\">เลือกส่วนงาน</h3>\r\n            <p className=\"text-sm text-slate-500\">\r\n              เลือกส่วนงานจากรายการด้านซ้ายเพื่อจัดการบุคลากร\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftWorkPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}