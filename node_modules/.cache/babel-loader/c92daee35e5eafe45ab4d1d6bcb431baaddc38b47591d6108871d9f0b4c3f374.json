{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apiwa\\\\Documents\\\\GitHub\\\\C\\\\src\\\\pages\\\\ChatPage.js\",\n  _import$meta,\n  _import$meta$env,\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Send, UserCircle2, Users, Shield } from \"lucide-react\";\nimport io from \"socket.io-client\";\n\n// ชี้ไปยังโดเมนที่คุณโฮสต์เซิร์ฟเวอร์\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SOCKET_URL = ((_import$meta = import.meta) === null || _import$meta === void 0 ? void 0 : (_import$meta$env = _import$meta.env) === null || _import$meta$env === void 0 ? void 0 : _import$meta$env.VITE_SOCKET_URL) || \"https://YOUR-SOCKET-SERVER\";\nconst HISTORY_URL = `${SOCKET_URL}/history`; // REST ดึงประวัติ\n\nconst DEFAULT_ROOMS = [{\n  key: \"global\",\n  label: \"ห้องกลาง\"\n}];\nexport default function ChatPage({\n  user\n}) {\n  _s();\n  var _rooms$find;\n  const [socket, setSocket] = useState(null);\n  const [rooms, setRooms] = useState(DEFAULT_ROOMS);\n  const [activeRoom, setActiveRoom] = useState(\"global\");\n  const [messages, setMessages] = useState([]);\n  const [typingUsers, setTypingUsers] = useState({});\n  const [text, setText] = useState(\"\");\n  const bottomRef = useRef(null);\n\n  // สร้าง JWT จากระบบล็อกอินของคุณ (ตัวอย่างเดโมเท่านั้น!)\n  // ควรได้ token นี้มาตั้งแต่ตอน login แล้วเก็บใน localStorage\n  const token = localStorage.getItem(\"chatJWT\");\n\n  // auto scroll\n  useEffect(() => {\n    var _bottomRef$current;\n    (_bottomRef$current = bottomRef.current) === null || _bottomRef$current === void 0 ? void 0 : _bottomRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // connect socket\n  useEffect(() => {\n    const s = io(`${SOCKET_URL}/chat`, {\n      transports: [\"websocket\", \"polling\"],\n      auth: {\n        token\n      },\n      // ใส่ JWT ที่ออกจาก backend คุณ\n      withCredentials: true\n    });\n    s.on(\"connect\", () => {\n      // สร้างรายชื่อห้องเริ่มต้นตามสิทธิ์ (ตัวอย่าง)\n      const today = new Date().toISOString().slice(0, 10).replace(/-/g, \"\");\n      const dynamicRooms = [{\n        key: \"global\",\n        label: \"ห้องกลาง\"\n      }, ...(user !== null && user !== void 0 && user.affiliation ? [{\n        key: `unit-${user.affiliation}`,\n        label: `สังกัด: ${user.affiliation}`\n      }] : []), ...(user !== null && user !== void 0 && user.deph ? [{\n        key: `dept-${user.deph}`,\n        label: `แผนก: ${user.deph}`\n      }] : []), ...(user !== null && user !== void 0 && user.onDuty ? [{\n        key: `duty-${today}`,\n        label: `เวรวันนี้ (${today})`\n      }] : [])];\n      setRooms(dynamicRooms);\n      setActiveRoom(\"global\");\n      // โหลดประวัติของห้องแรก\n      fetch(`${HISTORY_URL}?room=global&limit=50`).then(r => r.json()).then(setMessages).catch(() => {});\n    });\n    s.on(\"message\", msg => {\n      setMessages(prev => msg.room === activeRoom ? [...prev, msg] : prev);\n    });\n    s.on(\"typing\", ({\n      room,\n      userId,\n      name,\n      typing\n    }) => {\n      if (room !== activeRoom) return;\n      setTypingUsers(prev => {\n        const clone = {\n          ...prev\n        };\n        if (typing) clone[userId] = name;else delete clone[userId];\n        return clone;\n      });\n    });\n    s.on(\"disconnect\", () => {});\n    setSocket(s);\n    return () => s.disconnect();\n  }, []); // eslint-disable-line\n\n  // เปลี่ยนห้อง\n  const switchRoom = async roomKey => {\n    setActiveRoom(roomKey);\n    // ขอ server join เพิ่ม (เผื่อเป็นห้องไม่ได้ join อัตโนมัติ)\n    socket === null || socket === void 0 ? void 0 : socket.emit(\"join\", roomKey);\n    const hist = await fetch(`${HISTORY_URL}?room=${encodeURIComponent(roomKey)}&limit=50`).then(r => r.json()).catch(() => []);\n    setMessages(hist);\n    setTypingUsers({});\n  };\n\n  // ส่งข้อความ\n  const send = () => {\n    if (!text.trim() || !socket) return;\n    const payload = {\n      room: activeRoom,\n      text: text.trim(),\n      clientId: `${Date.now()}`\n    };\n    socket.emit(\"message\", payload);\n    setText(\"\");\n    // แสดงทันที (optimistic) จะให้รอ server echo กลับก็ได้\n    // setMessages(prev => [...prev, { ...payload, senderId: user?.id, senderName: user?.firstname, createdAt: Date.now() }]);\n  };\n  const onKeyDown = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      send();\n    } else {\n      // typing indicator\n      socket === null || socket === void 0 ? void 0 : socket.emit(\"typing\", {\n        room: activeRoom,\n        typing: true\n      });\n      // หยุด typing ผ่าน debounce ง่าย ๆ\n      clearTimeout(onKeyDown._t);\n      onKeyDown._t = setTimeout(() => socket === null || socket === void 0 ? void 0 : socket.emit(\"typing\", {\n        room: activeRoom,\n        typing: false\n      }), 800);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-b border-slate-200 flex items-center justify-between bg-gradient-to-r from-indigo-500 to-purple-600 text-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(Shield, {\n          className: \"w-7 h-7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: \"\\u0E41\\u0E0A\\u0E17\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs opacity-80\",\n            children: \"Realtime chat (Socket.io)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [rooms.length, \" \\u0E2B\\u0E49\\u0E2D\\u0E07\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 p-2 bg-slate-50 border-b border-slate-200 overflow-x-auto\",\n      children: rooms.map(r => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => switchRoom(r.key),\n        className: `px-3 py-1.5 rounded-xl text-sm whitespace-nowrap ${activeRoom === r.key ? \"bg-indigo-600 text-white\" : \"bg-white border border-slate-200 text-slate-700\"}`,\n        children: r.label\n      }, r.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50\",\n      children: [messages.map(m => {\n        const isMe = m.senderId && (String(m.senderId) === String(user === null || user === void 0 ? void 0 : user.id) || m.senderName === (user === null || user === void 0 ? void 0 : user.firstname));\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${isMe ? \"justify-end\" : \"justify-start\"}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-xs md:max-w-md px-4 py-2 rounded-2xl ${isMe ? \"bg-indigo-600 text-white rounded-br-none\" : \"bg-white border border-slate-200 text-slate-800 rounded-bl-none\"}`,\n            children: [!isMe && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs opacity-70 mb-0.5\",\n              children: m.senderName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-[10px] mt-1 ${isMe ? \"text-white/80\" : \"text-slate-500\"}`,\n              children: new Date(m.createdAt || Date.now()).toLocaleTimeString(\"th-TH\", {\n                hour: \"2-digit\",\n                minute: \"2-digit\"\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)\n        }, m.messageId, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this);\n      }), Object.keys(typingUsers).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-slate-500 italic px-2\",\n        children: [Object.values(typingUsers).join(\", \"), \" \\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1E\\u0E34\\u0E21\\u0E1E\\u0E4C...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: bottomRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-3 border-t border-slate-200 bg-white flex items-center space-x-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 1,\n        value: text,\n        onChange: e => setText(e.target.value),\n        onKeyDown: onKeyDown,\n        placeholder: `พิมพ์ข้อความถึง \"${((_rooms$find = rooms.find(r => r.key === activeRoom)) === null || _rooms$find === void 0 ? void 0 : _rooms$find.label) || \"\"}\"`,\n        className: \"flex-1 resize-none rounded-xl border border-slate-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: send,\n        className: \"p-3 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatPage, \"JgiPMweclurT01z4cRqZDpSscJ4=\");\n_c = ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Send","UserCircle2","Users","Shield","io","jsxDEV","_jsxDEV","SOCKET_URL","_import$meta","import","meta","_import$meta$env","env","VITE_SOCKET_URL","HISTORY_URL","DEFAULT_ROOMS","key","label","ChatPage","user","_s","_rooms$find","socket","setSocket","rooms","setRooms","activeRoom","setActiveRoom","messages","setMessages","typingUsers","setTypingUsers","text","setText","bottomRef","token","localStorage","getItem","_bottomRef$current","current","scrollIntoView","behavior","s","transports","auth","withCredentials","on","today","Date","toISOString","slice","replace","dynamicRooms","affiliation","deph","onDuty","fetch","then","r","json","catch","msg","prev","room","userId","name","typing","clone","disconnect","switchRoom","roomKey","emit","hist","encodeURIComponent","send","trim","payload","clientId","now","onKeyDown","e","shiftKey","preventDefault","clearTimeout","_t","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","onClick","m","isMe","senderId","String","id","senderName","firstname","createdAt","toLocaleTimeString","hour","minute","messageId","Object","keys","values","join","ref","rows","value","onChange","target","placeholder","find","_c","$RefreshReg$"],"sources":["C:/Users/apiwa/Documents/GitHub/C/src/pages/ChatPage.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { Send, UserCircle2, Users, Shield } from \"lucide-react\";\r\nimport io from \"socket.io-client\";\r\n\r\n// ชี้ไปยังโดเมนที่คุณโฮสต์เซิร์ฟเวอร์\r\nconst SOCKET_URL = import.meta?.env?.VITE_SOCKET_URL || \"https://YOUR-SOCKET-SERVER\";\r\nconst HISTORY_URL = `${SOCKET_URL}/history`; // REST ดึงประวัติ\r\n\r\nconst DEFAULT_ROOMS = [\r\n  { key: \"global\", label: \"ห้องกลาง\" },\r\n];\r\n\r\nexport default function ChatPage({ user }) {\r\n  const [socket, setSocket] = useState(null);\r\n  const [rooms, setRooms] = useState(DEFAULT_ROOMS);\r\n  const [activeRoom, setActiveRoom] = useState(\"global\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [typingUsers, setTypingUsers] = useState({});\r\n  const [text, setText] = useState(\"\");\r\n  const bottomRef = useRef(null);\r\n\r\n  // สร้าง JWT จากระบบล็อกอินของคุณ (ตัวอย่างเดโมเท่านั้น!)\r\n  // ควรได้ token นี้มาตั้งแต่ตอน login แล้วเก็บใน localStorage\r\n  const token = localStorage.getItem(\"chatJWT\");\r\n\r\n  // auto scroll\r\n  useEffect(() => {\r\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  // connect socket\r\n  useEffect(() => {\r\n    const s = io(`${SOCKET_URL}/chat`, {\r\n      transports: [\"websocket\", \"polling\"],\r\n      auth: { token }, // ใส่ JWT ที่ออกจาก backend คุณ\r\n      withCredentials: true\r\n    });\r\n\r\n    s.on(\"connect\", () => {\r\n      // สร้างรายชื่อห้องเริ่มต้นตามสิทธิ์ (ตัวอย่าง)\r\n      const today = new Date().toISOString().slice(0,10).replace(/-/g,\"\");\r\n      const dynamicRooms = [\r\n        { key: \"global\", label: \"ห้องกลาง\" },\r\n        ...(user?.affiliation ? [{ key: `unit-${user.affiliation}`, label: `สังกัด: ${user.affiliation}` }] : []),\r\n        ...(user?.deph ? [{ key: `dept-${user.deph}`, label: `แผนก: ${user.deph}` }] : []),\r\n        ...(user?.onDuty ? [{ key: `duty-${today}`, label: `เวรวันนี้ (${today})` }] : []),\r\n      ];\r\n      setRooms(dynamicRooms);\r\n      setActiveRoom(\"global\");\r\n      // โหลดประวัติของห้องแรก\r\n      fetch(`${HISTORY_URL}?room=global&limit=50`).then(r => r.json()).then(setMessages).catch(()=>{});\r\n    });\r\n\r\n    s.on(\"message\", (msg) => {\r\n      setMessages(prev => (msg.room === activeRoom ? [...prev, msg] : prev));\r\n    });\r\n\r\n    s.on(\"typing\", ({ room, userId, name, typing }) => {\r\n      if (room !== activeRoom) return;\r\n      setTypingUsers(prev => {\r\n        const clone = { ...prev };\r\n        if (typing) clone[userId] = name;\r\n        else delete clone[userId];\r\n        return clone;\r\n      });\r\n    });\r\n\r\n    s.on(\"disconnect\", () => {});\r\n\r\n    setSocket(s);\r\n    return () => s.disconnect();\r\n  }, []); // eslint-disable-line\r\n\r\n  // เปลี่ยนห้อง\r\n  const switchRoom = async (roomKey) => {\r\n    setActiveRoom(roomKey);\r\n    // ขอ server join เพิ่ม (เผื่อเป็นห้องไม่ได้ join อัตโนมัติ)\r\n    socket?.emit(\"join\", roomKey);\r\n    const hist = await fetch(`${HISTORY_URL}?room=${encodeURIComponent(roomKey)}&limit=50`).then(r => r.json()).catch(()=>[]);\r\n    setMessages(hist);\r\n    setTypingUsers({});\r\n  };\r\n\r\n  // ส่งข้อความ\r\n  const send = () => {\r\n    if (!text.trim() || !socket) return;\r\n    const payload = { room: activeRoom, text: text.trim(), clientId: `${Date.now()}` };\r\n    socket.emit(\"message\", payload);\r\n    setText(\"\");\r\n    // แสดงทันที (optimistic) จะให้รอ server echo กลับก็ได้\r\n    // setMessages(prev => [...prev, { ...payload, senderId: user?.id, senderName: user?.firstname, createdAt: Date.now() }]);\r\n  };\r\n\r\n  const onKeyDown = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      send();\r\n    } else {\r\n      // typing indicator\r\n      socket?.emit(\"typing\", { room: activeRoom, typing: true });\r\n      // หยุด typing ผ่าน debounce ง่าย ๆ\r\n      clearTimeout(onKeyDown._t);\r\n      onKeyDown._t = setTimeout(() => socket?.emit(\"typing\", { room: activeRoom, typing: false }), 800);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden\">\r\n      {/* Header */}\r\n      <div className=\"p-4 border-b border-slate-200 flex items-center justify-between bg-gradient-to-r from-indigo-500 to-purple-600 text-white\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Shield className=\"w-7 h-7\" />\r\n          <div>\r\n            <div className=\"font-semibold\">แชทหน่วย</div>\r\n            <div className=\"text-xs opacity-80\">Realtime chat (Socket.io)</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2 text-sm\">\r\n          <Users className=\"w-4 h-4\" />\r\n          <span>{rooms.length} ห้อง</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Tabs (Rooms) */}\r\n      <div className=\"flex gap-2 p-2 bg-slate-50 border-b border-slate-200 overflow-x-auto\">\r\n        {rooms.map(r => (\r\n          <button\r\n            key={r.key}\r\n            onClick={() => switchRoom(r.key)}\r\n            className={`px-3 py-1.5 rounded-xl text-sm whitespace-nowrap ${\r\n              activeRoom === r.key ? \"bg-indigo-600 text-white\" : \"bg-white border border-slate-200 text-slate-700\"\r\n            }`}\r\n          >\r\n            {r.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50\">\r\n        {messages.map((m) => {\r\n          const isMe = m.senderId && (String(m.senderId) === String(user?.id) || m.senderName === user?.firstname);\r\n        return (\r\n          <div key={m.messageId} className={`flex ${isMe ? \"justify-end\" : \"justify-start\"}`}>\r\n            <div className={`max-w-xs md:max-w-md px-4 py-2 rounded-2xl ${\r\n              isMe ? \"bg-indigo-600 text-white rounded-br-none\" : \"bg-white border border-slate-200 text-slate-800 rounded-bl-none\"\r\n            }`}>\r\n              {!isMe && <div className=\"text-xs opacity-70 mb-0.5\">{m.senderName}</div>}\r\n              <div>{m.text}</div>\r\n              <div className={`text-[10px] mt-1 ${isMe ? \"text-white/80\" : \"text-slate-500\"}`}>\r\n                {new Date(m.createdAt || Date.now()).toLocaleTimeString(\"th-TH\",{hour:\"2-digit\",minute:\"2-digit\"})}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )})}\r\n        {/* typing */}\r\n        {Object.keys(typingUsers).length > 0 && (\r\n          <div className=\"text-xs text-slate-500 italic px-2\">\r\n            {Object.values(typingUsers).join(\", \")} กำลังพิมพ์...\r\n          </div>\r\n        )}\r\n        <div ref={bottomRef} />\r\n      </div>\r\n\r\n      {/* Input */}\r\n      <div className=\"p-3 border-t border-slate-200 bg-white flex items-center space-x-2\">\r\n        <textarea\r\n          rows={1}\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          onKeyDown={onKeyDown}\r\n          placeholder={`พิมพ์ข้อความถึง \"${rooms.find(r=>r.key===activeRoom)?.label || \"\"}\"`}\r\n          className=\"flex-1 resize-none rounded-xl border border-slate-300 px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n        />\r\n        <button\r\n          onClick={send}\r\n          className=\"p-3 rounded-xl bg-indigo-600 hover:bg-indigo-700 text-white flex items-center justify-center\"\r\n        >\r\n          <Send className=\"w-5 h-5\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}