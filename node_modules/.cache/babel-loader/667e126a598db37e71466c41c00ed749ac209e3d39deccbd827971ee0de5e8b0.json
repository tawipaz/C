{"ast":null,"code":"import _objectSpread from\"C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{X,Save,User,Crown,Star}from'lucide-react';import{CONFIG}from'../../config';import{useAlert}from'../common/AlertSystem';// Modal สำหรับเพิ่มบุคลากรพร้อมกำหนดบทบาทและลำดับอาวุโส\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AddMemberModal=_ref=>{let{selectedUnit,units,officers,unitStructures,onClose,onSave}=_ref;const{success,error}=useAlert();const[formData,setFormData]=useState({position_number:'',role:'member',seniority_order:1});const[loading,setLoading]=useState(false);// Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\nconst availableOfficers=useMemo(()=>{const usedPositions=unitStructures.map(s=>s.position_number);return officers.filter(officer=>!usedPositions.includes(officer.position_number));},[officers,unitStructures]);// Get current unit members เพื่อกำหนด default seniority order\nconst currentUnitMembers=useMemo(()=>{return unitStructures.filter(s=>s.unit_code===selectedUnit.unit_code).sort((a,b)=>a.seniority_order-b.seniority_order);},[unitStructures,selectedUnit]);// Reset form เมื่อเปิด modal\nuseEffect(()=>{const nextSeniorityOrder=currentUnitMembers.length+1;setFormData({position_number:'',role:selectedUnit.isDirector?'director':'member',seniority_order:nextSeniorityOrder});},[selectedUnit,currentUnitMembers]);// Check if role is available\nconst canSelectRole=role=>{if(role==='director'){return!unitStructures.some(s=>s.role==='director');}if(role==='supervisor'){return!currentUnitMembers.some(s=>s.role==='supervisor');}return true;};// Get suggested seniority orders\nconst getSuggestedSeniorityOrders=()=>{const usedOrders=currentUnitMembers.map(m=>m.seniority_order);const suggestions=[];// แนะนำตำแหน่งที่ว่าง\nfor(let i=1;i<=currentUnitMembers.length+3;i++){if(!usedOrders.includes(i)){suggestions.push(i);}}return suggestions.slice(0,5);// แสดงไม่เกิน 5 ตัวเลือก\n};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const response=await fetch(\"\".concat(CONFIG.UNIT_STRUCTURE_API),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({position_number:formData.position_number,unit_code:selectedUnit.unit_code,unit_name:selectedUnit.unit_name,role:formData.role,seniority_order:formData.seniority_order})});const data=await response.json();if(data.success){success('เพิ่มบุคลากรสำเร็จ');onSave();onClose();}else{var _data$errors;console.error('API Error:',data);error(data.message||((_data$errors=data.errors)===null||_data$errors===void 0?void 0:_data$errors.join(', '))||'เกิดข้อผิดพลาดในการเพิ่มบุคลากร');}}catch(err){console.error('Error adding member:',err);error('เกิดข้อผิดพลาดในการเชื่อมต่อ API');}finally{setLoading(false);}};const getRoleIcon=role=>{switch(role){case'director':return/*#__PURE__*/_jsx(Crown,{className:\"w-4 h-4 text-purple-600\"});case'supervisor':return/*#__PURE__*/_jsx(Star,{className:\"w-4 h-4 text-blue-600\"});default:return/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-green-600\"});}};const getRoleText=role=>{switch(role){case'director':return'ผู้อำนวยการ';case'supervisor':return'หัวหน้าส่วน';default:return'เจ้าหน้าที่';}};const getRoleDescription=role=>{switch(role){case'director':return'ผู้อำนวยการศูนย์รักษาความปลอดภัย (มีได้คนเดียว)';case'supervisor':return'หัวหน้าส่วนงาน (แต่ละส่วนมีได้คนเดียว)';default:return'เจ้าหน้าที่ปฏิบัติงานทั่วไป';}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl max-w-md w-full p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(User,{className:\"w-5 h-5 mr-2 text-indigo-600\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E43\\u0E2B\\u0E21\\u0E48\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"p-1 text-slate-400 hover:text-slate-600 rounded\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-indigo-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-indigo-800\",children:[\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E02\\u0E49\\u0E32: \",selectedUnit.unit_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-indigo-600 mt-1\",children:[\"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19: \",currentUnitMembers.length,\" \\u0E04\\u0E19\"]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.position_number,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{position_number:e.target.value})),className:\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"}),availableOfficers.map(officer=>/*#__PURE__*/_jsxs(\"option\",{value:officer.position_number,children:[officer.prefix,\" \",officer.firstname,\" \",officer.lastname,\" (\",officer.position_number,\")\"]},officer.position_number))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0E1A\\u0E17\\u0E1A\\u0E32\\u0E17\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:['member','supervisor','director'].map(role=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center p-3 border rounded-lg cursor-pointer transition-colors \".concat(formData.role===role?'border-indigo-500 bg-indigo-50':canSelectRole(role)?'border-slate-200 hover:border-slate-300':'border-slate-100 bg-slate-50 cursor-not-allowed opacity-50'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"role\",value:role,checked:formData.role===role,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{role:e.target.value})),disabled:!canSelectRole(role),className:\"sr-only\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-1\",children:[getRoleIcon(role),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:getRoleText(role)}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-slate-500\",children:getRoleDescription(role)})]})]}),formData.role===role&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-indigo-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-white rounded-full\"})})]},role))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-2\",children:\"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E2D\\u0E32\\u0E27\\u0E38\\u0E42\\u0E2A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:formData.seniority_order,onChange:e=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{seniority_order:parseInt(e.target.value)})),className:\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-slate-500\",children:\"\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33:\"}),getSuggestedSeniorityOrders().map(order=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{seniority_order:order})),className:\"px-2 py-1 text-xs rounded border transition-colors \".concat(formData.seniority_order===order?'bg-indigo-600 text-white border-indigo-600':'bg-slate-100 text-slate-600 border-slate-200 hover:border-slate-300'),children:order},order))]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-slate-500\",children:formData.role==='supervisor'?'หัวหน้าส่วนควรเป็น 1':'เลขที่มากกว่าจะมีอาวุโสน้อยกว่า'})]})]}),currentUnitMembers.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-slate-50 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-slate-700 mb-2\",children:\"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E2D\\u0E32\\u0E27\\u0E38\\u0E42\\u0E2A\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 max-h-32 overflow-y-auto\",children:currentUnitMembers.map(member=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-xs text-slate-600\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"w-6 text-center\",children:[member.seniority_order,\".\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center mr-2\",children:getRoleIcon(member.role)}),/*#__PURE__*/_jsxs(\"span\",{children:[member.prefix,\" \",member.firstname,\" \",member.lastname]})]},member.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\",disabled:loading,children:\"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!formData.position_number,className:\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-2\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"]})})]})]})]})});};export default AddMemberModal;","map":{"version":3,"names":["React","useState","useEffect","useMemo","X","Save","User","Crown","Star","CONFIG","useAlert","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AddMemberModal","_ref","selectedUnit","units","officers","unitStructures","onClose","onSave","success","error","formData","setFormData","position_number","role","seniority_order","loading","setLoading","availableOfficers","usedPositions","map","s","filter","officer","includes","currentUnitMembers","unit_code","sort","a","b","nextSeniorityOrder","length","isDirector","canSelectRole","some","getSuggestedSeniorityOrders","usedOrders","m","suggestions","i","push","slice","handleSubmit","e","preventDefault","response","fetch","concat","UNIT_STRUCTURE_API","method","headers","body","JSON","stringify","unit_name","data","json","_data$errors","console","message","errors","join","err","getRoleIcon","className","getRoleText","getRoleDescription","children","onClick","onSubmit","value","onChange","prev","_objectSpread","target","required","prefix","firstname","lastname","type","name","checked","disabled","min","parseInt","order","member","id"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/components/UnitStructure/AddMemberModal.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { X, Save, User, Crown, Star } from 'lucide-react';\r\nimport { CONFIG } from '../../config';\r\nimport { useAlert } from '../common/AlertSystem';\r\n\r\n// Modal สำหรับเพิ่มบุคลากรพร้อมกำหนดบทบาทและลำดับอาวุโส\r\nconst AddMemberModal = ({ \r\n  selectedUnit, \r\n  units,\r\n  officers, \r\n  unitStructures,\r\n  onClose, \r\n  onSave \r\n}) => {\r\n  const { success, error } = useAlert();\r\n  const [formData, setFormData] = useState({\r\n    position_number: '',\r\n    role: 'member',\r\n    seniority_order: 1\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\r\n  const availableOfficers = useMemo(() => {\r\n    const usedPositions = unitStructures.map(s => s.position_number);\r\n    return officers.filter(officer => \r\n      !usedPositions.includes(officer.position_number)\r\n    );\r\n  }, [officers, unitStructures]);\r\n\r\n  // Get current unit members เพื่อกำหนด default seniority order\r\n  const currentUnitMembers = useMemo(() => {\r\n    return unitStructures.filter(s => \r\n      s.unit_code === selectedUnit.unit_code\r\n    ).sort((a, b) => a.seniority_order - b.seniority_order);\r\n  }, [unitStructures, selectedUnit]);\r\n\r\n  // Reset form เมื่อเปิด modal\r\n  useEffect(() => {\r\n    const nextSeniorityOrder = currentUnitMembers.length + 1;\r\n    setFormData({\r\n      position_number: '',\r\n      role: selectedUnit.isDirector ? 'director' : 'member',\r\n      seniority_order: nextSeniorityOrder\r\n    });\r\n  }, [selectedUnit, currentUnitMembers]);\r\n\r\n  // Check if role is available\r\n  const canSelectRole = (role) => {\r\n    if (role === 'director') {\r\n      return !unitStructures.some(s => s.role === 'director');\r\n    }\r\n    if (role === 'supervisor') {\r\n      return !currentUnitMembers.some(s => s.role === 'supervisor');\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // Get suggested seniority orders\r\n  const getSuggestedSeniorityOrders = () => {\r\n    const usedOrders = currentUnitMembers.map(m => m.seniority_order);\r\n    const suggestions = [];\r\n    \r\n    // แนะนำตำแหน่งที่ว่าง\r\n    for (let i = 1; i <= currentUnitMembers.length + 3; i++) {\r\n      if (!usedOrders.includes(i)) {\r\n        suggestions.push(i);\r\n      }\r\n    }\r\n    \r\n    return suggestions.slice(0, 5); // แสดงไม่เกิน 5 ตัวเลือก\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          position_number: formData.position_number,\r\n          unit_code: selectedUnit.unit_code,\r\n          unit_name: selectedUnit.unit_name,\r\n          role: formData.role,\r\n          seniority_order: formData.seniority_order\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        success('เพิ่มบุคลากรสำเร็จ');\r\n        onSave();\r\n        onClose();\r\n      } else {\r\n        console.error('API Error:', data);\r\n        error(data.message || data.errors?.join(', ') || 'เกิดข้อผิดพลาดในการเพิ่มบุคลากร');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error adding member:', err);\r\n      error('เกิดข้อผิดพลาดในการเชื่อมต่อ API');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role) => {\r\n    switch (role) {\r\n      case 'director':\r\n        return <Crown className=\"w-4 h-4 text-purple-600\" />;\r\n      case 'supervisor':\r\n        return <Star className=\"w-4 h-4 text-blue-600\" />;\r\n      default:\r\n        return <User className=\"w-4 h-4 text-green-600\" />;\r\n    }\r\n  };\r\n\r\n  const getRoleText = (role) => {\r\n    switch (role) {\r\n      case 'director':\r\n        return 'ผู้อำนวยการ';\r\n      case 'supervisor':\r\n        return 'หัวหน้าส่วน';\r\n      default:\r\n        return 'เจ้าหน้าที่';\r\n    }\r\n  };\r\n\r\n  const getRoleDescription = (role) => {\r\n    switch (role) {\r\n      case 'director':\r\n        return 'ผู้อำนวยการศูนย์รักษาความปลอดภัย (มีได้คนเดียว)';\r\n      case 'supervisor':\r\n        return 'หัวหน้าส่วนงาน (แต่ละส่วนมีได้คนเดียว)';\r\n      default:\r\n        return 'เจ้าหน้าที่ปฏิบัติงานทั่วไป';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold flex items-center\">\r\n            <User className=\"w-5 h-5 mr-2 text-indigo-600\" />\r\n            เพิ่มบุคลากรใหม่\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-1 text-slate-400 hover:text-slate-600 rounded\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4 p-3 bg-indigo-50 rounded-lg\">\r\n          <div className=\"text-sm font-medium text-indigo-800\">\r\n            เพิ่มเข้า: {selectedUnit.unit_name}\r\n          </div>\r\n          <div className=\"text-xs text-indigo-600 mt-1\">\r\n            บุคลากรปัจจุบัน: {currentUnitMembers.length} คน\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {/* เลือกเจ้าหน้าที่ */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">เจ้าหน้าที่</label>\r\n            <select\r\n              value={formData.position_number}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, position_number: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\">เลือกเจ้าหน้าที่</option>\r\n              {availableOfficers.map(officer => (\r\n                <option key={officer.position_number} value={officer.position_number}>\r\n                  {officer.prefix} {officer.firstname} {officer.lastname} ({officer.position_number})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* เลือกบทบาท */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">บทบาท</label>\r\n            <div className=\"space-y-2\">\r\n              {['member', 'supervisor', 'director'].map(role => (\r\n                <label\r\n                  key={role}\r\n                  className={`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${\r\n                    formData.role === role\r\n                      ? 'border-indigo-500 bg-indigo-50'\r\n                      : canSelectRole(role)\r\n                      ? 'border-slate-200 hover:border-slate-300'\r\n                      : 'border-slate-100 bg-slate-50 cursor-not-allowed opacity-50'\r\n                  }`}\r\n                >\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"role\"\r\n                    value={role}\r\n                    checked={formData.role === role}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, role: e.target.value }))}\r\n                    disabled={!canSelectRole(role)}\r\n                    className=\"sr-only\"\r\n                  />\r\n                  <div className=\"flex items-center flex-1\">\r\n                    {getRoleIcon(role)}\r\n                    <div className=\"ml-3\">\r\n                      <div className=\"font-medium\">{getRoleText(role)}</div>\r\n                      <div className=\"text-xs text-slate-500\">{getRoleDescription(role)}</div>\r\n                    </div>\r\n                  </div>\r\n                  {formData.role === role && (\r\n                    <div className=\"w-4 h-4 bg-indigo-600 rounded-full flex items-center justify-center\">\r\n                      <div className=\"w-2 h-2 bg-white rounded-full\"></div>\r\n                    </div>\r\n                  )}\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* ลำดับอาวุโส */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">ลำดับอาวุโส</label>\r\n            <div className=\"space-y-2\">\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={formData.seniority_order}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, seniority_order: parseInt(e.target.value) }))}\r\n                className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n                required\r\n              />\r\n              \r\n              {/* แสดงตัวเลือกลำดับที่แนะนำ */}\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <span className=\"text-xs text-slate-500\">แนะนำ:</span>\r\n                {getSuggestedSeniorityOrders().map(order => (\r\n                  <button\r\n                    key={order}\r\n                    type=\"button\"\r\n                    onClick={() => setFormData(prev => ({ ...prev, seniority_order: order }))}\r\n                    className={`px-2 py-1 text-xs rounded border transition-colors ${\r\n                      formData.seniority_order === order\r\n                        ? 'bg-indigo-600 text-white border-indigo-600'\r\n                        : 'bg-slate-100 text-slate-600 border-slate-200 hover:border-slate-300'\r\n                    }`}\r\n                  >\r\n                    {order}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              \r\n              <p className=\"text-xs text-slate-500\">\r\n                {formData.role === 'supervisor' ? 'หัวหน้าส่วนควรเป็น 1' : 'เลขที่มากกว่าจะมีอาวุโสน้อยกว่า'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* แสดงการจัดเรียงปัจจุบัน */}\r\n          {currentUnitMembers.length > 0 && (\r\n            <div className=\"p-3 bg-slate-50 rounded-lg\">\r\n              <div className=\"text-sm font-medium text-slate-700 mb-2\">\r\n                ลำดับอาวุโสปัจจุบัน:\r\n              </div>\r\n              <div className=\"space-y-1 max-h-32 overflow-y-auto\">\r\n                {currentUnitMembers.map(member => (\r\n                  <div key={member.id} className=\"flex items-center text-xs text-slate-600\">\r\n                    <span className=\"w-6 text-center\">{member.seniority_order}.</span>\r\n                    <div className=\"flex items-center mr-2\">\r\n                      {getRoleIcon(member.role)}\r\n                    </div>\r\n                    <span>{member.prefix} {member.firstname} {member.lastname}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* ปุ่มดำเนินการ */}\r\n          <div className=\"flex justify-end space-x-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\"\r\n              disabled={loading}\r\n            >\r\n              ยกเลิก\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading || !formData.position_number}\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  กำลังเพิ่ม...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"w-4 h-4 mr-2\" />\r\n                  เพิ่มบุคลากร\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddMemberModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}