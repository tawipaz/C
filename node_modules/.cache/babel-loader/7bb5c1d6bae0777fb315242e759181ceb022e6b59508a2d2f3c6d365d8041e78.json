{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\GitHub\\\\court-marshal-connect\\\\src\\\\pages\\\\PersonnelPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$();\nimport React, { useEffect, useState, useMemo, useCallback, memo } from \"react\";\nimport { Search, Filter, Users, Phone, Mail, Calendar, Award, Building2, UserCheck, UserX, TrendingUp, PieChart, BarChart3, Download, RefreshCw, Eye, Grid3X3, List, X, AlertCircle, CheckCircle2, Clock, Briefcase, GraduationCap, Edit2, Save, MapPin, Building, Crown, FileText } from \"lucide-react\";\nimport { CONFIG } from '../config';\nimport DonutChart from '../components/DonutChart';\nimport LineChart from '../components/LineChart';\n\n// Function to format phone number (add leading 0 if needed)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst formatPhoneNumber = phone => {\n  if (!phone) return '';\n  const cleanPhone = phone.replace(/\\D/g, ''); // Remove non-digits\n  if (cleanPhone.length === 9) {\n    return '0' + cleanPhone; // Add leading 0 for 9-digit numbers\n  }\n  return cleanPhone; // Return as-is for other lengths\n};\n\n// StatCard Component\nconst StatCard = /*#__PURE__*/memo(_c = ({\n  title,\n  value,\n  icon: Icon,\n  color = \"blue\",\n  trend,\n  subtitle\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-between mb-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `w-12 h-12 bg-${color}-100 rounded-xl flex items-center justify-center`,\n      children: /*#__PURE__*/_jsxDEV(Icon, {\n        className: `w-6 h-6 text-${color}-600`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), trend && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center text-green-600 text-sm\",\n      children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n        className: \"w-4 h-4 mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [trend, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-3xl font-bold text-slate-900 mb-1\",\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-sm text-slate-600\",\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this), subtitle && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-xs text-slate-500 mt-1\",\n    children: subtitle\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 52,\n  columnNumber: 3\n}, this));\n\n// Table Chart Component (สำหรับแสดงข้อมูลตำแหน่งแบบตาราง)\n_c2 = StatCard;\nconst TableChart = /*#__PURE__*/_s(/*#__PURE__*/memo(_c3 = _s(({\n  title,\n  data,\n  colors = []\n}) => {\n  _s();\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold text-slate-900 mb-4 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n        className: \"w-5 h-5 mr-2 text-slate-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-2xl font-bold text-slate-900\",\n          children: total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid gap-2\",\n        children: data.slice(0, 8).map((item, index) => {\n          const percentage = (item.value / total * 100).toFixed(1);\n          const color = colors[index % colors.length] || '#6366f1';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between p-3 bg-slate-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3 flex-1 min-w-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 rounded-sm flex-shrink-0\",\n                style: {\n                  backgroundColor: color\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-slate-700 font-medium truncate\",\n                title: item.label,\n                children: item.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2 text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-bold text-slate-900\",\n                children: item.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-slate-500\",\n                children: [percentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this)]\n          }, `${item.label}-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}, \"TUahRIVHrNmruf3w2Blr6WVpjUQ=\")), \"TUahRIVHrNmruf3w2Blr6WVpjUQ=\");\n\n// Function สำหรับตัดคำยาว\n_c4 = TableChart;\nconst truncatePosition = position => {\n  if (!position) return '';\n  const removePatterns = ['เจ้าพนักงานตำรวจศาล', 'ตำรวจศาล', 'ตำรวจ', 'พนักงาน'];\n  let result = position;\n  for (const pattern of removePatterns) {\n    result = result.replace(new RegExp(pattern, 'gi'), '');\n  }\n  return result.trim() || position;\n};\n\n// Function สำหรับตัดคำ \"ศาล\" ออกจากสังกัด\nconst truncateAffiliation = affiliation => {\n  if (!affiliation) return '';\n  const lower = affiliation.toLowerCase();\n\n  // Only remove the leading word 'ศาล' for affiliations that describe\n  // 'ในสังกัดสำนักยุติธรรมประจำภาค' (or variants). Do not strip 'ศาล'\n  // from other court names like 'ศาลสูง' or 'ศาลชำนาญพิเศษ'.\n  if (lower.includes('ในสังกัดสำนักยุติธรรมประจำภาค') || lower.includes('ในสังกัดสำนักยุติธรรม')) {\n    return affiliation.replace(/^ศาล\\s*/i, '').trim() || affiliation;\n  }\n\n  // Otherwise return affiliation unchanged\n  return affiliation;\n};\n\n// --- NEW: Proportional Treemap Chart Component ---\n// --- NEW: Proportional Treemap Chart Component (MODIFIED FOR LOGARITHMIC SCALE) ---\nconst TreemapChart = /*#__PURE__*/_s2(/*#__PURE__*/memo(_c5 = _s2(({\n  title,\n  data,\n  colors = []\n}) => {\n  _s2();\n  // --- ส่วนที่แก้ไข: คำนวณ total จากค่าจริงก่อนแปลงสเกล ---\n  const originalTotal = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\n\n  // --- ส่วนที่แก้ไข: สร้างข้อมูลชุดใหม่ที่มีการปรับสเกลด้วย Math.log1p ---\n  // Math.log1p(x) จะคำนวณ log(1+x) ช่วยให้ค่าที่น้อยๆ มีขนาดใหญ่ขึ้นเมื่อเทียบกับค่ามากๆ\n  const scaledData = useMemo(() => data.map(item => ({\n    ...item,\n    scaledValue: Math.log1p(item.value)\n  })), [data]);\n  const generateTreemapLayout = useCallback((items, width, height) => {\n    let rects = [];\n    const layoutRow = (rowItems, x, y, w, h) => {\n      if (!rowItems.length) return;\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n      const totalValue = rowItems.reduce((sum, i) => sum + i.scaledValue, 0);\n      if (totalValue === 0) return;\n      let offset = 0;\n      const isHorizontal = w > h;\n      for (const item of rowItems) {\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n        const percentage = item.scaledValue / totalValue;\n        if (isHorizontal) {\n          const rectWidth = w * percentage;\n          rects.push({\n            x: x + offset,\n            y,\n            width: rectWidth,\n            height: h,\n            item\n          });\n          offset += rectWidth;\n        } else {\n          const rectHeight = h * percentage;\n          rects.push({\n            x,\n            y: y + offset,\n            width: w,\n            height: rectHeight,\n            item\n          });\n          offset += rectHeight;\n        }\n      }\n    };\n    const squarify = (items, x, y, w, h) => {\n      if (!items.length) return;\n      if (items.length <= 4) {\n        layoutRow(items, x, y, w, h);\n        return;\n      }\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n      const halfValue = items.reduce((sum, i) => sum + i.scaledValue, 0) / 2;\n      let runningTotal = 0;\n      let splitIndex = 0;\n      for (let i = 0; i < items.length; i++) {\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\n        runningTotal += items[i].scaledValue;\n        if (runningTotal >= halfValue) {\n          splitIndex = i + 1;\n          break;\n        }\n      }\n      splitIndex = Math.max(1, splitIndex);\n      const groupA = items.slice(0, splitIndex);\n      const groupB = items.slice(splitIndex);\n      const groupATotal = groupA.reduce((sum, i) => sum + i.scaledValue, 0);\n      const totalValue = groupATotal + groupB.reduce((sum, i) => sum + i.scaledValue, 0);\n      if (totalValue === 0) return;\n      if (w > h) {\n        const groupAWidth = w * (groupATotal / totalValue);\n        squarify(groupA, x, y, groupAWidth, h);\n        squarify(groupB, x + groupAWidth, y, w - groupAWidth, h);\n      } else {\n        const groupAHeight = h * (groupATotal / totalValue);\n        squarify(groupA, x, y, w, groupAHeight);\n        squarify(groupB, x, y + groupAHeight, w, h - groupAHeight);\n      }\n    };\n    squarify(items, 0, 0, 1000, 1000); // Use a relative base for layout\n    return rects;\n  }, []);\n\n  // --- ส่วนที่แก้ไข: ส่ง scaledData เข้าไปคำนวณ layout ---\n  const layout = useMemo(() => generateTreemapLayout(scaledData), [scaledData, generateTreemapLayout]);\n  if (!data.length || originalTotal === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 mb-4 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 85\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E01\\u0E23\\u0E32\\u0E1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col h-full\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold text-slate-900 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n          className: \"w-5 h-5 mr-2 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), title]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-bold text-slate-900\",\n          children: originalTotal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-slate-500\",\n          children: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative w-full flex-1\",\n      children: layout.map(rect => {\n        const itemIndex = scaledData.findIndex(d => d.label === rect.item.label);\n        const color = colors[itemIndex % colors.length];\n\n        // --- ส่วนที่แก้ไข: คำนวณ % จากค่าจริง ---\n        const percentage = originalTotal > 0 ? (rect.item.value / originalTotal * 100).toFixed(1) : 0;\n        const valueText = `${rect.item.value} (${percentage}%)`;\n        const fontSize = Math.min(rect.width / 10, rect.height / 5, 16);\n        const textShadowStyle = {\n          textShadow: '0px 1px 3px rgba(0, 0, 0, 0.6)'\n        };\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute border-2 border-white rounded-md flex flex-col items-center justify-center p-1 overflow-hidden text-center\",\n          style: {\n            left: `${rect.x / 10}%`,\n            top: `${rect.y / 10}%`,\n            width: `${rect.width / 10}%`,\n            height: `${rect.height / 10}%`,\n            backgroundColor: color,\n            transition: 'all 0.4s ease-in-out'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white font-bold\",\n            style: {\n              fontSize: `${fontSize}px`,\n              ...textShadowStyle\n            },\n            children: valueText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-white opacity-90 leading-tight\",\n            style: {\n              fontSize: `${Math.max(fontSize * 0.7, 10)}px`,\n              ...textShadowStyle\n            },\n            children: rect.item.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this)]\n        }, rect.item.label, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 5\n  }, this);\n}, \"tKEXOZNPI3AalzIv6bFC4hz8MvI=\")), \"tKEXOZNPI3AalzIv6bFC4hz8MvI=\");\n\n// Pie Chart Component - ปรับปรุงให้สวยงาม\n_c6 = TreemapChart;\nconst PieChartComponent = /*#__PURE__*/_s3(/*#__PURE__*/memo(_c7 = _s3(({\n  title,\n  data,\n  colors = []\n}) => {\n  _s3();\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\n  if (!data.length || total === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E01\\u0E23\\u0E32\\u0E1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center mb-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xl font-bold text-slate-900\",\n        children: [\"\\u0E08\\u0E33\\u0E19\\u0E27\\u0E19 \", total, \" \\u0E04\\u0E19\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col items-center justify-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative w-80 h-80 mb-8\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"320\",\n          height: \"320\",\n          viewBox: \"0 0 320 320\",\n          className: \"w-full h-full\",\n          children: data.map((item, index) => {\n            const percentage = item.value / total;\n            const angle = percentage * 360;\n            const prevPercentage = data.slice(0, index).reduce((sum, d) => sum + d.value, 0) / total;\n            const startAngle = prevPercentage * 360 - 90;\n            const endAngle = startAngle + angle;\n\n            // Pie chart - เป็นวงกลมเต็ม ไม่ใช่โดนัท\n            const radius = 140;\n            const startX = 160 + radius * Math.cos(startAngle * Math.PI / 180);\n            const startY = 160 + radius * Math.sin(startAngle * Math.PI / 180);\n            const endX = 160 + radius * Math.cos(endAngle * Math.PI / 180);\n            const endY = 160 + radius * Math.sin(endAngle * Math.PI / 180);\n            const largeArcFlag = angle > 180 ? 1 : 0;\n            const pathData = ['M', 160, 160,\n            // เริ่มที่จุดกึ่งกลาง\n            'L', startX, startY, 'A', radius, radius, 0, largeArcFlag, 1, endX, endY, 'Z'].join(' ');\n            const pieColors = ['#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'];\n            const color = pieColors[index % pieColors.length];\n\n            // คำนวณตำแหน่งสำหรับแสดง percentage\n            const midAngle = startAngle + angle / 2;\n            const labelRadius = 120;\n            const labelX = 160 + labelRadius * Math.cos(midAngle * Math.PI / 180);\n            const labelY = 160 + labelRadius * Math.sin(midAngle * Math.PI / 180);\n            const percentageText = `${(percentage * 100).toFixed(1)}%`;\n            return /*#__PURE__*/_jsxDEV(\"g\", {\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: pathData,\n                fill: color,\n                stroke: \"white\",\n                strokeWidth: \"3\",\n                className: \"hover:opacity-80 transition-opacity duration-200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this), percentage > 0.05 && /*#__PURE__*/_jsxDEV(\"text\", {\n                x: labelX,\n                y: labelY,\n                textAnchor: \"middle\",\n                dominantBaseline: \"middle\",\n                fill: \"white\",\n                fontSize: \"14\",\n                fontWeight: \"bold\",\n                stroke: \"#1e293b\",\n                strokeWidth: \"1\",\n                paintOrder: \"stroke\",\n                children: percentageText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 21\n              }, this)]\n            }, `pie-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2\",\n          children: data.map((item, index) => {\n            const percentage = (item.value / total * 100).toFixed(0);\n            const pieColors = ['#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'];\n            const color = pieColors[index % pieColors.length];\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 min-w-0 flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-4 h-4 rounded-full flex-shrink-0\",\n                  style: {\n                    backgroundColor: color\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-700\",\n                  children: [truncateAffiliation(item.label), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-bold text-slate-900\",\n                    children: item.value\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 57\n                  }, this), \" \\u0E04\\u0E19\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-bold text-slate-900 ml-2\",\n                children: [percentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 19\n              }, this)]\n            }, `legend-${item.label}-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n}, \"TUahRIVHrNmruf3w2Blr6WVpjUQ=\")), \"TUahRIVHrNmruf3w2Blr6WVpjUQ=\");\n\n// Horizontal Bar Chart Component\n_c8 = PieChartComponent;\nconst HorizontalBarChart = /*#__PURE__*/_s4(/*#__PURE__*/memo(_c9 = _s4(({\n  title,\n  data,\n  colors = [],\n  maxHeight = '320px'\n}) => {\n  _s4();\n  const getSortOrder = label => {\n    const regionMatch = label.match(/ภาค\\s*(\\d+)/);\n    if (regionMatch) return parseInt(regionMatch[1]);\n    const customOrder = ['ศาลชั้นต้นในเขตกรุงเทพมหานคร', 'ศูนย์รักษาความปลอดภัย', 'ศาลชำนาญพิเศษ', 'ศาลสูง'];\n    const index = customOrder.findIndex(item => label.includes(item));\n    if (index !== -1) return 100 + index;\n    return 999;\n  };\n  const sortedData = useMemo(() => [...data].sort((a, b) => getSortOrder(a.label) - getSortOrder(b.label)), [data]);\n  const maxValue = useMemo(() => {\n    if (!sortedData || sortedData.length === 0) return 0;\n    return Math.max(...sortedData.map(d => d.value));\n  }, [sortedData]);\n  if (!sortedData.length || maxValue === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E01\\u0E23\\u0E32\\u0E1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2 h-full overflow-y-auto\",\n      children: sortedData.map((item, index) => {\n        const barWidth = item.value / maxValue * 100;\n        const color = colors[index % colors.length] || '#8b5cf6';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-3 gap-2 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-1 text-sm text-slate-700 font-medium text-left truncate\",\n            title: item.label,\n            children: item.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-2 w-full bg-slate-100 rounded-full h-7 relative\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-7 rounded-full transition-all duration-700 flex items-center justify-end pr-3\",\n              style: {\n                width: `${barWidth}%`,\n                backgroundColor: color,\n                minWidth: '36px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white text-sm font-bold\",\n                children: item.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 467,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this)]\n        }, `${item.label}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 447,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 446,\n    columnNumber: 5\n  }, this);\n}, \"ySiaVFDJZjNyt1Pd8oChNl24Els=\")), \"ySiaVFDJZjNyt1Pd8oChNl24Els=\");\n\n// SummaryCards Component - แทนที่กราฟโดนัท\n_c0 = HorizontalBarChart;\nconst SummaryCards = /*#__PURE__*/_s5(/*#__PURE__*/memo(_c1 = _s5(({\n  data,\n  colors = []\n}) => {\n  var _sortedData$, _sortedData$2;\n  _s5();\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\n  const sortedData = useMemo(() => [...data].sort((a, b) => b.value - a.value), [data]);\n  if (!data.length || total === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500\",\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E1C\\u0E25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full overflow-y-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-2xl font-bold\",\n          children: total\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm opacity-90\",\n          children: \"\\u0E23\\u0E27\\u0E21\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-2xl font-bold\",\n          children: ((_sortedData$ = sortedData[0]) === null || _sortedData$ === void 0 ? void 0 : _sortedData$.value) || 0\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm opacity-90\",\n          children: [\"\\u0E2A\\u0E39\\u0E07\\u0E2A\\u0E38\\u0E14: \", ((_sortedData$2 = sortedData[0]) === null || _sortedData$2 === void 0 ? void 0 : _sortedData$2.label) || 'ไม่มีข้อมูล']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: sortedData.map((item, index) => {\n        const percentage = (item.value / total * 100).toFixed(1);\n        const color = colors[index % colors.length] || '#8b5cf6';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 rounded-lg p-4 hover:shadow-md transition-all duration-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 rounded-full\",\n                style: {\n                  backgroundColor: color\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-slate-800\",\n                children: item.label\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 528,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-right\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-lg font-bold text-slate-900\",\n                children: item.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 531,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-slate-500\",\n                children: [percentage, \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-slate-200 rounded-full h-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-2 rounded-full transition-all duration-700\",\n              style: {\n                width: `${percentage}%`,\n                backgroundColor: color\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 538,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 15\n          }, this)]\n        }, `${item.label}-${index}`, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 496,\n    columnNumber: 5\n  }, this);\n}, \"ZlqrUpBZR2mPgRh4Bd1TpAna29I=\")), \"ZlqrUpBZR2mPgRh4Bd1TpAna29I=\");\n\n// (moved into the PersonnelPage component to avoid calling hooks at top level)\n\n// EditableCard Component (restored minimal implementation)\n_c10 = SummaryCards;\nconst EditableCard = /*#__PURE__*/_s6(/*#__PURE__*/memo(_c11 = _s6(({\n  title,\n  value,\n  icon: Icon,\n  color = \"blue\",\n  isEditing,\n  onEdit,\n  onChange,\n  isAdmin\n}) => {\n  _s6();\n  const [localValue, setLocalValue] = useState(value);\n  useEffect(() => {\n    setLocalValue(value);\n  }, [value]);\n  const handleChange = e => {\n    const newValue = parseInt(e.target.value) || 0;\n    setLocalValue(newValue);\n    onChange(newValue);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `w-12 h-12 bg-${color}-100 rounded-xl flex items-center justify-center`,\n        children: Icon && /*#__PURE__*/_jsxDEV(Icon, {\n          className: `w-6 h-6 text-${color}-600`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onEdit,\n        className: \"text-slate-400 hover:text-slate-600 transition-colors\",\n        children: isEditing ? /*#__PURE__*/_jsxDEV(Save, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(Edit2, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 581,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 7\n    }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      value: localValue,\n      onChange: handleChange,\n      className: \"w-full text-3xl font-bold text-slate-900 mb-1 bg-slate-50 border border-slate-200 rounded px-2 py-1\",\n      min: \"0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 586,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-3xl font-bold text-slate-900 mb-1\",\n      children: localValue\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-sm text-slate-600\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 571,\n    columnNumber: 5\n  }, this);\n}, \"siqvZJUXZ0S/FBAatxcZmxDcLHI=\")), \"siqvZJUXZ0S/FBAatxcZmxDcLHI=\");\n\n// PersonnelDetailModal (minimal)\n_c12 = EditableCard;\nconst PersonnelDetailModal = /*#__PURE__*/memo(_c13 = ({\n  person,\n  isOpen,\n  onClose\n}) => {\n  if (!isOpen || !person) return null;\n\n  // Calculate age from birth date\n  const calculateAge = dob => {\n    if (!dob) return 'ไม่ระบุ';\n    try {\n      const birthDate = new Date(dob);\n      const today = new Date();\n      let age = today.getFullYear() - birthDate.getFullYear();\n      const monthDiff = today.getMonth() - birthDate.getMonth();\n      if (monthDiff < 0 || monthDiff === 0 && today.getDate() < birthDate.getDate()) {\n        age--;\n      }\n      return `${age} ปี`;\n    } catch (error) {\n      return 'ไม่ระบุ';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 overflow-y-auto bg-black/60 hide-scrollbar\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen items-start justify-center p-3 sm:p-6 md:p-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-gradient-to-br from-white via-slate-50 to-indigo-50 rounded-2xl sm:rounded-3xl shadow-2xl max-w-3xl w-full p-4 sm:p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start justify-between mb-6 pb-4 border-b border-slate-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-lg sm:text-xl font-bold shadow-lg\",\n              children: (person.firstname || 'N')[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 631,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg sm:text-xl font-bold text-slate-900\",\n                children: [person.prefix, \" \", person.firstname, \" \", person.lastname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-slate-600\",\n                children: person.position || 'ไม่ระบุตำแหน่ง'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 634,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"p-2 text-slate-400 hover:text-slate-600 hover:bg-white/80 rounded-lg transition-all duration-200\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gradient-to-br from-white to-blue-50 rounded-xl p-4 sm:p-5 shadow-lg border border-slate-200/50\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Phone, {\n                className: \"w-5 h-5 text-blue-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 17\n              }, this), \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E15\\u0E34\\u0E14\\u0E15\\u0E48\\u0E2D\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Phone, {\n                  className: \"w-4 h-4 text-slate-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 659,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-700\",\n                  children: formatPhoneNumber(person.phone) || 'ไม่ระบุ'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 660,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Mail, {\n                  className: \"w-4 h-4 text-slate-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 663,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-700\",\n                  children: person.email || 'ไม่ระบุ'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 662,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gradient-to-br from-white to-green-50 rounded-xl p-4 sm:p-5 shadow-lg border border-slate-200/50\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(Building, {\n                className: \"w-5 h-5 text-green-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 17\n              }, this), \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E01\\u0E32\\u0E23\\u0E17\\u0E33\\u0E07\\u0E32\\u0E19\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Building2, {\n                  className: \"w-4 h-4 text-slate-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-slate-700\",\n                    children: \"\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 679,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-slate-600\",\n                    children: person.affiliation || 'ไม่ระบุ'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 678,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  className: \"w-4 h-4 text-slate-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 684,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-slate-700\",\n                    children: \"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 686,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-slate-600\",\n                    children: person.deph || 'ไม่ระบุ'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 687,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 685,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 683,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Crown, {\n                  className: \"w-4 h-4 text-slate-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 691,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium text-slate-700\",\n                    children: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 693,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-slate-600\",\n                    children: person.position || 'ไม่ระบุ'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 694,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 692,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 675,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-2 bg-gradient-to-br from-white to-purple-50 rounded-xl p-4 sm:p-5 shadow-lg border border-slate-200/50\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                className: \"w-5 h-5 text-purple-600\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 17\n              }, this), \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm font-medium text-slate-700\",\n                  children: \"\\u0E2D\\u0E32\\u0E22\\u0E38\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-slate-600 p-2 bg-white/70 rounded-lg\",\n                  children: calculateAge(person.dob)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 709,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 707,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 706,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row gap-3 mt-6 pt-4 border-t border-slate-200\",\n          children: [person.phone && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.open(`tel:${formatPhoneNumber(person.phone)}`, '_self'),\n            className: \"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(Phone, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"\\u0E42\\u0E17\\u0E23\\u0E2B\\u0E32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 15\n          }, this), person.email && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.open(`mailto:${person.email}`, '_self'),\n            className: \"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\",\n            children: [/*#__PURE__*/_jsxDEV(Mail, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 733,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"\\u0E2A\\u0E48\\u0E07\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 734,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 text-white rounded-lg hover:from-slate-600 hover:to-slate-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 sm:ml-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm font-medium\",\n              children: \"\\u0E1B\\u0E34\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 627,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 625,\n    columnNumber: 5\n  }, this);\n});\n\n// SearchModal (enhanced with department filtering and game-card style)\n// Small visual card for a person used in search results (game-card style)\n_c14 = PersonnelDetailModal;\nconst PersonCard = /*#__PURE__*/memo(_c15 = ({\n  person,\n  onView,\n  onCall,\n  onMail\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-gradient-to-br from-white via-blue-50 to-indigo-100 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-4 sm:p-6 border border-indigo-200 hover:border-indigo-300 transform hover:scale-105\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm sm:text-base font-bold text-slate-900 mb-1\",\n        children: [person.prefix, \" \", person.firstname, \" \", person.lastname]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs sm:text-sm text-indigo-600 font-medium\",\n        children: person.position || 'ไม่ระบุตำแหน่ง'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 756,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 text-xs sm:text-sm text-slate-600\",\n        children: [/*#__PURE__*/_jsxDEV(Building2, {\n          className: \"w-4 h-4 text-indigo-500 flex-shrink-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 768,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"truncate\",\n          children: person.affiliation || 'ไม่ระบุสังกัด'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 769,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 text-xs sm:text-sm text-slate-600\",\n        children: [/*#__PURE__*/_jsxDEV(Briefcase, {\n          className: \"w-4 h-4 text-purple-500 flex-shrink-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"truncate\",\n          children: person.deph || 'ไม่ระบุหน่วยงาน'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 766,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onView(person),\n        className: \"w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-all duration-200 shadow-md hover:shadow-lg\",\n        children: [/*#__PURE__*/_jsxDEV(Eye, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 11\n        }, this), \"\\u0E14\\u0E39\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 779,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2\",\n        children: [person.phone && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onCall(formatPhoneNumber(person.phone)),\n          className: \"flex-1 p-2 rounded-xl bg-green-100 hover:bg-green-200 text-green-600 transition-colors shadow-sm flex items-center justify-center gap-1\",\n          title: \"\\u0E42\\u0E17\\u0E23\",\n          children: [/*#__PURE__*/_jsxDEV(Phone, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 795,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs\",\n            children: \"\\u0E42\\u0E17\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 13\n        }, this), person.email && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onMail(person.email),\n          className: \"flex-1 p-2 rounded-xl bg-blue-100 hover:bg-blue-200 text-blue-600 transition-colors shadow-sm flex items-center justify-center gap-1\",\n          title: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\",\n          children: [/*#__PURE__*/_jsxDEV(Mail, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 805,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs\",\n            children: \"\\u0E2D\\u0E35\\u0E40\\u0E21\\u0E25\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 806,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 788,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 754,\n    columnNumber: 5\n  }, this);\n});\n_c16 = PersonCard;\nconst SearchModal = /*#__PURE__*/_s7(/*#__PURE__*/memo(_c17 = _s7(({\n  isOpen,\n  onClose,\n  personnelData = [],\n  stats = {},\n  onViewPerson = () => {},\n  onExport = () => {},\n  user\n}) => {\n  _s7();\n  const [query, setQuery] = useState('');\n  const [filterAff, setFilterAff] = useState('');\n  const [filterDept, setFilterDept] = useState('');\n  const [filterPos, setFilterPos] = useState('');\n\n  // Get unique affiliations\n  const affiliations = useMemo(() => {\n    const setAff = new Set();\n    personnelData.forEach(p => setAff.add(p.affiliation || 'ไม่ระบุ'));\n    return Array.from(setAff).sort();\n  }, [personnelData]);\n\n  // Get departments based on selected affiliation\n  const departments = useMemo(() => {\n    const relevantPersonnel = filterAff ? personnelData.filter(p => (p.affiliation || 'ไม่ระบุ') === filterAff) : personnelData;\n    const setDept = new Set();\n    relevantPersonnel.forEach(p => setDept.add(p.deph || 'ไม่ระบุ'));\n    return Array.from(setDept).sort();\n  }, [personnelData, filterAff]);\n\n  // Get positions\n  const positions = useMemo(() => {\n    const s = new Set();\n    personnelData.forEach(p => s.add(p.position || 'ไม่ระบุ'));\n    return Array.from(s).sort();\n  }, [personnelData]);\n\n  // Reset department when affiliation changes\n  useEffect(() => {\n    if (filterAff) {\n      setFilterDept('');\n    }\n  }, [filterAff]);\n  if (!isOpen) return null;\n  const results = personnelData.filter(p => {\n    const hay = `${p.firstname} ${p.lastname} ${p.position || ''} ${p.affiliation || ''} ${p.deph || ''}`.toLowerCase();\n    if (query && !hay.includes(query.toLowerCase())) return false;\n    if (filterAff && (p.affiliation || 'ไม่ระบุ') !== filterAff) return false;\n    if (filterDept && (p.deph || 'ไม่ระบุ') !== filterDept) return false;\n    if (filterPos && (p.position || 'ไม่ระบุ') !== filterPos) return false;\n    return true;\n  });\n  const handleCall = tel => window.open(`tel:${tel}`, '_self');\n  const handleMail = email => window.open(`mailto:${email}`, '_self');\n  const clearFilters = () => {\n    setFilterAff('');\n    setFilterDept('');\n    setFilterPos('');\n    setQuery('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-50 overflow-y-auto bg-black/60 hide-scrollbar\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex min-h-screen items-start justify-center p-3 sm:p-6 md:p-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative bg-white rounded-2xl sm:rounded-3xl shadow-2xl max-w-6xl w-full p-4 sm:p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-4 sm:mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg sm:text-xl font-bold text-slate-900\",\n            children: \"\\uD83D\\uDD0D \\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 879,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 884,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 878,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: query,\n            onChange: e => setQuery(e.target.value),\n            className: \"w-full p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm\",\n            placeholder: \"\\uD83D\\uDD0D \\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D, \\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filterAff,\n            onChange: e => setFilterAff(e.target.value),\n            className: \"p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\uD83C\\uDFE2 \\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 (\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 902,\n              columnNumber: 15\n            }, this), affiliations.map(a => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: a,\n              children: a\n            }, a, false, {\n              fileName: _jsxFileName,\n              lineNumber: 903,\n              columnNumber: 38\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 897,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filterDept,\n            onChange: e => setFilterDept(e.target.value),\n            className: \"p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm\",\n            disabled: !filterAff,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\uD83C\\uDFDB\\uFE0F \\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 (\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 912,\n              columnNumber: 15\n            }, this), departments.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: d,\n              children: d\n            }, d, false, {\n              fileName: _jsxFileName,\n              lineNumber: 913,\n              columnNumber: 37\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 906,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: filterPos,\n            onChange: e => setFilterPos(e.target.value),\n            className: \"p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\uD83D\\uDC64 \\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14 (\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 921,\n              columnNumber: 15\n            }, this), positions.map(p => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: p,\n              children: p\n            }, p, false, {\n              fileName: _jsxFileName,\n              lineNumber: 922,\n              columnNumber: 35\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 916,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-slate-600 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              className: \"w-4 h-4 text-indigo-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 929,\n              columnNumber: 15\n            }, this), \"\\u0E1E\\u0E1A \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-bold text-indigo-600\",\n              children: results.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 930,\n              columnNumber: 18\n            }, this), \" \\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: clearFilters,\n              className: \"text-sm text-slate-600 px-3 py-1 rounded-lg bg-slate-100 hover:bg-slate-200 transition-colors\",\n              children: \"\\uD83D\\uDDD1\\uFE0F \\u0E25\\u0E49\\u0E32\\u0E07\\u0E15\\u0E31\\u0E27\\u0E01\\u0E23\\u0E2D\\u0E07\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 933,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => onExport(results),\n              className: \"text-sm px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-1\",\n              children: [/*#__PURE__*/_jsxDEV(Download, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 943,\n                columnNumber: 17\n              }, this), \"\\u0E2A\\u0E48\\u0E07\\u0E2D\\u0E2D\\u0E01\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 939,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 932,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 927,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 max-h-[60vh] overflow-y-auto hide-scrollbar\",\n          children: [results.map((p, i) => /*#__PURE__*/_jsxDEV(PersonCard, {\n            person: p,\n            onView: onViewPerson,\n            onCall: handleCall,\n            onMail: handleMail\n          }, `${p.phone || i}-${i}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 952,\n            columnNumber: 15\n          }, this)), results.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-span-full text-center text-slate-500 py-12\",\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              className: \"w-16 h-16 text-slate-300 mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 962,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-slate-600 mb-2\",\n              children: \"\\u0E44\\u0E21\\u0E48\\u0E1E\\u0E1A\\u0E1C\\u0E25\\u0E25\\u0E31\\u0E1E\\u0E18\\u0E4C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 963,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm\",\n              children: \"\\u0E25\\u0E2D\\u0E07\\u0E40\\u0E1B\\u0E25\\u0E35\\u0E48\\u0E22\\u0E19\\u0E04\\u0E33\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E15\\u0E31\\u0E27\\u0E01\\u0E23\\u0E2D\\u0E07\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 964,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 961,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 950,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 877,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 876,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 875,\n    columnNumber: 5\n  }, this);\n}, \"Z4x3IQR24hSmLHUEa5j18Or475M=\")), \"Z4x3IQR24hSmLHUEa5j18Or475M=\");\n_c18 = SearchModal;\nexport default function PersonnelPage({\n  user\n}) {\n  _s8();\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [personnelData, setPersonnelData] = useState([]);\n  const [selectedPerson, setSelectedPerson] = useState(null);\n  const [showDetail, setShowDetail] = useState(false);\n  const [showSearchModal, setShowSearchModal] = useState(false);\n  const [quota, setQuota] = useState(0);\n  const [vacancy, setVacancy] = useState(0);\n  const [isEditingQuota, setIsEditingQuota] = useState(false);\n  const [isEditingVacancy, setIsEditingVacancy] = useState(false);\n  const [generalStatsData, setGeneralStatsData] = useState({});\n  const [selectedChart, setSelectedChart] = useState(\"position\"); // Default chart type\n  const [selectedAffiliation, setSelectedAffiliation] = useState(\"\"); // For department filtering\n  const [filters, setFilters] = useState({\n    affiliation: \"\",\n    department: \"\",\n    ageRange: \"\",\n    gender: \"\"\n  });\n  const logAdminActivity = useCallback((action, details) => {\n    if (!user) return;\n    fetch(CONFIG.ADMIN_API, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        action: 'log_activity',\n        log_action: action,\n        log_details: details || null,\n        user_id: user.id,\n        username: user.username\n      })\n    }).catch(error => console.error('Failed to log activity:', error));\n  }, [user]);\n\n  // ฟังก์ชันดึงข้อมูลจาก general_stats API\n  const fetchGeneralStats = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.API_BASE}/general_stats`);\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      const result = await response.json();\n      if (result.success && Array.isArray(result.data)) {\n        const statsMap = {};\n        result.data.forEach(item => {\n          statsMap[item.name] = item.value;\n        });\n        setGeneralStatsData(statsMap);\n\n        // ตั้งค่า quota และ vacancy จากข้อมูล API\n        setQuota(statsMap.quota || 0);\n        setVacancy(statsMap.vacancy || 0);\n      }\n    } catch (error) {\n      console.error('Error fetching general stats:', error);\n      // ใช้ค่าเริ่มต้นในกรณีที่ดึงข้อมูลไม่ได้\n      setQuota(100);\n      setVacancy(20);\n    }\n  }, []);\n\n  // ฟังก์ชันอัพเดทค่าใน general_stats\n  const updateGeneralStat = useCallback(async (name, value) => {\n    try {\n      const response = await fetch(`${CONFIG.API_BASE}/general_stats/value/${name}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          value: parseInt(value)\n        })\n      });\n      if (!response.ok) {\n        // ถ้ายังไม่มีข้อมูล ให้สร้างใหม่\n        if (response.status === 404) {\n          const createResponse = await fetch(`${CONFIG.API_BASE}/general_stats`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              name: name,\n              value: parseInt(value),\n              description: name === 'quota' ? 'กรอบอัตรากำลังทั้งหมด' : 'จำนวนตำแหน่งว่าง'\n            })\n          });\n          if (!createResponse.ok) {\n            throw new Error('Failed to create new stat');\n          }\n        } else {\n          throw new Error('Failed to update stat');\n        }\n      }\n\n      // อัพเดทข้อมูลใน state\n      setGeneralStatsData(prev => ({\n        ...prev,\n        [name]: parseInt(value)\n      }));\n    } catch (error) {\n      console.error(`Error updating ${name}:`, error);\n      alert(`เกิดข้อผิดพลาดในการบันทึก ${name === 'quota' ? 'กรอบอัตรา' : 'ตำแหน่งว่าง'}`);\n    }\n  }, []);\n  const fetchPersonnelData = useCallback(async () => {\n    try {\n      const apiUrl = CONFIG.OFFICERS_API;\n      const response = await fetch(apiUrl);\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      const text = await response.text();\n      if (!text) throw new Error('Empty response from server');\n      const result = JSON.parse(text);\n      const data = result.success && Array.isArray(result.data) ? result.data : [];\n      const formattedData = data.map(person => ({\n        phone: person.phone || '',\n        prefix: person.prefix || '',\n        firstname: person.firstname || '',\n        lastname: person.lastname || '',\n        position: person.position || '',\n        affiliation: person.affiliation || '',\n        deph: person.department || '',\n        generation: person.generation || '',\n        email: person.email || '',\n        dob: person.dob || '',\n        lineUserId: person.lineUserId || '',\n        role: person.role || 'member'\n      }));\n      setPersonnelData(formattedData);\n      setError(\"\");\n    } catch (error) {\n      setError(`⚠️ ${error.message}`);\n      setPersonnelData([]);\n    }\n  }, []);\n  useEffect(() => {\n    fetchPersonnelData();\n    fetchGeneralStats(); // เพิ่มการดึงข้อมูล general stats\n  }, [fetchPersonnelData, fetchGeneralStats]);\n  const handleRefresh = () => {\n    setRefreshing(true);\n    Promise.all([fetchPersonnelData(), fetchGeneralStats()]).finally(() => setRefreshing(false));\n  };\n  const handleViewPerson = person => {\n    // If user opened from search, close search modal first so detail appears on top\n    setShowSearchModal(false);\n    setSelectedPerson(person);\n    setShowDetail(true);\n  };\n  const exportToCSV = data => {\n    // Implement CSV export logic here\n  };\n  const affiliationAbbreviations = {\n    \"ศูนย์รักษาความปลอดภัย\": \"ส่วนกลาง\",\n    \"ศาลชั้นต้นในกรุงเทพมหานคร\": \"กทม.\"\n  };\n  const filteredAffiliationData = useMemo(() => {\n    return personnelData.reduce((acc, person) => {\n      let affiliation = (person.affiliation || '').trim();\n      if (!affiliation) affiliation = 'ไม่ระบุ';\n      const lower = affiliation.toLowerCase();\n\n      // Normalize known patterns using targeted rules\n      let normalized = affiliation;\n\n      // If it's the regional office pattern that contains สำนักศาลยุติธรรมประจำภาค\n      // we want to convert it to: 'ภาค <n>' when a number exists, otherwise 'ภาค'\n      if (lower.includes('สำนักศาลยุติธรรมประจำภาค') || lower.includes('สำนักยุติธรรมประจำภาค') || lower.includes('ในสังกัดสำนักศาลยุติธรรมประจำภาค') || lower.includes('ศาลในสังกัดสำนักศาลยุติธรรมประจำภาค')) {\n        // Try to extract explicit 'ภาค <number>' first\n        const matchRegion = affiliation.match(/ภาค\\s*(\\d{1,3})/i);\n        if (matchRegion && matchRegion[1]) {\n          normalized = `ภาค ${matchRegion[1]}`;\n        } else {\n          // Fallback: find any trailing number in the string (e.g., '... ประจำภาค 4')\n          const trailingNum = affiliation.match(/(\\d{1,3})\\s*$/);\n          if (trailingNum && trailingNum[1]) {\n            normalized = `ภาค ${trailingNum[1]}`;\n          } else {\n            // Last-resort: any first number in the string\n            const anyNum = affiliation.match(/(\\d{1,3})/);\n            normalized = anyNum && anyNum[1] ? `ภาค ${anyNum[1]}` : 'ภาค';\n          }\n        }\n      } else if (lower.includes('ศูนย์รักษาความปลอดภัย')) {\n        normalized = 'ส่วนกลาง';\n      } else if (lower.includes('กรุงเทพ') || lower.includes('กรุงเทพมหานคร') || lower.includes('ศาลชั้นต้นในกรุงเทพมหานคร')) {\n        normalized = 'กทม.';\n      } else {\n        // fallback to any exact mapping we defined, otherwise keep original\n        normalized = affiliationAbbreviations[affiliation] || affiliation;\n      }\n      acc[normalized] = (acc[normalized] || 0) + 1;\n      return acc;\n    }, {});\n  }, [personnelData]);\n  const chartData = useMemo(() => {\n    const entries = Object.entries(filteredAffiliationData).map(([label, value]) => ({\n      label,\n      value\n    }));\n    const getOrderKey = label => {\n      if (!label) return 9999;\n      const l = String(label).trim();\n\n      // Match 'ภาค' followed by number e.g. 'ภาค 1' or 'ภาค1'\n      const m = l.match(/ภาค\\s*(\\d{1,3})/);\n      if (m && m[1]) {\n        // Put ภาค N in order 0.. (keep N small)\n        const num = parseInt(m[1], 10);\n        return num; // 1..9 -> 1..9 (smaller is earlier)\n      }\n\n      // If label is exactly 'ภาค' (no number), put after numbered ภาค\n      if (/^ภาค$/i.test(l)) return 999;\n\n      // Specific named orders after ภาค group\n      if (l === 'กทม.' || l.toLowerCase() === 'กทม.') return 1000;\n      if (l === 'ส่วนกลาง' || l.toLowerCase() === 'ส่วนกลาง') return 1001;\n      if (l.includes('ศาลสูง')) return 1002;\n      // handle both spellings 'ชำนาญ' and 'ชำนัญ'\n      if (l.includes('ชำนาญ') || l.includes('ชำนัญ') || l.includes('ชำนัญพิเศษ') || l.includes('ชำนาญพิเศษ')) return 1003;\n\n      // Default: place after known groups but preserve alphabetical order by returning a high key plus name\n      return 5000 + l.charCodeAt(0);\n    };\n    entries.sort((a, b) => {\n      const ka = getOrderKey(a.label);\n      const kb = getOrderKey(b.label);\n      if (ka === kb) {\n        // fallback alphabetical\n        return String(a.label).localeCompare(String(b.label));\n      }\n      return ka - kb;\n    });\n    return entries;\n  }, [filteredAffiliationData]);\n  const stats = useMemo(() => {\n    const newStats = {\n      total: personnelData.length,\n      connected: personnelData.filter(p => p.lineUserId).length,\n      byPosition: {},\n      byAffiliation: {},\n      byDepartment: {},\n      byGeneration: {}\n    };\n    personnelData.forEach(person => {\n      const position = person.position || 'ไม่ระบุ';\n      newStats.byPosition[position] = (newStats.byPosition[position] || 0) + 1;\n      const affiliation = person.affiliation || 'ไม่ระบุ';\n      newStats.byAffiliation[affiliation] = (newStats.byAffiliation[affiliation] || 0) + 1;\n      const department = person.deph || 'ไม่ระบุตำแหน่ง';\n      newStats.byDepartment[department] = (newStats.byDepartment[department] || 0) + 1;\n      const generation = person.generation ? String(person.generation).trim() : 'ไม่ระบุตำแหน่ง';\n      newStats.byGeneration[generation] = (newStats.byGeneration[generation] || 0) + 1;\n    });\n    return newStats;\n  }, [personnelData]);\n  useEffect(() => {\n    console.log(\"Personnel Data:\", personnelData);\n  }, [personnelData]);\n  useEffect(() => {\n    console.log(\"Stats:\", stats);\n    console.log(\"Chart Data:\", chartData);\n  }, [stats, chartData]);\n  const chartColors = [\"#FF6384\", \"#36A2EB\", \"#FFCE56\", \"#4BC0C0\", \"#9966FF\", \"#FF9F40\", \"#FFCD56\", \"#C9CBCF\"];\n\n  // Helper: build chart data for different types (inside component)\n  const getChartData = useCallback(type => {\n    if (type === 'affiliation') return chartData; // already normalized affiliation entries\n\n    if (type === 'position') {\n      // build from stats.byPosition\n      const entries = Object.entries(stats.byPosition || {}).map(([label, value]) => ({\n        label,\n        value\n      }));\n      // sort by value desc\n      entries.sort((a, b) => b.value - a.value);\n      return entries;\n    }\n    if (type === 'department') {\n      // build from deph field - filter by selected affiliation if any\n      const groups = {};\n      const filteredData = selectedAffiliation ? personnelData.filter(p => (p.affiliation || 'ไม่ระบุ') === selectedAffiliation) : personnelData;\n      filteredData.forEach(p => {\n        const dept = p.deph || 'ไม่ระบุ';\n        groups[dept] = (groups[dept] || 0) + 1;\n      });\n      return Object.entries(groups).map(([label, value]) => ({\n        label,\n        value\n      })).sort((a, b) => b.value - a.value);\n    }\n    if (type === 'age') {\n      // derive age groups from dob (basic)\n      const groups = {\n        '<30': 0,\n        '30-39': 0,\n        '40-49': 0,\n        '50-59': 0,\n        '60+': 0\n      };\n      const now = new Date();\n      personnelData.forEach(p => {\n        if (!p.dob) return;\n        const m = String(p.dob).match(/(\\d{4})/);\n        if (!m) return;\n        const year = parseInt(m[1], 10);\n        if (isNaN(year)) return;\n        const age = now.getFullYear() - year;\n        if (age < 30) groups['<30']++;else if (age < 40) groups['30-39']++;else if (age < 50) groups['40-49']++;else if (age < 60) groups['50-59']++;else groups['60+']++;\n      });\n      return Object.entries(groups).map(([label, value]) => ({\n        label,\n        value\n      }));\n    }\n    if (type === 'gender') {\n      // no gender field in data - return empty to show no data\n      const genders = (personnelData || []).reduce((acc, p) => {\n        const g = (p.gender || '').trim();\n        if (!g) return acc;\n        acc[g] = (acc[g] || 0) + 1;\n        return acc;\n      }, {});\n      return Object.entries(genders).map(([label, value]) => ({\n        label,\n        value\n      }));\n    }\n    return [];\n  }, [chartData, stats, personnelData, selectedAffiliation]); // Add selectedAffiliation dependency\n\n  // Helper function to get chart title\n  const getChartTitle = chartType => {\n    switch (chartType) {\n      case \"position\":\n        return \"ตำแหน่ง\";\n      case \"affiliation\":\n        return \"สัดส่วนแต่ละสังกัด\";\n      case \"department\":\n        return selectedAffiliation ? `หน่วยงานใน${selectedAffiliation}` : \"หน่วยงาน (เลือกสังกัดก่อน)\";\n      case \"gender\":\n        return \"เพศ\";\n      case \"age\":\n        return \"ช่วงอายุ\";\n      default:\n        return \"ข้อมูลบุคลากร\";\n    }\n  };\n  const renderChart = () => {\n    switch (selectedChart) {\n      case \"position\":\n        return /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('position'),\n          colors: chartColors,\n          title: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\",\n          maxHeight: \"800px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1349,\n          columnNumber: 11\n        }, this);\n      case \"affiliation\":\n        return /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('affiliation'),\n          colors: chartColors,\n          title: \"\\u0E2A\\u0E31\\u0E14\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E41\\u0E15\\u0E48\\u0E25\\u0E30\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\",\n          maxHeight: \"800px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1358,\n          columnNumber: 11\n        }, this);\n      case \"department\":\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: !selectedAffiliation ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-8\",\n            children: [/*#__PURE__*/_jsxDEV(Building2, {\n              className: \"w-16 h-16 text-slate-300 mx-auto mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1370,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-slate-600 mb-2\",\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\\u0E01\\u0E48\\u0E2D\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1371,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-slate-500 mb-4\",\n              children: \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E14\\u0E39\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E43\\u0E19\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\\u0E19\\u0E31\\u0E49\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: selectedAffiliation,\n              onChange: e => setSelectedAffiliation(e.target.value),\n              className: \"p-2 border border-slate-300 rounded-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1378,\n                columnNumber: 19\n              }, this), Array.from(new Set(personnelData.map(p => p.affiliation || 'ไม่ระบุ'))).sort().map(aff => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: aff,\n                children: aff\n              }, aff, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1380,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1373,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1369,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n            data: getChartData('department'),\n            colors: chartColors,\n            title: `หน่วยงานใน${selectedAffiliation}`,\n            maxHeight: \"320px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1385,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1367,\n          columnNumber: 11\n        }, this);\n      case \"gender\":\n        return /*#__PURE__*/_jsxDEV(PieChartComponent, {\n          data: getChartData('gender'),\n          colors: chartColors,\n          title: \"\\u0E40\\u0E1E\\u0E28\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1396,\n          columnNumber: 11\n        }, this);\n      case \"age\":\n        return /*#__PURE__*/_jsxDEV(HorizontalBarChart, {\n          data: getChartData('age'),\n          colors: chartColors,\n          title: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E2D\\u0E32\\u0E22\\u0E38\",\n          maxHeight: \"240px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1404,\n          columnNumber: 11\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E2A\\u0E33\\u0E2B\\u0E23\\u0E31\\u0E1A\\u0E41\\u0E2A\\u0E14\\u0E07\\u0E1C\\u0E25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1412,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full min-h-full p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl sm:text-2xl font-bold text-slate-800\",\n          children: \"\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowSearchModal(true),\n          className: \"flex items-center space-x-2 px-3 sm:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow text-sm transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1425,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1426,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1421,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1419,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1418,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(EditableCard, {\n        title: \"\\u0E01\\u0E23\\u0E2D\\u0E1A\\u0E2D\\u0E31\\u0E15\\u0E23\\u0E32\",\n        value: quota,\n        icon: Briefcase,\n        color: \"blue\",\n        isEditing: isEditingQuota,\n        onEdit: () => setIsEditingQuota(!isEditingQuota),\n        onChange: value => setQuota(value),\n        isAdmin: (user === null || user === void 0 ? void 0 : user.role) === 'admin'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditableCard, {\n        title: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\\u0E27\\u0E48\\u0E32\\u0E07\",\n        value: vacancy,\n        icon: UserX,\n        color: \"red\",\n        isEditing: isEditingVacancy,\n        onEdit: () => setIsEditingVacancy(!isEditingVacancy),\n        onChange: value => setVacancy(value),\n        isAdmin: (user === null || user === void 0 ? void 0 : user.role) === 'admin'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1442,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\",\n        value: stats.total,\n        icon: Users,\n        color: \"green\",\n        subtitle: \"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\\u0E43\\u0E19\\u0E23\\u0E30\\u0E1A\\u0E1A\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1452,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1431,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap items-center gap-2 sm:gap-4 mb-4 sm:mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"position\"),\n        className: `px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"position\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`,\n        children: \"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"affiliation\"),\n        className: `px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"affiliation\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`,\n        children: \"\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1468,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setSelectedChart(\"department\");\n          if (!selectedAffiliation) {\n            // Auto-select first affiliation if none selected\n            const affiliations = Array.from(new Set(personnelData.map(p => p.affiliation || 'ไม่ระบุ'))).sort();\n            if (affiliations.length > 0) {\n              setSelectedAffiliation(affiliations[0]);\n            }\n          }\n        },\n        className: `px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"department\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`,\n        children: \"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1474,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"gender\"),\n        className: `px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"gender\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`,\n        children: \"\\u0E40\\u0E1E\\u0E28\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1489,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedChart(\"age\"),\n        className: `px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"age\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`,\n        children: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E2D\\u0E32\\u0E22\\u0E38\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1495,\n        columnNumber: 9\n      }, this), selectedChart === \"department\" && /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedAffiliation,\n        onChange: e => setSelectedAffiliation(e.target.value),\n        className: \"ml-2 p-2 border border-slate-300 rounded-lg text-sm bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E31\\u0E07\\u0E01\\u0E31\\u0E14\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1508,\n          columnNumber: 13\n        }, this), Array.from(new Set(personnelData.map(p => p.affiliation || 'ไม่ระบุ'))).sort().map(aff => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: aff,\n          children: aff\n        }, aff, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1510,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1503,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1461,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 min-h-[600px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E41\\u0E17\\u0E48\\u0E07\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1518,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-[520px]\",\n          children: renderChart()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1519,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1517,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 min-h-[600px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E27\\u0E07\\u0E01\\u0E25\\u0E21\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1524,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-[520px]\",\n          children: /*#__PURE__*/_jsxDEV(PieChartComponent, {\n            data: getChartData(selectedChart),\n            colors: chartColors,\n            title: getChartTitle(selectedChart)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1526,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1525,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1523,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 h-[600px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E2A\\u0E23\\u0E38\\u0E1B\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1530,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SummaryCards, {\n          data: getChartData(selectedChart),\n          colors: chartColors,\n          title: getChartTitle(selectedChart)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1531,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1529,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 min-h-[600px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-base sm:text-lg font-semibold text-slate-800 mb-4\",\n          children: \"\\u0E01\\u0E23\\u0E32\\u0E1F\\u0E40\\u0E2A\\u0E49\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1534,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-[520px]\",\n          children: /*#__PURE__*/_jsxDEV(LineChart, {\n            data: getChartData(selectedChart),\n            colors: chartColors,\n            title: getChartTitle(selectedChart)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1536,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1535,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1533,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1516,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonnelDetailModal, {\n      person: selectedPerson,\n      isOpen: showDetail,\n      onClose: () => setShowDetail(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1541,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchModal, {\n      isOpen: showSearchModal,\n      onClose: () => setShowSearchModal(false),\n      personnelData: personnelData,\n      stats: stats,\n      onViewPerson: handleViewPerson,\n      onExport: exportToCSV,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1546,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1417,\n    columnNumber: 5\n  }, this);\n}\n_s8(PersonnelPage, \"f6ZnzvjM+UAc08wWCsWjyEPFDAM=\");\n_c19 = PersonnelPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19;\n$RefreshReg$(_c, \"StatCard$memo\");\n$RefreshReg$(_c2, \"StatCard\");\n$RefreshReg$(_c3, \"TableChart$memo\");\n$RefreshReg$(_c4, \"TableChart\");\n$RefreshReg$(_c5, \"TreemapChart$memo\");\n$RefreshReg$(_c6, \"TreemapChart\");\n$RefreshReg$(_c7, \"PieChartComponent$memo\");\n$RefreshReg$(_c8, \"PieChartComponent\");\n$RefreshReg$(_c9, \"HorizontalBarChart$memo\");\n$RefreshReg$(_c0, \"HorizontalBarChart\");\n$RefreshReg$(_c1, \"SummaryCards$memo\");\n$RefreshReg$(_c10, \"SummaryCards\");\n$RefreshReg$(_c11, \"EditableCard$memo\");\n$RefreshReg$(_c12, \"EditableCard\");\n$RefreshReg$(_c13, \"PersonnelDetailModal$memo\");\n$RefreshReg$(_c14, \"PersonnelDetailModal\");\n$RefreshReg$(_c15, \"PersonCard$memo\");\n$RefreshReg$(_c16, \"PersonCard\");\n$RefreshReg$(_c17, \"SearchModal$memo\");\n$RefreshReg$(_c18, \"SearchModal\");\n$RefreshReg$(_c19, \"PersonnelPage\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useCallback","memo","Search","Filter","Users","Phone","Mail","Calendar","Award","Building2","UserCheck","UserX","TrendingUp","PieChart","BarChart3","Download","RefreshCw","Eye","Grid3X3","List","X","AlertCircle","CheckCircle2","Clock","Briefcase","GraduationCap","Edit2","Save","MapPin","Building","Crown","FileText","CONFIG","DonutChart","LineChart","jsxDEV","_jsxDEV","formatPhoneNumber","phone","cleanPhone","replace","length","StatCard","_c","title","value","icon","Icon","color","trend","subtitle","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","TableChart","_s","_c3","data","colors","total","reduce","sum","d","slice","map","item","index","percentage","toFixed","style","backgroundColor","label","_c4","truncatePosition","position","removePatterns","result","pattern","RegExp","trim","truncateAffiliation","affiliation","lower","toLowerCase","includes","TreemapChart","_s2","_c5","originalTotal","scaledData","scaledValue","Math","log1p","generateTreemapLayout","items","width","height","rects","layoutRow","rowItems","x","y","w","h","totalValue","i","offset","isHorizontal","rectWidth","push","rectHeight","squarify","halfValue","runningTotal","splitIndex","max","groupA","groupB","groupATotal","groupAWidth","groupAHeight","layout","rect","itemIndex","findIndex","valueText","fontSize","min","textShadowStyle","textShadow","left","top","transition","_c6","PieChartComponent","_s3","_c7","viewBox","angle","prevPercentage","startAngle","endAngle","radius","startX","cos","PI","startY","sin","endX","endY","largeArcFlag","pathData","join","pieColors","midAngle","labelRadius","labelX","labelY","percentageText","fill","stroke","strokeWidth","textAnchor","dominantBaseline","fontWeight","paintOrder","_c8","HorizontalBarChart","_s4","_c9","maxHeight","getSortOrder","regionMatch","match","parseInt","customOrder","sortedData","sort","a","b","maxValue","barWidth","minWidth","_c0","SummaryCards","_s5","_c1","_sortedData$","_sortedData$2","_c10","EditableCard","_s6","_c11","isEditing","onEdit","onChange","isAdmin","localValue","setLocalValue","handleChange","e","newValue","target","onClick","type","_c12","PersonnelDetailModal","_c13","person","isOpen","onClose","calculateAge","dob","birthDate","Date","today","age","getFullYear","monthDiff","getMonth","getDate","error","firstname","prefix","lastname","email","deph","window","open","_c14","PersonCard","_c15","onView","onCall","onMail","_c16","SearchModal","_s7","_c17","personnelData","stats","onViewPerson","onExport","user","query","setQuery","filterAff","setFilterAff","filterDept","setFilterDept","filterPos","setFilterPos","affiliations","setAff","Set","forEach","p","add","Array","from","departments","relevantPersonnel","filter","setDept","positions","s","results","hay","handleCall","tel","handleMail","clearFilters","placeholder","disabled","_c18","PersonnelPage","_s8","loading","setLoading","refreshing","setRefreshing","setError","setPersonnelData","selectedPerson","setSelectedPerson","showDetail","setShowDetail","showSearchModal","setShowSearchModal","quota","setQuota","vacancy","setVacancy","isEditingQuota","setIsEditingQuota","isEditingVacancy","setIsEditingVacancy","generalStatsData","setGeneralStatsData","selectedChart","setSelectedChart","selectedAffiliation","setSelectedAffiliation","filters","setFilters","department","ageRange","gender","logAdminActivity","action","details","fetch","ADMIN_API","method","headers","body","JSON","stringify","log_action","log_details","user_id","id","username","catch","console","fetchGeneralStats","response","API_BASE","ok","Error","status","json","success","isArray","statsMap","name","updateGeneralStat","createResponse","description","prev","alert","fetchPersonnelData","apiUrl","OFFICERS_API","text","parse","formattedData","generation","lineUserId","role","message","handleRefresh","Promise","all","finally","handleViewPerson","exportToCSV","affiliationAbbreviations","filteredAffiliationData","acc","normalized","matchRegion","trailingNum","anyNum","chartData","entries","Object","getOrderKey","l","String","m","num","test","charCodeAt","ka","kb","localeCompare","newStats","connected","byPosition","byAffiliation","byDepartment","byGeneration","log","chartColors","getChartData","groups","filteredData","dept","now","year","isNaN","genders","g","getChartTitle","chartType","renderChart","aff","_c19","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/pages/PersonnelPage.js"],"sourcesContent":["import React, { useEffect, useState, useMemo, useCallback, memo } from \"react\";\r\nimport { \r\n  Search, \r\n  Filter, \r\n  Users, \r\n  Phone, \r\n  Mail, \r\n  Calendar,\r\n  Award,\r\n  Building2,\r\n  UserCheck,\r\n  UserX,\r\n  TrendingUp,\r\n  PieChart,\r\n  BarChart3,\r\n  Download,\r\n  RefreshCw,\r\n  Eye,\r\n  Grid3X3,\r\n  List,\r\n  X,\r\n  AlertCircle,\r\n  CheckCircle2,\r\n  Clock,\r\n  Briefcase,\r\n  GraduationCap,\r\n  Edit2,\r\n  Save,\r\n  MapPin,\r\n  Building,\r\n  Crown,\r\n  FileText\r\n} from \"lucide-react\";\r\nimport { CONFIG } from '../config';\r\nimport DonutChart from '../components/DonutChart';\r\nimport LineChart from '../components/LineChart';\r\n\r\n// Function to format phone number (add leading 0 if needed)\r\nconst formatPhoneNumber = (phone) => {\r\n  if (!phone) return '';\r\n  const cleanPhone = phone.replace(/\\D/g, ''); // Remove non-digits\r\n  if (cleanPhone.length === 9) {\r\n    return '0' + cleanPhone; // Add leading 0 for 9-digit numbers\r\n  }\r\n  return cleanPhone; // Return as-is for other lengths\r\n};\r\n\r\n\r\n\r\n// StatCard Component\r\nconst StatCard = memo(({ title, value, icon: Icon, color = \"blue\", trend, subtitle }) => (\r\n  <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n    <div className=\"flex items-center justify-between mb-2\">\r\n      <div className={`w-12 h-12 bg-${color}-100 rounded-xl flex items-center justify-center`}>\r\n        <Icon className={`w-6 h-6 text-${color}-600`} />\r\n      </div>\r\n      {trend && (\r\n        <div className=\"flex items-center text-green-600 text-sm\">\r\n          <TrendingUp className=\"w-4 h-4 mr-1\" />\r\n          <span>{trend}%</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n    <div className=\"text-3xl font-bold text-slate-900 mb-1\">{value}</div>\r\n    <div className=\"text-sm text-slate-600\">{title}</div>\r\n    {subtitle && (\r\n      <div className=\"text-xs text-slate-500 mt-1\">{subtitle}</div>\r\n    )}\r\n  </div>\r\n));\r\n\r\n// Table Chart Component (สำหรับแสดงข้อมูลตำแหน่งแบบตาราง)\r\nconst TableChart = memo(({ title, data, colors = [] }) => {\r\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\r\n  \r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n      <h3 className=\"text-lg font-semibold text-slate-900 mb-4 flex items-center\">\r\n        <BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />\r\n        {title}\r\n      </h3>\r\n      <div className=\"space-y-3\">\r\n        <div className=\"text-center mb-4\">\r\n          <div className=\"text-2xl font-bold text-slate-900\">{total}</div>\r\n          <div className=\"text-sm text-slate-500\">ทั้งหมด</div>\r\n        </div>\r\n        \r\n        <div className=\"grid gap-2\">\r\n          {data.slice(0, 8).map((item, index) => {\r\n            const percentage = ((item.value / total) * 100).toFixed(1);\r\n            const color = colors[index % colors.length] || '#6366f1';\r\n            \r\n            return (\r\n              <div key={`${item.label}-${index}`} className=\"flex items-center justify-between p-3 bg-slate-50 rounded-lg\">\r\n                <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\r\n                  <div \r\n                    className=\"w-4 h-4 rounded-sm flex-shrink-0\"\r\n                    style={{ backgroundColor: color }}\r\n                  />\r\n                  <span className=\"text-sm text-slate-700 font-medium truncate\" title={item.label}>\r\n                    {item.label}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 text-right\">\r\n                  <div className=\"text-sm font-bold text-slate-900\">{item.value}</div>\r\n                  <div className=\"text-xs text-slate-500\">{percentage}%</div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Function สำหรับตัดคำยาว\r\nconst truncatePosition = (position) => {\r\n  if (!position) return '';\r\n  \r\n  const removePatterns = [\r\n    'เจ้าพนักงานตำรวจศาล',\r\n    'ตำรวจศาล',\r\n    'ตำรวจ',\r\n    'พนักงาน'\r\n  ];\r\n  \r\n  let result = position;\r\n  for (const pattern of removePatterns) {\r\n    result = result.replace(new RegExp(pattern, 'gi'), '');\r\n  }\r\n  \r\n  return result.trim() || position;\r\n};\r\n\r\n// Function สำหรับตัดคำ \"ศาล\" ออกจากสังกัด\r\nconst truncateAffiliation = (affiliation) => {\r\n  if (!affiliation) return '';\r\n  const lower = affiliation.toLowerCase();\r\n\r\n  // Only remove the leading word 'ศาล' for affiliations that describe\r\n  // 'ในสังกัดสำนักยุติธรรมประจำภาค' (or variants). Do not strip 'ศาล'\r\n  // from other court names like 'ศาลสูง' or 'ศาลชำนาญพิเศษ'.\r\n  if (lower.includes('ในสังกัดสำนักยุติธรรมประจำภาค') || lower.includes('ในสังกัดสำนักยุติธรรม')) {\r\n    return affiliation.replace(/^ศาล\\s*/i, '').trim() || affiliation;\r\n  }\r\n\r\n  // Otherwise return affiliation unchanged\r\n  return affiliation;\r\n};\r\n\r\n// --- NEW: Proportional Treemap Chart Component ---\r\n// --- NEW: Proportional Treemap Chart Component (MODIFIED FOR LOGARITHMIC SCALE) ---\r\nconst TreemapChart = memo(({ title, data, colors = [] }) => {\r\n  // --- ส่วนที่แก้ไข: คำนวณ total จากค่าจริงก่อนแปลงสเกล ---\r\n  const originalTotal = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\r\n\r\n  // --- ส่วนที่แก้ไข: สร้างข้อมูลชุดใหม่ที่มีการปรับสเกลด้วย Math.log1p ---\r\n  // Math.log1p(x) จะคำนวณ log(1+x) ช่วยให้ค่าที่น้อยๆ มีขนาดใหญ่ขึ้นเมื่อเทียบกับค่ามากๆ\r\n  const scaledData = useMemo(() => data.map(item => ({\r\n    ...item,\r\n    scaledValue: Math.log1p(item.value) \r\n  })), [data]);\r\n\r\n  const generateTreemapLayout = useCallback((items, width, height) => {\r\n    let rects = [];\r\n    const layoutRow = (rowItems, x, y, w, h) => {\r\n      if (!rowItems.length) return;\r\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n      const totalValue = rowItems.reduce((sum, i) => sum + i.scaledValue, 0);\r\n      if (totalValue === 0) return;\r\n      let offset = 0;\r\n      const isHorizontal = w > h;\r\n      for (const item of rowItems) {\r\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n        const percentage = item.scaledValue / totalValue;\r\n        if (isHorizontal) {\r\n          const rectWidth = w * percentage;\r\n          rects.push({ x: x + offset, y, width: rectWidth, height: h, item });\r\n          offset += rectWidth;\r\n        } else {\r\n          const rectHeight = h * percentage;\r\n          rects.push({ x, y: y + offset, width: w, height: rectHeight, item });\r\n          offset += rectHeight;\r\n        }\r\n      }\r\n    };\r\n    const squarify = (items, x, y, w, h) => {\r\n      if (!items.length) return;\r\n      if (items.length <= 4) {\r\n        layoutRow(items, x, y, w, h);\r\n        return;\r\n      }\r\n      // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n      const halfValue = items.reduce((sum, i) => sum + i.scaledValue, 0) / 2;\r\n      let runningTotal = 0;\r\n      let splitIndex = 0;\r\n      for (let i = 0; i < items.length; i++) {\r\n        // --- ส่วนที่แก้ไข: ใช้ scaledValue ในการคำนวณสัดส่วน ---\r\n        runningTotal += items[i].scaledValue;\r\n        if (runningTotal >= halfValue) {\r\n          splitIndex = i + 1;\r\n          break;\r\n        }\r\n      }\r\n      splitIndex = Math.max(1, splitIndex);\r\n      const groupA = items.slice(0, splitIndex);\r\n      const groupB = items.slice(splitIndex);\r\n      const groupATotal = groupA.reduce((sum, i) => sum + i.scaledValue, 0);\r\n      const totalValue = groupATotal + (groupB.reduce((sum, i) => sum + i.scaledValue, 0));\r\n\r\n      if (totalValue === 0) return;\r\n      if (w > h) {\r\n        const groupAWidth = w * (groupATotal / totalValue);\r\n        squarify(groupA, x, y, groupAWidth, h);\r\n        squarify(groupB, x + groupAWidth, y, w - groupAWidth, h);\r\n      } else {\r\n        const groupAHeight = h * (groupATotal / totalValue);\r\n        squarify(groupA, x, y, w, groupAHeight);\r\n        squarify(groupB, x, y + groupAHeight, w, h - groupAHeight);\r\n      }\r\n    };\r\n    squarify(items, 0, 0, 1000, 1000); // Use a relative base for layout\r\n    return rects;\r\n  }, []);\r\n\r\n  // --- ส่วนที่แก้ไข: ส่ง scaledData เข้าไปคำนวณ layout ---\r\n  const layout = useMemo(() => generateTreemapLayout(scaledData), [scaledData, generateTreemapLayout]);\r\n\r\n  if (!data.length || originalTotal === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-full\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 mb-4 flex items-center\"><BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />{title}</h3>\r\n        <div className=\"text-center py-8\"><p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงกราฟ</p></div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200 flex flex-col h-full\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-slate-900 flex items-center\">\r\n          <BarChart3 className=\"w-5 h-5 mr-2 text-slate-400\" />{title}\r\n        </h3>\r\n        <div className=\"text-right\">\r\n          {/* --- ส่วนที่แก้ไข: แสดงผลรวมจากค่าจริง --- */}\r\n          <div className=\"text-lg font-bold text-slate-900\">{originalTotal}</div>\r\n          <div className=\"text-xs text-slate-500\">ทั้งหมด</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"relative w-full flex-1\">\r\n        {layout.map((rect) => {\r\n          const itemIndex = scaledData.findIndex(d => d.label === rect.item.label);\r\n          const color = colors[itemIndex % colors.length];\r\n          \r\n          // --- ส่วนที่แก้ไข: คำนวณ % จากค่าจริง ---\r\n          const percentage = originalTotal > 0 ? ((rect.item.value / originalTotal) * 100).toFixed(1) : 0;\r\n          const valueText = `${rect.item.value} (${percentage}%)`;\r\n          const fontSize = Math.min(rect.width / 10, rect.height / 5, 16);\r\n          const textShadowStyle = { textShadow: '0px 1px 3px rgba(0, 0, 0, 0.6)' };\r\n\r\n          return (\r\n            <div\r\n              key={rect.item.label}\r\n              className=\"absolute border-2 border-white rounded-md flex flex-col items-center justify-center p-1 overflow-hidden text-center\"\r\n              style={{\r\n                left: `${rect.x / 10}%`, top: `${rect.y / 10}%`, width: `${rect.width / 10}%`, height: `${rect.height / 10}%`,\r\n                backgroundColor: color, transition: 'all 0.4s ease-in-out'\r\n              }}\r\n            >\r\n              <div className=\"text-white font-bold\" style={{ fontSize: `${fontSize}px`, ...textShadowStyle }}>\r\n                {valueText}\r\n              </div>\r\n              <div className=\"text-white opacity-90 leading-tight\" style={{ fontSize: `${Math.max(fontSize * 0.7, 10)}px`, ...textShadowStyle }}>\r\n                {rect.item.label}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Pie Chart Component - ปรับปรุงให้สวยงาม\r\nconst PieChartComponent = memo(({ title, data, colors = [] }) => {\r\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\r\n  \r\n  if (!data.length || total === 0) {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center\">\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงกราฟ</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <div className=\"flex items-center justify-center mb-6\">\r\n        <div className=\"text-xl font-bold text-slate-900\">จำนวน {total} คน</div>\r\n      </div>\r\n      \r\n      <div className=\"flex-1 flex flex-col items-center justify-center\">\r\n        {/* Pie Chart - ขยายขนาดให้ใหญ่ขึ้น */}\r\n        <div className=\"relative w-80 h-80 mb-8\">\r\n          <svg width=\"320\" height=\"320\" viewBox=\"0 0 320 320\" className=\"w-full h-full\">\r\n            {data.map((item, index) => {\r\n              const percentage = item.value / total;\r\n              const angle = percentage * 360;\r\n              \r\n              const prevPercentage = data.slice(0, index).reduce((sum, d) => sum + d.value, 0) / total;\r\n              const startAngle = prevPercentage * 360 - 90;\r\n              const endAngle = startAngle + angle;\r\n              \r\n              // Pie chart - เป็นวงกลมเต็ม ไม่ใช่โดนัท\r\n              const radius = 140;\r\n              \r\n              const startX = 160 + radius * Math.cos((startAngle * Math.PI) / 180);\r\n              const startY = 160 + radius * Math.sin((startAngle * Math.PI) / 180);\r\n              const endX = 160 + radius * Math.cos((endAngle * Math.PI) / 180);\r\n              const endY = 160 + radius * Math.sin((endAngle * Math.PI) / 180);\r\n              \r\n              const largeArcFlag = angle > 180 ? 1 : 0;\r\n              \r\n              const pathData = [\r\n                'M', 160, 160, // เริ่มที่จุดกึ่งกลาง\r\n                'L', startX, startY,\r\n                'A', radius, radius, 0, largeArcFlag, 1, endX, endY,\r\n                'Z'\r\n              ].join(' ');\r\n              \r\n              const pieColors = [\r\n                '#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', \r\n                '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'\r\n              ];\r\n              const color = pieColors[index % pieColors.length];\r\n              \r\n              // คำนวณตำแหน่งสำหรับแสดง percentage\r\n              const midAngle = startAngle + (angle / 2);\r\n              const labelRadius = 120;\r\n              const labelX = 160 + labelRadius * Math.cos((midAngle * Math.PI) / 180);\r\n              const labelY = 160 + labelRadius * Math.sin((midAngle * Math.PI) / 180);\r\n              const percentageText = `${(percentage * 100).toFixed(1)}%`;\r\n              \r\n              return (\r\n                <g key={`pie-${index}`}>\r\n                  <path\r\n                    d={pathData}\r\n                    fill={color}\r\n                    stroke=\"white\"\r\n                    strokeWidth=\"3\"\r\n                    className=\"hover:opacity-80 transition-opacity duration-200\"\r\n                  />\r\n                  {/* แสดง percentage */}\r\n                  {percentage > 0.05 && (\r\n                    <text\r\n                      x={labelX}\r\n                      y={labelY}\r\n                      textAnchor=\"middle\"\r\n                      dominantBaseline=\"middle\"\r\n                      fill=\"white\"\r\n                      fontSize=\"14\"\r\n                      fontWeight=\"bold\"\r\n                      stroke=\"#1e293b\"\r\n                      strokeWidth=\"1\"\r\n                      paintOrder=\"stroke\"\r\n                    >\r\n                      {percentageText}\r\n                    </text>\r\n                  )}\r\n                </g>\r\n              );\r\n            })}\r\n          </svg>\r\n        </div>\r\n        \r\n        {/* Legend */}\r\n        <div className=\"w-full\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2\">\r\n            {data.map((item, index) => {\r\n              const percentage = ((item.value / total) * 100).toFixed(0);\r\n              const pieColors = [\r\n                '#8b5cf6', '#ec4899', '#06b6d4', '#10b981', '#f59e0b', \r\n                '#ef4444', '#84cc16', '#6366f1', '#f97316', '#14b8a6'\r\n              ];\r\n              const color = pieColors[index % pieColors.length];\r\n              \r\n              return (\r\n                <div key={`legend-${item.label}-${index}`} className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-2 min-w-0 flex-1\">\r\n                    <div \r\n                      className=\"w-4 h-4 rounded-full flex-shrink-0\"\r\n                      style={{ backgroundColor: color }}\r\n                    />\r\n                    <span className=\"text-sm text-slate-700\">\r\n                      {truncateAffiliation(item.label)} <span className=\"font-bold text-slate-900\">{item.value}</span> คน\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"text-sm font-bold text-slate-900 ml-2\">{percentage}%</div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Horizontal Bar Chart Component\r\nconst HorizontalBarChart = memo(({ title, data, colors = [], maxHeight = '320px' }) => {\r\n  \r\n  const getSortOrder = (label) => {\r\n    const regionMatch = label.match(/ภาค\\s*(\\d+)/);\r\n    if (regionMatch) return parseInt(regionMatch[1]);\r\n    const customOrder = ['ศาลชั้นต้นในเขตกรุงเทพมหานคร', 'ศูนย์รักษาความปลอดภัย', 'ศาลชำนาญพิเศษ', 'ศาลสูง'];\r\n    const index = customOrder.findIndex(item => label.includes(item));\r\n    if (index !== -1) return 100 + index;\r\n    return 999;\r\n  };\r\n\r\n  const sortedData = useMemo(() => \r\n    [...data].sort((a, b) => getSortOrder(a.label) - getSortOrder(b.label)), \r\n    [data]\r\n  );\r\n  \r\n  const maxValue = useMemo(() => {\r\n    if (!sortedData || sortedData.length === 0) return 0;\r\n    return Math.max(...sortedData.map(d => d.value));\r\n  }, [sortedData]);\r\n\r\n  if (!sortedData.length || maxValue === 0) {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center\">\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงกราฟ</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full\">\r\n      <div className=\"space-y-2 h-full overflow-y-auto\">\r\n        {sortedData.map((item, index) => {\r\n          const barWidth = (item.value / maxValue) * 100;\r\n          const color = colors[index % colors.length] || '#8b5cf6';\r\n          \r\n          return (\r\n            <div key={`${item.label}-${index}`} className=\"grid grid-cols-3 gap-2 items-center\">\r\n              {/* Left Column for Full Label (CHANGED to text-left) */}\r\n              <div className=\"col-span-1 text-sm text-slate-700 font-medium text-left truncate\" title={item.label}>\r\n                {item.label}\r\n              </div>\r\n              \r\n              {/* Right Column for Bar */}\r\n              <div className=\"col-span-2 w-full bg-slate-100 rounded-full h-7 relative\">\r\n                <div\r\n                  className=\"h-7 rounded-full transition-all duration-700 flex items-center justify-end pr-3\"\r\n                  style={{\r\n                    width: `${barWidth}%`, backgroundColor: color, minWidth: '36px'\r\n                  }}\r\n                >\r\n                   <span className=\"text-white text-sm font-bold\">{item.value}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// SummaryCards Component - แทนที่กราฟโดนัท\r\nconst SummaryCards = memo(({ data, colors = [] }) => {\r\n  const total = useMemo(() => data.reduce((sum, d) => sum + d.value, 0), [data]);\r\n  const sortedData = useMemo(() => \r\n    [...data].sort((a, b) => b.value - a.value), [data]\r\n  );\r\n\r\n  if (!data.length || total === 0) {\r\n    return (\r\n      <div className=\"h-full flex items-center justify-center\">\r\n        <div className=\"text-center py-8\">\r\n          <p className=\"text-slate-500\">ไม่มีข้อมูลสำหรับแสดงผล</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full overflow-y-auto\">\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6\">\r\n        {/* สรุปรวม */}\r\n        <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl\">\r\n          <div className=\"text-2xl font-bold\">{total}</div>\r\n          <div className=\"text-sm opacity-90\">รวมทั้งหมด</div>\r\n        </div>\r\n        \r\n        {/* ข้อมูลสูงสุด */}\r\n        <div className=\"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl\">\r\n          <div className=\"text-2xl font-bold\">{sortedData[0]?.value || 0}</div>\r\n          <div className=\"text-sm opacity-90\">สูงสุด: {sortedData[0]?.label || 'ไม่มีข้อมูล'}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* รายการข้อมูลแบบการ์ด */}\r\n      <div className=\"space-y-3\">\r\n        {sortedData.map((item, index) => {\r\n          const percentage = ((item.value / total) * 100).toFixed(1);\r\n          const color = colors[index % colors.length] || '#8b5cf6';\r\n          \r\n          return (\r\n            <div \r\n              key={`${item.label}-${index}`} \r\n              className=\"bg-gradient-to-r from-slate-50 to-slate-100 border border-slate-200 rounded-lg p-4 hover:shadow-md transition-all duration-200\"\r\n            >\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div \r\n                    className=\"w-4 h-4 rounded-full\" \r\n                    style={{ backgroundColor: color }}\r\n                  />\r\n                  <span className=\"font-medium text-slate-800\">{item.label}</span>\r\n                </div>\r\n                <div className=\"text-right\">\r\n                  <div className=\"text-lg font-bold text-slate-900\">{item.value}</div>\r\n                  <div className=\"text-xs text-slate-500\">{percentage}%</div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Progress bar */}\r\n              <div className=\"w-full bg-slate-200 rounded-full h-2\">\r\n                <div \r\n                  className=\"h-2 rounded-full transition-all duration-700\" \r\n                  style={{ \r\n                    width: `${percentage}%`, \r\n                    backgroundColor: color \r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// (moved into the PersonnelPage component to avoid calling hooks at top level)\r\n\r\n// EditableCard Component (restored minimal implementation)\r\nconst EditableCard = memo(({ title, value, icon: Icon, color = \"blue\", isEditing, onEdit, onChange, isAdmin }) => {\r\n  const [localValue, setLocalValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    setLocalValue(value);\r\n  }, [value]);\r\n\r\n  const handleChange = (e) => {\r\n    const newValue = parseInt(e.target.value) || 0;\r\n    setLocalValue(newValue);\r\n    onChange(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-slate-200\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <div className={`w-12 h-12 bg-${color}-100 rounded-xl flex items-center justify-center`}>\r\n          {Icon && <Icon className={`w-6 h-6 text-${color}-600`} />}\r\n        </div>\r\n        {isAdmin && (\r\n          <button\r\n            onClick={onEdit}\r\n            className=\"text-slate-400 hover:text-slate-600 transition-colors\"\r\n          >\r\n            {isEditing ? <Save className=\"w-5 h-5\" /> : <Edit2 className=\"w-5 h-5\" />}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {isEditing ? (\r\n        <input\r\n          type=\"number\"\r\n          value={localValue}\r\n          onChange={handleChange}\r\n          className=\"w-full text-3xl font-bold text-slate-900 mb-1 bg-slate-50 border border-slate-200 rounded px-2 py-1\"\r\n          min=\"0\"\r\n        />\r\n      ) : (\r\n        <div className=\"text-3xl font-bold text-slate-900 mb-1\">{localValue}</div>\r\n      )}\r\n      <div className=\"text-sm text-slate-600\">{title}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// PersonnelDetailModal (minimal)\r\nconst PersonnelDetailModal = memo(({ person, isOpen, onClose }) => {\r\n  if (!isOpen || !person) return null;\r\n\r\n  // Calculate age from birth date\r\n  const calculateAge = (dob) => {\r\n    if (!dob) return 'ไม่ระบุ';\r\n    try {\r\n      const birthDate = new Date(dob);\r\n      const today = new Date();\r\n      let age = today.getFullYear() - birthDate.getFullYear();\r\n      const monthDiff = today.getMonth() - birthDate.getMonth();\r\n      \r\n      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {\r\n        age--;\r\n      }\r\n      \r\n      return `${age} ปี`;\r\n    } catch (error) {\r\n      return 'ไม่ระบุ';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto bg-black/60 hide-scrollbar\">\r\n      <div className=\"flex min-h-screen items-start justify-center p-3 sm:p-6 md:p-10\">\r\n        <div className=\"relative bg-gradient-to-br from-white via-slate-50 to-indigo-50 rounded-2xl sm:rounded-3xl shadow-2xl max-w-3xl w-full p-4 sm:p-6\">\r\n          {/* Header with game-card style */}\r\n          <div className=\"flex items-start justify-between mb-6 pb-4 border-b border-slate-200\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <div className=\"w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white text-lg sm:text-xl font-bold shadow-lg\">\r\n                {(person.firstname || 'N')[0]}\r\n              </div>\r\n              <div>\r\n                <h2 className=\"text-lg sm:text-xl font-bold text-slate-900\">\r\n                  {person.prefix} {person.firstname} {person.lastname}\r\n                </h2>\r\n                <p className=\"text-sm text-slate-600\">{person.position || 'ไม่ระบุตำแหน่ง'}</p>\r\n              </div>\r\n            </div>\r\n            <button \r\n              onClick={onClose} \r\n              className=\"p-2 text-slate-400 hover:text-slate-600 hover:bg-white/80 rounded-lg transition-all duration-200\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content Cards */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\">\r\n            {/* Contact Information Card */}\r\n            <div className=\"bg-gradient-to-br from-white to-blue-50 rounded-xl p-4 sm:p-5 shadow-lg border border-slate-200/50\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\r\n                <Phone className=\"w-5 h-5 text-blue-600\" />\r\n                ข้อมูลติดต่อ\r\n              </h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\">\r\n                  <Phone className=\"w-4 h-4 text-slate-500\" />\r\n                  <span className=\"text-sm text-slate-700\">{formatPhoneNumber(person.phone) || 'ไม่ระบุ'}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\">\r\n                  <Mail className=\"w-4 h-4 text-slate-500\" />\r\n                  <span className=\"text-sm text-slate-700\">{person.email || 'ไม่ระบุ'}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Work Information Card */}\r\n            <div className=\"bg-gradient-to-br from-white to-green-50 rounded-xl p-4 sm:p-5 shadow-lg border border-slate-200/50\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\r\n                <Building className=\"w-5 h-5 text-green-600\" />\r\n                ข้อมูลการทำงาน\r\n              </h3>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\">\r\n                  <Building2 className=\"w-4 h-4 text-slate-500\" />\r\n                  <div className=\"text-sm\">\r\n                    <div className=\"font-medium text-slate-700\">สังกัด</div>\r\n                    <div className=\"text-slate-600\">{person.affiliation || 'ไม่ระบุ'}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\">\r\n                  <Users className=\"w-4 h-4 text-slate-500\" />\r\n                  <div className=\"text-sm\">\r\n                    <div className=\"font-medium text-slate-700\">หน่วยงาน</div>\r\n                    <div className=\"text-slate-600\">{person.deph || 'ไม่ระบุ'}</div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center gap-3 p-2 rounded-lg bg-white/70 hover:bg-white transition-colors\">\r\n                  <Crown className=\"w-4 h-4 text-slate-500\" />\r\n                  <div className=\"text-sm\">\r\n                    <div className=\"font-medium text-slate-700\">ตำแหน่ง</div>\r\n                    <div className=\"text-slate-600\">{person.position || 'ไม่ระบุ'}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Additional Information Card */}\r\n            <div className=\"lg:col-span-2 bg-gradient-to-br from-white to-purple-50 rounded-xl p-4 sm:p-5 shadow-lg border border-slate-200/50\">\r\n              <h3 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2\">\r\n                <FileText className=\"w-5 h-5 text-purple-600\" />\r\n                ข้อมูลเพิ่มเติม\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"text-sm font-medium text-slate-700\">อายุ</div>\r\n                  <div className=\"text-sm text-slate-600 p-2 bg-white/70 rounded-lg\">\r\n                    {calculateAge(person.dob)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"flex flex-col sm:flex-row gap-3 mt-6 pt-4 border-t border-slate-200\">\r\n            {person.phone && (\r\n              <button \r\n                onClick={() => window.open(`tel:${formatPhoneNumber(person.phone)}`, '_self')} \r\n                className=\"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\r\n              >\r\n                <Phone className=\"w-4 h-4\" />\r\n                <span className=\"text-sm font-medium\">โทรหา</span>\r\n              </button>\r\n            )}\r\n            {person.email && (\r\n              <button \r\n                onClick={() => window.open(`mailto:${person.email}`, '_self')} \r\n                className=\"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\r\n              >\r\n                <Mail className=\"w-4 h-4\" />\r\n                <span className=\"text-sm font-medium\">ส่งอีเมล</span>\r\n              </button>\r\n            )}\r\n            <button \r\n              onClick={onClose} \r\n              className=\"flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-slate-500 to-slate-600 text-white rounded-lg hover:from-slate-600 hover:to-slate-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 sm:ml-auto\"\r\n            >\r\n              <span className=\"text-sm font-medium\">ปิด</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// SearchModal (enhanced with department filtering and game-card style)\r\n// Small visual card for a person used in search results (game-card style)\r\nconst PersonCard = memo(({ person, onView, onCall, onMail }) => {\r\n  return (\r\n    <div className=\"bg-gradient-to-br from-white via-blue-50 to-indigo-100 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 p-4 sm:p-6 border border-indigo-200 hover:border-indigo-300 transform hover:scale-105\">\r\n      {/* Header with name and position */}\r\n      <div className=\"mb-4\">\r\n        <div className=\"text-sm sm:text-base font-bold text-slate-900 mb-1\">\r\n          {person.prefix} {person.firstname} {person.lastname}\r\n        </div>\r\n        <div className=\"text-xs sm:text-sm text-indigo-600 font-medium\">\r\n          {person.position || 'ไม่ระบุตำแหน่ง'}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Info section */}\r\n      <div className=\"space-y-2 mb-4\">\r\n        <div className=\"flex items-center gap-2 text-xs sm:text-sm text-slate-600\">\r\n          <Building2 className=\"w-4 h-4 text-indigo-500 flex-shrink-0\" />\r\n          <span className=\"truncate\">{person.affiliation || 'ไม่ระบุสังกัด'}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2 text-xs sm:text-sm text-slate-600\">\r\n          <Briefcase className=\"w-4 h-4 text-purple-500 flex-shrink-0\" />\r\n          <span className=\"truncate\">{person.deph || 'ไม่ระบุหน่วยงาน'}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Action buttons */}\r\n      <div className=\"space-y-2\">\r\n        <button \r\n          onClick={() => onView(person)} \r\n          className=\"w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-all duration-200 shadow-md hover:shadow-lg\"\r\n        >\r\n          <Eye className=\"w-4 h-4\" /> \r\n          ดูรายละเอียด\r\n        </button>\r\n        \r\n        {/* Contact buttons */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {person.phone && (\r\n            <button \r\n              onClick={() => onCall(formatPhoneNumber(person.phone))} \r\n              className=\"flex-1 p-2 rounded-xl bg-green-100 hover:bg-green-200 text-green-600 transition-colors shadow-sm flex items-center justify-center gap-1\" \r\n              title=\"โทร\"\r\n            >\r\n              <Phone className=\"w-4 h-4\" />\r\n              <span className=\"text-xs\">โทร</span>\r\n            </button>\r\n          )}\r\n          {person.email && (\r\n            <button \r\n              onClick={() => onMail(person.email)} \r\n              className=\"flex-1 p-2 rounded-xl bg-blue-100 hover:bg-blue-200 text-blue-600 transition-colors shadow-sm flex items-center justify-center gap-1\" \r\n              title=\"อีเมล\"\r\n            >\r\n              <Mail className=\"w-4 h-4\" />\r\n              <span className=\"text-xs\">อีเมล</span>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst SearchModal = memo(({ isOpen, onClose, personnelData = [], stats = {}, onViewPerson = () => {}, onExport = () => {}, user }) => {\r\n  const [query, setQuery] = useState('');\r\n  const [filterAff, setFilterAff] = useState('');\r\n  const [filterDept, setFilterDept] = useState('');\r\n  const [filterPos, setFilterPos] = useState('');\r\n\r\n  // Get unique affiliations\r\n  const affiliations = useMemo(() => {\r\n    const setAff = new Set();\r\n    personnelData.forEach(p => setAff.add(p.affiliation || 'ไม่ระบุ'));\r\n    return Array.from(setAff).sort();\r\n  }, [personnelData]);\r\n\r\n  // Get departments based on selected affiliation\r\n  const departments = useMemo(() => {\r\n    const relevantPersonnel = filterAff \r\n      ? personnelData.filter(p => (p.affiliation || 'ไม่ระบุ') === filterAff)\r\n      : personnelData;\r\n    \r\n    const setDept = new Set();\r\n    relevantPersonnel.forEach(p => setDept.add(p.deph || 'ไม่ระบุ'));\r\n    return Array.from(setDept).sort();\r\n  }, [personnelData, filterAff]);\r\n\r\n  // Get positions\r\n  const positions = useMemo(() => {\r\n    const s = new Set();\r\n    personnelData.forEach(p => s.add(p.position || 'ไม่ระบุ'));\r\n    return Array.from(s).sort();\r\n  }, [personnelData]);\r\n\r\n  // Reset department when affiliation changes\r\n  useEffect(() => {\r\n    if (filterAff) {\r\n      setFilterDept('');\r\n    }\r\n  }, [filterAff]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const results = personnelData.filter(p => {\r\n    const hay = `${p.firstname} ${p.lastname} ${p.position || ''} ${p.affiliation || ''} ${p.deph || ''}`.toLowerCase();\r\n    if (query && !hay.includes(query.toLowerCase())) return false;\r\n    if (filterAff && (p.affiliation || 'ไม่ระบุ') !== filterAff) return false;\r\n    if (filterDept && (p.deph || 'ไม่ระบุ') !== filterDept) return false;\r\n    if (filterPos && (p.position || 'ไม่ระบุ') !== filterPos) return false;\r\n    return true;\r\n  });\r\n\r\n  const handleCall = (tel) => window.open(`tel:${tel}`, '_self');\r\n  const handleMail = (email) => window.open(`mailto:${email}`, '_self');\r\n\r\n  const clearFilters = () => { \r\n    setFilterAff(''); \r\n    setFilterDept(''); \r\n    setFilterPos(''); \r\n    setQuery(''); \r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto bg-black/60 hide-scrollbar\">\r\n      <div className=\"flex min-h-screen items-start justify-center p-3 sm:p-6 md:p-10\">\r\n        <div className=\"relative bg-white rounded-2xl sm:rounded-3xl shadow-2xl max-w-6xl w-full p-4 sm:p-6\">\r\n          <div className=\"flex items-center justify-between mb-4 sm:mb-6\">\r\n            <h2 className=\"text-lg sm:text-xl font-bold text-slate-900\">🔍 ค้นหาบุคลากร</h2>\r\n            <button \r\n              onClick={onClose} \r\n              className=\"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Enhanced Search Filters */}\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6\">\r\n            <input \r\n              value={query} \r\n              onChange={(e) => setQuery(e.target.value)} \r\n              className=\"w-full p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm\" \r\n              placeholder=\"🔍 ค้นหาชื่อ, ตำแหน่ง...\" \r\n            />\r\n            \r\n            <select \r\n              value={filterAff} \r\n              onChange={(e) => setFilterAff(e.target.value)} \r\n              className=\"p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n            >\r\n              <option value=\"\">🏢 ทั้งหมด (สังกัด)</option>\r\n              {affiliations.map(a => <option key={a} value={a}>{a}</option>)}\r\n            </select>\r\n            \r\n            <select \r\n              value={filterDept} \r\n              onChange={(e) => setFilterDept(e.target.value)} \r\n              className=\"p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n              disabled={!filterAff}\r\n            >\r\n              <option value=\"\">🏛️ ทั้งหมด (หน่วยงาน)</option>\r\n              {departments.map(d => <option key={d} value={d}>{d}</option>)}\r\n            </select>\r\n            \r\n            <select \r\n              value={filterPos} \r\n              onChange={(e) => setFilterPos(e.target.value)} \r\n              className=\"p-2 sm:p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 text-sm\"\r\n            >\r\n              <option value=\"\">👤 ทั้งหมด (ตำแหน่ง)</option>\r\n              {positions.map(p => <option key={p} value={p}>{p}</option>)}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Results header and actions */}\r\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-3\">\r\n            <div className=\"text-sm text-slate-600 flex items-center gap-2\">\r\n              <Users className=\"w-4 h-4 text-indigo-500\" />\r\n              พบ <span className=\"font-bold text-indigo-600\">{results.length}</span> รายการ\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button \r\n                onClick={clearFilters} \r\n                className=\"text-sm text-slate-600 px-3 py-1 rounded-lg bg-slate-100 hover:bg-slate-200 transition-colors\"\r\n              >\r\n                🗑️ ล้างตัวกรอง\r\n              </button>\r\n              <button \r\n                onClick={() => onExport(results)} \r\n                className=\"text-sm px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-1\"\r\n              >\r\n                <Download className=\"w-4 h-4\" />\r\n                ส่งออก\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Results grid */}\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 max-h-[60vh] overflow-y-auto hide-scrollbar\">\r\n            {results.map((p, i) => (\r\n              <PersonCard \r\n                key={`${p.phone || i}-${i}`} \r\n                person={p} \r\n                onView={onViewPerson} \r\n                onCall={handleCall} \r\n                onMail={handleMail} \r\n              />\r\n            ))}\r\n            {results.length === 0 && (\r\n              <div className=\"col-span-full text-center text-slate-500 py-12\">\r\n                <Users className=\"w-16 h-16 text-slate-300 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-semibold text-slate-600 mb-2\">ไม่พบผลลัพธ์</h3>\r\n                <p className=\"text-sm\">ลองเปลี่ยนคำค้นหาหรือตัวกรองข้อมูล</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default function PersonnelPage({ user }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [personnelData, setPersonnelData] = useState([]);\r\n  const [selectedPerson, setSelectedPerson] = useState(null);\r\n  const [showDetail, setShowDetail] = useState(false);\r\n  const [showSearchModal, setShowSearchModal] = useState(false);\r\n\r\n  const [quota, setQuota] = useState(0);\r\n  const [vacancy, setVacancy] = useState(0);\r\n  const [isEditingQuota, setIsEditingQuota] = useState(false);\r\n  const [isEditingVacancy, setIsEditingVacancy] = useState(false);\r\n  const [generalStatsData, setGeneralStatsData] = useState({});\r\n\r\n  const [selectedChart, setSelectedChart] = useState(\"position\"); // Default chart type\r\n  const [selectedAffiliation, setSelectedAffiliation] = useState(\"\"); // For department filtering\r\n  const [filters, setFilters] = useState({\r\n    affiliation: \"\",\r\n    department: \"\",\r\n    ageRange: \"\",\r\n    gender: \"\",\r\n  });\r\n\r\n  const logAdminActivity = useCallback((action, details) => {\r\n    if (!user) return;\r\n    fetch(CONFIG.ADMIN_API, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        action: 'log_activity',\r\n        log_action: action,\r\n        log_details: details || null,\r\n        user_id: user.id,\r\n        username: user.username,\r\n      }),\r\n    }).catch((error) => console.error('Failed to log activity:', error));\r\n  }, [user]);\r\n\r\n  // ฟังก์ชันดึงข้อมูลจาก general_stats API\r\n  const fetchGeneralStats = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.API_BASE}/general_stats`);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const result = await response.json();\r\n      \r\n      if (result.success && Array.isArray(result.data)) {\r\n        const statsMap = {};\r\n        result.data.forEach(item => {\r\n          statsMap[item.name] = item.value;\r\n        });\r\n        setGeneralStatsData(statsMap);\r\n        \r\n        // ตั้งค่า quota และ vacancy จากข้อมูล API\r\n        setQuota(statsMap.quota || 0);\r\n        setVacancy(statsMap.vacancy || 0);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching general stats:', error);\r\n      // ใช้ค่าเริ่มต้นในกรณีที่ดึงข้อมูลไม่ได้\r\n      setQuota(100);\r\n      setVacancy(20);\r\n    }\r\n  }, []);\r\n\r\n  // ฟังก์ชันอัพเดทค่าใน general_stats\r\n  const updateGeneralStat = useCallback(async (name, value) => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.API_BASE}/general_stats/value/${name}`, {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ value: parseInt(value) })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        // ถ้ายังไม่มีข้อมูล ให้สร้างใหม่\r\n        if (response.status === 404) {\r\n          const createResponse = await fetch(`${CONFIG.API_BASE}/general_stats`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ \r\n              name: name, \r\n              value: parseInt(value),\r\n              description: name === 'quota' ? 'กรอบอัตรากำลังทั้งหมด' : 'จำนวนตำแหน่งว่าง'\r\n            })\r\n          });\r\n          \r\n          if (!createResponse.ok) {\r\n            throw new Error('Failed to create new stat');\r\n          }\r\n        } else {\r\n          throw new Error('Failed to update stat');\r\n        }\r\n      }\r\n      \r\n      // อัพเดทข้อมูลใน state\r\n      setGeneralStatsData(prev => ({\r\n        ...prev,\r\n        [name]: parseInt(value)\r\n      }));\r\n      \r\n    } catch (error) {\r\n      console.error(`Error updating ${name}:`, error);\r\n      alert(`เกิดข้อผิดพลาดในการบันทึก ${name === 'quota' ? 'กรอบอัตรา' : 'ตำแหน่งว่าง'}`);\r\n    }\r\n  }, []);\r\n\r\n  const fetchPersonnelData = useCallback(async () => {\r\n    try {\r\n      const apiUrl = CONFIG.OFFICERS_API;\r\n      const response = await fetch(apiUrl);\r\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\r\n      const text = await response.text();\r\n      if (!text) throw new Error('Empty response from server');\r\n      const result = JSON.parse(text);\r\n      const data = result.success && Array.isArray(result.data) ? result.data : [];\r\n      const formattedData = data.map((person) => ({\r\n        phone: person.phone || '',\r\n        prefix: person.prefix || '',\r\n        firstname: person.firstname || '',\r\n        lastname: person.lastname || '',\r\n        position: person.position || '',\r\n        affiliation: person.affiliation || '',\r\n        deph: person.department || '',\r\n        generation: person.generation || '',\r\n        email: person.email || '',\r\n        dob: person.dob || '',\r\n        lineUserId: person.lineUserId || '',\r\n        role: person.role || 'member',\r\n      }));\r\n      setPersonnelData(formattedData);\r\n      setError(\"\");\r\n    } catch (error) {\r\n      setError(`⚠️ ${error.message}`);\r\n      setPersonnelData([]);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchPersonnelData();\r\n    fetchGeneralStats(); // เพิ่มการดึงข้อมูล general stats\r\n  }, [fetchPersonnelData, fetchGeneralStats]);\r\n\r\n  const handleRefresh = () => {\r\n    setRefreshing(true);\r\n    Promise.all([\r\n      fetchPersonnelData(),\r\n      fetchGeneralStats()\r\n    ]).finally(() => setRefreshing(false));\r\n  };\r\n\r\n  const handleViewPerson = (person) => {\r\n  // If user opened from search, close search modal first so detail appears on top\r\n  setShowSearchModal(false);\r\n  setSelectedPerson(person);\r\n  setShowDetail(true);\r\n  };\r\n\r\n  const exportToCSV = (data) => {\r\n    // Implement CSV export logic here\r\n  };\r\n\r\n  const affiliationAbbreviations = {\r\n    \"ศูนย์รักษาความปลอดภัย\": \"ส่วนกลาง\",\r\n    \"ศาลชั้นต้นในกรุงเทพมหานคร\": \"กทม.\",\r\n  };\r\n\r\n  const filteredAffiliationData = useMemo(() => {\r\n    return personnelData.reduce((acc, person) => {\r\n      let affiliation = (person.affiliation || '').trim();\r\n      if (!affiliation) affiliation = 'ไม่ระบุ';\r\n\r\n      const lower = affiliation.toLowerCase();\r\n\r\n      // Normalize known patterns using targeted rules\r\n      let normalized = affiliation;\r\n\r\n      // If it's the regional office pattern that contains สำนักศาลยุติธรรมประจำภาค\r\n      // we want to convert it to: 'ภาค <n>' when a number exists, otherwise 'ภาค'\r\n      if (\r\n        lower.includes('สำนักศาลยุติธรรมประจำภาค') ||\r\n        lower.includes('สำนักยุติธรรมประจำภาค') ||\r\n        lower.includes('ในสังกัดสำนักศาลยุติธรรมประจำภาค') ||\r\n        lower.includes('ศาลในสังกัดสำนักศาลยุติธรรมประจำภาค')\r\n      ) {\r\n        // Try to extract explicit 'ภาค <number>' first\r\n        const matchRegion = affiliation.match(/ภาค\\s*(\\d{1,3})/i);\r\n        if (matchRegion && matchRegion[1]) {\r\n          normalized = `ภาค ${matchRegion[1]}`;\r\n        } else {\r\n          // Fallback: find any trailing number in the string (e.g., '... ประจำภาค 4')\r\n          const trailingNum = affiliation.match(/(\\d{1,3})\\s*$/);\r\n          if (trailingNum && trailingNum[1]) {\r\n            normalized = `ภาค ${trailingNum[1]}`;\r\n          } else {\r\n            // Last-resort: any first number in the string\r\n            const anyNum = affiliation.match(/(\\d{1,3})/);\r\n            normalized = anyNum && anyNum[1] ? `ภาค ${anyNum[1]}` : 'ภาค';\r\n          }\r\n        }\r\n      } else if (lower.includes('ศูนย์รักษาความปลอดภัย')) {\r\n        normalized = 'ส่วนกลาง';\r\n      } else if (lower.includes('กรุงเทพ') || lower.includes('กรุงเทพมหานคร') || lower.includes('ศาลชั้นต้นในกรุงเทพมหานคร')) {\r\n        normalized = 'กทม.';\r\n      } else {\r\n        // fallback to any exact mapping we defined, otherwise keep original\r\n        normalized = affiliationAbbreviations[affiliation] || affiliation;\r\n      }\r\n\r\n      acc[normalized] = (acc[normalized] || 0) + 1;\r\n      return acc;\r\n    }, {});\r\n  }, [personnelData]);\r\n\r\n  const chartData = useMemo(() => {\r\n    const entries = Object.entries(filteredAffiliationData).map(([label, value]) => ({ label, value }));\r\n\r\n    const getOrderKey = (label) => {\r\n      if (!label) return 9999;\r\n      const l = String(label).trim();\r\n\r\n      // Match 'ภาค' followed by number e.g. 'ภาค 1' or 'ภาค1'\r\n      const m = l.match(/ภาค\\s*(\\d{1,3})/);\r\n      if (m && m[1]) {\r\n        // Put ภาค N in order 0.. (keep N small)\r\n        const num = parseInt(m[1], 10);\r\n        return num; // 1..9 -> 1..9 (smaller is earlier)\r\n      }\r\n\r\n      // If label is exactly 'ภาค' (no number), put after numbered ภาค\r\n      if (/^ภาค$/i.test(l)) return 999;\r\n\r\n      // Specific named orders after ภาค group\r\n      if (l === 'กทม.' || l.toLowerCase() === 'กทม.') return 1000;\r\n      if (l === 'ส่วนกลาง' || l.toLowerCase() === 'ส่วนกลาง') return 1001;\r\n      if (l.includes('ศาลสูง')) return 1002;\r\n      // handle both spellings 'ชำนาญ' and 'ชำนัญ'\r\n      if (l.includes('ชำนาญ') || l.includes('ชำนัญ') || l.includes('ชำนัญพิเศษ') || l.includes('ชำนาญพิเศษ')) return 1003;\r\n\r\n      // Default: place after known groups but preserve alphabetical order by returning a high key plus name\r\n      return 5000 + l.charCodeAt(0);\r\n    };\r\n\r\n    entries.sort((a, b) => {\r\n      const ka = getOrderKey(a.label);\r\n      const kb = getOrderKey(b.label);\r\n      if (ka === kb) {\r\n        // fallback alphabetical\r\n        return String(a.label).localeCompare(String(b.label));\r\n      }\r\n      return ka - kb;\r\n    });\r\n\r\n    return entries;\r\n  }, [filteredAffiliationData]);\r\n\r\n  const stats = useMemo(() => {\r\n    const newStats = {\r\n      total: personnelData.length,\r\n      connected: personnelData.filter((p) => p.lineUserId).length,\r\n      byPosition: {},\r\n      byAffiliation: {},\r\n      byDepartment: {},\r\n      byGeneration: {},\r\n    };\r\n    personnelData.forEach((person) => {\r\n      const position = person.position || 'ไม่ระบุ';\r\n      newStats.byPosition[position] = (newStats.byPosition[position] || 0) + 1;\r\n      const affiliation = person.affiliation || 'ไม่ระบุ';\r\n      newStats.byAffiliation[affiliation] = (newStats.byAffiliation[affiliation] || 0) + 1;\r\n      const department = person.deph || 'ไม่ระบุตำแหน่ง';\r\n      newStats.byDepartment[department] = (newStats.byDepartment[department] || 0) + 1;\r\n      const generation = person.generation ? String(person.generation).trim() : 'ไม่ระบุตำแหน่ง';\r\n      newStats.byGeneration[generation] = (newStats.byGeneration[generation] || 0) + 1;\r\n    });\r\n    return newStats;\r\n  }, [personnelData]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Personnel Data:\", personnelData);\r\n  }, [personnelData]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Stats:\", stats);\r\n    console.log(\"Chart Data:\", chartData);\r\n  }, [stats, chartData]);\r\n\r\n  const chartColors = [\r\n    \"#FF6384\", \"#36A2EB\", \"#FFCE56\", \"#4BC0C0\", \"#9966FF\", \"#FF9F40\", \"#FFCD56\", \"#C9CBCF\"\r\n  ];\r\n\r\n  // Helper: build chart data for different types (inside component)\r\n  const getChartData = useCallback((type) => {\r\n    if (type === 'affiliation') return chartData; // already normalized affiliation entries\r\n\r\n    if (type === 'position') {\r\n      // build from stats.byPosition\r\n      const entries = Object.entries(stats.byPosition || {}).map(([label, value]) => ({ label, value }));\r\n      // sort by value desc\r\n      entries.sort((a, b) => b.value - a.value);\r\n      return entries;\r\n    }\r\n\r\n    if (type === 'department') {\r\n      // build from deph field - filter by selected affiliation if any\r\n      const groups = {};\r\n      const filteredData = selectedAffiliation \r\n        ? personnelData.filter(p => (p.affiliation || 'ไม่ระบุ') === selectedAffiliation)\r\n        : personnelData;\r\n        \r\n      filteredData.forEach(p => {\r\n        const dept = p.deph || 'ไม่ระบุ';\r\n        groups[dept] = (groups[dept] || 0) + 1;\r\n      });\r\n      return Object.entries(groups).map(([label, value]) => ({ label, value })).sort((a, b) => b.value - a.value);\r\n    }\r\n\r\n    if (type === 'age') {\r\n      // derive age groups from dob (basic)\r\n      const groups = { '<30': 0, '30-39': 0, '40-49': 0, '50-59': 0, '60+': 0 };\r\n      const now = new Date();\r\n      personnelData.forEach(p => {\r\n        if (!p.dob) return;\r\n        const m = String(p.dob).match(/(\\d{4})/);\r\n        if (!m) return;\r\n        const year = parseInt(m[1], 10);\r\n        if (isNaN(year)) return;\r\n        const age = now.getFullYear() - year;\r\n        if (age < 30) groups['<30']++;\r\n        else if (age < 40) groups['30-39']++;\r\n        else if (age < 50) groups['40-49']++;\r\n        else if (age < 60) groups['50-59']++;\r\n        else groups['60+']++;\r\n      });\r\n      return Object.entries(groups).map(([label, value]) => ({ label, value }));\r\n    }\r\n\r\n    if (type === 'gender') {\r\n      // no gender field in data - return empty to show no data\r\n      const genders = (personnelData || []).reduce((acc, p) => {\r\n        const g = (p.gender || '').trim();\r\n        if (!g) return acc;\r\n        acc[g] = (acc[g] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n      return Object.entries(genders).map(([label, value]) => ({ label, value }));\r\n    }\r\n\r\n    return [];\r\n  }, [chartData, stats, personnelData, selectedAffiliation]); // Add selectedAffiliation dependency\r\n\r\n  // Helper function to get chart title\r\n  const getChartTitle = (chartType) => {\r\n    switch (chartType) {\r\n      case \"position\":\r\n        return \"ตำแหน่ง\";\r\n      case \"affiliation\":\r\n        return \"สัดส่วนแต่ละสังกัด\";\r\n      case \"department\":\r\n        return selectedAffiliation \r\n          ? `หน่วยงานใน${selectedAffiliation}`\r\n          : \"หน่วยงาน (เลือกสังกัดก่อน)\";\r\n      case \"gender\":\r\n        return \"เพศ\";\r\n      case \"age\":\r\n        return \"ช่วงอายุ\";\r\n      default:\r\n        return \"ข้อมูลบุคลากร\";\r\n    }\r\n  };\r\n\r\n  const renderChart = () => {\r\n    switch (selectedChart) {\r\n      case \"position\":\r\n        return (\r\n          <HorizontalBarChart\r\n            data={getChartData('position')}\r\n            colors={chartColors}\r\n            title=\"ตำแหน่ง\"\r\n            maxHeight=\"800px\"\r\n          />\r\n        );\r\n      case \"affiliation\":\r\n        return (\r\n          <HorizontalBarChart\r\n            data={getChartData('affiliation')}\r\n            colors={chartColors}\r\n            title=\"สัดส่วนแต่ละสังกัด\"\r\n            maxHeight=\"800px\"\r\n          />\r\n        );\r\n      case \"department\":\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            {!selectedAffiliation ? (\r\n              <div className=\"text-center py-8\">\r\n                <Building2 className=\"w-16 h-16 text-slate-300 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-semibold text-slate-600 mb-2\">เลือกสังกัดก่อน</h3>\r\n                <p className=\"text-sm text-slate-500 mb-4\">กรุณาเลือกสังกัดเพื่อดูหน่วยงานในสังกัดนั้น</p>\r\n                <select \r\n                  value={selectedAffiliation}\r\n                  onChange={(e) => setSelectedAffiliation(e.target.value)}\r\n                  className=\"p-2 border border-slate-300 rounded-lg\"\r\n                >\r\n                  <option value=\"\">เลือกสังกัด</option>\r\n                  {Array.from(new Set(personnelData.map(p => p.affiliation || 'ไม่ระบุ'))).sort().map(aff => (\r\n                    <option key={aff} value={aff}>{aff}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            ) : (\r\n              <HorizontalBarChart\r\n                data={getChartData('department')}\r\n                colors={chartColors}\r\n                title={`หน่วยงานใน${selectedAffiliation}`}\r\n                maxHeight=\"320px\"\r\n              />\r\n            )}\r\n          </div>\r\n        );\r\n      case \"gender\":\r\n        return (\r\n          <PieChartComponent\r\n            data={getChartData('gender')}\r\n            colors={chartColors}\r\n            title=\"เพศ\"\r\n          />\r\n        );\r\n      case \"age\":\r\n        return (\r\n          <HorizontalBarChart\r\n            data={getChartData('age')}\r\n            colors={chartColors}\r\n            title=\"ช่วงอายุ\"\r\n            maxHeight=\"240px\"\r\n          />\r\n        );\r\n      default:\r\n        return <p>ไม่มีข้อมูลสำหรับแสดงผล</p>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full min-h-full p-6\">\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-3\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <h1 className=\"text-xl sm:text-2xl font-bold text-slate-800\">ข้อมูลบุคลากร</h1>\r\n          <button\r\n            onClick={() => setShowSearchModal(true)}\r\n            className=\"flex items-center space-x-2 px-3 sm:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl shadow text-sm transition-colors\"\r\n          >\r\n            <Search className=\"w-4 h-4\" />\r\n            <span>ค้นหาบุคลากร</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8\">\r\n        <EditableCard\r\n          title=\"กรอบอัตรา\"\r\n          value={quota}\r\n          icon={Briefcase}\r\n          color=\"blue\"\r\n          isEditing={isEditingQuota}\r\n          onEdit={() => setIsEditingQuota(!isEditingQuota)}\r\n          onChange={(value) => setQuota(value)}\r\n          isAdmin={user?.role === 'admin'}\r\n        />\r\n        <EditableCard\r\n          title=\"ตำแหน่งว่าง\"\r\n          value={vacancy}\r\n          icon={UserX}\r\n          color=\"red\"\r\n          isEditing={isEditingVacancy}\r\n          onEdit={() => setIsEditingVacancy(!isEditingVacancy)}\r\n          onChange={(value) => setVacancy(value)}\r\n          isAdmin={user?.role === 'admin'}\r\n        />\r\n        <StatCard\r\n          title=\"บุคลากรทั้งหมด\"\r\n          value={stats.total}\r\n          icon={Users}\r\n          color=\"green\"\r\n          subtitle=\"ทั้งหมดในระบบ\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"flex flex-wrap items-center gap-2 sm:gap-4 mb-4 sm:mb-6\">\r\n        <button\r\n          onClick={() => setSelectedChart(\"position\")}\r\n          className={`px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"position\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`}\r\n        >\r\n          ตำแหน่ง\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedChart(\"affiliation\")}\r\n          className={`px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"affiliation\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`}\r\n        >\r\n          สังกัด\r\n        </button>\r\n        <button\r\n          onClick={() => {\r\n            setSelectedChart(\"department\");\r\n            if (!selectedAffiliation) {\r\n              // Auto-select first affiliation if none selected\r\n              const affiliations = Array.from(new Set(personnelData.map(p => p.affiliation || 'ไม่ระบุ'))).sort();\r\n              if (affiliations.length > 0) {\r\n                setSelectedAffiliation(affiliations[0]);\r\n              }\r\n            }\r\n          }}\r\n          className={`px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"department\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`}\r\n        >\r\n          หน่วยงาน\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedChart(\"gender\")}\r\n          className={`px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"gender\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`}\r\n        >\r\n          เพศ\r\n        </button>\r\n        <button\r\n          onClick={() => setSelectedChart(\"age\")}\r\n          className={`px-3 sm:px-4 py-2 rounded-lg text-sm transition-colors ${selectedChart === \"age\" ? \"bg-indigo-600 text-white\" : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"}`}\r\n        >\r\n          ช่วงอายุ\r\n        </button>\r\n        \r\n        {selectedChart === \"department\" && (\r\n          <select \r\n            value={selectedAffiliation}\r\n            onChange={(e) => setSelectedAffiliation(e.target.value)}\r\n            className=\"ml-2 p-2 border border-slate-300 rounded-lg text-sm bg-white\"\r\n          >\r\n            <option value=\"\">เลือกสังกัด</option>\r\n            {Array.from(new Set(personnelData.map(p => p.affiliation || 'ไม่ระบุ'))).sort().map(aff => (\r\n              <option key={aff} value={aff}>{aff}</option>\r\n            ))}\r\n          </select>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6\">\r\n        <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 min-h-[600px]\">\r\n          <h2 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4\">กราฟแท่ง</h2>\r\n          <div className=\"h-[520px]\">\r\n            {renderChart()}\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 min-h-[600px]\">\r\n          <h2 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4\">กราฟวงกลม</h2>\r\n          <div className=\"h-[520px]\">\r\n            <PieChartComponent data={getChartData(selectedChart)} colors={chartColors} title={getChartTitle(selectedChart)} />\r\n          </div>\r\n        </div>\r\n        <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 h-[600px]\">\r\n          <h2 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4\">สรุปข้อมูล</h2>\r\n          <SummaryCards data={getChartData(selectedChart)} colors={chartColors} title={getChartTitle(selectedChart)} />\r\n        </div>\r\n        <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6 min-h-[600px]\">\r\n          <h2 className=\"text-base sm:text-lg font-semibold text-slate-800 mb-4\">กราฟเส้น</h2>\r\n          <div className=\"h-[520px]\">\r\n            <LineChart data={getChartData(selectedChart)} colors={chartColors} title={getChartTitle(selectedChart)} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <PersonnelDetailModal\r\n        person={selectedPerson}\r\n        isOpen={showDetail}\r\n        onClose={() => setShowDetail(false)}\r\n      />\r\n      <SearchModal\r\n        isOpen={showSearchModal}\r\n        onClose={() => setShowSearchModal(false)}\r\n        personnelData={personnelData}\r\n        stats={stats}\r\n        onViewPerson={handleViewPerson}\r\n        onExport={exportToCSV}\r\n        user={user}\r\n      />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}