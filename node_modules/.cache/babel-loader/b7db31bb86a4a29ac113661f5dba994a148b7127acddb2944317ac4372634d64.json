{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apiwa\\\\Documents\\\\GitHub\\\\C\\\\src\\\\pages\\\\ShiftWorkPage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$();\nimport React, { useState, useMemo, useCallback, memo, useEffect } from \"react\";\nimport { Calendar as CalendarIcon, Plus, ChevronLeft, ChevronRight, Filter, Search, Edit, Trash2, Save, X, Clock, Users, Building, FileText, Settings, Sun, Moon, File, Shield, CloudSun, Target, UserPlus, Star, Crown, User, ChevronDown, Briefcase, UserCheck, Eye, MoreVertical } from 'lucide-react';\nimport { CONFIG } from '../config';\n\n// --- ฟังก์ชันตรวจสอบวันหยุด ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst isHoliday = (date, holidays = []) => {\n  if (!date) return false;\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\n  const dateStr = date.toISOString().split('T')[0];\n  return holidays.some(holiday => holiday.holiday_date === dateStr);\n};\nconst isToday = date => {\n  if (!date) return false;\n  const today = new Date();\n  return date.getDate() === today.getDate() && date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear();\n};\n\n// --- ฟังก์ชันหา shift_type ตาม period และ holiday ---\nconst getShiftTypeByPeriod = (period, isHolidayDate, shiftTypes) => {\n  if (!Array.isArray(shiftTypes)) return null;\n  if (period === 'night') {\n    return shiftTypes.find(type => type.id === 2 || type.id === 4);\n  } else {\n    return isHolidayDate ? shiftTypes.find(type => type.id === 3) : shiftTypes.find(type => type.id === 1);\n  }\n};\n\n// --- Redesigned Calendar Components ---\n\nconst ShiftCalendarView = /*#__PURE__*/_s(/*#__PURE__*/memo(_c = _s(({\n  currentDate,\n  schedules,\n  holidays,\n  filters,\n  setFilters,\n  units,\n  navigateMonth,\n  goToToday,\n  openAddModal,\n  openEditModal\n}) => {\n  _s();\n  const days = useMemo(() => {\n    const year = currentDate.getFullYear();\n    const month = currentDate.getMonth();\n    const firstDay = new Date(year, month, 1);\n    const lastDay = new Date(year, month + 1, 0);\n    const daysInMonth = lastDay.getDate();\n    const startingDayOfWeek = firstDay.getDay();\n    const daysArray = [];\n\n    // Add blank days for the start of the month\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      daysArray.push(null);\n    }\n\n    // Add days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      daysArray.push(new Date(year, month, day));\n    }\n\n    // Add blank days to complete the grid\n    while (daysArray.length % 7 !== 0) {\n      daysArray.push(null);\n    }\n    return daysArray;\n  }, [currentDate]);\n  const getSchedulesForDate = useCallback(date => {\n    if (!date) return [];\n    const dateStr = date.toISOString().split('T')[0];\n    return schedules.filter(schedule => schedule.duty_date === dateStr);\n  }, [schedules]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(CalendarHeader, {\n      currentDate: currentDate,\n      navigateMonth: navigateMonth,\n      goToToday: goToToday,\n      openAddModal: openAddModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CalendarFilters, {\n      filters: filters,\n      setFilters: setFilters,\n      units: units\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow mt-4 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 border-t border-l border-slate-200\",\n        children: ['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'].map(day => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 text-center text-xs font-semibold text-slate-500 border-b border-r border-slate-200 bg-slate-50\",\n          children: day\n        }, day, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-7 grid-rows-6 flex-grow border-l border-slate-200\",\n        children: days.map((date, index) => /*#__PURE__*/_jsxDEV(CalendarDayCell, {\n          date: date,\n          holidays: holidays,\n          schedules: getSchedulesForDate(date),\n          onAdd: () => openAddModal(date),\n          onEdit: openEditModal\n        }, date ? date.toISOString() : `empty-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}, \"i4p65hFGRD+DOZ0qxHoJGd5BGRE=\")), \"i4p65hFGRD+DOZ0qxHoJGd5BGRE=\");\n_c2 = ShiftCalendarView;\nconst CalendarHeader = /*#__PURE__*/memo(_c3 = ({\n  currentDate,\n  navigateMonth,\n  goToToday,\n  openAddModal\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center justify-between mb-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigateMonth(-1),\n      className: \"p-2 text-slate-500 hover:bg-slate-100 rounded-full\",\n      children: /*#__PURE__*/_jsxDEV(ChevronLeft, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold text-slate-800 text-center w-48\",\n      children: currentDate.toLocaleDateString('th-TH', {\n        month: 'long',\n        year: 'numeric'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigateMonth(1),\n      className: \"p-2 text-slate-500 hover:bg-slate-100 rounded-full\",\n      children: /*#__PURE__*/_jsxDEV(ChevronRight, {\n        className: \"w-5 h-5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center space-x-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: goToToday,\n      className: \"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 bg-indigo-50 hover:bg-indigo-100 rounded-lg\",\n      children: \"\\u0E27\\u0E31\\u0E19\\u0E19\\u0E35\\u0E49\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => openAddModal(),\n      className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\",\n      children: [/*#__PURE__*/_jsxDEV(Plus, {\n        className: \"w-4 h-4 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E27\\u0E23\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 163,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 151,\n  columnNumber: 3\n}, this));\n_c4 = CalendarHeader;\nconst CalendarFilters = /*#__PURE__*/memo(_c5 = ({\n  filters,\n  setFilters,\n  units\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex items-center space-x-4\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative flex-1\",\n    children: [/*#__PURE__*/_jsxDEV(Search, {\n      className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",\n      value: filters.officer,\n      onChange: e => setFilters(prev => ({\n        ...prev,\n        officer: e.target.value\n      })),\n      className: \"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 180,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(Filter, {\n      className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      value: filters.unit,\n      onChange: e => setFilters(prev => ({\n        ...prev,\n        unit: e.target.value\n      })),\n      className: \"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\",\n        children: \"\\u0E17\\u0E38\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: unit.id,\n        children: unit.unit_name\n      }, unit.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 190,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 179,\n  columnNumber: 3\n}, this));\n_c6 = CalendarFilters;\nconst CalendarDayCell = /*#__PURE__*/memo(_c7 = ({\n  date,\n  holidays,\n  schedules,\n  onAdd,\n  onEdit\n}) => {\n  if (!date) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"border-b border-r border-slate-200 bg-slate-50/50\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 21\n  }, this);\n  const today = isToday(date);\n  const holiday = isHoliday(date, holidays);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative p-2 border-b border-r border-slate-200 flex flex-col group\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center space-x-2 mb-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: `w-7 h-7 flex items-center justify-center rounded-full text-sm font-semibold ${today ? 'bg-indigo-600 text-white' : holiday ? 'text-red-600' : 'text-slate-700'}`,\n        children: date.getDate()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 9\n      }, this), holiday && !today && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1.5 h-1.5 bg-red-500 rounded-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 space-y-1 overflow-y-auto\",\n      children: schedules.map(schedule => /*#__PURE__*/_jsxDEV(ScheduleItem, {\n        schedule: schedule,\n        onEdit: onEdit\n      }, schedule.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 36\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onAdd,\n      className: \"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-400 rounded-full opacity-0 group-hover:opacity-100 hover:bg-indigo-100 hover:text-indigo-600 transition-opacity\",\n      children: /*#__PURE__*/_jsxDEV(Plus, {\n        className: \"w-4 h-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n});\n_c8 = CalendarDayCell;\nconst ScheduleItem = /*#__PURE__*/memo(_c9 = ({\n  schedule,\n  onEdit\n}) => {\n  const shiftColors = {\n    1: 'border-yellow-500',\n    // เวรปกติ\n    3: 'border-orange-500',\n    // เวรวันหยุด\n    2: 'border-indigo-500',\n    // เวรกลางคืน\n    4: 'border-indigo-500',\n    // เวรกลางคืน\n    default: 'border-slate-400'\n  };\n  const borderColor = shiftColors[schedule.shift_type_id] || shiftColors.default;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: () => onEdit(schedule),\n    className: `p-1.5 rounded-md bg-slate-50 hover:bg-slate-100 cursor-pointer border-l-4 ${borderColor}`,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs font-semibold text-slate-800 truncate\",\n      children: schedule.shift_type_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xs text-slate-600 truncate\",\n      children: schedule.officer_names\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n});\n\n// Unit Structure Management Component\n_c0 = ScheduleItem;\nconst UnitStructureManagement = () => {\n  _s2();\n  const [units, setUnits] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [unitStructures, setUnitStructures] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedUnit, setSelectedUnit] = useState('');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingStructure, setEditingStructure] = useState(null);\n\n  // Fetch ข้อมูลส่วนงานจาก duty_unit\n  const fetchUnits = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\n      const data = await response.json();\n      if (data.success) {\n        setUnits(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching units:', error);\n    }\n  }, []);\n\n  // Fetch ข้อมูลเจ้าหน้าที่\n  const fetchOfficers = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.OFFICERS_API}`);\n      const data = await response.json();\n      if (data.success) {\n        setOfficers(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching officers:', error);\n    }\n  }, []);\n\n  // Fetch ข้อมูลโครงสร้างส่วนงาน\n  const fetchUnitStructures = useCallback(async () => {\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\n      const data = await response.json();\n      if (data.success) {\n        setUnitStructures(data.data);\n      }\n    } catch (error) {\n      console.error('Error fetching unit structures:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  useEffect(() => {\n    fetchUnits();\n    fetchOfficers();\n    fetchUnitStructures();\n  }, [fetchUnits, fetchOfficers, fetchUnitStructures]);\n\n  // ส่วนงานที่กรองตาม selectedUnit\n  const filteredStructures = useMemo(() => {\n    if (!selectedUnit) return unitStructures;\n    return unitStructures.filter(structure => structure.unit_code === selectedUnit);\n  }, [unitStructures, selectedUnit]);\n\n  // จัดกลุ่มตามส่วนงาน\n  const groupedByUnit = useMemo(() => {\n    const grouped = {};\n\n    // เพิ่มผู้อำนวยการ\n    const director = unitStructures.find(s => s.role === 'director');\n    if (director) {\n      grouped['director'] = [director];\n    }\n\n    // จัดกลุ่มส่วนงานอื่นๆ\n    units.forEach(unit => {\n      const unitMembers = unitStructures.filter(s => s.unit_code === unit.unit_code);\n      if (unitMembers.length > 0) {\n        grouped[unit.unit_code] = unitMembers.sort((a, b) => a.seniority_order - b.seniority_order);\n      }\n    });\n    return grouped;\n  }, [unitStructures, units]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-slate-50 rounded-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-slate-800\",\n          children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-500 mt-1\",\n          children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E41\\u0E25\\u0E30\\u0E42\\u0E04\\u0E23\\u0E07\\u0E2A\\u0E23\\u0E49\\u0E32\\u0E07\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E0A\\u0E31\\u0E49\\u0E19\\u0E43\\u0E19\\u0E2D\\u0E07\\u0E04\\u0E4C\\u0E01\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setEditingStructure(null);\n          setIsModalOpen(true);\n        },\n        className: \"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\",\n        children: [/*#__PURE__*/_jsxDEV(Plus, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative\",\n          children: [/*#__PURE__*/_jsxDEV(Building, {\n            className: \"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedUnit,\n            onChange: e => setSelectedUnit(e.target.value),\n            className: \"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E17\\u0E38\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cmd\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: unit.unit_code,\n              children: unit.unit_name\n            }, unit.unit_code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center py-12\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-slate-500\",\n        children: \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E42\\u0E2B\\u0E25\\u0E14\\u0E02\\u0E49\\u0E2D\\u0E21\\u0E39\\u0E25...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: Object.entries(groupedByUnit).map(([unitCode, members]) => /*#__PURE__*/_jsxDEV(UnitCard, {\n        unitCode: unitCode,\n        members: members,\n        units: units,\n        onEdit: structure => {\n          setEditingStructure(structure);\n          setIsModalOpen(true);\n        },\n        onRefresh: fetchUnitStructures\n      }, unitCode, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 9\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(UnitStructureModal, {\n      structure: editingStructure,\n      units: units,\n      officers: officers,\n      unitStructures: unitStructures,\n      onClose: () => {\n        setIsModalOpen(false);\n        setEditingStructure(null);\n      },\n      onSave: fetchUnitStructures\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 336,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Card Component\n_s2(UnitStructureManagement, \"wxT31Q7yqFtNYbfgdwEzqzwctk4=\");\n_c1 = UnitStructureManagement;\nconst UnitCard = ({\n  unitCode,\n  members,\n  units,\n  onEdit,\n  onRefresh\n}) => {\n  _s3();\n  const [isExpanded, setIsExpanded] = useState(true);\n  const unitInfo = useMemo(() => {\n    if (unitCode === 'director') {\n      return {\n        unit_name: 'ผู้อำนวยการศูนย์รักษาความปลอดภัย',\n        unit_code: 'cmd'\n      };\n    }\n    return units.find(u => u.unit_code === unitCode) || {\n      unit_name: 'ไม่ระบุส่วนงาน',\n      unit_code: unitCode\n    };\n  }, [unitCode, units]);\n  const handleDelete = async structureId => {\n    if (!confirm('คุณต้องการลบข้อมูลนี้หรือไม่?')) return;\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/${structureId}`, {\n        method: 'DELETE'\n      });\n      const data = await response.json();\n      if (data.success) {\n        alert('ลบข้อมูลสำเร็จ');\n        onRefresh();\n      } else {\n        alert('เกิดข้อผิดพลาด: ' + data.message);\n      }\n    } catch (error) {\n      console.error('Error deleting structure:', error);\n      alert('เกิดข้อผิดพลาดในการลบข้อมูล');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-xl border border-slate-200 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 bg-slate-50 border-b border-slate-200 cursor-pointer hover:bg-slate-100\",\n      onClick: () => setIsExpanded(!isExpanded),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `w-3 h-3 rounded-full ${unitCode === 'director' ? 'bg-purple-500' : 'bg-indigo-500'}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-slate-800\",\n          children: unitInfo.unit_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded\",\n          children: [members.length, \" \\u0E04\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n        className: `w-5 h-5 text-slate-400 transition-transform ${isExpanded ? 'rotate-180' : ''}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this), isExpanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 space-y-3\",\n      children: members.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-8 text-slate-500\",\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          className: \"w-8 h-8 mx-auto mb-2 opacity-50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E43\\u0E19\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E19\\u0E35\\u0E49\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 13\n      }, this) : members.map(member => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-3 bg-slate-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-8 h-8 rounded-full flex items-center justify-center ${member.role === 'director' ? 'bg-purple-100 text-purple-600' : member.role === 'supervisor' ? 'bg-blue-100 text-blue-600' : 'bg-green-100 text-green-600'}`,\n            children: member.role === 'director' ? /*#__PURE__*/_jsxDEV(Crown, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 51\n            }, this) : member.role === 'supervisor' ? /*#__PURE__*/_jsxDEV(Star, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 53\n            }, this) : /*#__PURE__*/_jsxDEV(User, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 482,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"font-medium text-slate-800\",\n              children: member.full_name || `${member.prefix || ''} ${member.firstname || ''} ${member.lastname || ''}`.trim()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-slate-500\",\n              children: [member.role === 'director' ? 'ผู้อำนวยการ' : member.role === 'supervisor' ? 'หัวหน้าส่วน' : 'เจ้าหน้าที่', member.role !== 'director' && ` (ลำดับที่ ${member.seniority_order})`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onEdit(member),\n            className: \"p-1 text-slate-400 hover:text-blue-600 rounded\",\n            title: \"\\u0E41\\u0E01\\u0E49\\u0E44\\u0E02\",\n            children: /*#__PURE__*/_jsxDEV(Edit, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(member.id),\n            className: \"p-1 text-slate-400 hover:text-red-600 rounded\",\n            title: \"\\u0E25\\u0E1A\",\n            children: /*#__PURE__*/_jsxDEV(Trash2, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 17\n        }, this)]\n      }, member.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 449,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Structure Modal Component\n_s3(UnitCard, \"V/bxPASAlYzn62C0d8cvND50G40=\");\n_c10 = UnitCard;\nconst UnitStructureModal = ({\n  structure,\n  units,\n  officers,\n  unitStructures,\n  onClose,\n  onSave\n}) => {\n  _s4();\n  const [formData, setFormData] = useState({\n    position_number: '',\n    unit_code: '',\n    role: 'member',\n    seniority_order: 1\n  });\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (structure) {\n      setFormData({\n        position_number: structure.position_number || '',\n        unit_code: structure.unit_code || '',\n        role: structure.role || 'member',\n        seniority_order: structure.seniority_order || 1\n      });\n    }\n  }, [structure]);\n\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\n  const availableOfficers = useMemo(() => {\n    const usedPositions = unitStructures.map(s => s.position_number);\n    const currentPosition = structure === null || structure === void 0 ? void 0 : structure.position_number;\n    return officers.filter(officer => !usedPositions.includes(officer.position_number) || officer.position_number === currentPosition);\n  }, [officers, unitStructures, structure]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const url = structure ? `${CONFIG.UNIT_STRUCTURE_API}/${structure.id}` : CONFIG.UNIT_STRUCTURE_API;\n      const method = structure ? 'PUT' : 'POST';\n      const response = await fetch(url, {\n        method,\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      });\n      const data = await response.json();\n      if (data.success) {\n        alert(structure ? 'แก้ไขข้อมูลสำเร็จ' : 'เพิ่มข้อมูลสำเร็จ');\n        onSave();\n        onClose();\n      } else {\n        alert('เกิดข้อผิดพลาด: ' + data.message);\n      }\n    } catch (error) {\n      console.error('Error saving structure:', error);\n      alert('เกิดข้อผิดพลาดในการบันทึกข้อมูล');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl max-w-md w-full p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-semibold mb-4\",\n        children: structure ? 'แก้ไขข้อมูลโครงสร้าง' : 'เพิ่มบุคลากรใหม่'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.position_number,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              position_number: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 15\n            }, this), availableOfficers.map(officer => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: officer.position_number,\n              children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname, \" (\", officer.position_number, \")\"]\n            }, officer.position_number, true, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.unit_code,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              unit_code: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cmd\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\\u0E23\\u0E31\\u0E01\\u0E29\\u0E32\\u0E04\\u0E27\\u0E32\\u0E21\\u0E1B\\u0E25\\u0E2D\\u0E14\\u0E20\\u0E31\\u0E22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 15\n            }, this), units.map(unit => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: unit.unit_code,\n              children: unit.unit_name\n            }, unit.unit_code, false, {\n              fileName: _jsxFileName,\n              lineNumber: 623,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E1A\\u0E17\\u0E1A\\u0E32\\u0E17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.role,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              role: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"member\",\n              children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 638,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"supervisor\",\n              children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"director\",\n              children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E2D\\u0E32\\u0E27\\u0E38\\u0E42\\u0E2A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            value: formData.seniority_order,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              seniority_order: parseInt(e.target.value)\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 646,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-slate-500 mt-1\",\n            children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E40\\u0E1B\\u0E47\\u0E19 1 \\u0E40\\u0E2A\\u0E21\\u0E2D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\",\n            children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\",\n            children: loading ? 'กำลังบันทึก...' : structure ? 'แก้ไข' : 'เพิ่ม'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 589,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 588,\n    columnNumber: 5\n  }, this);\n};\n_s4(UnitStructureModal, \"Pyfx1m6Th4gOxzBTYIWDv5r7F3A=\");\n_c11 = UnitStructureModal;\nconst ShiftWorkPage = () => {\n  _s5();\n  const [activeTab, setActiveTab] = useState('shifts');\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [schedules, setSchedules] = useState([]);\n  const [officers, setOfficers] = useState([]);\n  const [shiftTypes, setShiftTypes] = useState([]);\n  const [units, setUnits] = useState([]);\n  const [holidays, setHolidays] = useState([]);\n  const [formData, setFormData] = useState({\n    duty_date: '',\n    shift_type_id: '',\n    unit_id: '',\n    officer_ids: [],\n    notes: ''\n  });\n  const [filters, setFilters] = useState({\n    unit: '',\n    officer: ''\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\n  const [selectedUnits, setSelectedUnits] = useState([]);\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\n  const [showOfficerList, setShowOfficerList] = useState(false);\n  const [officerSearchTerm, setOfficerSearchTerm] = useState('');\n  useEffect(() => {\n    const loadHolidaysByYear = async () => {\n      try {\n        const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays&year=${currentDate.getFullYear()}`);\n        const result = await response.json();\n        if (!result.success) throw new Error(result.message);\n        setHolidays(result.data);\n      } catch (error) {\n        console.error(\"ล้มเหลวในการดึงข้อมูลวันหยุด:\", error);\n      }\n    };\n    loadHolidaysByYear();\n  }, [currentDate]);\n  useEffect(() => {\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\n      const officersInSelectedUnits = officers.filter(officer => officer.unit_id && selectedUnits.includes(officer.unit_id)).map(officer => officer.id);\n      setSelectedOfficers(officersInSelectedUnits);\n    } else {\n      setSelectedOfficers([]);\n    }\n  }, [selectedUnits, officers]);\n\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\n  const handleUnitSelect = unitId => {\n    setSelectedUnits(prev => prev.includes(unitId) ? prev.filter(id => id !== unitId) : [...prev, unitId]);\n  };\n\n  // --- ฟังก์ชันจัดการการเลือกเจ้าหน้าที่ ---\n  const handleOfficerAdd = officerId => {\n    setSelectedOfficers(prev => [...prev, officerId]);\n  };\n  const handleOfficerRemove = officerId => {\n    setSelectedOfficers(prev => prev.filter(id => id !== officerId));\n  };\n\n  // --- ฟังก์ชันกรองเจ้าหน้าที่ที่ยังไม่ได้เลือก ---\n  const getAvailableOfficers = () => {\n    if (!Array.isArray(officers)) return [];\n    return officers.filter(officer => officer.unit_id !== null && (selectedUnits.length === 0 || selectedUnits.includes(officer.unit_id)) && !selectedOfficers.includes(officer.id) && (officerSearchTerm === '' || `${officer.firstname} ${officer.lastname}`.toLowerCase().includes(officerSearchTerm.toLowerCase())));\n  };\n\n  // --- ฟังก์ชันหาข้อมูลเจ้าหน้าที่ ---\n  const getOfficerById = officerId => {\n    return officers.find(o => o.id === officerId);\n  };\n  useEffect(() => {\n    loadInitialData();\n  }, []);\n  useEffect(() => {\n    loadSchedules();\n  }, [currentDate]);\n  const loadInitialData = async () => {\n    setLoading(true);\n    try {\n      await Promise.all([loadOfficers(), loadShiftTypes(), loadUnits(), loadHolidays(), loadSchedules()]);\n    } catch (error) {\n      console.error('Error loading initial data:', error.message, error.stack);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const loadSchedules = async () => {\n    try {\n      const month = currentDate.getMonth() + 1;\n      const year = currentDate.getFullYear();\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_schedules&month=${month}&year=${year}`);\n      const data = await response.json();\n      if (data.success) {\n        setSchedules(data.data);\n      } else {\n        console.error('Failed to fetch schedules:', data.message);\n      }\n    } catch (error) {\n      console.error('Error loading schedules:', error.message, error.stack);\n    }\n  };\n  const loadOfficers = async () => {\n    try {\n      const response = await fetch(`${CONFIG.OFFICERS_API}?action=get_all_officers`);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.success && Array.isArray(data.data)) {\n        setOfficers(data.data);\n      } else {\n        console.error('Failed to load officers:', data);\n        setOfficers([]);\n      }\n    } catch (error) {\n      console.error('Error loading officers:', error);\n      setOfficers([]);\n    }\n  };\n  const loadShiftTypes = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_shifttypes`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setShiftTypes(data);\n      } else {\n        setShiftTypes([]);\n      }\n    } catch (error) {\n      console.error('Error loading shift types:', error);\n      setShiftTypes([]);\n    }\n  };\n  const loadUnits = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_units`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setUnits(data);\n      } else {\n        setUnits([]);\n      }\n    } catch (error) {\n      console.error('Error loading units:', error);\n      setUnits([]);\n    }\n  };\n  const loadHolidays = async () => {\n    try {\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays`);\n      const data = await response.json();\n      if (Array.isArray(data)) {\n        setHolidays(data);\n      } else {\n        setHolidays([]);\n      }\n    } catch (error) {\n      console.error('Error loading holidays:', error);\n      setHolidays([]);\n    }\n  };\n  const navigateMonth = direction => {\n    setCurrentDate(prev => {\n      const newDate = new Date(prev);\n      newDate.setMonth(prev.getMonth() + direction);\n      return newDate;\n    });\n  };\n  const goToToday = () => {\n    setCurrentDate(new Date());\n  };\n\n  // --- แก้ไข openAddModal ---\n  const openAddModal = (date = null) => {\n    const dateObj = date || new Date();\n    const isHolidayDate = isHoliday(dateObj, holidays);\n    const suggestedType = getShiftTypeByPeriod('day', isHolidayDate, shiftTypes);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedOfficers([]);\n    setFormData({\n      duty_date: date ? date.toISOString().split('T')[0] : '',\n      shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || '',\n      unit_id: '',\n      officer_ids: [],\n      notes: ''\n    });\n    setShowAddModal(true);\n  };\n  const openEditModal = schedule => {\n    setSelectedSchedule(schedule);\n    setFormData({\n      duty_date: schedule.duty_date,\n      shift_type_id: schedule.shift_type_id,\n      unit_id: schedule.unit_id || '',\n      officer_ids: schedule.officer_ids || [],\n      notes: schedule.notes || ''\n    });\n    setSelectedOfficers(schedule.officer_ids || []);\n    setShowEditModal(true);\n  };\n  const closeModals = () => {\n    setShowAddModal(false);\n    setShowEditModal(false);\n    setSelectedSchedule(null);\n    setSelectedShiftPeriod('day');\n    setSelectedUnits([]);\n    setSelectedOfficers([]);\n    setShowOfficerList(false);\n    setOfficerSearchTerm('');\n  };\n  const handleInputChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // อัปเดต shift_type_id และ officer_ids ตาม UI ใหม่\n      const dateObj = new Date(formData.duty_date + 'T00:00:00');\n      const isHolidayDate = isHoliday(dateObj, holidays);\n      const shiftType = getShiftTypeByPeriod(selectedShiftPeriod, isHolidayDate, shiftTypes);\n      const payload = {\n        action: selectedSchedule ? 'update_schedule' : 'create_schedule',\n        ...formData,\n        shift_type_id: (shiftType === null || shiftType === void 0 ? void 0 : shiftType.id) || formData.shift_type_id,\n        officer_ids: selectedOfficers,\n        ...(selectedSchedule && {\n          schedule_id: selectedSchedule.id\n        })\n      };\n      const response = await fetch(CONFIG.SCHEDULES_API, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (!result.success) throw new Error(result.message);\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error saving schedule:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const handleDelete = async () => {\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\n    setSaving(true);\n    try {\n      const payload = {\n        action: 'delete_schedule',\n        schedule_id: selectedSchedule.id\n      };\n      const response = await fetch(CONFIG.SCHEDULES_API, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      const result = await response.json();\n      if (!result.success) throw new Error(result.message);\n      await loadSchedules();\n      closeModals();\n    } catch (error) {\n      console.error('Error deleting schedule:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n  const filteredSchedules = useMemo(() => {\n    return schedules.filter(schedule => {\n      const unitMatch = !filters.unit || schedule.unit_id === parseInt(filters.unit);\n      const officerMatch = !filters.officer || schedule.officer_names && schedule.officer_names.toLowerCase().includes(filters.officer.toLowerCase());\n      return unitMatch && officerMatch;\n    });\n  }, [schedules, filters]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 991,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 990,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b border-slate-200\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex space-x-4 px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('shifts'),\n          className: `flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'shifts' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'}`,\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1005,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E40\\u0E27\\u0E23\\u0E23\\u0E31\\u0E01\\u0E29\\u0E32\\u0E01\\u0E32\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1006,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1000,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('documents'),\n          className: `flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'documents' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'}`,\n          children: [/*#__PURE__*/_jsxDEV(File, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1014,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E2D\\u0E01\\u0E2A\\u0E32\\u0E23\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1015,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1008,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 999,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 998,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow p-4 bg-slate-50/50 overflow-y-auto\",\n      children: [activeTab === 'shifts' && /*#__PURE__*/_jsxDEV(ShiftCalendarView, {\n        currentDate: currentDate,\n        schedules: filteredSchedules,\n        officers: officers,\n        shiftTypes: shiftTypes,\n        units: units,\n        holidays: holidays,\n        filters: filters,\n        setFilters: setFilters,\n        navigateMonth: navigateMonth,\n        goToToday: goToToday,\n        openAddModal: openAddModal,\n        openEditModal: openEditModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1022,\n        columnNumber: 11\n      }, this), activeTab === 'documents' && /*#__PURE__*/_jsxDEV(DocumentManagementView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1037,\n        columnNumber: 39\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1020,\n      columnNumber: 7\n    }, this), (showAddModal || showEditModal) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-gray-900\",\n            children: showEditModal ? 'แก้ไขตารางเวร' : 'เพิ่มตารางเวรใหม่'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1044,\n            columnNumber: 15\n          }, this), formData.duty_date && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-600 mt-1\",\n            children: [\"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH'), isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"ml-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E2B\\u0E22\\u0E38\\u0E14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1051,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1048,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1043,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1060,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: formData.duty_date,\n              onChange: e => {\n                handleInputChange('duty_date', e.target.value);\n                // อัปเดต shift type อัตโนมัติเมื่อเปลี่ยนวันที่\n                const newDate = new Date(e.target.value + 'T00:00:00');\n                const isHol = isHoliday(newDate, holidays);\n                const suggestedType = getShiftTypeByPeriod(selectedShiftPeriod, isHol, shiftTypes);\n                setFormData(prev => ({\n                  ...prev,\n                  shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                }));\n              },\n              className: \"w-full border border-gray-300 rounded-lg px-3 py-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1061,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1059,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E40\\u0E27\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1078,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('day');\n                  const isHol = formData.duty_date ? isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) : false;\n                  const suggestedType = getShiftTypeByPeriod('day', isHol, shiftTypes);\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                  }));\n                },\n                className: `flex items-center px-4 py-2 rounded-lg border ${selectedShiftPeriod === 'day' ? 'bg-yellow-50 border-yellow-300 text-yellow-700' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Sun, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1094,\n                  columnNumber: 21\n                }, this), \"\\u0E01\\u0E25\\u0E32\\u0E07\\u0E27\\u0E31\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1080,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('night');\n                  const suggestedType = getShiftTypeByPeriod('night', false, shiftTypes);\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type_id: (suggestedType === null || suggestedType === void 0 ? void 0 : suggestedType.id) || ''\n                  }));\n                },\n                className: `flex items-center px-4 py-2 rounded-lg border ${selectedShiftPeriod === 'night' ? 'bg-indigo-50 border-indigo-300 text-indigo-700' : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Moon, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1110,\n                  columnNumber: 21\n                }, this), \"\\u0E01\\u0E25\\u0E32\\u0E07\\u0E04\\u0E37\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1097,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1079,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1077,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-4 max-h-40 overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-2 gap-2\",\n                children: Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center py-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedUnits.includes(unit.id),\n                    onChange: () => handleUnitSelect(unit.id),\n                    className: \"h-4 w-4 text-indigo-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1123,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-2 text-sm text-gray-900\",\n                    children: unit.unit_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1129,\n                    columnNumber: 25\n                  }, this)]\n                }, unit.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1122,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1120,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1119,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1117,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-3\",\n              children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E17\\u0E35\\u0E48\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1138,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-3 min-h-[100px]\",\n              children: selectedOfficers.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-gray-500 text-sm\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E44\\u0E14\\u0E49\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1141,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: selectedOfficers.map(officerId => {\n                  const officer = getOfficerById(officerId);\n                  return officer ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1148,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleOfficerRemove(officerId),\n                      className: \"text-red-600 hover:text-red-800\",\n                      children: /*#__PURE__*/_jsxDEV(X, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1153,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1149,\n                      columnNumber: 29\n                    }, this)]\n                  }, officerId, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1147,\n                    columnNumber: 27\n                  }, this) : null;\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1143,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1139,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1137,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700\",\n                children: \"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1166,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setShowOfficerList(!showOfficerList),\n                className: \"text-sm text-indigo-600 hover:text-indigo-800\",\n                children: showOfficerList ? 'ซ่อน' : 'เพิ่มเจ้าหน้าที่'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1167,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1165,\n              columnNumber: 17\n            }, this), showOfficerList && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border border-gray-300 rounded-lg p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(Search, {\n                    className: \"w-4 h-4 text-gray-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1181,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",\n                    value: officerSearchTerm,\n                    onChange: e => setOfficerSearchTerm(e.target.value),\n                    className: \"flex-1 border border-gray-300 rounded px-2 py-1 text-sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1182,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1180,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1179,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"max-h-40 overflow-y-auto\",\n                children: getAvailableOfficers().length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-sm\",\n                  children: selectedUnits.length === 0 ? 'กรุณาเลือกส่วนงานก่อน' : officerSearchTerm ? 'ไม่พบเจ้าหน้าที่ที่ค้นหา' : 'ไม่มีเจ้าหน้าที่ที่สามารถเลือกได้'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1195,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-1\",\n                  children: getAvailableOfficers().map(officer => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center justify-between py-2 hover:bg-gray-50 px-2 rounded\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm\",\n                      children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1203,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        handleOfficerAdd(officer.id);\n                        setOfficerSearchTerm(''); // ล้างค่าค้นหาหลังเพิ่ม\n                      },\n                      className: \"text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50\",\n                      children: /*#__PURE__*/_jsxDEV(Plus, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1211,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1204,\n                      columnNumber: 31\n                    }, this)]\n                  }, officer.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1202,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1200,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1193,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1177,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1164,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E2B\\u0E15\\u0E38\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1224,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: formData.notes,\n              onChange: e => handleInputChange('notes', e.target.value),\n              rows: 3,\n              className: \"w-full border border-gray-300 rounded-lg px-3 py-2\",\n              placeholder: \"\\u0E23\\u0E32\\u0E22\\u0E25\\u0E30\\u0E40\\u0E2D\\u0E35\\u0E22\\u0E14\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E15\\u0E34\\u0E21...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1225,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1223,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1057,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t bg-gray-50 flex justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: showEditModal && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleDelete,\n              disabled: saving,\n              className: \"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100\",\n              children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1243,\n                columnNumber: 21\n              }, this), \"\\u0E25\\u0E1A\\u0E40\\u0E27\\u0E23\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1238,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: closeModals,\n              disabled: saving,\n              className: \"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50\",\n              children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1248,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSave,\n              disabled: saving || selectedOfficers.length === 0,\n              className: \"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: saving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1262,\n                  columnNumber: 23\n                }, this), \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Save, {\n                  className: \"w-4 h-4 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1267,\n                  columnNumber: 23\n                }, this), \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1255,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1235,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1042,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1041,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 997,\n    columnNumber: 5\n  }, this);\n};\n\n// Unit Management View Component - เลือกการ์ดส่วนงานแล้วจัดการบุคลากร\n_s5(ShiftWorkPage, \"qhe2zMtYZXBaFMdAjBdG0j1kPGo=\");\n_c12 = ShiftWorkPage;\nconst UnitManagementView = ({\n  dutyUnits,\n  unitStructures,\n  onEdit,\n  onDelete,\n  onAdd,\n  onEditDutyUnit,\n  onDeleteDutyUnit,\n  onAddDutyUnit,\n  getRoleIcon,\n  getRoleLabel,\n  getRoleBadgeClass\n}) => {\n  _s6();\n  const [selectedUnit, setSelectedUnit] = useState(null);\n  const [isPersonnelModalOpen, setIsPersonnelModalOpen] = useState(false);\n  const [personnelAction, setPersonnelAction] = useState(''); // 'add', 'setSupervisor'\n\n  // Get unit statistics\n  const getUnitStats = unitCode => {\n    const unitPersonnel = unitStructures.filter(item => item.unit_code === unitCode);\n    const supervisor = unitPersonnel.find(item => item.role === 'supervisor');\n    const members = unitPersonnel.filter(item => item.role === 'member');\n    const director = unitPersonnel.find(item => item.role === 'director');\n    return {\n      total: unitPersonnel.length,\n      supervisor,\n      members,\n      director,\n      hasSupervisor: !!supervisor,\n      hasDirector: !!director\n    };\n  };\n  const handleUnitSelect = unit => {\n    setSelectedUnit(unit);\n  };\n  const handleAddPersonnel = () => {\n    if (!selectedUnit) return;\n    const stats = getUnitStats(selectedUnit.unit_code);\n    const nextSeniorityOrder = stats.total + 1;\n\n    // เปิด modal พร้อมกำหนดค่าเริ่มต้น\n    onAdd({\n      unit_code: selectedUnit.unit_code,\n      role: selectedUnit.unit_code === 'CS08' ? 'director' : 'member',\n      seniority_order: nextSeniorityOrder\n    });\n  };\n  const handleSetSupervisor = () => {\n    if (!selectedUnit) return;\n\n    // เปิด modal สำหรับกำหนดหัวหน้าส่วน\n    onAdd({\n      unit_code: selectedUnit.unit_code,\n      role: 'supervisor',\n      seniority_order: 1\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-slate-800\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onAddDutyUnit(),\n          className: \"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1354,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1350,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: dutyUnits.map(unit => {\n          var _stats$supervisor;\n          const stats = getUnitStats(unit.unit_code);\n          const isSelected = (selectedUnit === null || selectedUnit === void 0 ? void 0 : selectedUnit.unit_code) === unit.unit_code;\n          const isDirector = unit.unit_code === 'CS08';\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => handleUnitSelect(unit),\n            className: `relative p-4 rounded-lg border-2 cursor-pointer transition-all ${isSelected ? 'border-indigo-500 bg-indigo-50' : 'border-slate-200 hover:border-slate-300'}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start justify-between mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-slate-800\",\n                  children: unit.unit_code.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1378,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-slate-600\",\n                  children: unit.unit_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1379,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1377,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    onEditDutyUnit(unit);\n                  },\n                  className: \"p-1 text-blue-600 hover:bg-blue-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1389,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1382,\n                  columnNumber: 21\n                }, this), !isDirector && /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    onDeleteDutyUnit(unit);\n                  },\n                  className: \"p-1 text-red-600 hover:bg-red-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-4 h-4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1399,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1392,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1381,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1376,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 mb-3\",\n              children: [isDirector ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Star, {\n                  className: \"w-4 h-4 text-yellow-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1409,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1410,\n                  columnNumber: 23\n                }, this), stats.hasDirector && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-green-600 font-medium\",\n                  children: \"(\\u0E21\\u0E35\\u0E41\\u0E25\\u0E49\\u0E27)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1412,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1408,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Shield, {\n                  className: \"w-4 h-4 text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1419,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: \"\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E2A\\u0E48\\u0E27\\u0E19:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1420,\n                  columnNumber: 23\n                }, this), stats.hasSupervisor ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-green-600 font-medium\",\n                  children: (_stats$supervisor = stats.supervisor) === null || _stats$supervisor === void 0 ? void 0 : _stats$supervisor.full_name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1422,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-red-500\",\n                  children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1426,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1418,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  className: \"w-4 h-4 text-slate-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1432,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-slate-600\",\n                  children: [\"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23: \", stats.total, \" \\u0E04\\u0E19\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1433,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1431,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1406,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-2 border-t border-slate-200\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-xs\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-slate-500\",\n                  children: \"\\u0E04\\u0E25\\u0E34\\u0E01\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1442,\n                  columnNumber: 21\n                }, this), isSelected && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-indigo-600 font-medium\",\n                  children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E41\\u0E25\\u0E49\\u0E27\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1444,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1441,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1440,\n              columnNumber: 17\n            }, this)]\n          }, unit.unit_code, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1366,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1359,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1347,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lg:col-span-1\",\n      children: selectedUnit ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-50 rounded-lg p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold text-slate-800 mb-4\",\n          children: [\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23 \", selectedUnit.unit_code.toUpperCase()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1458,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: selectedUnit.unit_code === 'CS08' ?\n          /*#__PURE__*/\n          // Director Unit (CS08) - สามารถมีได้เพียง 1 คน\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-yellow-50 border border-yellow-200 rounded-lg p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2 mb-2\",\n                children: [/*#__PURE__*/_jsxDEV(Star, {\n                  className: \"w-4 h-4 text-yellow-600\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1468,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm font-medium text-yellow-800\",\n                  children: \"\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\\u0E28\\u0E39\\u0E19\\u0E22\\u0E4C\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1469,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1467,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-yellow-700\",\n                children: \"\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E19\\u0E35\\u0E49\\u0E2A\\u0E32\\u0E21\\u0E32\\u0E23\\u0E16\\u0E21\\u0E35\\u0E44\\u0E14\\u0E49\\u0E40\\u0E1E\\u0E35\\u0E22\\u0E07 1 \\u0E04\\u0E19\\u0E40\\u0E17\\u0E48\\u0E32\\u0E19\\u0E31\\u0E49\\u0E19\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1471,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1466,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddPersonnel,\n              className: \"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1480,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0E01\\u0E33\\u0E2B\\u0E19\\u0E14\\u0E1C\\u0E39\\u0E49\\u0E2D\\u0E33\\u0E19\\u0E27\\u0E22\\u0E01\\u0E32\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1481,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1476,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) :\n          /*#__PURE__*/\n          // Regular Units - สามารถมีได้หลายคน\n          _jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleSetSupervisor,\n              disabled: getUnitStats(selectedUnit.unit_code).hasSupervisor,\n              className: `w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg ${getUnitStats(selectedUnit.unit_code).hasSupervisor ? 'bg-gray-100 text-gray-400 cursor-not-allowed' : 'bg-blue-600 text-white hover:bg-blue-700'}`,\n              children: [/*#__PURE__*/_jsxDEV(Shield, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1496,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: getUnitStats(selectedUnit.unit_code).hasSupervisor ? 'มีหัวหน้าส่วนแล้ว' : 'กำหนดหัวหน้าส่วน'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1497,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1487,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddPersonnel,\n              className: \"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1509,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1510,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1505,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1462,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-sm font-medium text-slate-700 mb-3\",\n            children: \"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1518,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).sort((a, b) => {\n              // เรียงลำดับ: director > supervisor > member\n              if (a.role === 'director') return -1;\n              if (b.role === 'director') return 1;\n              if (a.role === 'supervisor') return -1;\n              if (b.role === 'supervisor') return 1;\n              return a.seniority_order - b.seniority_order;\n            }).map(person => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-2 bg-white rounded border\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [getRoleIcon(person.role), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-medium text-slate-800\",\n                    children: person.full_name || `ตำแหน่งที่ ${person.position_number}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1535,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-slate-500\",\n                    children: [getRoleLabel(person.role), \" \\u2022 \\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A \", person.seniority_order]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1538,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1534,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1532,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onEdit(person),\n                  className: \"p-1 text-blue-600 hover:bg-blue-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Edit, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1548,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1544,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => onDelete(person),\n                  className: \"p-1 text-red-600 hover:bg-red-50 rounded\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-3 h-3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1554,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1550,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1543,\n                columnNumber: 23\n              }, this)]\n            }, person.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1531,\n              columnNumber: 21\n            }, this)), unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center py-4 text-slate-500\",\n              children: [/*#__PURE__*/_jsxDEV(Users, {\n                className: \"w-8 h-8 mx-auto mb-2 opacity-50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1562,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm\",\n                children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1563,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1561,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1519,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1517,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1457,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-slate-50 rounded-lg p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Building, {\n          className: \"w-12 h-12 mx-auto mb-4 text-slate-400\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1571,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-slate-600 mb-2\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1572,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-slate-500\",\n          children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E08\\u0E32\\u0E01\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\\u0E14\\u0E49\\u0E32\\u0E19\\u0E0B\\u0E49\\u0E32\\u0E22\\u0E40\\u0E1E\\u0E37\\u0E48\\u0E2D\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1570,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1455,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1345,\n    columnNumber: 5\n  }, this);\n};\n_s6(UnitManagementView, \"n5DeEqXwxD6OMa53Vr7gsD8mLP8=\");\n_c13 = UnitManagementView;\nexport default ShiftWorkPage;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13;\n$RefreshReg$(_c, \"ShiftCalendarView$memo\");\n$RefreshReg$(_c2, \"ShiftCalendarView\");\n$RefreshReg$(_c3, \"CalendarHeader$memo\");\n$RefreshReg$(_c4, \"CalendarHeader\");\n$RefreshReg$(_c5, \"CalendarFilters$memo\");\n$RefreshReg$(_c6, \"CalendarFilters\");\n$RefreshReg$(_c7, \"CalendarDayCell$memo\");\n$RefreshReg$(_c8, \"CalendarDayCell\");\n$RefreshReg$(_c9, \"ScheduleItem$memo\");\n$RefreshReg$(_c0, \"ScheduleItem\");\n$RefreshReg$(_c1, \"UnitStructureManagement\");\n$RefreshReg$(_c10, \"UnitCard\");\n$RefreshReg$(_c11, \"UnitStructureModal\");\n$RefreshReg$(_c12, \"ShiftWorkPage\");\n$RefreshReg$(_c13, \"UnitManagementView\");","map":{"version":3,"names":["React","useState","useMemo","useCallback","memo","useEffect","Calendar","CalendarIcon","Plus","ChevronLeft","ChevronRight","Filter","Search","Edit","Trash2","Save","X","Clock","Users","Building","FileText","Settings","Sun","Moon","File","Shield","CloudSun","Target","UserPlus","Star","Crown","User","ChevronDown","Briefcase","UserCheck","Eye","MoreVertical","CONFIG","jsxDEV","_jsxDEV","Fragment","_Fragment","isHoliday","date","holidays","dayOfWeek","getDay","dateStr","toISOString","split","some","holiday","holiday_date","isToday","today","Date","getDate","getMonth","getFullYear","getShiftTypeByPeriod","period","isHolidayDate","shiftTypes","Array","isArray","find","type","id","ShiftCalendarView","_s","_c","currentDate","schedules","filters","setFilters","units","navigateMonth","goToToday","openAddModal","openEditModal","days","year","month","firstDay","lastDay","daysInMonth","startingDayOfWeek","daysArray","i","push","day","length","getSchedulesForDate","filter","schedule","duty_date","className","children","CalendarHeader","fileName","_jsxFileName","lineNumber","columnNumber","CalendarFilters","map","index","CalendarDayCell","onAdd","onEdit","_c2","_c3","onClick","toLocaleDateString","_c4","_c5","placeholder","value","officer","onChange","e","prev","target","unit","unit_name","_c6","_c7","ScheduleItem","_c8","_c9","shiftColors","default","borderColor","shift_type_id","shift_type_name","officer_names","_c0","UnitStructureManagement","_s2","setUnits","officers","setOfficers","unitStructures","setUnitStructures","loading","setLoading","selectedUnit","setSelectedUnit","isModalOpen","setIsModalOpen","editingStructure","setEditingStructure","fetchUnits","response","fetch","UNIT_STRUCTURE_API","data","json","success","error","console","fetchOfficers","OFFICERS_API","fetchUnitStructures","filteredStructures","structure","unit_code","groupedByUnit","grouped","director","s","role","forEach","unitMembers","sort","a","b","seniority_order","Object","entries","unitCode","members","UnitCard","onRefresh","UnitStructureModal","onClose","onSave","_c1","_s3","isExpanded","setIsExpanded","unitInfo","u","handleDelete","structureId","confirm","method","alert","message","member","full_name","prefix","firstname","lastname","trim","title","_c10","_s4","formData","setFormData","position_number","availableOfficers","usedPositions","currentPosition","includes","handleSubmit","preventDefault","url","headers","body","JSON","stringify","onSubmit","required","min","parseInt","disabled","_c11","ShiftWorkPage","_s5","activeTab","setActiveTab","setCurrentDate","showAddModal","setShowAddModal","showEditModal","setShowEditModal","selectedSchedule","setSelectedSchedule","setSchedules","setShiftTypes","setHolidays","unit_id","officer_ids","notes","saving","setSaving","selectedShiftPeriod","setSelectedShiftPeriod","selectedUnits","setSelectedUnits","selectedOfficers","setSelectedOfficers","showOfficerList","setShowOfficerList","officerSearchTerm","setOfficerSearchTerm","loadHolidaysByYear","SCHEDULES_API","result","Error","officersInSelectedUnits","handleUnitSelect","unitId","handleOfficerAdd","officerId","handleOfficerRemove","getAvailableOfficers","toLowerCase","getOfficerById","o","loadInitialData","loadSchedules","Promise","all","loadOfficers","loadShiftTypes","loadUnits","loadHolidays","stack","ok","status","direction","newDate","setMonth","dateObj","suggestedType","closeModals","handleInputChange","field","handleSave","shiftType","payload","action","schedule_id","window","filteredSchedules","unitMatch","officerMatch","DocumentManagementView","isHol","checked","rows","_c12","UnitManagementView","dutyUnits","onDelete","onEditDutyUnit","onDeleteDutyUnit","onAddDutyUnit","getRoleIcon","getRoleLabel","getRoleBadgeClass","_s6","isPersonnelModalOpen","setIsPersonnelModalOpen","personnelAction","setPersonnelAction","getUnitStats","unitPersonnel","item","supervisor","total","hasSupervisor","hasDirector","handleAddPersonnel","stats","nextSeniorityOrder","handleSetSupervisor","_stats$supervisor","isSelected","isDirector","toUpperCase","stopPropagation","person","_c13","$RefreshReg$"],"sources":["C:/Users/apiwa/Documents/GitHub/C/src/pages/ShiftWorkPage.js"],"sourcesContent":["import React, { useState, useMemo, useCallback, memo, useEffect } from \"react\";\r\nimport {\r\n  Calendar as CalendarIcon,\r\n  Plus,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Filter,\r\n  Search,\r\n  Edit,\r\n  Trash2,\r\n  Save,\r\n  X,\r\n  Clock,\r\n  Users,\r\n  Building,\r\n  FileText,\r\n  Settings,\r\n  Sun, Moon,\r\n  File,\r\n  Shield,\r\n  CloudSun,\r\n  Target,\r\n  UserPlus,\r\n  Star,\r\n  Crown,\r\n  User,\r\n  ChevronDown,\r\n  Briefcase,\r\n  UserCheck,\r\n  Eye,\r\n  MoreVertical\r\n} from 'lucide-react';\r\nimport { CONFIG } from '../config';\r\n\r\n// --- ฟังก์ชันตรวจสอบวันหยุด ---\r\nconst isHoliday = (date, holidays = []) => {\r\n  if (!date) return false;\r\n  const dayOfWeek = date.getDay();\r\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\r\n  const dateStr = date.toISOString().split('T')[0];\r\n  return holidays.some(holiday => holiday.holiday_date === dateStr);\r\n};\r\n\r\nconst isToday = (date) => {\r\n  if (!date) return false;\r\n  const today = new Date();\r\n  return date.getDate() === today.getDate() &&\r\n         date.getMonth() === today.getMonth() &&\r\n         date.getFullYear() === today.getFullYear();\r\n};\r\n\r\n// --- ฟังก์ชันหา shift_type ตาม period และ holiday ---\r\nconst getShiftTypeByPeriod = (period, isHolidayDate, shiftTypes) => {\r\n  if (!Array.isArray(shiftTypes)) return null;\r\n  if (period === 'night') {\r\n    return shiftTypes.find(type => type.id === 2 || type.id === 4);\r\n  } else {\r\n    return isHolidayDate \r\n      ? shiftTypes.find(type => type.id === 3)\r\n      : shiftTypes.find(type => type.id === 1);\r\n  }\r\n};\r\n\r\n// --- Redesigned Calendar Components ---\r\n\r\nconst ShiftCalendarView = memo(({\r\n  currentDate,\r\n  schedules,\r\n  holidays,\r\n  filters,\r\n  setFilters,\r\n  units,\r\n  navigateMonth,\r\n  goToToday,\r\n  openAddModal,\r\n  openEditModal\r\n}) => {\r\n\r\n  const days = useMemo(() => {\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    const daysInMonth = lastDay.getDate();\r\n    const startingDayOfWeek = firstDay.getDay();\r\n    const daysArray = [];\r\n    \r\n    // Add blank days for the start of the month\r\n    for (let i = 0; i < startingDayOfWeek; i++) {\r\n      daysArray.push(null);\r\n    }\r\n    \r\n    // Add days of the month\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      daysArray.push(new Date(year, month, day));\r\n    }\r\n\r\n    // Add blank days to complete the grid\r\n    while (daysArray.length % 7 !== 0) {\r\n      daysArray.push(null);\r\n    }\r\n\r\n    return daysArray;\r\n  }, [currentDate]);\r\n\r\n  const getSchedulesForDate = useCallback((date) => {\r\n    if (!date) return [];\r\n    const dateStr = date.toISOString().split('T')[0];\r\n    return schedules.filter(schedule => schedule.duty_date === dateStr);\r\n  }, [schedules]);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-sm border border-slate-200 p-4 h-full flex flex-col\">\r\n      <CalendarHeader \r\n        currentDate={currentDate}\r\n        navigateMonth={navigateMonth}\r\n        goToToday={goToToday}\r\n        openAddModal={openAddModal}\r\n      />\r\n      <CalendarFilters \r\n        filters={filters}\r\n        setFilters={setFilters}\r\n        units={units}\r\n      />\r\n      <div className=\"flex-grow mt-4 flex flex-col\">\r\n        <div className=\"grid grid-cols-7 border-t border-l border-slate-200\">\r\n          {['อาทิตย์', 'จันทร์', 'อังคาร', 'พุธ', 'พฤหัสบดี', 'ศุกร์', 'เสาร์'].map(day => (\r\n            <div key={day} className=\"p-3 text-center text-xs font-semibold text-slate-500 border-b border-r border-slate-200 bg-slate-50\">\r\n              {day}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"grid grid-cols-7 grid-rows-6 flex-grow border-l border-slate-200\">\r\n          {days.map((date, index) => (\r\n            <CalendarDayCell\r\n              key={date ? date.toISOString() : `empty-${index}`}\r\n              date={date}\r\n              holidays={holidays}\r\n              schedules={getSchedulesForDate(date)}\r\n              onAdd={() => openAddModal(date)}\r\n              onEdit={openEditModal}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst CalendarHeader = memo(({ currentDate, navigateMonth, goToToday, openAddModal }) => (\r\n  <div className=\"flex items-center justify-between mb-4\">\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button onClick={() => navigateMonth(-1)} className=\"p-2 text-slate-500 hover:bg-slate-100 rounded-full\">\r\n        <ChevronLeft className=\"w-5 h-5\" />\r\n      </button>\r\n      <h2 className=\"text-xl font-semibold text-slate-800 text-center w-48\">\r\n        {currentDate.toLocaleDateString('th-TH', { month: 'long', year: 'numeric' })}\r\n      </h2>\r\n      <button onClick={() => navigateMonth(1)} className=\"p-2 text-slate-500 hover:bg-slate-100 rounded-full\">\r\n        <ChevronRight className=\"w-5 h-5\" />\r\n      </button>\r\n    </div>\r\n    <div className=\"flex items-center space-x-2\">\r\n      <button onClick={goToToday} className=\"px-4 py-2 text-sm font-medium text-indigo-600 border border-indigo-200 bg-indigo-50 hover:bg-indigo-100 rounded-lg\">\r\n        วันนี้\r\n      </button>\r\n      <button\r\n        onClick={() => openAddModal()}\r\n        className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\"\r\n      >\r\n        <Plus className=\"w-4 h-4 mr-2\" />\r\n        เพิ่มเวร\r\n      </button>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nconst CalendarFilters = memo(({ filters, setFilters, units }) => (\r\n  <div className=\"flex items-center space-x-4\">\r\n    <div className=\"relative flex-1\">\r\n      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"ค้นหาเจ้าหน้าที่...\"\r\n        value={filters.officer}\r\n        onChange={(e) => setFilters(prev => ({ ...prev, officer: e.target.value }))}\r\n        className=\"w-full pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n      />\r\n    </div>\r\n    <div className=\"relative\">\r\n      <Filter className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n      <select\r\n        value={filters.unit}\r\n        onChange={(e) => setFilters(prev => ({ ...prev, unit: e.target.value }))}\r\n        className=\"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n      >\r\n        <option value=\"\">ทุกส่วนงาน</option>\r\n        {Array.isArray(units) && units.map(unit => (\r\n          <option key={unit.id} value={unit.id}>{unit.unit_name}</option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  </div>\r\n));\r\n\r\nconst CalendarDayCell = memo(({ date, holidays, schedules, onAdd, onEdit }) => {\r\n  if (!date) return <div className=\"border-b border-r border-slate-200 bg-slate-50/50\"></div>;\r\n\r\n  const today = isToday(date);\r\n  const holiday = isHoliday(date, holidays);\r\n\r\n  return (\r\n    <div className=\"relative p-2 border-b border-r border-slate-200 flex flex-col group\">\r\n      <div className=\"flex items-center space-x-2 mb-2\">\r\n        <span className={`w-7 h-7 flex items-center justify-center rounded-full text-sm font-semibold ${today ? 'bg-indigo-600 text-white' : holiday ? 'text-red-600' : 'text-slate-700'}`}>\r\n          {date.getDate()}\r\n        </span>\r\n        {holiday && !today && <div className=\"w-1.5 h-1.5 bg-red-500 rounded-full\"></div>}\r\n      </div>\r\n      <div className=\"flex-1 space-y-1 overflow-y-auto\">\r\n        {schedules.map(schedule => <ScheduleItem key={schedule.id} schedule={schedule} onEdit={onEdit} />)}\r\n      </div>\r\n      <button onClick={onAdd} className=\"absolute bottom-1 right-1 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-400 rounded-full opacity-0 group-hover:opacity-100 hover:bg-indigo-100 hover:text-indigo-600 transition-opacity\">\r\n        <Plus className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ScheduleItem = memo(({ schedule, onEdit }) => {\r\n  const shiftColors = {\r\n    1: 'border-yellow-500', // เวรปกติ\r\n    3: 'border-orange-500', // เวรวันหยุด\r\n    2: 'border-indigo-500', // เวรกลางคืน\r\n    4: 'border-indigo-500', // เวรกลางคืน\r\n    default: 'border-slate-400'\r\n  };\r\n  const borderColor = shiftColors[schedule.shift_type_id] || shiftColors.default;\r\n\r\n  return (\r\n    <div \r\n      onClick={() => onEdit(schedule)}\r\n      className={`p-1.5 rounded-md bg-slate-50 hover:bg-slate-100 cursor-pointer border-l-4 ${borderColor}`}\r\n    >\r\n      <p className=\"text-xs font-semibold text-slate-800 truncate\">{schedule.shift_type_name}</p>\r\n      <p className=\"text-xs text-slate-600 truncate\">{schedule.officer_names}</p>\r\n    </div>\r\n  );\r\n});\r\n\r\n// Unit Structure Management Component\r\nconst UnitStructureManagement = () => {\r\n  const [units, setUnits] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [unitStructures, setUnitStructures] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedUnit, setSelectedUnit] = useState('');\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editingStructure, setEditingStructure] = useState(null);\r\n\r\n  // Fetch ข้อมูลส่วนงานจาก duty_unit\r\n  const fetchUnits = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/duty-units`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUnits(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching units:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch ข้อมูลเจ้าหน้าที่\r\n  const fetchOfficers = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.OFFICERS_API}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setOfficers(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching officers:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Fetch ข้อมูลโครงสร้างส่วนงาน\r\n  const fetchUnitStructures = useCallback(async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setUnitStructures(data.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching unit structures:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchUnits();\r\n    fetchOfficers();\r\n    fetchUnitStructures();\r\n  }, [fetchUnits, fetchOfficers, fetchUnitStructures]);\r\n\r\n  // ส่วนงานที่กรองตาม selectedUnit\r\n  const filteredStructures = useMemo(() => {\r\n    if (!selectedUnit) return unitStructures;\r\n    return unitStructures.filter(structure => structure.unit_code === selectedUnit);\r\n  }, [unitStructures, selectedUnit]);\r\n\r\n  // จัดกลุ่มตามส่วนงาน\r\n  const groupedByUnit = useMemo(() => {\r\n    const grouped = {};\r\n    \r\n    // เพิ่มผู้อำนวยการ\r\n    const director = unitStructures.find(s => s.role === 'director');\r\n    if (director) {\r\n      grouped['director'] = [director];\r\n    }\r\n\r\n    // จัดกลุ่มส่วนงานอื่นๆ\r\n    units.forEach(unit => {\r\n      const unitMembers = unitStructures.filter(s => s.unit_code === unit.unit_code);\r\n      if (unitMembers.length > 0) {\r\n        grouped[unit.unit_code] = unitMembers.sort((a, b) => a.seniority_order - b.seniority_order);\r\n      }\r\n    });\r\n\r\n    return grouped;\r\n  }, [unitStructures, units]);\r\n\r\n  return (\r\n    <div className=\"p-6 bg-slate-50 rounded-2xl\">\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-slate-800\">จัดการโครงสร้างส่วนงาน</h2>\r\n          <p className=\"text-slate-500 mt-1\">จัดการบุคลากรและโครงสร้างลำดับชั้นในองค์กร</p>\r\n        </div>\r\n        <button\r\n          onClick={() => {\r\n            setEditingStructure(null);\r\n            setIsModalOpen(true);\r\n          }}\r\n          className=\"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          เพิ่มบุคลากร\r\n        </button>\r\n      </div>\r\n\r\n      {/* Unit Filter */}\r\n      <div className=\"mb-6\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <div className=\"relative\">\r\n            <Building className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n            <select\r\n              value={selectedUnit}\r\n              onChange={(e) => setSelectedUnit(e.target.value)}\r\n              className=\"pl-9 pr-3 py-2 border border-slate-200 rounded-lg text-sm appearance-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">ทุกส่วนงาน</option>\r\n              <option value=\"cmd\">ผู้อำนวยการศูนย์</option>\r\n              {units.map(unit => (\r\n                <option key={unit.unit_code} value={unit.unit_code}>\r\n                  {unit.unit_name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center py-12\">\r\n          <div className=\"text-slate-500\">กำลังโหลดข้อมูล...</div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {Object.entries(groupedByUnit).map(([unitCode, members]) => (\r\n            <UnitCard\r\n              key={unitCode}\r\n              unitCode={unitCode}\r\n              members={members}\r\n              units={units}\r\n              onEdit={(structure) => {\r\n                setEditingStructure(structure);\r\n                setIsModalOpen(true);\r\n              }}\r\n              onRefresh={fetchUnitStructures}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal */}\r\n      {isModalOpen && (\r\n        <UnitStructureModal\r\n          structure={editingStructure}\r\n          units={units}\r\n          officers={officers}\r\n          unitStructures={unitStructures}\r\n          onClose={() => {\r\n            setIsModalOpen(false);\r\n            setEditingStructure(null);\r\n          }}\r\n          onSave={fetchUnitStructures}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Card Component\r\nconst UnitCard = ({ unitCode, members, units, onEdit, onRefresh }) => {\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n\r\n  const unitInfo = useMemo(() => {\r\n    if (unitCode === 'director') {\r\n      return { unit_name: 'ผู้อำนวยการศูนย์รักษาความปลอดภัย', unit_code: 'cmd' };\r\n    }\r\n    return units.find(u => u.unit_code === unitCode) || { unit_name: 'ไม่ระบุส่วนงาน', unit_code: unitCode };\r\n  }, [unitCode, units]);\r\n\r\n  const handleDelete = async (structureId) => {\r\n    if (!confirm('คุณต้องการลบข้อมูลนี้หรือไม่?')) return;\r\n\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}/${structureId}`, {\r\n        method: 'DELETE'\r\n      });\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        alert('ลบข้อมูลสำเร็จ');\r\n        onRefresh();\r\n      } else {\r\n        alert('เกิดข้อผิดพลาด: ' + data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting structure:', error);\r\n      alert('เกิดข้อผิดพลาดในการลบข้อมูล');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl border border-slate-200 overflow-hidden\">\r\n      <div\r\n        className=\"flex items-center justify-between p-4 bg-slate-50 border-b border-slate-200 cursor-pointer hover:bg-slate-100\"\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n      >\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className={`w-3 h-3 rounded-full ${unitCode === 'director' ? 'bg-purple-500' : 'bg-indigo-500'}`}></div>\r\n          <h3 className=\"font-semibold text-slate-800\">{unitInfo.unit_name}</h3>\r\n          <span className=\"text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded\">\r\n            {members.length} คน\r\n          </span>\r\n        </div>\r\n        <ChevronDown className={`w-5 h-5 text-slate-400 transition-transform ${isExpanded ? 'rotate-180' : ''}`} />\r\n      </div>\r\n\r\n      {isExpanded && (\r\n        <div className=\"p-4 space-y-3\">\r\n          {members.length === 0 ? (\r\n            <div className=\"text-center py-8 text-slate-500\">\r\n              <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n              <p>ยังไม่มีบุคลากรในส่วนงานนี้</p>\r\n            </div>\r\n          ) : (\r\n            members.map(member => (\r\n              <div key={member.id} className=\"flex items-center justify-between p-3 bg-slate-50 rounded-lg\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\r\n                    member.role === 'director' ? 'bg-purple-100 text-purple-600' :\r\n                    member.role === 'supervisor' ? 'bg-blue-100 text-blue-600' :\r\n                    'bg-green-100 text-green-600'\r\n                  }`}>\r\n                    {member.role === 'director' ? <Crown className=\"w-4 h-4\" /> :\r\n                     member.role === 'supervisor' ? <Star className=\"w-4 h-4\" /> :\r\n                     <User className=\"w-4 h-4\" />}\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-medium text-slate-800\">\r\n                      {member.full_name || `${member.prefix || ''} ${member.firstname || ''} ${member.lastname || ''}`.trim()}\r\n                    </div>\r\n                    <div className=\"text-sm text-slate-500\">\r\n                      {member.role === 'director' ? 'ผู้อำนวยการ' :\r\n                       member.role === 'supervisor' ? 'หัวหน้าส่วน' :\r\n                       'เจ้าหน้าที่'} \r\n                      {member.role !== 'director' && ` (ลำดับที่ ${member.seniority_order})`}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <button\r\n                    onClick={() => onEdit(member)}\r\n                    className=\"p-1 text-slate-400 hover:text-blue-600 rounded\"\r\n                    title=\"แก้ไข\"\r\n                  >\r\n                    <Edit className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(member.id)}\r\n                    className=\"p-1 text-slate-400 hover:text-red-600 rounded\"\r\n                    title=\"ลบ\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Structure Modal Component\r\nconst UnitStructureModal = ({ structure, units, officers, unitStructures, onClose, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    position_number: '',\r\n    unit_code: '',\r\n    role: 'member',\r\n    seniority_order: 1\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (structure) {\r\n      setFormData({\r\n        position_number: structure.position_number || '',\r\n        unit_code: structure.unit_code || '',\r\n        role: structure.role || 'member',\r\n        seniority_order: structure.seniority_order || 1\r\n      });\r\n    }\r\n  }, [structure]);\r\n\r\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\r\n  const availableOfficers = useMemo(() => {\r\n    const usedPositions = unitStructures.map(s => s.position_number);\r\n    const currentPosition = structure?.position_number;\r\n    \r\n    return officers.filter(officer => \r\n      !usedPositions.includes(officer.position_number) || \r\n      officer.position_number === currentPosition\r\n    );\r\n  }, [officers, unitStructures, structure]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const url = structure \r\n        ? `${CONFIG.UNIT_STRUCTURE_API}/${structure.id}`\r\n        : CONFIG.UNIT_STRUCTURE_API;\r\n      \r\n      const method = structure ? 'PUT' : 'POST';\r\n      \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        alert(structure ? 'แก้ไขข้อมูลสำเร็จ' : 'เพิ่มข้อมูลสำเร็จ');\r\n        onSave();\r\n        onClose();\r\n      } else {\r\n        alert('เกิดข้อผิดพลาด: ' + data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error saving structure:', error);\r\n      alert('เกิดข้อผิดพลาดในการบันทึกข้อมูล');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\r\n        <h3 className=\"text-lg font-semibold mb-4\">\r\n          {structure ? 'แก้ไขข้อมูลโครงสร้าง' : 'เพิ่มบุคลากรใหม่'}\r\n        </h3>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">เจ้าหน้าที่</label>\r\n            <select\r\n              value={formData.position_number}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, position_number: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\">เลือกเจ้าหน้าที่</option>\r\n              {availableOfficers.map(officer => (\r\n                <option key={officer.position_number} value={officer.position_number}>\r\n                  {officer.prefix} {officer.firstname} {officer.lastname} ({officer.position_number})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">ส่วนงาน</label>\r\n            <select\r\n              value={formData.unit_code}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, unit_code: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\">เลือกส่วนงาน</option>\r\n              <option value=\"cmd\">ผู้อำนวยการศูนย์รักษาความปลอดภัย</option>\r\n              {units.map(unit => (\r\n                <option key={unit.unit_code} value={unit.unit_code}>\r\n                  {unit.unit_name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">บทบาท</label>\r\n            <select\r\n              value={formData.role}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, role: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"member\">เจ้าหน้าที่</option>\r\n              <option value=\"supervisor\">หัวหน้าส่วน</option>\r\n              <option value=\"director\">ผู้อำนวยการ</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">ลำดับอาวุโส</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              value={formData.seniority_order}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, seniority_order: parseInt(e.target.value) }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            />\r\n            <p className=\"text-xs text-slate-500 mt-1\">\r\n              หัวหน้าส่วนต้องเป็น 1 เสมอ\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\"\r\n            >\r\n              ยกเลิก\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'กำลังบันทึก...' : (structure ? 'แก้ไข' : 'เพิ่ม')}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ShiftWorkPage = () => {\r\n  const [activeTab, setActiveTab] = useState('shifts');\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [officers, setOfficers] = useState([]);\r\n  const [shiftTypes, setShiftTypes] = useState([]);\r\n  const [units, setUnits] = useState([]);\r\n  const [holidays, setHolidays] = useState([]);\r\n  const [formData, setFormData] = useState({ duty_date: '', shift_type_id: '', unit_id: '', officer_ids: [], notes: '' });\r\n  const [filters, setFilters] = useState({ unit: '', officer: '' });\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [selectedShiftPeriod, setSelectedShiftPeriod] = useState('day');\r\n  const [selectedUnits, setSelectedUnits] = useState([]);\r\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\r\n  const [showOfficerList, setShowOfficerList] = useState(false);\r\n  const [officerSearchTerm, setOfficerSearchTerm] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadHolidaysByYear = async () => {\r\n      try {\r\n        const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays&year=${currentDate.getFullYear()}`);\r\n        const result = await response.json();\r\n        if (!result.success) throw new Error(result.message);\r\n        setHolidays(result.data);\r\n      } catch (error) {\r\n        console.error(\"ล้มเหลวในการดึงข้อมูลวันหยุด:\", error);\r\n      }\r\n    };\r\n\r\n    loadHolidaysByYear();\r\n  }, [currentDate]);\r\n  useEffect(() => {\r\n    if (selectedUnits.length > 0 && Array.isArray(officers)) {\r\n      const officersInSelectedUnits = officers\r\n        .filter(officer => officer.unit_id && selectedUnits.includes(officer.unit_id))\r\n        .map(officer => officer.id);\r\n\r\n      setSelectedOfficers(officersInSelectedUnits);\r\n    } else {\r\n      setSelectedOfficers([]);\r\n    }\r\n  }, [selectedUnits, officers]);\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\r\n  const handleUnitSelect = (unitId) => {\r\n    setSelectedUnits(prev =>\r\n      prev.includes(unitId)\r\n        ? prev.filter(id => id !== unitId)\r\n        : [...prev, unitId]\r\n    );\r\n  };\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกเจ้าหน้าที่ ---\r\n  const handleOfficerAdd = (officerId) => {\r\n    setSelectedOfficers(prev => [...prev, officerId]);\r\n  };\r\n\r\n  const handleOfficerRemove = (officerId) => {\r\n    setSelectedOfficers(prev => prev.filter(id => id !== officerId));\r\n  };\r\n\r\n  // --- ฟังก์ชันกรองเจ้าหน้าที่ที่ยังไม่ได้เลือก ---\r\n  const getAvailableOfficers = () => {\r\n    if (!Array.isArray(officers)) return [];\r\n\r\n    return officers.filter(officer =>\r\n      officer.unit_id !== null &&\r\n      (selectedUnits.length === 0 || selectedUnits.includes(officer.unit_id)) &&\r\n      !selectedOfficers.includes(officer.id) &&\r\n      (officerSearchTerm === '' ||\r\n        `${officer.firstname} ${officer.lastname}`.toLowerCase().includes(officerSearchTerm.toLowerCase()))\r\n    );\r\n  };\r\n\r\n  // --- ฟังก์ชันหาข้อมูลเจ้าหน้าที่ ---\r\n  const getOfficerById = (officerId) => {\r\n    return officers.find(o => o.id === officerId);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadInitialData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadSchedules();\r\n  }, [currentDate]);\r\n\r\n  const loadInitialData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadOfficers(),\r\n        loadShiftTypes(),\r\n        loadUnits(),\r\n        loadHolidays(),\r\n        loadSchedules()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error loading initial data:', error.message, error.stack);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadSchedules = async () => {\r\n    try {\r\n      const month = currentDate.getMonth() + 1;\r\n      const year = currentDate.getFullYear();\r\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_schedules&month=${month}&year=${year}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setSchedules(data.data);\r\n      } else {\r\n        console.error('Failed to fetch schedules:', data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading schedules:', error.message, error.stack);\r\n    }\r\n  };\r\n\r\n  const loadOfficers = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.OFFICERS_API}?action=get_all_officers`);\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      if (data && data.success && Array.isArray(data.data)) {\r\n        setOfficers(data.data);\r\n      } else {\r\n        console.error('Failed to load officers:', data);\r\n        setOfficers([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading officers:', error);\r\n      setOfficers([]);\r\n    }\r\n  };\r\n\r\n  const loadShiftTypes = async () => {\r\n    try {\r\n      const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_shifttypes`);\r\n      const data = await response.json();\r\n      if (Array.isArray(data)) {\r\n        setShiftTypes(data);\r\n      } else {\r\n        setShiftTypes([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading shift types:', error);\r\n      setShiftTypes([]);\r\n    }\r\n  };\r\n\r\n  const loadUnits = async () => {\r\n      try {\r\n          const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_all_units`);\r\n    const data = await response.json();\r\n          if (Array.isArray(data)) {\r\n              setUnits(data);\r\n          } else {\r\n              setUnits([]);\r\n          }\r\n      } catch (error) {\r\n          console.error('Error loading units:', error);\r\n          setUnits([]);\r\n      }\r\n  };\r\n\r\n  const loadHolidays = async () => {\r\n      try {\r\n          const response = await fetch(`${CONFIG.SCHEDULES_API}?action=get_holidays`);\r\n    const data = await response.json();\r\n          if (Array.isArray(data)) {\r\n              setHolidays(data);\r\n          } else {\r\n              setHolidays([]);\r\n          }\r\n      } catch (error) {\r\n          console.error('Error loading holidays:', error);\r\n          setHolidays([]);\r\n      }\r\n  };\r\n\r\n  const navigateMonth = (direction) => {\r\n    setCurrentDate(prev => {\r\n      const newDate = new Date(prev);\r\n      newDate.setMonth(prev.getMonth() + direction);\r\n      return newDate;\r\n    });\r\n  };\r\n\r\n  const goToToday = () => {\r\n    setCurrentDate(new Date());\r\n  };\r\n\r\n  // --- แก้ไข openAddModal ---\r\n  const openAddModal = (date = null) => {\r\n    const dateObj = date || new Date();\r\n    const isHolidayDate = isHoliday(dateObj, holidays);\r\n\r\n    const suggestedType = getShiftTypeByPeriod('day', isHolidayDate, shiftTypes);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedOfficers([]);\r\n    setFormData({\r\n      duty_date: date ? date.toISOString().split('T')[0] : '',\r\n      shift_type_id: suggestedType?.id || '',\r\n      unit_id: '',\r\n      officer_ids: [],\r\n      notes: ''\r\n    });\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const openEditModal = (schedule) => {\r\n    setSelectedSchedule(schedule);\r\n    setFormData({\r\n      duty_date: schedule.duty_date,\r\n      shift_type_id: schedule.shift_type_id,\r\n      unit_id: schedule.unit_id || '',\r\n      officer_ids: schedule.officer_ids || [],\r\n      notes: schedule.notes || ''\r\n    });\r\n    setSelectedOfficers(schedule.officer_ids || []);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const closeModals = () => {\r\n    setShowAddModal(false);\r\n    setShowEditModal(false);\r\n    setSelectedSchedule(null);\r\n    setSelectedShiftPeriod('day');\r\n    setSelectedUnits([]);\r\n    setSelectedOfficers([]);\r\n    setShowOfficerList(false);\r\n    setOfficerSearchTerm('');\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      // อัปเดต shift_type_id และ officer_ids ตาม UI ใหม่\r\n      const dateObj = new Date(formData.duty_date + 'T00:00:00');\r\n      const isHolidayDate = isHoliday(dateObj, holidays);\r\n      const shiftType = getShiftTypeByPeriod(selectedShiftPeriod, isHolidayDate, shiftTypes);\r\n\r\n      const payload = {\r\n        action: selectedSchedule ? 'update_schedule' : 'create_schedule',\r\n        ...formData,\r\n        shift_type_id: shiftType?.id || formData.shift_type_id,\r\n        officer_ids: selectedOfficers,\r\n        ...(selectedSchedule && { schedule_id: selectedSchedule.id })\r\n      };\r\n\r\n      const response = await fetch(CONFIG.SCHEDULES_API, {\r\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const result = await response.json();\r\n      if (!result.success) throw new Error(result.message);\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error saving schedule:', error);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!selectedSchedule || !window.confirm('คุณแน่ใจหรือไม่ที่จะลบตารางเวรนี้?')) return;\r\n    setSaving(true);\r\n    try {\r\n      const payload = { action: 'delete_schedule', schedule_id: selectedSchedule.id };\r\n      const response = await fetch(CONFIG.SCHEDULES_API, {\r\n        method: 'POST', headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload)\r\n      });\r\n      const result = await response.json();\r\n      if (!result.success) throw new Error(result.message);\r\n      await loadSchedules();\r\n      closeModals();\r\n    } catch (error) {\r\n      console.error('Error deleting schedule:', error);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const filteredSchedules = useMemo(() => {\r\n    return schedules.filter(schedule => {\r\n      const unitMatch = !filters.unit || schedule.unit_id === parseInt(filters.unit);\r\n      const officerMatch = !filters.officer ||\r\n        (schedule.officer_names && schedule.officer_names.toLowerCase().includes(filters.officer.toLowerCase()));\r\n      return unitMatch && officerMatch;\r\n    });\r\n  }, [schedules, filters]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col\">\r\n      <div className=\"border-b border-slate-200\">\r\n        <nav className=\"flex space-x-4 px-4\">\r\n          <button\r\n            onClick={() => setActiveTab('shifts')}\r\n            className={`flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${activeTab === 'shifts' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'\r\n              }`}\r\n          >\r\n            <Shield className=\"w-4 h-4\" />\r\n            <span>เวรรักษาการ</span>\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('documents')}\r\n                className={`flex items-center space-x-2 py-3 px-3 rounded-t-lg font-medium text-sm whitespace-nowrap ${\r\n                    activeTab === 'documents' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-slate-500 hover:text-slate-700'\r\n              }`}\r\n          >\r\n            <File className=\"w-4 h-4\" />\r\n            <span>จัดการเอกสาร</span>\r\n          </button>\r\n        </nav>\r\n      </div>\r\n\r\n      <div className=\"flex-grow p-4 bg-slate-50/50 overflow-y-auto\">\r\n        {activeTab === 'shifts' && (\r\n          <ShiftCalendarView\r\n            currentDate={currentDate}\r\n            schedules={filteredSchedules}\r\n            officers={officers}\r\n            shiftTypes={shiftTypes}\r\n            units={units}\r\n            holidays={holidays}\r\n            filters={filters}\r\n            setFilters={setFilters}\r\n            navigateMonth={navigateMonth}\r\n            goToToday={goToToday}\r\n            openAddModal={openAddModal}\r\n            openEditModal={openEditModal}\r\n          />\r\n        )}\r\n        {activeTab === 'documents' && <DocumentManagementView />}\r\n      </div>\r\n\r\n      {(showAddModal || showEditModal) && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6 border-b\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">\r\n                {showEditModal ? 'แก้ไขตารางเวร' : 'เพิ่มตารางเวรใหม่'}\r\n              </h3>\r\n              {formData.duty_date && (\r\n                <p className=\"text-sm text-gray-600 mt-1\">\r\n                  วันที่ {new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH')}\r\n                  {isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) &&\r\n                    <span className=\"ml-2 px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full\">วันหยุด</span>\r\n                  }\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"p-6 space-y-6\">\r\n              {/* วันที่ */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">วันที่</label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={formData.duty_date}\r\n                  onChange={(e) => {\r\n                    handleInputChange('duty_date', e.target.value);\r\n                    // อัปเดต shift type อัตโนมัติเมื่อเปลี่ยนวันที่\r\n                    const newDate = new Date(e.target.value + 'T00:00:00');\r\n                    const isHol = isHoliday(newDate, holidays);\r\n                    const suggestedType = getShiftTypeByPeriod(selectedShiftPeriod, isHol, shiftTypes);\r\n                    setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                  }}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              {/* เลือกช่วงเวร */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">ช่วงเวร</label>\r\n                <div className=\"flex space-x-3\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedShiftPeriod('day');\r\n                      const isHol = formData.duty_date ? isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) : false;\r\n                                            const suggestedType = getShiftTypeByPeriod('day', isHol, shiftTypes);\r\n                                            setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                    }}\r\n                    className={`flex items-center px-4 py-2 rounded-lg border ${\r\n                        selectedShiftPeriod === 'day' \r\n                        ? 'bg-yellow-50 border-yellow-300 text-yellow-700'\r\n                        : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Sun className=\"w-4 h-4 mr-2\" />\r\n                    กลางวัน\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      setSelectedShiftPeriod('night');\r\n                      const suggestedType = getShiftTypeByPeriod('night', false, shiftTypes);\r\n                      setFormData(prev => ({ ...prev, shift_type_id: suggestedType?.id || '' }));\r\n                    }}\r\n                    className={`flex items-center px-4 py-2 rounded-lg border ${\r\n                        selectedShiftPeriod === 'night' \r\n                        ? 'bg-indigo-50 border-indigo-300 text-indigo-700'\r\n                        : 'bg-white border-gray-300 text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <Moon className=\"w-4 h-4 mr-2\" />\r\n                    กลางคืน\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* เลือกส่วนงาน (เช็คลิส) */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">ส่วนงาน</label>\r\n                <div className=\"border border-gray-300 rounded-lg p-4 max-h-40 overflow-y-auto\">\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    {Array.isArray(units) && units.map(unit => (\r\n                      <label key={unit.id} className=\"flex items-center py-1\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                                    checked={selectedUnits.includes(unit.id)}\r\n                                    onChange={() => handleUnitSelect(unit.id)}\r\n                                    className=\"h-4 w-4 text-indigo-600\"\r\n                        />\r\n                        <span className=\"ml-2 text-sm text-gray-900\">{unit.unit_name}</span>\r\n                      </label>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* เจ้าหน้าที่ที่เลือกแล้ว */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">เจ้าหน้าที่ที่เลือก</label>\r\n                <div className=\"border border-gray-300 rounded-lg p-3 min-h-[100px]\">\r\n                  {selectedOfficers.length === 0 ? (\r\n                    <p className=\"text-gray-500 text-sm\">ยังไม่ได้เลือกเจ้าหน้าที่</p>\r\n                  ) : (\r\n                    <div className=\"space-y-2\">\r\n                      {selectedOfficers.map(officerId => {\r\n                        const officer = getOfficerById(officerId);\r\n                        return officer ? (\r\n                          <div key={officerId} className=\"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-lg\">\r\n                            <span className=\"text-sm\">{officer.prefix} {officer.firstname} {officer.lastname}</span>\r\n                            <button\r\n                              onClick={() => handleOfficerRemove(officerId)}\r\n                              className=\"text-red-600 hover:text-red-800\"\r\n                            >\r\n                              <X className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        ) : null;\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* เพิ่มเจ้าหน้าที่ */}\r\n              <div>\r\n                <div className=\"flex items-center justify-between mb-3\">\r\n                  <label className=\"block text-sm font-medium text-gray-700\">จัดการเจ้าหน้าที่</label>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowOfficerList(!showOfficerList)}\r\n                    className=\"text-sm text-indigo-600 hover:text-indigo-800\"\r\n                  >\r\n                    {showOfficerList ? 'ซ่อน' : 'เพิ่มเจ้าหน้าที่'}\r\n                  </button>\r\n                </div>\r\n\r\n                {showOfficerList && (\r\n                  <div className=\"border border-gray-300 rounded-lg p-3\">\r\n                    {/* ช่องค้นหา */}\r\n                    <div className=\"mb-3\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <Search className=\"w-4 h-4 text-gray-500\" />\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"ค้นหาชื่อเจ้าหน้าที่...\"\r\n                          value={officerSearchTerm}\r\n                          onChange={(e) => setOfficerSearchTerm(e.target.value)}\r\n                          className=\"flex-1 border border-gray-300 rounded px-2 py-1 text-sm\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* รายชื่อเจ้าหน้าที่ */}\r\n                    <div className=\"max-h-40 overflow-y-auto\">\r\n                      {getAvailableOfficers().length === 0 ? (\r\n                        <p className=\"text-gray-500 text-sm\">\r\n                          {selectedUnits.length === 0 ? 'กรุณาเลือกส่วนงานก่อน' :\r\n                            officerSearchTerm ? 'ไม่พบเจ้าหน้าที่ที่ค้นหา' : 'ไม่มีเจ้าหน้าที่ที่สามารถเลือกได้'}\r\n                                        </p>\r\n                      ) : (\r\n                        <div className=\"space-y-1\">\r\n                          {getAvailableOfficers().map(officer => (\r\n                            <div key={officer.id} className=\"flex items-center justify-between py-2 hover:bg-gray-50 px-2 rounded\">\r\n                              <span className=\"text-sm\">{officer.prefix} {officer.firstname} {officer.lastname}</span>\r\n                              <button\r\n                                onClick={() => {\r\n                                  handleOfficerAdd(officer.id);\r\n                                  setOfficerSearchTerm(''); // ล้างค่าค้นหาหลังเพิ่ม\r\n                                }}\r\n                                className=\"text-indigo-600 hover:text-indigo-800 p-1 rounded hover:bg-indigo-50\"\r\n                              >\r\n                                <Plus className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* หมายเหตุ */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">หมายเหตุ</label>\r\n                <textarea\r\n                  value={formData.notes}\r\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\r\n                  rows={3}\r\n                  className=\"w-full border border-gray-300 rounded-lg px-3 py-2\"\r\n                  placeholder=\"รายละเอียดเพิ่มเติม...\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"p-6 border-t bg-gray-50 flex justify-between\">\r\n              <div>\r\n                {showEditModal && (\r\n                  <button\r\n                    onClick={handleDelete}\r\n                    disabled={saving}\r\n                    className=\"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100\"\r\n                  >\r\n                    <Trash2 className=\"w-4 h-4 mr-2\" />ลบเวร\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={closeModals}\r\n                  disabled={saving}\r\n                  className=\"px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50\"\r\n                >\r\n                  ยกเลิก\r\n                </button>\r\n                <button\r\n                  onClick={handleSave}\r\n                  disabled={saving || selectedOfficers.length === 0}\r\n                  className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {saving ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                      กำลังบันทึก...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Save className=\"w-4 h-4 mr-2\" />บันทึก\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unit Management View Component - เลือกการ์ดส่วนงานแล้วจัดการบุคลากร\r\nconst UnitManagementView = ({\r\n  dutyUnits,\r\n  unitStructures,\r\n  onEdit,\r\n  onDelete,\r\n  onAdd,\r\n  onEditDutyUnit,\r\n  onDeleteDutyUnit,\r\n  onAddDutyUnit,\r\n  getRoleIcon,\r\n  getRoleLabel,\r\n  getRoleBadgeClass\r\n}) => {\r\n  const [selectedUnit, setSelectedUnit] = useState(null);\r\n  const [isPersonnelModalOpen, setIsPersonnelModalOpen] = useState(false);\r\n  const [personnelAction, setPersonnelAction] = useState(''); // 'add', 'setSupervisor'\r\n\r\n  // Get unit statistics\r\n  const getUnitStats = (unitCode) => {\r\n    const unitPersonnel = unitStructures.filter(item => item.unit_code === unitCode);\r\n    const supervisor = unitPersonnel.find(item => item.role === 'supervisor');\r\n    const members = unitPersonnel.filter(item => item.role === 'member');\r\n    const director = unitPersonnel.find(item => item.role === 'director');\r\n    \r\n    return {\r\n      total: unitPersonnel.length,\r\n      supervisor,\r\n      members,\r\n      director,\r\n      hasSupervisor: !!supervisor,\r\n      hasDirector: !!director\r\n    };\r\n  };\r\n\r\n  const handleUnitSelect = (unit) => {\r\n    setSelectedUnit(unit);\r\n  };\r\n\r\n  const handleAddPersonnel = () => {\r\n    if (!selectedUnit) return;\r\n    \r\n    const stats = getUnitStats(selectedUnit.unit_code);\r\n    const nextSeniorityOrder = stats.total + 1;\r\n    \r\n    // เปิด modal พร้อมกำหนดค่าเริ่มต้น\r\n    onAdd({\r\n      unit_code: selectedUnit.unit_code,\r\n      role: selectedUnit.unit_code === 'CS08' ? 'director' : 'member',\r\n      seniority_order: nextSeniorityOrder\r\n    });\r\n  };\r\n\r\n  const handleSetSupervisor = () => {\r\n    if (!selectedUnit) return;\r\n    \r\n    // เปิด modal สำหรับกำหนดหัวหน้าส่วน\r\n    onAdd({\r\n      unit_code: selectedUnit.unit_code,\r\n      role: 'supervisor',\r\n      seniority_order: 1\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n      {/* Unit Cards */}\r\n      <div className=\"lg:col-span-2\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-lg font-semibold text-slate-800\">เลือกส่วนงาน</h2>\r\n          <button\r\n            onClick={() => onAddDutyUnit()}\r\n            className=\"inline-flex items-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700\"\r\n          >\r\n            <Plus className=\"w-4 h-4 mr-2\" />\r\n            เพิ่มส่วนงาน\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {dutyUnits.map((unit) => {\r\n            const stats = getUnitStats(unit.unit_code);\r\n            const isSelected = selectedUnit?.unit_code === unit.unit_code;\r\n            const isDirector = unit.unit_code === 'CS08';\r\n            \r\n            return (\r\n              <div\r\n                key={unit.unit_code}\r\n                onClick={() => handleUnitSelect(unit)}\r\n                className={`relative p-4 rounded-lg border-2 cursor-pointer transition-all ${\r\n                  isSelected \r\n                    ? 'border-indigo-500 bg-indigo-50' \r\n                    : 'border-slate-200 hover:border-slate-300'\r\n                }`}\r\n              >\r\n                {/* Unit Header */}\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-slate-800\">{unit.unit_code.toUpperCase()}</h3>\r\n                    <p className=\"text-sm text-slate-600\">{unit.unit_name}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onEditDutyUnit(unit);\r\n                      }}\r\n                      className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                    >\r\n                      <Edit className=\"w-4 h-4\" />\r\n                    </button>\r\n                    {!isDirector && (\r\n                      <button\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          onDeleteDutyUnit(unit);\r\n                        }}\r\n                        className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Unit Status */}\r\n                <div className=\"space-y-2 mb-3\">\r\n                  {isDirector ? (\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Star className=\"w-4 h-4 text-yellow-500\" />\r\n                      <span className=\"text-sm text-slate-600\">ผู้อำนวยการศูนย์</span>\r\n                      {stats.hasDirector && (\r\n                        <span className=\"text-sm text-green-600 font-medium\">\r\n                          (มีแล้ว)\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <Shield className=\"w-4 h-4 text-blue-500\" />\r\n                      <span className=\"text-sm text-slate-600\">หัวหน้าส่วน:</span>\r\n                      {stats.hasSupervisor ? (\r\n                        <span className=\"text-sm text-green-600 font-medium\">\r\n                          {stats.supervisor?.full_name}\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"text-sm text-red-500\">ยังไม่กำหนด</span>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Users className=\"w-4 h-4 text-slate-400\" />\r\n                    <span className=\"text-sm text-slate-600\">\r\n                      บุคลากร: {stats.total} คน\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Quick Actions */}\r\n                <div className=\"pt-2 border-t border-slate-200\">\r\n                  <div className=\"flex justify-between text-xs\">\r\n                    <span className=\"text-slate-500\">คลิกเพื่อจัดการ</span>\r\n                    {isSelected && (\r\n                      <span className=\"text-indigo-600 font-medium\">เลือกแล้ว</span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Selected Unit Management Panel */}\r\n      <div className=\"lg:col-span-1\">\r\n        {selectedUnit ? (\r\n          <div className=\"bg-slate-50 rounded-lg p-4\">\r\n            <h3 className=\"font-semibold text-slate-800 mb-4\">\r\n              จัดการ {selectedUnit.unit_code.toUpperCase()}\r\n            </h3>\r\n            \r\n            <div className=\"space-y-3\">\r\n              {selectedUnit.unit_code === 'CS08' ? (\r\n                // Director Unit (CS08) - สามารถมีได้เพียง 1 คน\r\n                <>\r\n                  <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n                    <div className=\"flex items-center space-x-2 mb-2\">\r\n                      <Star className=\"w-4 h-4 text-yellow-600\" />\r\n                      <span className=\"text-sm font-medium text-yellow-800\">ผู้อำนวยการศูนย์</span>\r\n                    </div>\r\n                    <p className=\"text-xs text-yellow-700\">\r\n                      หน่วยงานนี้สามารถมีได้เพียง 1 คนเท่านั้น\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <button\r\n                    onClick={handleAddPersonnel}\r\n                    className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700\"\r\n                  >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    <span>กำหนดผู้อำนวยการ</span>\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                // Regular Units - สามารถมีได้หลายคน\r\n                <>\r\n                  <button\r\n                    onClick={handleSetSupervisor}\r\n                    disabled={getUnitStats(selectedUnit.unit_code).hasSupervisor}\r\n                    className={`w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-lg ${\r\n                      getUnitStats(selectedUnit.unit_code).hasSupervisor\r\n                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\r\n                        : 'bg-blue-600 text-white hover:bg-blue-700'\r\n                    }`}\r\n                  >\r\n                    <Shield className=\"w-4 h-4\" />\r\n                    <span>\r\n                      {getUnitStats(selectedUnit.unit_code).hasSupervisor \r\n                        ? 'มีหัวหน้าส่วนแล้ว' \r\n                        : 'กำหนดหัวหน้าส่วน'\r\n                      }\r\n                    </span>\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={handleAddPersonnel}\r\n                    className=\"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700\"\r\n                  >\r\n                    <UserPlus className=\"w-4 h-4\" />\r\n                    <span>เพิ่มเจ้าหน้าที่</span>\r\n                  </button>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Current Personnel */}\r\n            <div className=\"mt-6\">\r\n              <h4 className=\"text-sm font-medium text-slate-700 mb-3\">บุคลากรปัจจุบัน</h4>\r\n              <div className=\"space-y-2\">\r\n                {unitStructures\r\n                  .filter(item => item.unit_code === selectedUnit.unit_code)\r\n                  .sort((a, b) => {\r\n                    // เรียงลำดับ: director > supervisor > member\r\n                    if (a.role === 'director') return -1;\r\n                    if (b.role === 'director') return 1;\r\n                    if (a.role === 'supervisor') return -1;\r\n                    if (b.role === 'supervisor') return 1;\r\n                    return a.seniority_order - b.seniority_order;\r\n                  })\r\n                  .map((person) => (\r\n                    <div key={person.id} className=\"flex items-center justify-between p-2 bg-white rounded border\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        {getRoleIcon(person.role)}\r\n                        <div>\r\n                          <p className=\"text-sm font-medium text-slate-800\">\r\n                            {person.full_name || `ตำแหน่งที่ ${person.position_number}`}\r\n                          </p>\r\n                          <p className=\"text-xs text-slate-500\">\r\n                            {getRoleLabel(person.role)} • ลำดับ {person.seniority_order}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center space-x-1\">\r\n                        <button\r\n                          onClick={() => onEdit(person)}\r\n                          className=\"p-1 text-blue-600 hover:bg-blue-50 rounded\"\r\n                        >\r\n                          <Edit className=\"w-3 h-3\" />\r\n                        </button>\r\n                        <button\r\n                          onClick={() => onDelete(person)}\r\n                          className=\"p-1 text-red-600 hover:bg-red-50 rounded\"\r\n                        >\r\n                          <Trash2 className=\"w-3 h-3\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                \r\n                {unitStructures.filter(item => item.unit_code === selectedUnit.unit_code).length === 0 && (\r\n                  <div className=\"text-center py-4 text-slate-500\">\r\n                    <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n                    <p className=\"text-sm\">ยังไม่มีบุคลากร</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-slate-50 rounded-lg p-8 text-center\">\r\n            <Building className=\"w-12 h-12 mx-auto mb-4 text-slate-400\" />\r\n            <h3 className=\"text-lg font-medium text-slate-600 mb-2\">เลือกส่วนงาน</h3>\r\n            <p className=\"text-sm text-slate-500\">\r\n              เลือกส่วนงานจากรายการด้านซ้ายเพื่อจัดการบุคลากร\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShiftWorkPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}