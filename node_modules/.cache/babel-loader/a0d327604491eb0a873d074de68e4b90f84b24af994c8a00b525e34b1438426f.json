{"ast":null,"code":"import React,{useState,useMemo}from'react';import{ChevronLeft,Users,Search,UserPlus,Save,User,Plus,ArrowUpDown}from'lucide-react';import{useAlert}from'../common/AlertSystem';import CurrentMemberCard from'./CurrentMemberCard';import AvailableOfficerCard from'./AvailableOfficerCard';import EditMemberModal from'./EditMemberModal';import ReorderMembersModal from'./ReorderMembersModal';import AddMemberModal from'./AddMemberModal';import BulkAddModal from'./BulkAddModal';// Component สำหรับจัดการบุคลากรในส่วนงาน\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UnitManagementView=_ref=>{let{selectedUnit,units,officers,unitStructures,onBack,onRefresh}=_ref;const[selectedOfficers,setSelectedOfficers]=useState([]);const[isAddingMultiple,setIsAddingMultiple]=useState(false);const[editingMember,setEditingMember]=useState(null);const[showReorderModal,setShowReorderModal]=useState(false);const[showAddModal,setShowAddModal]=useState(false);const[showBulkAddModal,setShowBulkAddModal]=useState(false);const[searchTerm,setSearchTerm]=useState('');const{success,error,warning}=useAlert();// กรองเจ้าหน้าที่ในส่วนงานที่เลือก\nconst currentUnitMembers=useMemo(()=>{if(!selectedUnit)return[];return unitStructures.filter(s=>s.unit_code===selectedUnit.unit_code).sort((a,b)=>a.seniority_order-b.seniority_order);},[unitStructures,selectedUnit]);// กรองเจ้าหน้าที่ที่ยังไม่ได้อยู่ในโครงสร้าง\nconst availableOfficers=useMemo(()=>{const usedPositions=unitStructures.map(s=>s.position_number);let filtered=officers.filter(officer=>!usedPositions.includes(officer.position_number));// กรองตามคำค้นหา\nif(searchTerm&&searchTerm.trim()!==''){const search=searchTerm.trim();filtered=filtered.filter(officer=>{// ค้นหาจากชื่อ นามสกุล หรือเลขตำแหน่ง แบบตรงตัว\nconst firstname=(officer.firstname||'').toString();const lastname=(officer.lastname||'').toString();const positionNumber=(officer.position_number||'').toString();const match=firstname.includes(search)||lastname.includes(search)||positionNumber.includes(search);return match;});}return filtered;},[officers,unitStructures,searchTerm]);const handleBulkAdd=()=>{if(!selectedUnit){warning('กรุณาเลือกส่วนงานก่อน');return;}if(selectedOfficers.length===0){warning('กรุณาเลือกบุคลากรที่ต้องการเพิ่ม');return;}// เปิด Modal สำหรับกำหนดลำดับอาวุโส\nsetShowBulkAddModal(true);};// ตรวจสอบว่ามีการเลือกส่วนงานหรือไม่\nif(!selectedUnit){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-8\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-16 h-16 mx-auto mb-4 text-slate-400\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-slate-800 mb-2\",children:\"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500\",children:\"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\\u0E15\\u0E49\\u0E2D\\u0E07\\u0E01\\u0E32\\u0E23\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"})]})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onBack,className:\"flex items-center px-3 py-2 text-slate-600 hover:text-slate-800 transition-colors\",children:[/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-5 h-5 mr-1\"}),\"\\u0E01\\u0E25\\u0E31\\u0E1A\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-slate-800\",children:selectedUnit.unit_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500\",children:\"\\u0E08\\u0E31\\u0E14\\u0E01\\u0E32\\u0E23\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E43\\u0E19\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[currentUnitMembers.length>1&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowReorderModal(true),className:\"flex items-center px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowUpDown,{className:\"w-4 h-4 mr-2\"}),\"\\u0E08\\u0E31\\u0E14\\u0E40\\u0E23\\u0E35\\u0E22\\u0E07\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddModal(true),className:\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 mr-2\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(isAddingMultiple){handleBulkAdd();}else{setIsAddingMultiple(true);}},className:\"flex items-center px-4 py-2 rounded-lg transition-colors \".concat(isAddingMultiple?'bg-green-600 text-white hover:bg-green-700':'bg-indigo-600 text-white hover:bg-indigo-700'),children:isAddingMultiple?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4 mr-2\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E19 (\",selectedOfficers.length,\")\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-4 h-4 mr-2\"}),\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E2B\\u0E25\\u0E32\\u0E22\\u0E04\\u0E19\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-5 h-5 mr-2 text-indigo-600\"}),\"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-slate-500\",children:[currentUnitMembers.length,\" \\u0E04\\u0E19\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:currentUnitMembers.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-slate-500\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-8 h-8 mx-auto mb-2 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E43\\u0E19\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E19\\u0E35\\u0E49\"})]}):currentUnitMembers.map(member=>/*#__PURE__*/_jsx(CurrentMemberCard,{member:member,onRefresh:onRefresh,onEdit:setEditingMember},member.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold flex items-center\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 mr-2 text-green-600\"}),\"\\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-slate-500\",children:[availableOfficers.length,\" \\u0E04\\u0E19\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:availableOfficers.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-slate-500\",children:[/*#__PURE__*/_jsx(User,{className:\"w-8 h-8 mx-auto mb-2 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{children:searchTerm&&searchTerm.trim()!==''?'ไม่พบเจ้าหน้าที่ที่ตรงกับการค้นหา':'ไม่มีเจ้าหน้าที่ที่พร้อมเพิ่ม'})]}):availableOfficers.map(officer=>/*#__PURE__*/_jsx(AvailableOfficerCard,{officer:officer,selectedUnit:selectedUnit,isSelected:selectedOfficers.includes(officer.position_number),isMultipleMode:isAddingMultiple,onToggleSelect:positionNumber=>{if(selectedOfficers.includes(positionNumber)){setSelectedOfficers(prev=>prev.filter(p=>p!==positionNumber));}else{setSelectedOfficers(prev=>[...prev,positionNumber]);}},onAddSingle:onRefresh},officer.position_number))})]})]}),editingMember&&/*#__PURE__*/_jsx(EditMemberModal,{member:editingMember,units:units,officers:officers,unitStructures:unitStructures,onClose:()=>setEditingMember(null),onSave:()=>{onRefresh();setEditingMember(null);}}),showReorderModal&&/*#__PURE__*/_jsx(ReorderMembersModal,{unitCode:selectedUnit.unit_code,unitName:selectedUnit.unit_name,members:currentUnitMembers,onClose:()=>setShowReorderModal(false),onSave:()=>{onRefresh();setShowReorderModal(false);}}),showAddModal&&/*#__PURE__*/_jsx(AddMemberModal,{selectedUnit:selectedUnit,units:units,officers:officers,unitStructures:unitStructures,onClose:()=>setShowAddModal(false),onSave:()=>{onRefresh();setShowAddModal(false);}}),showBulkAddModal&&/*#__PURE__*/_jsx(BulkAddModal,{selectedOfficers:selectedOfficers,selectedUnit:selectedUnit,officers:officers,unitStructures:unitStructures,onClose:()=>setShowBulkAddModal(false),onSave:()=>{setSelectedOfficers([]);setIsAddingMultiple(false);setShowBulkAddModal(false);onRefresh();}})]})});};export default UnitManagementView;","map":{"version":3,"names":["React","useState","useMemo","ChevronLeft","Users","Search","UserPlus","Save","User","Plus","ArrowUpDown","useAlert","CurrentMemberCard","AvailableOfficerCard","EditMemberModal","ReorderMembersModal","AddMemberModal","BulkAddModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UnitManagementView","_ref","selectedUnit","units","officers","unitStructures","onBack","onRefresh","selectedOfficers","setSelectedOfficers","isAddingMultiple","setIsAddingMultiple","editingMember","setEditingMember","showReorderModal","setShowReorderModal","showAddModal","setShowAddModal","showBulkAddModal","setShowBulkAddModal","searchTerm","setSearchTerm","success","error","warning","currentUnitMembers","filter","s","unit_code","sort","a","b","seniority_order","availableOfficers","usedPositions","map","position_number","filtered","officer","includes","trim","search","firstname","toString","lastname","positionNumber","match","handleBulkAdd","length","className","children","onClick","unit_name","concat","member","onEdit","id","type","placeholder","value","onChange","e","target","isSelected","isMultipleMode","onToggleSelect","prev","p","onAddSingle","onClose","onSave","unitCode","unitName","members"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/components/UnitStructure/UnitManagementView.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\r\nimport { \r\n  ChevronLeft, \r\n  Users, \r\n  Search, \r\n  UserPlus, \r\n  Save,\r\n  User,\r\n  Plus,\r\n  ArrowUpDown\r\n} from 'lucide-react';\r\nimport { useAlert } from '../common/AlertSystem';\r\nimport CurrentMemberCard from './CurrentMemberCard';\r\nimport AvailableOfficerCard from './AvailableOfficerCard';\r\nimport EditMemberModal from './EditMemberModal';\r\nimport ReorderMembersModal from './ReorderMembersModal';\r\nimport AddMemberModal from './AddMemberModal';\r\nimport BulkAddModal from './BulkAddModal';\r\n\r\n// Component สำหรับจัดการบุคลากรในส่วนงาน\r\nconst UnitManagementView = ({ \r\n  selectedUnit, \r\n  units, \r\n  officers, \r\n  unitStructures, \r\n  onBack, \r\n  onRefresh \r\n}) => {\r\n  const [selectedOfficers, setSelectedOfficers] = useState([]);\r\n  const [isAddingMultiple, setIsAddingMultiple] = useState(false);\r\n  const [editingMember, setEditingMember] = useState(null);\r\n  const [showReorderModal, setShowReorderModal] = useState(false);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showBulkAddModal, setShowBulkAddModal] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  \r\n  const { success, error, warning } = useAlert();\r\n\r\n  // กรองเจ้าหน้าที่ในส่วนงานที่เลือก\r\n  const currentUnitMembers = useMemo(() => {\r\n    if (!selectedUnit) return [];\r\n    return unitStructures\r\n      .filter(s => s.unit_code === selectedUnit.unit_code)\r\n      .sort((a, b) => a.seniority_order - b.seniority_order);\r\n  }, [unitStructures, selectedUnit]);\r\n\r\n  // กรองเจ้าหน้าที่ที่ยังไม่ได้อยู่ในโครงสร้าง\r\n  const availableOfficers = useMemo(() => {\r\n    const usedPositions = unitStructures.map(s => s.position_number);\r\n    let filtered = officers\r\n      .filter(officer => !usedPositions.includes(officer.position_number));\r\n    \r\n    // กรองตามคำค้นหา\r\n    if (searchTerm && searchTerm.trim() !== '') {\r\n      const search = searchTerm.trim();\r\n      \r\n      filtered = filtered.filter(officer => {\r\n        // ค้นหาจากชื่อ นามสกุล หรือเลขตำแหน่ง แบบตรงตัว\r\n        const firstname = (officer.firstname || '').toString();\r\n        const lastname = (officer.lastname || '').toString();\r\n        const positionNumber = (officer.position_number || '').toString();\r\n        \r\n        const match = firstname.includes(search) || \r\n                     lastname.includes(search) || \r\n                     positionNumber.includes(search);\r\n        \r\n        return match;\r\n      });\r\n    }\r\n    \r\n    return filtered;\r\n  }, [officers, unitStructures, searchTerm]);\r\n\r\n  const handleBulkAdd = () => {\r\n    if (!selectedUnit) {\r\n      warning('กรุณาเลือกส่วนงานก่อน');\r\n      return;\r\n    }\r\n\r\n    if (selectedOfficers.length === 0) {\r\n      warning('กรุณาเลือกบุคลากรที่ต้องการเพิ่ม');\r\n      return;\r\n    }\r\n\r\n    // เปิด Modal สำหรับกำหนดลำดับอาวุโส\r\n    setShowBulkAddModal(true);\r\n  };\r\n\r\n  // ตรวจสอบว่ามีการเลือกส่วนงานหรือไม่\r\n  if (!selectedUnit) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 p-6\">\r\n        <div className=\"max-w-7xl mx-auto text-center\">\r\n          <div className=\"bg-white rounded-xl p-8\">\r\n            <Users className=\"w-16 h-16 mx-auto mb-4 text-slate-400\" />\r\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-2\">กรุณาเลือกส่วนงาน</h2>\r\n            <p className=\"text-slate-500\">เลือกส่วนงานที่ต้องการจัดการบุคลากร</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-6\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={onBack}\r\n              className=\"flex items-center px-3 py-2 text-slate-600 hover:text-slate-800 transition-colors\"\r\n            >\r\n              <ChevronLeft className=\"w-5 h-5 mr-1\" />\r\n              กลับ\r\n            </button>\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-slate-800\">{selectedUnit.unit_name}</h2>\r\n              <p className=\"text-slate-500\">จัดการบุคลากรในส่วนงาน</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"flex space-x-3\">\r\n            {currentUnitMembers.length > 1 && (\r\n              <button\r\n                onClick={() => setShowReorderModal(true)}\r\n                className=\"flex items-center px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors\"\r\n              >\r\n                <ArrowUpDown className=\"w-4 h-4 mr-2\" />\r\n                จัดเรียงลำดับ\r\n              </button>\r\n            )}\r\n            <button\r\n              onClick={() => setShowAddModal(true)}\r\n              className=\"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n            >\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              เพิ่มบุคลากร\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (isAddingMultiple) {\r\n                  handleBulkAdd();\r\n                } else {\r\n                  setIsAddingMultiple(true);\r\n                }\r\n              }}\r\n              className={`flex items-center px-4 py-2 rounded-lg transition-colors ${\r\n                isAddingMultiple \r\n                  ? 'bg-green-600 text-white hover:bg-green-700' \r\n                  : 'bg-indigo-600 text-white hover:bg-indigo-700'\r\n              }`}\r\n            >\r\n              {isAddingMultiple ? (\r\n                <>\r\n                  <Save className=\"w-4 h-4 mr-2\" />\r\n                  เพิ่มหลายคน ({selectedOfficers.length})\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <UserPlus className=\"w-4 h-4 mr-2\" />\r\n                  เพิ่มหลายคน\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          \r\n          {/* Current Members */}\r\n          <div className=\"bg-white rounded-xl p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-lg font-semibold flex items-center\">\r\n                <Users className=\"w-5 h-5 mr-2 text-indigo-600\" />\r\n                บุคลากรปัจจุบัน\r\n              </h3>\r\n              <span className=\"text-sm text-slate-500\">\r\n                {currentUnitMembers.length} คน\r\n              </span>\r\n            </div>\r\n          \r\n          <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n            {currentUnitMembers.length === 0 ? (\r\n              <div className=\"text-center py-8 text-slate-500\">\r\n                <Users className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n                <p>ยังไม่มีบุคลากรในส่วนงานนี้</p>\r\n              </div>\r\n            ) : (\r\n              currentUnitMembers.map(member => (\r\n                <CurrentMemberCard \r\n                  key={member.id} \r\n                  member={member} \r\n                  onRefresh={onRefresh}\r\n                  onEdit={setEditingMember}\r\n                />\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Available Officers */}\r\n        <div className=\"bg-white rounded-xl p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-semibold flex items-center\">\r\n              <Search className=\"w-5 h-5 mr-2 text-green-600\" />\r\n              รายชื่อเจ้าหน้าที่\r\n            </h3>\r\n            <span className=\"text-sm text-slate-500\">\r\n              {availableOfficers.length} คน\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"ค้นหาเจ้าหน้าที่...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n            {availableOfficers.length === 0 ? (\r\n              <div className=\"text-center py-8 text-slate-500\">\r\n                <User className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\r\n                <p>\r\n                  {searchTerm && searchTerm.trim() !== '' ? 'ไม่พบเจ้าหน้าที่ที่ตรงกับการค้นหา' : 'ไม่มีเจ้าหน้าที่ที่พร้อมเพิ่ม'}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              availableOfficers.map(officer => (\r\n                <AvailableOfficerCard\r\n                  key={officer.position_number}\r\n                  officer={officer}\r\n                  selectedUnit={selectedUnit}\r\n                  isSelected={selectedOfficers.includes(officer.position_number)}\r\n                  isMultipleMode={isAddingMultiple}\r\n                  onToggleSelect={(positionNumber) => {\r\n                    if (selectedOfficers.includes(positionNumber)) {\r\n                      setSelectedOfficers(prev => prev.filter(p => p !== positionNumber));\r\n                    } else {\r\n                      setSelectedOfficers(prev => [...prev, positionNumber]);\r\n                    }\r\n                  }}\r\n                  onAddSingle={onRefresh}\r\n                />\r\n              ))\r\n            )}\r\n          </div>\r\n        </div>\r\n        </div>\r\n\r\n        {/* Modals */}\r\n      {editingMember && (\r\n        <EditMemberModal\r\n          member={editingMember}\r\n          units={units}\r\n          officers={officers}\r\n          unitStructures={unitStructures}\r\n          onClose={() => setEditingMember(null)}\r\n          onSave={() => {\r\n            onRefresh();\r\n            setEditingMember(null);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showReorderModal && (\r\n        <ReorderMembersModal\r\n          unitCode={selectedUnit.unit_code}\r\n          unitName={selectedUnit.unit_name}\r\n          members={currentUnitMembers}\r\n          onClose={() => setShowReorderModal(false)}\r\n          onSave={() => {\r\n            onRefresh();\r\n            setShowReorderModal(false);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showAddModal && (\r\n        <AddMemberModal\r\n          selectedUnit={selectedUnit}\r\n          units={units}\r\n          officers={officers}\r\n          unitStructures={unitStructures}\r\n          onClose={() => setShowAddModal(false)}\r\n          onSave={() => {\r\n            onRefresh();\r\n            setShowAddModal(false);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {showBulkAddModal && (\r\n        <BulkAddModal\r\n          selectedOfficers={selectedOfficers}\r\n          selectedUnit={selectedUnit}\r\n          officers={officers}\r\n          unitStructures={unitStructures}\r\n          onClose={() => setShowBulkAddModal(false)}\r\n          onSave={() => {\r\n            setSelectedOfficers([]);\r\n            setIsAddingMultiple(false);\r\n            setShowBulkAddModal(false);\r\n            onRefresh();\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UnitManagementView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}