{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Documents\\\\GitHub\\\\court-marshal-connect\\\\src\\\\components\\\\ShiftWork\\\\DutyScheduleModal.js\";\nimport React from 'react';\nimport { X, Sun, Moon, Save, Plus, Trash2 } from 'lucide-react';\n\n// ฟังก์ชันตรวจสอบวันหยุด\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst isHoliday = (date, holidays = []) => {\n  const dayOfWeek = date.getDay();\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\n  const isSameDay = (date1, date2) => date1.toDateString() === date2.toDateString();\n  return holidays.some(holiday => isSameDay(new Date(holiday.date + 'T00:00:00'), date));\n};\nconst DutyScheduleModal = ({\n  showModal,\n  isEditMode,\n  formData,\n  setFormData,\n  selectedShiftPeriod,\n  setSelectedShiftPeriod,\n  selectedUnits,\n  setSelectedUnits,\n  selectedHeadUnit,\n  setSelectedHeadUnit,\n  availableOfficers,\n  manualAddedOfficers,\n  setManualAddedOfficers,\n  removedPositions,\n  setRemovedPositions,\n  manualSearch,\n  setManualSearch,\n  units,\n  officers,\n  holidays,\n  saving,\n  onClose,\n  onSave,\n  onDelete,\n  showAlert\n}) => {\n  if (!showModal) return null;\n\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\n  const handleUnitSelect = unitCode => {\n    setSelectedUnits(prev => {\n      const newUnits = prev.includes(unitCode) ? prev.filter(code => code !== unitCode) : [...prev, unitCode];\n\n      // ล้างการเลือกหน่วยงานหลักถ้าไม่มีส่วนงานที่เลือก\n      if (newUnits.length === 0) {\n        setSelectedHeadUnit('');\n      }\n      return newUnits;\n    });\n  };\n  const handleHeadUnitSelect = unitCode => {\n    setSelectedHeadUnit(unitCode);\n  };\n  const handleAddManualOfficer = () => {\n    const q = manualSearch && manualSearch.trim();\n    if (!q) return showAlert('กรุณากรอกข้อมูลเพื่อค้นหา/เพิ่ม', 'error');\n\n    // หาใน officers จาก unit_structure\n    const found = officers.find(o => String(o.position_number) === q || `${o.firstname} ${o.lastname}`.toLowerCase().includes(q.toLowerCase()));\n    if (found) {\n      // ถ้ายังไม่มีใน manualAdded หรือ available ให้เพิ่ม\n      const key = String(found.position_number);\n      const already = manualAddedOfficers.find(a => String(a.position_number) === key) || availableOfficers.find(a => String(a.position_number) === key);\n      if (already) {\n        showAlert('เจ้าหน้าที่คนนี้ถูกเพิ่มแล้ว', 'info');\n      } else {\n        setManualAddedOfficers(prev => [...prev, found]);\n        showAlert('เพิ่มเจ้าหน้าที่สำเร็จ', 'success');\n      }\n    } else {\n      showAlert('ไม่พบเจ้าหน้าที่ตามคำค้น', 'error');\n    }\n    setManualSearch('');\n  };\n  const handleRemoveOfficer = positionNumber => {\n    const key = String(positionNumber);\n    setRemovedPositions(prev => [...prev, key]);\n  };\n  const handleRestoreOfficer = positionNumber => {\n    const key = String(positionNumber);\n    setRemovedPositions(prev => prev.filter(p => p !== key));\n  };\n  const handleRemoveManualOfficer = positionNumber => {\n    const key = String(positionNumber);\n    setManualAddedOfficers(prev => prev.filter(o => String(o.position_number) !== key));\n  };\n\n  // รวมรายการที่จะแสดง\n  const combinedOfficers = [];\n  const mapPos = new Map();\n  (availableOfficers || []).forEach(o => mapPos.set(String(o.position_number), {\n    ...o,\n    source: 'unit'\n  }));\n  (manualAddedOfficers || []).forEach(o => mapPos.set(String(o.position_number), {\n    ...o,\n    source: 'manual'\n  }));\n  for (const [pos, off] of mapPos.entries()) {\n    const isRemoved = removedPositions.includes(pos);\n    combinedOfficers.push({\n      ...off,\n      isRemoved\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-bold\",\n              children: isEditMode ? '✏️ แก้ไขตารางเวร' : '➕ เพิ่มตารางเวรใหม่'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this), formData.duty_date && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-indigo-100 mt-1 flex items-center\",\n              children: [\"\\uD83D\\uDCC5 \\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48 \", new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH', {\n                weekday: 'long',\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              }), isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-3 px-2 py-1 bg-red-500 text-white text-xs rounded-full font-medium\",\n                children: \"\\uD83C\\uDFD6\\uFE0F \\u0E27\\u0E31\\u0E19\\u0E2B\\u0E22\\u0E38\\u0E14\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"p-2 hover:bg-white/20 rounded-full transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              className: \"w-6 h-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-y-auto max-h-[calc(90vh-120px)]\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-slate-50 rounded-xl p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-slate-700 mb-3 flex items-center\",\n              children: \"\\uD83D\\uDCC5 \\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              value: formData.duty_date,\n              onChange: e => {\n                setFormData(prev => ({\n                  ...prev,\n                  duty_date: e.target.value,\n                  day_type: isHoliday(new Date(e.target.value + 'T00:00:00'), holidays) ? 'holiday' : 'normal'\n                }));\n              },\n              className: \"w-full border-2 border-slate-300 rounded-lg px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), formData.duty_date && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 p-3 bg-white rounded-lg border-l-4 border-indigo-500\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-slate-700\",\n                  children: \"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E27\\u0E31\\u0E19:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 21\n                }, this), isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 px-2 py-1 bg-red-100 text-red-700 rounded-full font-medium\",\n                  children: \"\\uD83C\\uDFD6\\uFE0F \\u0E27\\u0E31\\u0E19\\u0E2B\\u0E22\\u0E38\\u0E14\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"ml-2 px-2 py-1 bg-green-100 text-green-700 rounded-full font-medium\",\n                  children: \"\\uD83D\\uDCCB \\u0E27\\u0E31\\u0E19\\u0E1B\\u0E01\\u0E15\\u0E34\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-slate-50 rounded-xl p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-slate-700 mb-4 flex items-center\",\n              children: \"\\u23F0 \\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E0A\\u0E48\\u0E27\\u0E07\\u0E40\\u0E27\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 gap-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('day');\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type: 'day'\n                  }));\n                },\n                className: `flex items-center justify-center px-6 py-4 rounded-xl border-2 text-sm font-semibold transition-all ${selectedShiftPeriod === 'day' ? 'bg-gradient-to-r from-amber-50 to-orange-50 border-amber-300 text-amber-700 shadow-md' : 'bg-white border-slate-300 text-slate-700 hover:bg-slate-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Sun, {\n                  className: \"w-5 h-5 mr-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"\\uD83C\\uDF05 \\u0E01\\u0E25\\u0E32\\u0E07\\u0E27\\u0E31\\u0E19\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs opacity-75\",\n                    children: \"(08:30-16:30)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 210,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => {\n                  setSelectedShiftPeriod('night');\n                  setFormData(prev => ({\n                    ...prev,\n                    shift_type: 'night'\n                  }));\n                },\n                className: `flex items-center justify-center px-6 py-4 rounded-xl border-2 text-sm font-semibold transition-all ${selectedShiftPeriod === 'night' ? 'bg-gradient-to-r from-indigo-50 to-blue-50 border-indigo-300 text-indigo-700 shadow-md' : 'bg-white border-slate-300 text-slate-700 hover:bg-slate-50'}`,\n                children: [/*#__PURE__*/_jsxDEV(Moon, {\n                  className: \"w-5 h-5 mr-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: \"\\uD83C\\uDF19 \\u0E01\\u0E25\\u0E32\\u0E07\\u0E04\\u0E37\\u0E19\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs opacity-75\",\n                    children: \"(16:30-08:30)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 228,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-slate-50 rounded-xl p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-slate-700 mb-4 flex items-center\",\n              children: \"\\uD83C\\uDFE2 \\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E17\\u0E35\\u0E48\\u0E40\\u0E02\\u0E49\\u0E32\\u0E40\\u0E27\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white border-2 border-slate-300 rounded-lg p-4 max-h-40 overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 sm:grid-cols-2 gap-3\",\n                children: Array.isArray(units) && units.map(unit => /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center p-2 hover:bg-slate-50 rounded-lg cursor-pointer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedUnits.includes(unit.unit_code),\n                    onChange: () => handleUnitSelect(unit.unit_code),\n                    className: \"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-slate-300 rounded\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-3 text-sm font-medium text-slate-900\",\n                    children: unit.unit_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 23\n                  }, this)]\n                }, unit.unit_code, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this), selectedUnits.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 rounded-xl p-4 border-2 border-blue-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-blue-800 mb-3 flex items-center\",\n              children: \"\\uD83D\\uDC51 \\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E2B\\u0E25\\u0E31\\u0E01\\u0E17\\u0E35\\u0E48\\u0E40\\u0E1B\\u0E47\\u0E19\\u0E2B\\u0E31\\u0E27\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E40\\u0E27\\u0E23\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 sm:grid-cols-2 gap-2\",\n              children: selectedUnits.map(unitCode => {\n                const unit = units.find(u => u.unit_code === unitCode);\n                return /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"flex items-center p-2 bg-white rounded-lg cursor-pointer\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"radio\",\n                    name: \"headUnit\",\n                    value: unitCode,\n                    checked: selectedHeadUnit === unitCode,\n                    onChange: () => handleHeadUnitSelect(unitCode),\n                    className: \"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"ml-3 text-sm font-medium text-slate-900\",\n                    children: unit === null || unit === void 0 ? void 0 : unit.unit_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 275,\n                    columnNumber: 25\n                  }, this)]\n                }, unitCode, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 23\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-slate-50 rounded-xl p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-semibold text-slate-700 mb-4 flex items-center\",\n              children: [\"\\uD83D\\uDC65 \\u0E23\\u0E32\\u0E22\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E17\\u0E35\\u0E48\\u0E08\\u0E30\\u0E40\\u0E02\\u0E49\\u0E32\\u0E40\\u0E27\\u0E23\", combinedOfficers.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"ml-2 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full font-medium\",\n                children: [combinedOfficers.filter(o => !o.isRemoved).length, \" \\u0E04\\u0E19\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32/\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48 (\\u0E23\\u0E30\\u0E1A\\u0E38\\u0E2B\\u0E21\\u0E32\\u0E22\\u0E40\\u0E25\\u0E02\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E0A\\u0E37\\u0E48\\u0E2D)\",\n                value: manualSearch,\n                onChange: e => setManualSearch(e.target.value),\n                className: \"flex-1 border-2 border-slate-300 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\",\n                onKeyPress: e => e.key === 'Enter' && handleAddManualOfficer()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleAddManualOfficer,\n                className: \"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4 mr-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 19\n                }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white border-2 border-slate-300 rounded-lg p-3 max-h-60 overflow-y-auto\",\n              children: combinedOfficers.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-2\",\n                children: combinedOfficers.map((officer, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `flex items-center justify-between p-3 rounded-lg border ${officer.isRemoved ? 'bg-red-50 border-red-200 opacity-60' : 'bg-slate-50 border-slate-200'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: `w-2 h-2 rounded-full ${officer.source === 'manual' ? 'bg-blue-500' : 'bg-green-500'}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 328,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"font-medium text-slate-900\",\n                        children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 332,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-xs text-slate-600\",\n                        children: [\"\\u0E15\\u0E33\\u0E41\\u0E2B\\u0E19\\u0E48\\u0E07: \", officer.position_number, \" | \", officer.unit_name]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 335,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 327,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center space-x-2\",\n                    children: officer.isRemoved ? /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleRestoreOfficer(officer.position_number),\n                      className: \"text-green-600 hover:text-green-800 text-sm font-medium\",\n                      children: \"\\u0E40\\u0E23\\u0E35\\u0E22\\u0E01\\u0E04\\u0E37\\u0E19\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => officer.source === 'manual' ? handleRemoveManualOfficer(officer.position_number) : handleRemoveOfficer(officer.position_number),\n                      className: \"text-red-600 hover:text-red-800\",\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 356,\n                        columnNumber: 31\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center text-slate-500 py-8\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"\\u0E22\\u0E31\\u0E07\\u0E44\\u0E21\\u0E48\\u0E21\\u0E35\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E43\\u0E19\\u0E23\\u0E32\\u0E22\\u0E01\\u0E32\\u0E23\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm\",\n                  children: \"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E2A\\u0E48\\u0E27\\u0E19\\u0E07\\u0E32\\u0E19\\u0E2B\\u0E23\\u0E37\\u0E2D\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\\u0E14\\u0E49\\u0E27\\u0E22\\u0E15\\u0E19\\u0E40\\u0E2D\\u0E07\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between pt-6 border-t border-slate-200\",\n            children: [isEditMode && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onDelete,\n              disabled: saving,\n              className: \"flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n              children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 380,\n                columnNumber: 19\n              }, this), \"\\u0E25\\u0E1A\\u0E15\\u0E32\\u0E23\\u0E32\\u0E07\\u0E40\\u0E27\\u0E23\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex space-x-3 ml-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: onClose,\n                disabled: saving,\n                className: \"px-6 py-2 border-2 border-slate-300 text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n                children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: onSave,\n                disabled: saving || combinedOfficers.filter(o => !o.isRemoved).length === 0 || !selectedHeadUnit,\n                className: \"inline-flex items-center px-6 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n                children: saving ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 23\n                  }, this), \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    className: \"w-4 h-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 23\n                  }, this), \"\\u0E1A\\u0E31\\u0E19\\u0E17\\u0E36\\u0E01\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n_c = DutyScheduleModal;\nexport default DutyScheduleModal;\nvar _c;\n$RefreshReg$(_c, \"DutyScheduleModal\");","map":{"version":3,"names":["React","X","Sun","Moon","Save","Plus","Trash2","jsxDEV","_jsxDEV","Fragment","_Fragment","isHoliday","date","holidays","dayOfWeek","getDay","isSameDay","date1","date2","toDateString","some","holiday","Date","DutyScheduleModal","showModal","isEditMode","formData","setFormData","selectedShiftPeriod","setSelectedShiftPeriod","selectedUnits","setSelectedUnits","selectedHeadUnit","setSelectedHeadUnit","availableOfficers","manualAddedOfficers","setManualAddedOfficers","removedPositions","setRemovedPositions","manualSearch","setManualSearch","units","officers","saving","onClose","onSave","onDelete","showAlert","handleUnitSelect","unitCode","prev","newUnits","includes","filter","code","length","handleHeadUnitSelect","handleAddManualOfficer","q","trim","found","find","o","String","position_number","firstname","lastname","toLowerCase","key","already","a","handleRemoveOfficer","positionNumber","handleRestoreOfficer","p","handleRemoveManualOfficer","combinedOfficers","mapPos","Map","forEach","set","source","pos","off","entries","isRemoved","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","duty_date","toLocaleDateString","weekday","year","month","day","onClick","type","value","onChange","e","target","day_type","shift_type","Array","isArray","map","unit","checked","unit_code","unit_name","u","name","placeholder","onKeyPress","officer","index","prefix","disabled","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Documents/GitHub/court-marshal-connect/src/components/ShiftWork/DutyScheduleModal.js"],"sourcesContent":["import React from 'react';\r\nimport { X, Sun, Moon, Save, Plus, Trash2 } from 'lucide-react';\r\n\r\n// ฟังก์ชันตรวจสอบวันหยุด\r\nconst isHoliday = (date, holidays = []) => {\r\n  const dayOfWeek = date.getDay();\r\n  if (dayOfWeek === 0 || dayOfWeek === 6) return true;\r\n  const isSameDay = (date1, date2) => date1.toDateString() === date2.toDateString();\r\n  return holidays.some(holiday => isSameDay(new Date(holiday.date + 'T00:00:00'), date));\r\n};\r\n\r\nconst DutyScheduleModal = ({\r\n  showModal,\r\n  isEditMode,\r\n  formData,\r\n  setFormData,\r\n  selectedShiftPeriod,\r\n  setSelectedShiftPeriod,\r\n  selectedUnits,\r\n  setSelectedUnits,\r\n  selectedHeadUnit,\r\n  setSelectedHeadUnit,\r\n  availableOfficers,\r\n  manualAddedOfficers,\r\n  setManualAddedOfficers,\r\n  removedPositions,\r\n  setRemovedPositions,\r\n  manualSearch,\r\n  setManualSearch,\r\n  units,\r\n  officers,\r\n  holidays,\r\n  saving,\r\n  onClose,\r\n  onSave,\r\n  onDelete,\r\n  showAlert\r\n}) => {\r\n  if (!showModal) return null;\r\n\r\n  // --- ฟังก์ชันจัดการการเลือกส่วนงาน ---\r\n  const handleUnitSelect = (unitCode) => {\r\n    setSelectedUnits(prev => {\r\n      const newUnits = prev.includes(unitCode)\r\n        ? prev.filter(code => code !== unitCode)\r\n        : [...prev, unitCode];\r\n      \r\n      // ล้างการเลือกหน่วยงานหลักถ้าไม่มีส่วนงานที่เลือก\r\n      if (newUnits.length === 0) {\r\n        setSelectedHeadUnit('');\r\n      }\r\n      \r\n      return newUnits;\r\n    });\r\n  };\r\n\r\n  const handleHeadUnitSelect = (unitCode) => {\r\n    setSelectedHeadUnit(unitCode);\r\n  };\r\n\r\n  const handleAddManualOfficer = () => {\r\n    const q = manualSearch && manualSearch.trim();\r\n    if (!q) return showAlert('กรุณากรอกข้อมูลเพื่อค้นหา/เพิ่ม', 'error');\r\n    \r\n    // หาใน officers จาก unit_structure\r\n    const found = officers.find(o => \r\n      String(o.position_number) === q || \r\n      (`${o.firstname} ${o.lastname}`).toLowerCase().includes(q.toLowerCase())\r\n    );\r\n    \r\n    if (found) {\r\n      // ถ้ายังไม่มีใน manualAdded หรือ available ให้เพิ่ม\r\n      const key = String(found.position_number);\r\n      const already = manualAddedOfficers.find(a => String(a.position_number) === key) || \r\n                     availableOfficers.find(a => String(a.position_number) === key);\r\n      \r\n      if (already) {\r\n        showAlert('เจ้าหน้าที่คนนี้ถูกเพิ่มแล้ว', 'info');\r\n      } else {\r\n        setManualAddedOfficers(prev => [...prev, found]);\r\n        showAlert('เพิ่มเจ้าหน้าที่สำเร็จ', 'success');\r\n      }\r\n    } else {\r\n      showAlert('ไม่พบเจ้าหน้าที่ตามคำค้น', 'error');\r\n    }\r\n    setManualSearch('');\r\n  };\r\n\r\n  const handleRemoveOfficer = (positionNumber) => {\r\n    const key = String(positionNumber);\r\n    setRemovedPositions(prev => [...prev, key]);\r\n  };\r\n\r\n  const handleRestoreOfficer = (positionNumber) => {\r\n    const key = String(positionNumber);\r\n    setRemovedPositions(prev => prev.filter(p => p !== key));\r\n  };\r\n\r\n  const handleRemoveManualOfficer = (positionNumber) => {\r\n    const key = String(positionNumber);\r\n    setManualAddedOfficers(prev => prev.filter(o => String(o.position_number) !== key));\r\n  };\r\n\r\n  // รวมรายการที่จะแสดง\r\n  const combinedOfficers = [];\r\n  const mapPos = new Map();\r\n  (availableOfficers || []).forEach(o => mapPos.set(String(o.position_number), { ...o, source: 'unit' }));\r\n  (manualAddedOfficers || []).forEach(o => mapPos.set(String(o.position_number), { ...o, source: 'manual' }));\r\n\r\n  for (const [pos, off] of mapPos.entries()) {\r\n    const isRemoved = removedPositions.includes(pos);\r\n    combinedOfficers.push({ ...off, isRemoved });\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 text-white\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"text-xl font-bold\">\r\n                {isEditMode ? '✏️ แก้ไขตารางเวร' : '➕ เพิ่มตารางเวรใหม่'}\r\n              </h3>\r\n              {formData.duty_date && (\r\n                <p className=\"text-indigo-100 mt-1 flex items-center\">\r\n                  📅 วันที่ {new Date(formData.duty_date + 'T00:00:00').toLocaleDateString('th-TH', { \r\n                    weekday: 'long',\r\n                    year: 'numeric', \r\n                    month: 'long', \r\n                    day: 'numeric' \r\n                  })}\r\n                  {isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) && (\r\n                    <span className=\"ml-3 px-2 py-1 bg-red-500 text-white text-xs rounded-full font-medium\">\r\n                      🏖️ วันหยุด\r\n                    </span>\r\n                  )}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 hover:bg-white/20 rounded-full transition-colors\"\r\n            >\r\n              <X className=\"w-6 h-6\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"overflow-y-auto max-h-[calc(90vh-120px)]\">\r\n          <div className=\"p-6 space-y-6\">\r\n            {/* วันที่ */}\r\n            <div className=\"bg-slate-50 rounded-xl p-4\">\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-3 flex items-center\">\r\n                📅 เลือกวันที่\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                value={formData.duty_date}\r\n                onChange={(e) => {\r\n                  setFormData(prev => ({ \r\n                    ...prev, \r\n                    duty_date: e.target.value,\r\n                    day_type: isHoliday(new Date(e.target.value + 'T00:00:00'), holidays) ? 'holiday' : 'normal'\r\n                  }));\r\n                }}\r\n                className=\"w-full border-2 border-slate-300 rounded-lg px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all\"\r\n              />\r\n              \r\n              {/* แสดงประเภทวัน */}\r\n              {formData.duty_date && (\r\n                <div className=\"mt-3 p-3 bg-white rounded-lg border-l-4 border-indigo-500\">\r\n                  <div className=\"flex items-center text-sm\">\r\n                    <span className=\"font-medium text-slate-700\">ประเภทวัน:</span>\r\n                    {isHoliday(new Date(formData.duty_date + 'T00:00:00'), holidays) ? (\r\n                      <span className=\"ml-2 px-2 py-1 bg-red-100 text-red-700 rounded-full font-medium\">\r\n                        🏖️ วันหยุด\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"ml-2 px-2 py-1 bg-green-100 text-green-700 rounded-full font-medium\">\r\n                        📋 วันปกติ\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* เลือกช่วงเวร */}\r\n            <div className=\"bg-slate-50 rounded-xl p-4\">\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-4 flex items-center\">\r\n                ⏰ เลือกช่วงเวร\r\n              </label>\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setSelectedShiftPeriod('day');\r\n                    setFormData(prev => ({ ...prev, shift_type: 'day' }));\r\n                  }}\r\n                  className={`flex items-center justify-center px-6 py-4 rounded-xl border-2 text-sm font-semibold transition-all ${\r\n                    selectedShiftPeriod === 'day' \r\n                      ? 'bg-gradient-to-r from-amber-50 to-orange-50 border-amber-300 text-amber-700 shadow-md'\r\n                      : 'bg-white border-slate-300 text-slate-700 hover:bg-slate-50'\r\n                  }`}\r\n                >\r\n                  <Sun className=\"w-5 h-5 mr-3\" />\r\n                  <div className=\"text-left\">\r\n                    <div>🌅 กลางวัน</div>\r\n                    <div className=\"text-xs opacity-75\">(08:30-16:30)</div>\r\n                  </div>\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setSelectedShiftPeriod('night');\r\n                    setFormData(prev => ({ ...prev, shift_type: 'night' }));\r\n                  }}\r\n                  className={`flex items-center justify-center px-6 py-4 rounded-xl border-2 text-sm font-semibold transition-all ${\r\n                    selectedShiftPeriod === 'night' \r\n                      ? 'bg-gradient-to-r from-indigo-50 to-blue-50 border-indigo-300 text-indigo-700 shadow-md'\r\n                      : 'bg-white border-slate-300 text-slate-700 hover:bg-slate-50'\r\n                  }`}\r\n                >\r\n                  <Moon className=\"w-5 h-5 mr-3\" />\r\n                  <div className=\"text-left\">\r\n                    <div>🌙 กลางคืน</div>\r\n                    <div className=\"text-xs opacity-75\">(16:30-08:30)</div>\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* เลือกส่วนงาน */}\r\n            <div className=\"bg-slate-50 rounded-xl p-4\">\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-4 flex items-center\">\r\n                🏢 เลือกส่วนงานที่เข้าเวร\r\n              </label>\r\n              <div className=\"bg-white border-2 border-slate-300 rounded-lg p-4 max-h-40 overflow-y-auto\">\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\r\n                  {Array.isArray(units) && units.map(unit => (\r\n                    <label key={unit.unit_code} className=\"flex items-center p-2 hover:bg-slate-50 rounded-lg cursor-pointer\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedUnits.includes(unit.unit_code)}\r\n                        onChange={() => handleUnitSelect(unit.unit_code)}\r\n                        className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-slate-300 rounded\"\r\n                      />\r\n                      <span className=\"ml-3 text-sm font-medium text-slate-900\">{unit.unit_name}</span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* เลือกหน่วยงานหลัก */}\r\n            {selectedUnits.length > 0 && (\r\n              <div className=\"bg-blue-50 rounded-xl p-4 border-2 border-blue-200\">\r\n                <label className=\"block text-sm font-semibold text-blue-800 mb-3 flex items-center\">\r\n                  👑 เลือกหน่วยงานหลักที่เป็นหัวหน้าเวร\r\n                </label>\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                  {selectedUnits.map(unitCode => {\r\n                    const unit = units.find(u => u.unit_code === unitCode);\r\n                    return (\r\n                      <label key={unitCode} className=\"flex items-center p-2 bg-white rounded-lg cursor-pointer\">\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"headUnit\"\r\n                          value={unitCode}\r\n                          checked={selectedHeadUnit === unitCode}\r\n                          onChange={() => handleHeadUnitSelect(unitCode)}\r\n                          className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-300\"\r\n                        />\r\n                        <span className=\"ml-3 text-sm font-medium text-slate-900\">{unit?.unit_name}</span>\r\n                      </label>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* รายชื่อเจ้าหน้าที่ */}\r\n            <div className=\"bg-slate-50 rounded-xl p-4\">\r\n              <label className=\"block text-sm font-semibold text-slate-700 mb-4 flex items-center\">\r\n                👥 รายชื่อเจ้าหน้าที่ที่จะเข้าเวร\r\n                {combinedOfficers.length > 0 && (\r\n                  <span className=\"ml-2 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full font-medium\">\r\n                    {combinedOfficers.filter(o => !o.isRemoved).length} คน\r\n                  </span>\r\n                )}\r\n              </label>\r\n\r\n              {/* Manual search / add */}\r\n              <div className=\"mb-4 flex items-center space-x-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"ค้นหา/เพิ่มเจ้าหน้าที่ (ระบุหมายเลขตำแหน่งหรือชื่อ)\"\r\n                  value={manualSearch}\r\n                  onChange={(e) => setManualSearch(e.target.value)}\r\n                  className=\"flex-1 border-2 border-slate-300 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                  onKeyPress={(e) => e.key === 'Enter' && handleAddManualOfficer()}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAddManualOfficer}\r\n                  className=\"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors\"\r\n                >\r\n                  <Plus className=\"w-4 h-4 mr-1\" />\r\n                  เพิ่ม\r\n                </button>\r\n              </div>\r\n\r\n              {/* Officers list */}\r\n              <div className=\"bg-white border-2 border-slate-300 rounded-lg p-3 max-h-60 overflow-y-auto\">\r\n                {combinedOfficers.length > 0 ? (\r\n                  <div className=\"space-y-2\">\r\n                    {combinedOfficers.map((officer, index) => (\r\n                      <div\r\n                        key={index}\r\n                        className={`flex items-center justify-between p-3 rounded-lg border ${\r\n                          officer.isRemoved \r\n                            ? 'bg-red-50 border-red-200 opacity-60' \r\n                            : 'bg-slate-50 border-slate-200'\r\n                        }`}\r\n                      >\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <div className={`w-2 h-2 rounded-full ${\r\n                            officer.source === 'manual' ? 'bg-blue-500' : 'bg-green-500'\r\n                          }`}></div>\r\n                          <div>\r\n                            <div className=\"font-medium text-slate-900\">\r\n                              {officer.prefix} {officer.firstname} {officer.lastname}\r\n                            </div>\r\n                            <div className=\"text-xs text-slate-600\">\r\n                              ตำแหน่ง: {officer.position_number} | {officer.unit_name}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          {officer.isRemoved ? (\r\n                            <button\r\n                              onClick={() => handleRestoreOfficer(officer.position_number)}\r\n                              className=\"text-green-600 hover:text-green-800 text-sm font-medium\"\r\n                            >\r\n                              เรียกคืน\r\n                            </button>\r\n                          ) : (\r\n                            <button\r\n                              onClick={() => officer.source === 'manual' \r\n                                ? handleRemoveManualOfficer(officer.position_number)\r\n                                : handleRemoveOfficer(officer.position_number)\r\n                              }\r\n                              className=\"text-red-600 hover:text-red-800\"\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center text-slate-500 py-8\">\r\n                    <p>ยังไม่มีเจ้าหน้าที่ในรายการ</p>\r\n                    <p className=\"text-sm\">กรุณาเลือกส่วนงานหรือเพิ่มเจ้าหน้าที่ด้วยตนเอง</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"flex items-center justify-between pt-6 border-t border-slate-200\">\r\n              {isEditMode && (\r\n                <button\r\n                  onClick={onDelete}\r\n                  disabled={saving}\r\n                  className=\"flex items-center px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                  ลบตารางเวร\r\n                </button>\r\n              )}\r\n              <div className=\"flex space-x-3 ml-auto\">\r\n                <button\r\n                  onClick={onClose}\r\n                  disabled={saving}\r\n                  className=\"px-6 py-2 border-2 border-slate-300 text-sm font-medium rounded-lg text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  ยกเลิก\r\n                </button>\r\n                <button\r\n                  onClick={onSave}\r\n                  disabled={saving || combinedOfficers.filter(o => !o.isRemoved).length === 0 || !selectedHeadUnit}\r\n                  className=\"inline-flex items-center px-6 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  {saving ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                      กำลังบันทึก...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <Save className=\"w-4 h-4 mr-2\" />\r\n                      บันทึก\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DutyScheduleModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}