{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\apiwa\\\\Documents\\\\GitHub\\\\C\\\\src\\\\components\\\\UnitStructure\\\\AddMemberModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { X, Save, User, Crown, Star } from 'lucide-react';\nimport { CONFIG } from '../../config';\n\n// Modal สำหรับเพิ่มบุคลากรพร้อมกำหนดบทบาทและลำดับอาวุโส\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AddMemberModal = ({\n  selectedUnit,\n  units,\n  officers,\n  unitStructures,\n  onClose,\n  onSave\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    position_number: '',\n    role: 'member',\n    seniority_order: 1\n  });\n  const [loading, setLoading] = useState(false);\n\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\n  const availableOfficers = useMemo(() => {\n    const usedPositions = unitStructures.map(s => s.position_number);\n    return officers.filter(officer => !usedPositions.includes(officer.position_number));\n  }, [officers, unitStructures]);\n\n  // Get current unit members เพื่อกำหนด default seniority order\n  const currentUnitMembers = useMemo(() => {\n    return unitStructures.filter(s => s.unit_code === selectedUnit.unit_code).sort((a, b) => a.seniority_order - b.seniority_order);\n  }, [unitStructures, selectedUnit]);\n\n  // Reset form เมื่อเปิด modal\n  useEffect(() => {\n    const nextSeniorityOrder = currentUnitMembers.length + 1;\n    setFormData({\n      position_number: '',\n      role: selectedUnit.isDirector ? 'director' : 'member',\n      seniority_order: nextSeniorityOrder\n    });\n  }, [selectedUnit, currentUnitMembers]);\n\n  // Check if role is available\n  const canSelectRole = role => {\n    if (role === 'director') {\n      return !unitStructures.some(s => s.role === 'director');\n    }\n    if (role === 'supervisor') {\n      return !currentUnitMembers.some(s => s.role === 'supervisor');\n    }\n    return true;\n  };\n\n  // Get suggested seniority orders\n  const getSuggestedSeniorityOrders = () => {\n    const usedOrders = currentUnitMembers.map(m => m.seniority_order);\n    const suggestions = [];\n\n    // แนะนำตำแหน่งที่ว่าง\n    for (let i = 1; i <= currentUnitMembers.length + 3; i++) {\n      if (!usedOrders.includes(i)) {\n        suggestions.push(i);\n      }\n    }\n    return suggestions.slice(0, 5); // แสดงไม่เกิน 5 ตัวเลือก\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          position_number: formData.position_number,\n          unit_code: selectedUnit.unit_code,\n          unit_name: selectedUnit.unit_name,\n          role: formData.role,\n          seniority_order: formData.seniority_order\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        alert('เพิ่มบุคลากรสำเร็จ');\n        onSave();\n        onClose();\n      } else {\n        var _data$errors;\n        console.error('API Error:', data);\n        alert(data.message || ((_data$errors = data.errors) === null || _data$errors === void 0 ? void 0 : _data$errors.join(', ')) || 'เกิดข้อผิดพลาดในการเพิ่มบุคลากร');\n      }\n    } catch (error) {\n      console.error('Error adding member:', error);\n      alert('เกิดข้อผิดพลาดในการเชื่อมต่อ API');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getRoleIcon = role => {\n    switch (role) {\n      case 'director':\n        return /*#__PURE__*/_jsxDEV(Crown, {\n          className: \"w-4 h-4 text-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 16\n        }, this);\n      case 'supervisor':\n        return /*#__PURE__*/_jsxDEV(Star, {\n          className: \"w-4 h-4 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(User, {\n          className: \"w-4 h-4 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  const getRoleText = role => {\n    switch (role) {\n      case 'director':\n        return 'ผู้อำนวยการ';\n      case 'supervisor':\n        return 'หัวหน้าส่วน';\n      default:\n        return 'เจ้าหน้าที่';\n    }\n  };\n  const getRoleDescription = role => {\n    switch (role) {\n      case 'director':\n        return 'ผู้อำนวยการศูนย์รักษาความปลอดภัย (มีได้คนเดียว)';\n      case 'supervisor':\n        return 'หัวหน้าส่วนงาน (แต่ละส่วนมีได้คนเดียว)';\n      default:\n        return 'เจ้าหน้าที่ปฏิบัติงานทั่วไป';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl max-w-md w-full p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(User, {\n            className: \"w-5 h-5 mr-2 text-indigo-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E43\\u0E2B\\u0E21\\u0E48\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-1 text-slate-400 hover:text-slate-600 rounded\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-indigo-50 rounded-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium text-indigo-800\",\n          children: [\"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E40\\u0E02\\u0E49\\u0E32: \", selectedUnit.unit_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-indigo-600 mt-1\",\n          children: [\"\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19: \", currentUnitMembers.length, \" \\u0E04\\u0E19\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-2\",\n            children: \"\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: formData.position_number,\n            onChange: e => setFormData(prev => ({\n              ...prev,\n              position_number: e.target.value\n            })),\n            className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\\u0E40\\u0E08\\u0E49\\u0E32\\u0E2B\\u0E19\\u0E49\\u0E32\\u0E17\\u0E35\\u0E48\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), availableOfficers.map(officer => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: officer.position_number,\n              children: [officer.prefix, \" \", officer.firstname, \" \", officer.lastname, \" (\", officer.position_number, \")\"]\n            }, officer.position_number, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-2\",\n            children: \"\\u0E1A\\u0E17\\u0E1A\\u0E32\\u0E17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: ['member', 'supervisor', 'director'].map(role => /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${formData.role === role ? 'border-indigo-500 bg-indigo-50' : canSelectRole(role) ? 'border-slate-200 hover:border-slate-300' : 'border-slate-100 bg-slate-50 cursor-not-allowed opacity-50'}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"role\",\n                value: role,\n                checked: formData.role === role,\n                onChange: e => setFormData(prev => ({\n                  ...prev,\n                  role: e.target.value\n                })),\n                disabled: !canSelectRole(role),\n                className: \"sr-only\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center flex-1\",\n                children: [getRoleIcon(role), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"font-medium\",\n                    children: getRoleText(role)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-xs text-slate-500\",\n                    children: getRoleDescription(role)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this), formData.role === role && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-4 h-4 bg-indigo-600 rounded-full flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-2 h-2 bg-white rounded-full\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 21\n              }, this)]\n            }, role, true, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-2\",\n            children: \"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E2D\\u0E32\\u0E27\\u0E38\\u0E42\\u0E2A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              min: \"1\",\n              value: formData.seniority_order,\n              onChange: e => setFormData(prev => ({\n                ...prev,\n                seniority_order: parseInt(e.target.value)\n              })),\n              className: \"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-wrap gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-slate-500\",\n                children: \"\\u0E41\\u0E19\\u0E30\\u0E19\\u0E33:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 17\n              }, this), getSuggestedSeniorityOrders().map(order => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setFormData(prev => ({\n                  ...prev,\n                  seniority_order: order\n                })),\n                className: `px-2 py-1 text-xs rounded border transition-colors ${formData.seniority_order === order ? 'bg-indigo-600 text-white border-indigo-600' : 'bg-slate-100 text-slate-600 border-slate-200 hover:border-slate-300'}`,\n                children: order\n              }, order, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-slate-500\",\n              children: formData.role === 'supervisor' ? 'หัวหน้าส่วนควรเป็น 1' : 'เลขที่มากกว่าจะมีอาวุโสน้อยกว่า'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this), currentUnitMembers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 bg-slate-50 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm font-medium text-slate-700 mb-2\",\n            children: \"\\u0E25\\u0E33\\u0E14\\u0E31\\u0E1A\\u0E2D\\u0E32\\u0E27\\u0E38\\u0E42\\u0E2A\\u0E1B\\u0E31\\u0E08\\u0E08\\u0E38\\u0E1A\\u0E31\\u0E19:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1 max-h-32 overflow-y-auto\",\n            children: currentUnitMembers.map(member => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center text-xs text-slate-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"w-6 text-center\",\n                children: [member.seniority_order, \".\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center mr-2\",\n                children: getRoleIcon(member.role)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [member.prefix, \" \", member.firstname, \" \", member.lastname]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 21\n              }, this)]\n            }, member.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 pt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: onClose,\n            className: \"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\",\n            disabled: loading,\n            children: \"\\u0E22\\u0E01\\u0E40\\u0E25\\u0E34\\u0E01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading || !formData.position_number,\n            className: \"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center\",\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this), \"\\u0E01\\u0E33\\u0E25\\u0E31\\u0E07\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                className: \"w-4 h-4 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 19\n              }, this), \"\\u0E40\\u0E1E\\u0E34\\u0E48\\u0E21\\u0E1A\\u0E38\\u0E04\\u0E25\\u0E32\\u0E01\\u0E23\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(AddMemberModal, \"51NpARThYKxmKGEHM0l2qNLY2Ts=\");\n_c = AddMemberModal;\nexport default AddMemberModal;\nvar _c;\n$RefreshReg$(_c, \"AddMemberModal\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","X","Save","User","Crown","Star","CONFIG","jsxDEV","_jsxDEV","Fragment","_Fragment","AddMemberModal","selectedUnit","units","officers","unitStructures","onClose","onSave","_s","formData","setFormData","position_number","role","seniority_order","loading","setLoading","availableOfficers","usedPositions","map","s","filter","officer","includes","currentUnitMembers","unit_code","sort","a","b","nextSeniorityOrder","length","isDirector","canSelectRole","some","getSuggestedSeniorityOrders","usedOrders","m","suggestions","i","push","slice","handleSubmit","e","preventDefault","response","fetch","UNIT_STRUCTURE_API","method","headers","body","JSON","stringify","unit_name","data","json","success","alert","_data$errors","console","error","message","errors","join","getRoleIcon","className","fileName","_jsxFileName","lineNumber","columnNumber","getRoleText","getRoleDescription","children","onClick","onSubmit","value","onChange","prev","target","required","prefix","firstname","lastname","type","name","checked","disabled","min","parseInt","order","member","id","_c","$RefreshReg$"],"sources":["C:/Users/apiwa/Documents/GitHub/C/src/components/UnitStructure/AddMemberModal.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { X, Save, User, Crown, Star } from 'lucide-react';\r\nimport { CONFIG } from '../../config';\r\n\r\n// Modal สำหรับเพิ่มบุคลากรพร้อมกำหนดบทบาทและลำดับอาวุโส\r\nconst AddMemberModal = ({ \r\n  selectedUnit, \r\n  units,\r\n  officers, \r\n  unitStructures,\r\n  onClose, \r\n  onSave \r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    position_number: '',\r\n    role: 'member',\r\n    seniority_order: 1\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Get available officers (ที่ยังไม่ได้อยู่ในโครงสร้าง)\r\n  const availableOfficers = useMemo(() => {\r\n    const usedPositions = unitStructures.map(s => s.position_number);\r\n    return officers.filter(officer => \r\n      !usedPositions.includes(officer.position_number)\r\n    );\r\n  }, [officers, unitStructures]);\r\n\r\n  // Get current unit members เพื่อกำหนด default seniority order\r\n  const currentUnitMembers = useMemo(() => {\r\n    return unitStructures.filter(s => \r\n      s.unit_code === selectedUnit.unit_code\r\n    ).sort((a, b) => a.seniority_order - b.seniority_order);\r\n  }, [unitStructures, selectedUnit]);\r\n\r\n  // Reset form เมื่อเปิด modal\r\n  useEffect(() => {\r\n    const nextSeniorityOrder = currentUnitMembers.length + 1;\r\n    setFormData({\r\n      position_number: '',\r\n      role: selectedUnit.isDirector ? 'director' : 'member',\r\n      seniority_order: nextSeniorityOrder\r\n    });\r\n  }, [selectedUnit, currentUnitMembers]);\r\n\r\n  // Check if role is available\r\n  const canSelectRole = (role) => {\r\n    if (role === 'director') {\r\n      return !unitStructures.some(s => s.role === 'director');\r\n    }\r\n    if (role === 'supervisor') {\r\n      return !currentUnitMembers.some(s => s.role === 'supervisor');\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // Get suggested seniority orders\r\n  const getSuggestedSeniorityOrders = () => {\r\n    const usedOrders = currentUnitMembers.map(m => m.seniority_order);\r\n    const suggestions = [];\r\n    \r\n    // แนะนำตำแหน่งที่ว่าง\r\n    for (let i = 1; i <= currentUnitMembers.length + 3; i++) {\r\n      if (!usedOrders.includes(i)) {\r\n        suggestions.push(i);\r\n      }\r\n    }\r\n    \r\n    return suggestions.slice(0, 5); // แสดงไม่เกิน 5 ตัวเลือก\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(`${CONFIG.UNIT_STRUCTURE_API}`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          position_number: formData.position_number,\r\n          unit_code: selectedUnit.unit_code,\r\n          unit_name: selectedUnit.unit_name,\r\n          role: formData.role,\r\n          seniority_order: formData.seniority_order\r\n        })\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.success) {\r\n        alert('เพิ่มบุคลากรสำเร็จ');\r\n        onSave();\r\n        onClose();\r\n      } else {\r\n        console.error('API Error:', data);\r\n        alert(data.message || data.errors?.join(', ') || 'เกิดข้อผิดพลาดในการเพิ่มบุคลากร');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding member:', error);\r\n      alert('เกิดข้อผิดพลาดในการเชื่อมต่อ API');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getRoleIcon = (role) => {\r\n    switch (role) {\r\n      case 'director':\r\n        return <Crown className=\"w-4 h-4 text-purple-600\" />;\r\n      case 'supervisor':\r\n        return <Star className=\"w-4 h-4 text-blue-600\" />;\r\n      default:\r\n        return <User className=\"w-4 h-4 text-green-600\" />;\r\n    }\r\n  };\r\n\r\n  const getRoleText = (role) => {\r\n    switch (role) {\r\n      case 'director':\r\n        return 'ผู้อำนวยการ';\r\n      case 'supervisor':\r\n        return 'หัวหน้าส่วน';\r\n      default:\r\n        return 'เจ้าหน้าที่';\r\n    }\r\n  };\r\n\r\n  const getRoleDescription = (role) => {\r\n    switch (role) {\r\n      case 'director':\r\n        return 'ผู้อำนวยการศูนย์รักษาความปลอดภัย (มีได้คนเดียว)';\r\n      case 'supervisor':\r\n        return 'หัวหน้าส่วนงาน (แต่ละส่วนมีได้คนเดียว)';\r\n      default:\r\n        return 'เจ้าหน้าที่ปฏิบัติงานทั่วไป';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-white rounded-xl max-w-md w-full p-6\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-lg font-semibold flex items-center\">\r\n            <User className=\"w-5 h-5 mr-2 text-indigo-600\" />\r\n            เพิ่มบุคลากรใหม่\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-1 text-slate-400 hover:text-slate-600 rounded\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4 p-3 bg-indigo-50 rounded-lg\">\r\n          <div className=\"text-sm font-medium text-indigo-800\">\r\n            เพิ่มเข้า: {selectedUnit.unit_name}\r\n          </div>\r\n          <div className=\"text-xs text-indigo-600 mt-1\">\r\n            บุคลากรปัจจุบัน: {currentUnitMembers.length} คน\r\n          </div>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n          {/* เลือกเจ้าหน้าที่ */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">เจ้าหน้าที่</label>\r\n            <select\r\n              value={formData.position_number}\r\n              onChange={(e) => setFormData(prev => ({ ...prev, position_number: e.target.value }))}\r\n              className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n              required\r\n            >\r\n              <option value=\"\">เลือกเจ้าหน้าที่</option>\r\n              {availableOfficers.map(officer => (\r\n                <option key={officer.position_number} value={officer.position_number}>\r\n                  {officer.prefix} {officer.firstname} {officer.lastname} ({officer.position_number})\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* เลือกบทบาท */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">บทบาท</label>\r\n            <div className=\"space-y-2\">\r\n              {['member', 'supervisor', 'director'].map(role => (\r\n                <label\r\n                  key={role}\r\n                  className={`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${\r\n                    formData.role === role\r\n                      ? 'border-indigo-500 bg-indigo-50'\r\n                      : canSelectRole(role)\r\n                      ? 'border-slate-200 hover:border-slate-300'\r\n                      : 'border-slate-100 bg-slate-50 cursor-not-allowed opacity-50'\r\n                  }`}\r\n                >\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"role\"\r\n                    value={role}\r\n                    checked={formData.role === role}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, role: e.target.value }))}\r\n                    disabled={!canSelectRole(role)}\r\n                    className=\"sr-only\"\r\n                  />\r\n                  <div className=\"flex items-center flex-1\">\r\n                    {getRoleIcon(role)}\r\n                    <div className=\"ml-3\">\r\n                      <div className=\"font-medium\">{getRoleText(role)}</div>\r\n                      <div className=\"text-xs text-slate-500\">{getRoleDescription(role)}</div>\r\n                    </div>\r\n                  </div>\r\n                  {formData.role === role && (\r\n                    <div className=\"w-4 h-4 bg-indigo-600 rounded-full flex items-center justify-center\">\r\n                      <div className=\"w-2 h-2 bg-white rounded-full\"></div>\r\n                    </div>\r\n                  )}\r\n                </label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* ลำดับอาวุโส */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-2\">ลำดับอาวุโส</label>\r\n            <div className=\"space-y-2\">\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={formData.seniority_order}\r\n                onChange={(e) => setFormData(prev => ({ ...prev, seniority_order: parseInt(e.target.value) }))}\r\n                className=\"w-full p-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n                required\r\n              />\r\n              \r\n              {/* แสดงตัวเลือกลำดับที่แนะนำ */}\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                <span className=\"text-xs text-slate-500\">แนะนำ:</span>\r\n                {getSuggestedSeniorityOrders().map(order => (\r\n                  <button\r\n                    key={order}\r\n                    type=\"button\"\r\n                    onClick={() => setFormData(prev => ({ ...prev, seniority_order: order }))}\r\n                    className={`px-2 py-1 text-xs rounded border transition-colors ${\r\n                      formData.seniority_order === order\r\n                        ? 'bg-indigo-600 text-white border-indigo-600'\r\n                        : 'bg-slate-100 text-slate-600 border-slate-200 hover:border-slate-300'\r\n                    }`}\r\n                  >\r\n                    {order}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              \r\n              <p className=\"text-xs text-slate-500\">\r\n                {formData.role === 'supervisor' ? 'หัวหน้าส่วนควรเป็น 1' : 'เลขที่มากกว่าจะมีอาวุโสน้อยกว่า'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* แสดงการจัดเรียงปัจจุบัน */}\r\n          {currentUnitMembers.length > 0 && (\r\n            <div className=\"p-3 bg-slate-50 rounded-lg\">\r\n              <div className=\"text-sm font-medium text-slate-700 mb-2\">\r\n                ลำดับอาวุโสปัจจุบัน:\r\n              </div>\r\n              <div className=\"space-y-1 max-h-32 overflow-y-auto\">\r\n                {currentUnitMembers.map(member => (\r\n                  <div key={member.id} className=\"flex items-center text-xs text-slate-600\">\r\n                    <span className=\"w-6 text-center\">{member.seniority_order}.</span>\r\n                    <div className=\"flex items-center mr-2\">\r\n                      {getRoleIcon(member.role)}\r\n                    </div>\r\n                    <span>{member.prefix} {member.firstname} {member.lastname}</span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* ปุ่มดำเนินการ */}\r\n          <div className=\"flex justify-end space-x-3 pt-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-slate-600 bg-slate-100 rounded-lg hover:bg-slate-200\"\r\n              disabled={loading}\r\n            >\r\n              ยกเลิก\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading || !formData.position_number}\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center\"\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n                  กำลังเพิ่ม...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Save className=\"w-4 h-4 mr-2\" />\r\n                  เพิ่มบุคลากร\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddMemberModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}